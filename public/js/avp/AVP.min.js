/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */

/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: alert.js v3.3.7
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.3.7
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: carousel.js v3.3.7
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.7
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.3.7
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.7
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.3.7
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.7
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.3.7
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: affix.js v3.3.7
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 * MIT license http://www.opensource.org/licenses/mit-license.php/
 * @author Lea Verou http://lea.verou.me
 */

//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Underscore may be freely distributed under the MIT license.

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Controlgroup 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Spinner 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*
chroma.js - JavaScript library for color conversions

Copyright (c) 2011-2015, Gregor Aisch
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

3. The name Gregor Aisch may not be used to endorse or promote products
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */

/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */

/**
 * swagger-client - swagger-client is a javascript client for use with swaggering APIs.
 * @version v2.1.32
 * @link http://swagger.io
 * @license Apache-2.0
 */

//# sourceMappingURL=Logger.js.map;
// threejs.org/license

!function(e,t){"function"==typeof define&&define.amd?define([],t):e.AVP=t()}(this,function(){var e,t,n;if(function(r){function i(e,t){return w.call(e,t)}function o(e,t){var n,r,i,o,s,a,l,c,u,p,h,d,f=t&&t.split("/"),m=b.map,g=m&&m["*"]||{};if(e){for(e=e.split("/"),s=e.length-1,b.nodeIdCompat&&C.test(e[s])&&(e[s]=e[s].replace(C,"")),"."===e[0].charAt(0)&&f&&(d=f.slice(0,f.length-1),e=d.concat(e)),u=0;u<e.length;u++)if(h=e[u],"."===h)e.splice(u,1),u-=1;else if(".."===h){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((f||g)&&m){for(n=e.split("/"),u=n.length;u>0;u-=1){if(r=n.slice(0,u).join("/"),f)for(p=f.length;p>0;p-=1)if(i=m[f.slice(0,p).join("/")],i&&(i=i[r])){o=i,a=u;break}if(o)break;!l&&g&&g[r]&&(l=g[r],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function s(e,t){return function(){var n=x.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),f.apply(r,n.concat([e,t]))}}function a(e){return function(t){return o(t,e)}}function l(e){return function(t){y[e]=t}}function c(e){if(i(v,e)){var t=v[e];delete v[e],S[e]=!0,d.apply(r,t)}if(!i(y,e)&&!i(S,e))throw new Error("No "+e);return y[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function p(e){return e?u(e):[]}function h(e){return function(){return b&&b.config&&b.config[e]||{}}}var d,f,m,g,y={},v={},b={},S={},w=Object.prototype.hasOwnProperty,x=[].slice,C=/\.js$/;m=function(e,t){var n,r=u(e),i=r[0],s=t[1];return e=r[1],i&&(i=o(i,s),n=c(i)),i?e=n&&n.normalize?n.normalize(e,a(s)):o(e,s):(e=o(e,s),r=u(e),i=r[0],e=r[1],i&&(n=c(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},g={require:function(e){return s(e)},exports:function(e){var t=y[e];return"undefined"!=typeof t?t:y[e]={}},module:function(e){return{id:e,uri:"",exports:y[e],config:h(e)}}},d=function(e,t,n,o){var a,u,h,d,f,b,w,x=[],C=typeof n;if(o=o||e,b=p(o),"undefined"===C||"function"===C){for(t=!t.length&&n.length?["require","exports","module"]:t,f=0;f<t.length;f+=1)if(d=m(t[f],b),u=d.f,"require"===u)x[f]=g.require(e);else if("exports"===u)x[f]=g.exports(e),w=!0;else if("module"===u)a=x[f]=g.module(e);else if(i(y,u)||i(v,u)||i(S,u))x[f]=c(u);else{if(!d.p)throw new Error(e+" missing "+u);d.p.load(d.n,s(o,!0),l(u),{}),x[f]=y[u]}h=n?n.apply(y[e],x):void 0,e&&(a&&a.exports!==r&&a.exports!==y[e]?y[e]=a.exports:h===r&&w||(y[e]=h))}else e&&(y[e]=n)},e=t=f=function(e,t,n,i,o){if("string"==typeof e)return g[e]?g[e](t):c(m(e,p(t)).f);if(!e.splice){if(b=e,b.deps&&f(b.deps,b.callback),!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},"function"==typeof n&&(n=i,i=o),i?d(r,e,t,n):setTimeout(function(){d(r,e,t,n)},4),f},f.config=function(e){return f(e)},e._defined=y,n=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),i(y,e)||i(v,e)||(v[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("almond",function(e){return function(){var t;return t||e.almond}}(this)),e.config({shim:{AVP:{deps:["augment"]},underscore:{exports:"_"},backbone:{exports:"Backbone"},Three:{exports:"THREE"},Viewport:{deps:["Three","OrbitControls"],exports:"Viewport"},OrbitControls:{deps:["Three"],exports:"OrbitControls"},jqueryuitouchpunch:{deps:["jquery","mouse"],exports:"jqueryuitouchpunch"},almond:{deps:[],exports:"almond"},prism:{exports:"Prism"},chroma:{exports:"chroma"}},paths:{commandsMap:"core/models/helpers/CommandsMap",imagesMap:"core/models/helpers/ImagesMap",NodeFactory:"core/models/helpers/NodeFactory",staticHelpers:"core/models/helpers/StaticHelpers",augment:"core/models/helpers/augment",Storage:"core/models/storage/MongoStorage",BaseStorage:"core/models/storage/BaseStorage",settings:"core/models/helpers/Settings",LogHelper:"core/models/helpers/LogHelper",Node:"libraries/nodeModels/Node",NumberNode:"libraries/nodeModels/NumberNode",StringNode:"libraries/nodeModels/StringNode",BooleanNode:"libraries/nodeModels/BooleanNode",CodeBlockNode:"libraries/nodeModels/CodeBlockNode",FormulaNode:"libraries/nodeModels/FormulaNode",VariableInputNode:"libraries/nodeModels/VariableInputNode",PythonScriptNode:"libraries/nodeModels/PythonScriptNode",ConvertNode:"libraries/nodeModels/ConvertNode",PythonEditorView:"libraries/nodeViews/PythonEditorView",CustomizerApp:"customizer/models/CustomizerApp",AboutModel:"customizer/models/AboutModel",BaseWidgetView:"customizer/views/Widgets/Base",NumberSliderWidgetView:"customizer/views/Widgets/NumberSlider",NumberWidgetView:"customizer/views/Widgets/Number",CodeBlockWidgetView:"customizer/views/Widgets/CodeBlock",BooleanWidgetView:"customizer/views/Widgets/Boolean",StringWidgetView:"customizer/views/Widgets/String",CustomizerAppView:"customizer/views/CustomizerAppView",CustomizerDescriptionView:"customizer/views/CustomizerDescriptionView",CustomizerWorkspaceView:"customizer/views/CustomizerWorkspaceView",CustomizerManageView:"customizer/views/CustomizerManageView",CustomizerErrorsView:"customizer/views/CustomizerErrorsView",AboutView:"customizer/views/CustomizerAboutView",ManagerApp:"workspaceManager/models/ManagerApp",ManagerView:"workspaceManager/views/ManagerView",ManageWorkspaceView:"workspaceManager/views/ManageWorkspaceView",ShareCustomizerView:"workspaceManager/views/ShareCustomizerView",EditWorkspaceDetailsView:"workspaceManager/views/EditWorkspaceDetailsView",WorkspaceDeleteView:"workspaceManager/views/WorkspaceDeleteView",AdminApp:"core/models/admin/AdminApp",AdminView:"core/views/admin/AdminView",AdminUserView:"core/views/admin/AdminUserView",Connections:"core/models/collections/Connections",SearchElements:"core/models/collections/DynamoSearchElements",FloodSearchElements:"core/models/collections/FloodSearchElements",Nodes:"core/models/collections/Nodes",Workspaces:"core/models/collections/Workspaces",Users:"core/models/collections/Users",WorkspaceElements:"core/models/collections/WorkspaceElements",CreateNodeCommand:"core/models/computationService/commands/CreateNodeCommand",CreateProxyNodeCommand:"core/models/computationService/commands/CreateProxyNodeCommand",CreateNoteCommand:"core/models/computationService/commands/CreateNoteCommand",DeleteModelCommand:"core/models/computationService/commands/DeleteModelCommand",MakeConnectionCommand:"core/models/computationService/commands/MakeConnectionCommand",ModelEventCommand:"core/models/computationService/commands/ModelEventCommand",RecordableCommand:"core/models/computationService/commands/RecordableCommand",RunCancelCommand:"core/models/computationService/commands/RunCancelCommand",UpdateModelValueCommand:"core/models/computationService/commands/UpdateModelValueCommand",CreateCustomNodeCommand:"core/models/computationService/commands/CreateCustomNodeCommand",RecordableCommandsMessage:"core/models/computationService/messages/RecordableCommandsMessage",LibraryItemsListMessage:"core/models/computationService/messages/LibraryItemsListMessage",SaveFileMessage:"core/models/computationService/messages/SaveFileMessage",WorkspaceSettingsMessage:"core/models/computationService/messages/WorkspaceSettingsMessage",SetWatch3DCameraMessage:"core/models/computationService/messages/SetWatch3DCameraMessage",GeometryMessage:"core/models/computationService/messages/GeometryMessage",GetArrayItemsMessage:"core/models/computationService/messages/GetArrayItemsMessage",UploadFileMessage:"core/models/computationService/messages/UploadFileMessage",HasUnsavedChangesMessage:"core/models/computationService/messages/HasUnsavedChangesMessage",ClearWorkspaceMessage:"core/models/computationService/messages/ClearWorkspaceMessage",HeartbeatMessage:"core/models/computationService/messages/HeartbeatMessage",CameraDataMessage:"core/models/computationService/messages/CameraDataMessage",RestoreDynamoGroupsMessage:"core/models/computationService/messages/RestoreDynamoGroupsMessage",RestoreNodesPositionsMessage:"core/models/computationService/messages/RestoreNodesPositionsMessage",BaseMessage:"core/models/computationService/messages/BaseMessage",SetModelPositionMessage:"core/models/computationService/messages/SetModelPositionMessage",DownloadDependencyMessage:"core/models/computationService/messages/DownloadDependencyMessage",ComputationResponse:"core/models/computationService/responses/ComputationResponse",ContentResponse:"core/models/computationService/responses/ContentResponse",LibraryItemsListResponse:"core/models/computationService/responses/LibraryItemsListResponse",SavedFileResponse:"core/models/computationService/responses/SavedFileResponse",NewWorkspaceResponse:"core/models/computationService/responses/NewWorkspaceResponse",UpdateProxyNodesResponse:"core/models/computationService/responses/UpdateProxyNodesResponse",GeometryDataResponse:"core/models/computationService/responses/GeometryDataResponse",WorkspacePathResponse:"core/models/computationService/responses/WorkspacePathResponse",HasUnsavedChangesResponse:"core/models/computationService/responses/HasUnsavedChangesResponse",CodeBlockDataResponse:"core/models/computationService/responses/CodeBlockDataResponse",ArrayItemsDataResponse:"core/models/computationService/responses/ArrayItemsDataResponse",TimeoutResponse:"core/models/computationService/responses/TimeoutResponse",UploadFileResponse:"core/models/computationService/responses/UploadFileResponse",FormulaResponse:"core/models/computationService/responses/FormulaResponse",NewConnectionResponse:"core/models/computationService/responses/NewConnectionResponse",DownloadDependencyResponse:"core/models/computationService/responses/DownloadDependencyResponse",AbstractRunner:"core/models/computationService/Runner",SocketConnection:"core/models/computationService/SocketConnection",Runner:"core/models/computationService/DynamoRunner",SaveUploader:"core/models/BaseSaveUploader",User:"core/models/User",BaseApp:"core/models/App",BaseNode:"core/models/Node",GeometryExport:"core/models/GeometryExport",Connection:"core/models/Connection",Workspace:"core/models/Workspace",WorkspaceResolver:"core/models/WorkspaceResolver",Share:"core/models/Share",Logger:"core/models/logging/Logger",LogMessage:"core/models/logging/LogMessage",FLOOD:"core/models/types/flood",GraphModel:"graphEditor/models/GraphModel",Marquee:"graphEditor/models/Marquee",Search:"graphEditor/models/search/Search",SearchCategory:"graphEditor/models/search/SearchCategory",SearchElement:"core/models/SearchElement",CategorySearch:"graphEditor/models/search/CategorySearch",UnsavedWorkspaceChangesHandler:"graphEditor/models/UnsavedWorkspaceChangesHandler",ArrayItem:"graphEditor/models/ArrayItem",WorkspaceElement:"core/models/WorkspaceElement",StorageBrowser:"core/models/StorageBrowser",Help:"graphEditor/models/Help",Feedback:"core/models/Feedback",HelpView:"graphEditor/views/HelpView",FeedbackView:"core/views/FeedbackView",GraphView:"core/views/GraphView",ShareView:"core/views/ShareView",SaveUploaderView:"core/views/BaseSaveUploaderView",ThreeViewer:"core/views/geometryViews/ThreeViewer",EditorHtmlPreloader:"core/views/EditorHtmlPreloader",CustomizerHtmlPreloader:"core/views/CustomizerHtmlPreloader",LoggerView:"core/views/logging/LoggerView",OrbitControls:"core/views/geometryViews/OrbitControls",Viewport:"core/views/geometryViews/Viewport",DynamoGraphView:"graphEditor/views/DynamoGraphView",ConnectionView:"graphEditor/views/interactionViews/ConnectionView",MarqueeView:"graphEditor/views/interactionViews/MarqueeView",SearchView:"graphEditor/views/searchViews/SearchView",SearchElementView:"graphEditor/views/searchViews/SearchElementView",WorkspaceControlsView:"graphEditor/views/workspaceViews/WorkspaceControlsView",WorkspaceView:"graphEditor/views/workspaceViews/WorkspaceView",WorkspaceTabView:"graphEditor/views/workspaceViews/WorkspaceTabView",CategorySearchView:"graphEditor/views/searchViews/CategorySearchView",SearchCategoryView:"graphEditor/views/searchViews/SearchCategoryView",UnsavedChangesHandlerView:"graphEditor/views/workspaceViews/UnsavedChangesHandlerView",ArrayItemView:"graphEditor/views/interactionViews/ArrayItemView",FunctionNamePrompt:"graphEditor/views/interactionViews/FunctionNamePrompt",WatchNodeView:"libraries/nodeViews/Watch",ShowNodeView:"libraries/nodeViews/Show",NumberSliderNodeView:"libraries/nodeViews/NumberSliderNodeView",NumberNodeView:"libraries/nodeViews/NumberNodeView",IntegerSliderNodeView:"libraries/nodeViews/IntegerSliderNodeView",CodeBlockView:"libraries/nodeViews/CodeBlock",FormulaView:"libraries/nodeViews/Formula",InputView:"libraries/nodeViews/Input",OutputView:"libraries/nodeViews/Output",CustomNodeView:"libraries/nodeViews/CustomNode",ThreeCSGNodeView:"libraries/nodeViews/ThreeCSG",StringView:"libraries/nodeViews/StringView",BooleanView:"libraries/nodeViews/BooleanView",VariableInputView:"libraries/nodeViews/VariableInput",PythonScriptView:"libraries/nodeViews/PythonScript",ColorRangeView:"libraries/nodeViews/ColorRangeView",ConvertNodeView:"libraries/nodeViews/ConvertNodeView",BooleanBase:"libraries/nodeViews/baseNodeViews/BooleanBase",StringBase:"libraries/nodeViews/baseNodeViews/StringBase",SliderNodeViewBase:"libraries/nodeViews/baseNodeViews/SliderNodeViewBase",NumberBase:"libraries/nodeViews/baseNodeViews/NumberBase",BaseNodeView:"libraries/nodeViews/baseNodeViews/Base",BaseScriptNodeView:"libraries/nodeViews/baseNodeViews/BaseScript",templates:"templates",AVP:"api/DynamoGraphInterface",APIBundle:"api/APIBundle",DynamoApplication:"api/DynamoApplication",ControllerView:"layout/views/ControllerView",PanelView:"layout/views/PanelView",PanelSubView:"layout/views/PanelSubView",ControllerApp:"layout/models/ControllerApp",IDynamoApplication:"interfaces/application/IDynamoApplication",ILibraryBrowser:"interfaces/application/ILibraryBrowser",IWorkspaceManager:"interfaces/application/IWorkspaceManager",GeometryViewerComponent:"geometryViewer/GeometryViewerComponent",CoGSRunner:"core/models/computationService/CoGSRunner",IGeometryViewer:"interfaces/geometryViewer/IGeometryViewer",Prism:"bower_components/prism/prism",Hammer:"bower_components/hammerjs/hammer.min",almond:"bower_components/almond/almond",Three:"bower_components/threejs/build/three.min",jqueryuitouchpunch:"bower_components/jqueryui-touch-punch/jquery.ui.touch-punch",slider:"bower_components/jquery-ui/ui/widgets/slider",spinner:"bower_components/jquery-ui/ui/widgets/spinner",draggable:"bower_components/jquery-ui/ui/widgets/draggable",mouse:"bower_components/jquery-ui/ui/widgets/mouse",dialog:"bower_components/jquery-ui/ui/widgets/dialog",resizable:"bower_components/jquery-ui/ui/widgets/resizable",jquery:"api/jquery-redirect",backbone:"bower_components/backbone/backbone-min",underscore:"bower_components/underscore/underscore-min",fastclick:"bower_components/fastclick/lib/fastclick",FileSaver:"bower_components/file-saver/FileSaver",text:"bower_components/requirejs-text/text",chroma:"bower_components/chroma-js/chroma.min",requireLib:"bower_components/requirejs/require",perfectscrollbar:"bower_components/perfect-scrollbar/js/perfect-scrollbar.min",swaggerClient:"bower_components/swagger-js/browser/swagger-client.min",button:"bower_components/jquery-ui/ui/widgets/button",controlgroup:"bower_components/jquery-ui/ui/widgets/controlgroup",checkboxradio:"bower_components/jquery-ui/ui/widgets/checkboxradio",bootstrap:"bower_components/bootstrap/dist/js/bootstrap","../data":"bower_components/jquery-ui/ui/data","../disable-selection":"bower_components/jquery-ui/ui/disable-selection","../escape-selector":"bower_components/jquery-ui/ui/escape-selector","../form-reset-mixin":"bower_components/jquery-ui/ui/form-reset-mixin","../form":"bower_components/jquery-ui/ui/form","../focusable":"bower_components/jquery-ui/ui/focusable","../ie":"bower_components/jquery-ui/ui/ie","../keycode":"bower_components/jquery-ui/ui/keycode","../labels":"bower_components/jquery-ui/ui/labels","../plugin":"bower_components/jquery-ui/ui/plugin","../position":"bower_components/jquery-ui/ui/position","../safe-active-element":"bower_components/jquery-ui/ui/safe-active-element","../safe-blur":"bower_components/jquery-ui/ui/safe-blur","../scroll-parent":"bower_components/jquery-ui/ui/scroll-parent","../tabbable":"bower_components/jquery-ui/ui/tabbable","../unique-id":"bower_components/jquery-ui/ui/unique-id","../version":"bower_components/jquery-ui/ui/version","../widget":"bower_components/jquery-ui/ui/widget",DynWorkspaceConverter:"converters/DynWorkspaceConverter",DynWorkspaceConversion:"converters/DynWorkspaceConversion",AVPWorkspaceConverter:"converters/AvpWorkspaceConverter",DynBaseNodeConverter:"converters/nodeConverters/DynBaseNodeConverter",DynBaseNodeViewConverter:"converters/nodeConverters/DynBaseNodeViewConverter",DynBooleanNodeConverter:"converters/nodeConverters/DynBooleanNodeConverter",DynBooleanNodeViewConverter:"converters/nodeConverters/DynBooleanNodeViewConverter",DynCodeBlockNodeConverter:"converters/nodeConverters/DynCodeBlockNodeConverter",DynCodeBlockNodeViewConverter:"converters/nodeConverters/DynCodeBlockNodeViewConverter",DynUnitConverterNodeConverter:"converters/nodeConverters/DynUnitConverterNodeConverter",DynUnitConverterNodeViewConverter:"converters/nodeConverters/DynUnitConverterNodeViewConverter",DynDoubleInputSliderConverter:"converters/nodeConverters/DynDoubleInputSliderConverter",DynDoubleInputSliderViewConverter:"converters/nodeConverters/DynDoubleInputSliderViewConverter",DynDSVarArgFunctionConverter:"converters/nodeConverters/DynDSVarArgFunctionConverter",DynDSVarArgFunctionViewConverter:"converters/nodeConverters/DynDSVarArgFunctionViewConverter",DynFormulaNodeConverter:"converters/nodeConverters/DynFormulaNodeConverter",DynFormulaNodeViewConverter:"converters/nodeConverters/DynFormulaNodeViewConverter",DynPythonNodeConverter:"converters/nodeConverters/DynPythonNodeConverter",DynPythonNodeViewConverter:"converters/nodeConverters/DynPythonNodeViewConverter",DynExtensionNodeConverter:"converters/nodeConverters/DynExtensionNodeConverter",DynExtensionNodeViewConverter:"converters/nodeConverters/DynExtensionNodeViewConverter",DynStringInputNodeConverter:"converters/nodeConverters/DynStringInputNodeConverter",DynStringInputNodeViewConverter:"converters/nodeConverters/DynStringInputNodeViewConverter",DynWatchNodeConverter:"converters/nodeConverters/DynWatchNodeConverter",DynWatchNodeViewConverter:"converters/nodeConverters/DynWatchNodeViewConverter",DynWatch3DNodeConverter:"converters/nodeConverters/DynWatch3DNodeConverter",DynWatch3DNodeViewConverter:"converters/nodeConverters/DynWatch3DNodeViewConverter"}}),n("config",function(){}),n("text",["module"],function(e){"use strict";function n(e,t){return void 0===e||""===e?t:e}function r(e,t,r,i){if(t===i)return!0;if(e===r){if("http"===e)return n(t,"80")===n(i,"80");if("https"===e)return n(t,"443")===n(i,"443")}return!1}var i,o,s,a,l,c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,p=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h="undefined"!=typeof location&&location.href,d=h&&location.protocol&&location.protocol.replace(/\:/,""),f=h&&location.hostname,m=h&&(location.port||void 0),g={},y=e.config&&e.config()||{};return i={version:"2.0.15",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(p);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:y.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=c[t];try{e=new ActiveXObject(n)}catch(e){}if(e){c=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.lastIndexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return o!==-1&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,r=n||t,o=r.indexOf("!"),o!==-1&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,o){var s,a,l,c=i.xdRegExp.exec(e);return!c||(s=c[2],a=c[3],a=a.split(":"),l=a[1],a=a[0],(!s||s===t)&&(!a||a.toLowerCase()===n.toLowerCase())&&(!l&&!a||r(s,l,t,o)))},finishLoad:function(e,t,n,r){n=t?i.strip(n):n,y.isBuild&&(g[e]=n),r(n)},load:function(e,t,n,r){if(r&&r.isBuild&&!r.inlineText)return void n();y.isBuild=r&&r.isBuild;var o=i.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=t.toUrl(s),l=y.useXhr||i.useXhr;return 0===a.indexOf("empty:")?void n():void(!h||l(a,d,f,m)?i.get(a,function(t){i.finishLoad(e,o.strip,t,n)},function(e){n.error&&n.error(e)}):t([s],function(e){i.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}))},write:function(e,t,n,r){if(g.hasOwnProperty(t)){var o=i.jsEscape(g[t]);n.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,n,r,o){var s=i.parseName(t),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=n.toUrl(s.moduleName+a)+".js";i.load(l,n,function(t){var n=function(e){return r(c,e)};n.asModule=function(e,t){return r.asModule(e,c,t)},i.write(e,l,n,o)},o)}},"node"===y.env||!y.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(o=t.nodeRequire("fs"),i.get=function(e,t,n){try{var r=o.readFileSync(e,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),t(r)}catch(e){n&&n(e)}}):"xhr"===y.env||!y.env&&i.createXhr()?i.get=function(e,t,n,r){var o,s=i.createXhr();if(s.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);y.onXhr&&y.onXhr(s,e),s.onreadystatechange=function(r){var i,o;4===s.readyState&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,n&&n(o)):t(s.responseText),y.onXhrComplete&&y.onXhrComplete(s,e))},s.send(null)}:"rhino"===y.env||!y.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),l="";try{for(n=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(s),n.append(r);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===y.env||!y.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),l="@mozilla.org/windows-registry-key;1"in s,i.get=function(e,t){var n,r,i,o={};l&&(e=e.replace(/\//g,"\\")),i=new FileUtils.File(e);try{n=s["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(i,1,0,!1),r=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),r.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),o),r.close(),n.close(),t(o.value)}catch(e){throw new Error((i&&i.path||"")+": "+e)}}),i}),n("text!templates/floodTemplates.tpl",[],function(){return'<script type="text/template" id="main-template">\r\n\r\n    <div id="app" class="row col">\r\n        <div id="zoom-menu" class="non-selectable">\r\n            <div id="zoomreset-button" class="menu-element" data-toggle="tooltip" data-placement="left" title="ZoomToFit">\r\n                <i class="fa fa-arrows-alt fa-fw"></i>\r\n            </div>\r\n            <div id="zoomin-button" class="menu-element" data-toggle="tooltip" data-placement="left" title="ZoomIn">\r\n                <i class="fa fa-search-plus fa-fw"></i>\r\n            </div>\r\n\r\n            <div id="zoomout-button" class="menu-element" data-toggle="tooltip" data-placement="left" title="ZoomOut">\r\n                <i class="fa fa-search-minus fa-fw"></i>\r\n            </div>\r\n\r\n            <div id="pan-button" class="menu-element" data-toggle="tooltip" data-placement="left" title="Pan">\r\n                <i class="fa fa-arrows fa-fw"></i>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div id="workspaces">\r\n            <div class="workspaces_curtain row"></div>\r\n\r\n        </div>\r\n\r\n        <div id="help" class="col">\r\n\r\n        </div>\r\n\r\n          <div id="feedback" class="modal row col">\r\n\r\n          </div>\r\n\r\n          <div id="share" class="modal row col">\r\n\r\n          </div>\r\n\r\n          <div id="workspace-browser" class="col">\r\n\r\n          </div>\r\n\r\n        <div id="pythonEditor" class="modal row col">\r\n\r\n        </div>\r\n\r\n\r\n        <div id="login-frame" class="modal row col">\r\n\r\n      </div>\r\n\r\n        <div id="app-fail" style="display: none">\r\n\r\n            <div id="app-fail-container">\r\n                <h1><i class="fa fa-fw fa-2x fa-exclamation-triangle"></i></h1>\r\n                <h1>Flood requires WebGL!</h1>\r\n                <p>\r\n                    It\'s also possible that WebGL is disabled in your browser or has failed to load.  You\'ll need to use a\r\n                    web browser that <a href="http://caniuse.com/#search=webgl">supports WebGL</a> to use Flood.\r\n                </p>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-template">\r\n\r\n    <div class="node-failure-message-container">\r\n        <div class="node-failure-message"><%- failureMessage %></div>\r\n    </div>\r\n\r\n    <div id="pin-button">\r\n        ...\r\n        <i class="fa fa-thumb-tack"></i>\r\n    </div>\r\n\r\n\r\n    <div class="node-last-value-container">\r\n        <div class="node-last-value-wrapper">\r\n            <div class="node-last-value">\r\n                <%- preview %>\r\n            </div>\r\n            <div class="node-last-value-more hidden">\r\n                <span class="more-items-text">---- Show All Results ----</span>\r\n            </div>\r\n        </div>\r\n        <div class="list-level-panel">\r\n            <span class="total">{<span class="total-value"><%= numItems %></span>}</span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="node-data-container" >\r\n            <span class="name searchfield">\r\n                <% if ( !name || name === displayName) { %>\r\n                <%= typeName != "CustomNode" ? displayName : type.functionName  %>\r\n                <% } else { %>\r\n                <%= name %>\r\n                <% } %>\r\n            </span>\r\n        </div>\r\n\r\n    <ul class="node-inputs">\r\n        <% _.each(type.inputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-input">\r\n            <div class="node-port node-port-input" data-index=" <%= index %> ">\r\n                <span class="node-port-name"><%= ele.name %></span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <ul class="node-inputs-extra">\r\n        <% _.each(type.inputs, function(ele, index) { %>\r\n        <li class="node-port-extra" data-index=" <%= index %> ">\r\n\r\n            <div class="dropdown">\r\n\r\n                <a data-toggle="dropdown" href="#">&#8942;</a>\r\n\r\n                <ul class="dropdown-menu node-dropdown-menu" role="menu" aria-labelledby="dLabel">\r\n\r\n                    <% if (ele.typeName) { %>\r\n                    <li class="dropdown-header">Type</li>\r\n                    <span class="node-dropown-menu-item"><%= ele.typeName %></span>\r\n                    <% } %>\r\n\r\n                    <li role="presentation" style="color: black">\r\n                        <li class="dropdown-header" style="padding: 0">Use Default</li>\r\n\r\n                        <span class="node-dropown-menu-item">\r\n                            <% if(ele.defaultVal != undefined) { %>\r\n                            <input type="checkbox" class="use-default-checkbox" data-index="<%= index %>" <%= !ignoreDefaults[index] ? "checked" : "" %> >\r\n                            <% } %>\r\n                            <%= ele.defaultVal != undefined ? "Using" : "None" %>\r\n                        </span>\r\n                    </li>\r\n\r\n                </ul>\r\n            </div>\r\n\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="node-center-panel"></div>\r\n\r\n    <ul class="node-outputs">\r\n        <% _.each(type.outputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-output">\r\n            <div class="node-port node-port-output" data-index=" <%= index %> ">\r\n                <span class="node-port-name"> <%= ele.name %> </span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="dropdown node-settings" style="position:absolute">\r\n\r\n        <a data-toggle="dropdown" href="#">\r\n            <span style="color:black; font-size: 10px">﹍</span>\r\n        </a>\r\n\r\n        <ul class="dropdown-menu node-dropdown-menu" role="menu" aria-labelledby="dLabel">\r\n\r\n            <li class="toggle-vis dropdown-header" style="font-size: 10px; padding: 0">Visibility</li>\r\n\r\n            <li class="toggle-vis node-dropown-menu-item">\r\n              <i class="fa fa-fw fa-eye"></i><span style="padding-left: 5px">Hide geometry</span>\r\n            </li>\r\n\r\n            <li class="dropdown-header">Replication</li>\r\n\r\n            <li class="node-dropown-menu-item">\r\n                <div class="btn-group btn-group-xs" style="padding: 0; padding-top: 5px; font-size: 10px">\r\n                    <button type="button" class=" <%= "rep-type btn btn-default" + ((replication === "applyAuto")? " active" : "") %> " style="font-size: 10px" data-rep-type="applyAuto">Auto</button>\r\n                    <button type="button" class=" <%= "rep-type btn btn-default" + ((replication === "applyShortest")? " active" : "") %> " style="font-size: 10px" data-rep-type="applyShortest">Short</button>\r\n                    <button type="button" class=" <%= "rep-type btn btn-default" + ((replication === "applyLongest")? " active" : "") %> " style="font-size: 10px" data-rep-type="applyLongest">Long</button>\r\n                    <button type="button" class=" <%= "rep-type btn btn-default" + ((replication === "applyCartesian")? " active" : "") %> " style="font-size: 10px" data-rep-type="applyCartesian">Cross</button>\r\n                </div>\r\n            </li>\r\n\r\n            <li class="dropdown-header">Name</li>\r\n            <li class="node-dropown-menu-item">\r\n              <input class="name-input" spellcheck="false" value="<%= name %>">\r\n            </li>\r\n\r\n            <% if (typeof(showLockCheckbox)!== "undefined" && showLockCheckbox) { %>\r\n\r\n                <li class="dropdown-header">\r\n                  Hide in customizer <input type="checkbox" style="margin-left: 10px" <%= extra.lock ? "checked" : ""%> class="lock-input">\r\n                </li>\r\n\r\n            <% } %>\r\n\r\n            <li class="dropdown-header">\r\n                <label for=" <%= "freeze" +_id %> ">Freeze</label>\r\n                <input type="checkbox" id=" <%= "freeze" +_id %> " style="margin-left: 10px"\r\n                <%= isFrozenByUpstream ? "disabled" : ""%>\r\n                <%= isFrozen ? "checked" : ""%> class="freeze-input">\r\n            </li>\r\n\r\n        </ul>\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-custom-template">\r\n          <i class="fa fa-fw fa-bolt"></i>\r\n          <span class="name searchfield"><%= type.functionName  %></span>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-formula-template">\r\n\r\n    <input type="text" spellcheck="false" class="formula-text-input" placeholder="Custom formula" value="<%= extra.script %>">\r\n\r\n</script>\r\n\r\n<script type="text/template" id="variable-input-template">\r\n\r\n    <a href="#" class="add-input btn btn-circle btn-primary"> + </a>\r\n    <a href="#" class="remove-input btn btn-circle btn-primary"> - </a>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="code-block-template">\r\n\r\n    <code class="language-designScript code-block-input" spellcheck="false"><%= extra.code %></code>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-convert-template">\r\n    <select class="metric">\r\n        <% _.each(unitSource, function(ele, index) { %>\r\n        <option <%= extra.selectedMetric === ele.metric ? "selected" : ""%> ><%=ele.metric %></option>\r\n        <% }); %>\r\n    </select>\r\n    <div class="convert-values">\r\n        <select class="convertFrom">\r\n            <% _.each(extra.selectedMetricValues, function(ele) { %>\r\n            <option <%= extra.selectedConvertFrom === ele ? "selected" : ""%> ><%=ele %></option>\r\n            <% }); %>\r\n        </select>\r\n        <div class="exchange-button"><i class="fa fa-exchange"></i></div>\r\n        <select class="convertTo">\r\n            <% _.each(extra.selectedMetricValues, function(ele) { %>\r\n            <option <%= extra.selectedConvertTo === ele ? "selected" : ""%> ><%=ele %></option>\r\n            <% }); %>\r\n        </select>\r\n    </div>\r\n</script>\r\n\r\n<script type="text/template" id="node-input-template">\r\n\r\n    <div class="node-data-container node-input-container">\r\n        <input type="text" spellcheck="false" class="text-input" placeholder="Input name" value="<%= extra.script %>">\r\n    </div>\r\n\r\n    <ul class="node-outputs">\r\n        <% _.each(type.outputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-output">\r\n            <div class="node-port node-port-output" data-index=" <%= index %> ">\r\n                <span class="node-port-name"> <%= ele.name %> </span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-string-template">\r\n\r\n    <div class="node-data-container node-input-container">\r\n        <textarea class="string-node-input" spellcheck="false"><%= extra.value %></textarea>\r\n    </div>\r\n\r\n    <ul class="node-outputs">\r\n        <% _.each(type.outputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-output">\r\n            <div class="node-port node-port-output" data-index=" <%= index %> ">\r\n                <span class="node-port-name"> <%= ele.name %> </span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="dropdown keep-open node-settings" style="position:absolute">\r\n\r\n        <a href="#" data-toggle="dropdown" href="#">\r\n            <span style="color:black; font-size: 10px">﹍</span>\r\n        </a>\r\n\r\n        <ul class="dropdown-menu node-dropdown-menu" role="menu" style="color: black" aria-labelledby="dLabel">\r\n\r\n            <li class="dropdown-header">Name</li>\r\n            <li class="node-dropown-menu-item">\r\n              <input class="name-input" spellcheck="false" value="<%= name %>">\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n              Hide in customizer <input type="checkbox" style="margin-left: 10px" <%= extra.lock ? "checked" : ""%> class="lock-input">\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n                <label for=" <%= "freeze" +_id %> ">Freeze</label>\r\n                <input type="checkbox" id=" <%= "freeze" +_id %> " style="margin-left: 10px"\r\n                <%= isFrozenByUpstream ? "disabled" : ""%>\r\n                <%= isFrozen ? "checked" : ""%> class="freeze-input">\r\n            </li>\r\n\r\n        </ul>\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-color-range-template">\r\n\r\n    <div class="node-failure-message-container">\r\n        <div class="node-failure-message"><%- failureMessage %></div>\r\n    </div>\r\n\r\n    <div id="pin-button">\r\n        ...\r\n        <i class="fa fa-thumb-tack"></i>\r\n    </div>\r\n\r\n    <div class="node-last-value-container hidden-value">\r\n        <div class="node-last-value">\r\n            <%- preview %>\r\n        </div>\r\n    </div>\r\n\r\n    <ul class="node-inputs">\r\n        <% _.each(type.inputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-input">\r\n            <div class="node-port node-port-input" data-index=" <%= index %> ">\r\n                <span class="node-port-name"><%= ele.name %></span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="node-data-container" >\r\n        <div class="color-scale"/>\r\n    </div>\r\n\r\n    <ul class="node-outputs">\r\n        <% _.each(type.outputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-output">\r\n            <div class="node-port node-port-output" data-index=" <%= index %> ">\r\n                <span class="node-port-name"> <%= ele.name %> </span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-boolean-template">\r\n\r\n    <div class="node-data-container">\r\n        <input type="radio" class="true-flag" name=<%= "radio" +_id %> <%= extra.value ? \'checked\' : \'\' %> />\r\n        <label>True</label>\r\n        <input type="radio" class="false-flag" name=<%= "radio" +_id %> <%= extra.value ? \'\' : \'checked\' %> />\r\n        <label>False</label>\r\n    </div>\r\n\r\n    <ul class="node-outputs">\r\n        <% _.each(type.outputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-output">\r\n            <div class="node-port node-port-output" data-index=" <%= index %> ">\r\n                <span class="node-port-name"> <%= ele.name %> </span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="dropdown keep-open node-settings" style="position:absolute">\r\n\r\n        <a href="#" data-toggle="dropdown" href="#">\r\n            <span style="color:black; font-size: 10px">﹍</span>\r\n        </a>\r\n\r\n        <ul class="dropdown-menu node-dropdown-menu" role="menu" style="color: black" aria-labelledby="dLabel">\r\n\r\n            <li class="dropdown-header">Name</li>\r\n            <li class="node-dropown-menu-item">\r\n              <input class="name-input" spellcheck="false" value="<%= name %>">\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n              Hide in customizer <input type="checkbox" style="margin-left: 10px" <%= extra.lock ? "checked" : ""%> class="lock-input">\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n                <label for=" <%= "freeze" +_id %> ">Freeze</label>\r\n                <input type="checkbox" id=" <%= "freeze" +_id %> " style="margin-left: 10px"\r\n                <%= isFrozenByUpstream ? "disabled" : ""%>\r\n                <%= isFrozen ? "checked" : ""%> class="freeze-input">\r\n            </li>\r\n\r\n        </ul>\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-output-template">\r\n\r\n    <ul class="node-inputs">\r\n        <% _.each(type.inputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-input">\r\n            <div class="node-port node-port-input" data-index=" <%= index %> ">\r\n                <span class="node-port-name"><%= ele.name %></span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="node-data-container node-output-container">\r\n        <input type="text" spellcheck="false" class="text-input" placeholder="Output name" value="<%= extra.script %>">\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-watch-template">\r\n    <div class="node-data-container">\r\n        <span class="name searchfield">\r\n            <%= displayName %>\r\n        </span>\r\n    </div>\r\n\r\n    <ul class="node-inputs">\r\n        <% _.each(type.inputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-input">\r\n            <div class="node-port node-port-input" data-index=" <%= index %> ">\r\n                <span class="node-port-name"><%= ele.name %></span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="node-center-panel">\r\n        <div class="watch-data-container">\r\n          <div class="node-last-value-wrapper">\r\n            <div class="node-last-value">\r\n                <%- preview %>\r\n            </div>\r\n            <div class="node-last-value-more hidden">\r\n                <span class="more-items-text">---- Show All Results ----</span>\r\n            </div>\r\n          </div>\r\n          <div class="list-level-panel">\r\n              <span class="total">{<span class="total-value"><%= numItems %></span>}</span>\r\n          </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <ul class="node-outputs">\r\n        <% _.each(type.outputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-output">\r\n            <div class="node-port node-port-output" data-index=" <%= index %> ">\r\n                <span class="node-port-name"> <%= ele.name %> </span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="dropdown node-settings" style="position:absolute">\r\n        <a data-toggle="dropdown" href="#">\r\n            <span style="color:black; font-size: 10px">﹍</span>\r\n        </a>\r\n\r\n        <ul class="dropdown-menu node-dropdown-menu" role="menu" aria-labelledby="dLabel">\r\n            <li class="dropdown-header">Name</li>\r\n            <li class="node-dropown-menu-item">\r\n                <input class="name-input" spellcheck="false" value="<%= name %>">\r\n            </li>\r\n\r\n            <li class="dropdown-header shown-items hidden">Shown array items</li>\r\n\r\n            <li class="node-dropown-menu-item shown-items hidden">\r\n                <input type="number" class="shown-items" min="1" max="10" value="10" step="1">\r\n                <span class="shown-items" style="padding-left: 5px">of 1 is shown</span>\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n                <label for=" <%= "freeze" +_id %> ">Freeze</label>\r\n                <input type="checkbox" id=" <%= "freeze" +_id %> " style="margin-left: 10px"\r\n                <%= isFrozenByUpstream ? "disabled" : ""%>\r\n                <%= isFrozen ? "checked" : ""%> class="freeze-input">\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="node-show-template">\r\n\r\n    <ul class="node-inputs">\r\n        <% _.each(type.inputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-input">\r\n            <div class="node-port node-port-input" data-index=" <%= index %> ">\r\n                <span class="node-port-name"><%= ele.name %></span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="node-data-container show-data-container">\r\n        <span class="name searchfield"><pre><%= prettyValue ? prettyValue : "Nothing" %></pre></span>\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="slider-node-view-template">\r\n\r\n    <div class="node-data-container">\r\n\r\n        <% if (name && name !== displayName) { %>\r\n            <span style="margin-right: 10px" class="name">\r\n              <%= name %>\r\n            </span>\r\n          <% } %>\r\n\r\n        <div class="slider" style="display: inline-block; width: 120px; height: 8px; margin: 0; padding: 0"></div>\r\n\r\n        <div class="num-data-container" style="display: inline-block;">\r\n            <input type="number" class="currentValue" style="number-node-input" value="<%= type.value %>" />\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <ul class="node-outputs">\r\n        <% _.each(type.outputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-output">\r\n            <div class="node-port node-port-output" data-index=" <%= index %> ">\r\n                <span class="node-port-name"> <%= ele.name %> </span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="dropdown keep-open node-settings" style="position:absolute">\r\n\r\n        <a href="#" data-toggle="dropdown" href="#">\r\n            <span style="color:black; font-size: 10px">﹍</span>\r\n        </a>\r\n\r\n        <ul class="dropdown-menu node-dropdown-menu" role="menu" style="color: black" aria-labelledby="dLabel">\r\n\r\n            <li class="dropdown-header">Min</li>\r\n            <li class="node-dropown-menu-item">\r\n              <input type="number" class="num-min">\r\n            </li>\r\n\r\n            <li class="dropdown-header">Max</li>\r\n            <li class="node-dropown-menu-item">\r\n              <input type="number" class="num-max">\r\n            </li>\r\n\r\n            <li class="dropdown-header">Stepsize</li>\r\n            <li class="node-dropown-menu-item">\r\n              <input type="number" class="num-step">\r\n            </li>\r\n\r\n            <li class="dropdown-header">Name</li>\r\n            <li class="node-dropown-menu-item">\r\n              <input class="name-input" spellcheck="false" value="<%= name %>">\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n              Hide in customizer <input type="checkbox" style="margin-left: 10px" <%= extra.lock ? "checked" : ""%> class="lock-input">\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n                <label for=" <%= "freeze" +_id %> ">Freeze</label>\r\n                <input type="checkbox" id=" <%= "freeze" +_id %> " style="margin-left: 10px"\r\n                <%= isFrozenByUpstream ? "disabled" : ""%>\r\n                <%= isFrozen ? "checked" : ""%> class="freeze-input">\r\n            </li>\r\n\r\n          </ul>\r\n        </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="number-node-view-template">\r\n\r\n    <div class="node-data-container">\r\n\r\n        <% if (name && name !== displayName) { %>\r\n            <span style="margin-right: 10px" class="name">\r\n              <%= name %>\r\n            </span>\r\n          <% } %>\r\n\r\n        <div class="num-data-container" style="display: inline-block;">\r\n            <input type="text" class="currentValue" style="number-node-input" value="<%= type.value %>" />\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <ul class="node-outputs">\r\n        <% _.each(type.outputs, function(ele, index) { %>\r\n        <li class="node-port-region node-port-region-output">\r\n            <div class="node-port node-port-output" data-index=" <%= index %> ">\r\n                <span class="node-port-name"> <%= ele.name %> </span>\r\n            </div>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n\r\n    <div class="dropdown keep-open node-settings" style="position:absolute">\r\n\r\n        <a href="#" data-toggle="dropdown" href="#">\r\n            <span style="color:black; font-size: 10px">﹍</span>\r\n        </a>\r\n\r\n        <ul class="dropdown-menu node-dropdown-menu" role="menu" style="color: black" aria-labelledby="dLabel">\r\n\r\n            <li class="dropdown-header">Name</li>\r\n            <li class="node-dropown-menu-item">\r\n              <input class="name-input" spellcheck="false" value="<%= name %>">\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n              Hide in customizer <input type="checkbox" style="margin-left: 10px" <%= extra.lock ? "checked" : ""%> class="lock-input">\r\n            </li>\r\n\r\n            <li class="dropdown-header">\r\n                <label for=" <%= "freeze" +_id %> ">Freeze</label>\r\n                <input type="checkbox" id=" <%= "freeze" +_id %> " style="margin-left: 10px"\r\n                <%= isFrozenByUpstream ? "disabled" : ""%>\r\n                <%= isFrozen ? "checked" : ""%> class="freeze-input">\r\n            </li>\r\n\r\n          </ul>\r\n        </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="search-template">\r\n    <div class="search-top-container">\r\n        <input placeholder="Add a node..." spellcheck="false" class="library-search-input search"></input>\r\n        <ul class="list search-list"></ul>\r\n    </div>\r\n</script>\r\n\r\n<script type="text/template" id="search-category-template">\r\n    <span class="category-name"><%= name %></span>\r\n    <ul class="search-category-children-list" ></ul>\r\n</script>\r\n\r\n<script type="text/template" id="workspace-search-template">\r\n\r\n    <div class="workspace-search-container" id="workspace-search-input-container">\r\n        <div class="search-list-container" style="display:none;">\r\n        </div>\r\n        <div class="search-bottom-container">\r\n            <i style="display:inline-block;" class="icon-search icon-white dim-button"></i>\r\n            <input placeholder="Add a node..." spellcheck="false" id="bottom-search" class="library-search-input search"></input>\r\n        </div>\r\n    </div>\r\n\r\n    <div id="undo-redo-menu" class="workspace-search-container">\r\n\r\n        <div id="undo-button" class="workspace-search-button workspace-search-button-active">\r\n\r\n            <i class="fa fa-lg fa-fw dim-button fa-rotate-left white-icon"></i>\r\n\r\n        </div>\r\n\r\n        <div id="redo-button" class="workspace-search-button workspace-search-button-active">\r\n\r\n            <i class="fa fa-lg fa-fw  dim-button fa-repeat white-icon"></i>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div id="manage-menu" class="workspace-search-container">\r\n\r\n        <div id="copy-button" class="workspace-search-button workspace-search-button-active">\r\n\r\n            <i class="fa fa-lg fa-fw dim-button fa-copy white-icon"></i>\r\n\r\n        </div>\r\n\r\n        <div id="paste-button" class="workspace-search-button workspace-search-button-active">\r\n\r\n            <i class="fa fa-lg fa-fw dim-button fa-paste white-icon"></i>\r\n\r\n        </div>\r\n\r\n        <div id="delete-button" class="workspace-search-button workspace-search-button-active">\r\n\r\n            <i class="fa fa-lg fa-fw dim-button fa-eraser white-icon"></i>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div id="save-menu" class="workspace-search-container">\r\n\r\n        <div id="export-button" class="workspace-search-button workspace-search-button-active">\r\n            <i class="fa fa-lg fa-fw dim-button fa-download white-icon"></i>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="workspace-runner-status-template">\r\n</script>\r\n\r\n<script type="text/template" id="search-element-template">\r\n    <table class = "table-condensed">\r\n        <tr>\r\n            <td rowspan = "3"> <img class = "search-element-image"> </td>\r\n        </tr>\r\n        <tr>\r\n            <td>\r\n            <span class="search-element-name"><%= DisplayName %></span>\r\n            <span class="args"><%= ArgsString %> </span>\r\n            <td>\r\n        </tr>\r\n        <tr>\r\n            <td>\r\n            <div class="description"><%= Description %> </div>\r\n            <div class="category"><%= Category %> </div>\r\n            <td>\r\n        </tr>\r\n    </table>\r\n\r\n</script>\r\n\r\n<script type ="text/template" id="search-element-tooltip-template">\r\n <table class = "table-condensed">\r\n      <tr>\r\n          <td>\r\n         </td>\r\n            <td\r\n            rowspan = "2"> <img class = "search-element-image" src= "<%= imageSource %>">\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td>\r\n            <div class="ports-title">INPUT </div>\r\n            <ul class="tooltip-template-inputs">\r\n                 <% for(let index = 0; index < inputNames.length;index++) { %>\r\n           <li> <span class = "tooltip-template-portname"> <%= inputNames[index] %></span>\r\n            <span class = "tooltip-template-porttype"><%= inputValues[index] %> </span> </li>\r\n                    <% } %>\r\n            </ul>\r\n\r\n            <div class="ports-title">OUTPUT </div>\r\n            <ul class="tooltip-template-outputs">\r\n                     <% for(let index = 0; index < outputNames.length;index++) { %>\r\n           <li> <span class = "tooltip-template-portname"> <%= outputNames[index] %></span>\r\n            <span class = "tooltip-template-porttype"><%= outputValues[index] %> </span> </li>\r\n                    <% } %>\r\n            </ul>\r\n            </ul>\r\n            <td>\r\n        </tr>\r\n\r\n    </table>\r\n</script>\r\n\r\n<script type="text/template" id="array-item-template">\r\n    <span class="index"><%= arrayIndex %></span>\r\n    <span class="name"><%= itemDescription %></span>\r\n    <span class="total"><%= isCollection === true ? \'[<span class="total-value">\' + arrayLength + \'</span>]\':"" %></span>\r\n</script>\r\n\r\n<script type="text/template" id="connection-template">\r\n    M<%-aX%>,<%-aY%> C<%-bX%>,<%-bY%> <%-cX%>,<%-cY%> <%-dX%>,<%-dY%>\r\n</script>\r\n\r\n<script type="text/template" id="login-template">\r\n\r\n    <div id="login-failure-message"></div>\r\n\r\n    <a href="/auth/oxygen" class="btn btn-block btn-openid btn-social"><i class="fa fa-openid"></i>Sign in with Oxygen</a>\r\n\r\n</script>\r\n\r\n      <script type="text/template" id="share-template">\r\n\r\n        <div id="share-box" class="modal-box">\r\n\r\n          <i id="exit-share" class="fa fa-fw fa-times dim-button"></i>\r\n          <h3 id="feedback-title">\r\n            <i class="fa fa-share fa-2x fa-fw" style="padding-right: 10px"></i>Share\r\n          </h3>\r\n          <p>Share your project as a customizable product website</p>\r\n\r\n          <div class="inner-box">\r\n           <span class="label">Sharing</span>\r\n           <br>\r\n            <i class="fa fa-fw fa-toggle-off dim-button is-customizer-checkbox"></i>\r\n            <span class="indicator public">public</span> <span class="indicator private">private</span>\r\n          </div>\r\n\r\n          <div class="inner-box">\r\n            <span class="label">Stable URL</span> <a href="http://<%= url %>" target="_blank" style="font-style: italic; ">Visit</a>\r\n            <br>\r\n            <input type="text" readonly class="customizer-url" placeholder="Project Url" value="<%= url %>">\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </script>\r\n\r\n\r\n<script type="text/template" id="help-section-template">\r\n\r\n    <div class="enter-help-section" data-target-id="<%= targetId %>" style="left: <%= elementPosition[0] %>px; top: <%= elementPosition[1] %>px;">\r\n        ?\r\n    </div>\r\n    <div class="help-section" data-target-id="<%= targetId %>" style="left: <%= elementPosition[0] + offset[0] %>px; top: <%= elementPosition[1] + offset[1]  %>px;">\r\n        <span><%= title %> </span>\r\n        <p><%= text %></p>\r\n        <div class="exit-help-section" data-target-id="<%= targetId %>">Ok, got it!</div>\r\n        <div class="exit-help" data-target-id="<%= targetId %>">Exit all</div>\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="python-template">\r\n\r\n    <div id="python-box" class="modal-box">\r\n\r\n        <div class="inner-box">\r\n           <span class="label">Edit Python Script...</span>\r\n        </div>\r\n\r\n        <div class="inner-box">\r\n            <code id="python-script" spellcheck="false" class="language-python python-input" contenteditable><%= script %></code>\r\n\r\n            <button id="save-python">Accept Changes</button>\r\n            <button id="exit-python">Cancel</button>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="function-name-prompt-template">\r\n\r\n    <div id="prompt-box" class="modal-box">\r\n\r\n        <h2 id="prompt-title">\r\n            Custom Node Properties\r\n        </h2>\r\n\r\n        <div id="prompt-failure-message"></div>\r\n\r\n        <form id="function-name-prompt-form">\r\n\r\n            <div class="form-group">\r\n                <label for="name" class="control-label">Name</label>\r\n                <input id="prompt-name" type="text" name="name" class="form-control">\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label for="description" class="control-label">Description</label>\r\n                <input id="prompt-description" type="text" name="description" class="form-control">\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label for="category" class="control-label">Category</label>\r\n\r\n                <select id="prompt-category" name="category" class="form-control">\r\n                  <% _.each(categories, function(ele, index) { %>\r\n                    <option><%= ele %></option>\r\n                  <% }); %>\r\n                </select>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label for="newCategory" class="control-label">Or create new category</label>\r\n                <input id="prompt-newCategory" type="text" name="newCategory" class="form-control">\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <button id="ok-button" class="btn btn-primary">OK</button>\r\n                <button id="cancel-button" class="btn btn-primary">Cancel</button>\r\n            </div>\r\n\r\n        </form>\r\n\r\n    </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="login-frame-template">\r\n    <iframe id="shapeways_frame" src="/shapewaysLogin">\r\n\r\n    </iframe>\r\n</script>\r\n\r\n<script type="text/template" id="logger-template">\r\n<div id="logger-box" class="modal-box logger-modal">\r\n  <i id="exit-logger" class="fa fa-fw fa-times dim-button"></i>\r\n  <button id="logSaveAs" type="button" class = "btn btn-primary" style="margin-left : 10px">Save-As</button>\r\n  <div class="vertical">\r\n    <div>\r\n    <label> Last Execution Time :\r\n        <span id="lastExecutionTime"/></label>\r\n    </div>\r\n   <div>\r\n    <label> Average Execution Time :\r\n        <span id="avgExecutionTime"/></label>\r\n    </div>\r\n  </div>\r\n  <div class="container">\r\n  <table class="table table-sm">\r\n    <thead class="thead-default">\r\n      <tr>\r\n        <th class="fit">Index</th>\r\n        <th class="fit">Date</th>\r\n        <th class="fit">Type</th>\r\n        <th class="fit">Name</th>\r\n        <th class="fit">StartTime</th>\r\n        <th class="fit">EndTime</th>\r\n        <th class="fit">ElapsedTime</th>\r\n        <th class="fit">Description</th>\r\n      </tr>\r\n    </thead>\r\n     <% for(let index = 0; index < messages.length;index++) { %>\r\n    <tbody>\r\n      <tr>\r\n        <td class="fit"><%= index %></td>\r\n        <td class="fit"><%= messages[index].logDate %></td>\r\n        <td class="fit"><%= messages[index].componentType %></td>\r\n        <td class="fit"><%= messages[index].name %></td>\r\n        <td class="fit"><%= messages[index].startTime %></td>\r\n        <td class="fit"><%= messages[index].endTime %></td>\r\n        <td class="fit"><%= messages[index].elapsedTime %></td>\r\n        <td class="fit"><%= messages[index].message %></td>\r\n      </tr>\r\n    </tbody>\r\n    <% } %>\r\n  </table>\r\n</div>\r\n</div>\r\n</script>\r\n\r\n<script type="text/template" id="components-template">\r\n  <div class="row components-container">\r\n  </div>\r\n</script>\r\n\r\n<script type="text/template" id="panel-template">\r\n  <div id="workspace-tabs"></div>\r\n</script>\r\n\r\n<script type="text/template" id="subview-template">\r\n  <div class="dropdown" id="component-switcher">\r\n    <div class="close-button">\r\n      <i class="fa fa-times" aria-hidden="true"></i>\r\n    </div>\r\n\r\n    <select class="selectpicker" id="component-options">\r\n      <option data-subtext="focus on graph input manipulation">Customizer</option>\r\n      <option data-subtext="focus on general purpose graph editing">GraphEditor</option>\r\n      <option data-subtext="focus on geometry display">GeometryView</option>\r\n      <option data-subtext="focus on design options illustration">FractalView</option>\r\n    </select>\r\n  </div>\r\n  <div id="subview-container"></div>\r\n</script>\r\n\r\n<script type="text/template" id="workspace-tab-template">\r\n  <div class="btn-group">\r\n    <button class="dropdown-toggle" type="button" id="tab-settings" data-toggle="dropdown" data-submenu>\r\n      <input class="workspace-name" spellcheck="false" disabled="disabled" value="<%= tabName %>"></input>\r\n    </button>\r\n    <ul class="dropdown-menu dropdown-menu-right sampleApp-dropdown-menu">\r\n    <li><a id="rename">Rename...</a></li>\r\n    <li role="separator" class="divider sampleApp-divider"></li>\r\n    <li><a id="add" class="sampleApp-menu-icon"><i class="fa fa-plus-circle fa-fw fa-pull-left"></i>Add New View...</a></li>\r\n    <li><a id="move" class="sampleApp-menu-icon"><i class="fa fa-arrows-h fa-fw fa-pull-left"></i>Move to Other Panel</a></li>\r\n    <li role="separator" class="divider sampleApp-divider"></li>\r\n    <li><a id="save" class="sampleApp-menu-icon" ><i class="fa fa-floppy-o fa-fw fa-pull-left"></i>Save</a></li>\r\n    <li><a id="save-as">Save As...</a></li>\r\n    <li><a id="save-copy">Save a Copy...</a></li>\r\n    <li role="separator" class="divider sampleApp-divider"></li>\r\n    <li><a id="close" class="sampleApp-menu-icon"><i class="fa fa-times fa-fw fa-pull-left"></i>Close</a></li>\r\n  </ul>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/template" id="geometryViewer-component-template">\r\n  <div id="geometryViewerContainer" class = "geometryViewer-container"></div>\r\n    <div id="zoom-menu" class="non-selectable">\r\n            <div id="zoomreset-button" class="menu-element" data-toggle="tooltip" data-placement="left" title="ZoomToFit">\r\n                <i class="fa fa-arrows-alt fa-fw"></i>\r\n            </div>\r\n            <div id="zoomin-button" class="menu-element" data-toggle="tooltip" data-placement="left" title="ZoomIn">\r\n                <i class="fa fa-search-plus fa-fw"></i>\r\n            </div>\r\n\r\n            <div id="zoomout-button" class="menu-element" data-toggle="tooltip" data-placement="left" title="ZoomOut">\r\n                <i class="fa fa-search-minus fa-fw"></i>\r\n            </div>\r\n\r\n            <div id="pan-button" class="menu-element" data-toggle="tooltip" data-placement="left" title="Pan">\r\n                <i class="fa fa-arrows fa-fw"></i>\r\n            </div>\r\n\r\n        </div>\r\n</script>\r\n';
}),n("text!templates/customizerTemplates.tpl",[],function(){return'<script type="text/template" id="customizer-main-template">\r\n\r\n    <div id="customizer-app">\r\n\r\n      <div id="customizer-workspace">\r\n        <div id="customizer-workspace-scrolled">\r\n          <div class="widget">\r\n            <div id="customizer-description-container">\r\n            </div>\r\n          </div>\r\n          <div class="widget">\r\n            <div id="customizer-errors">\r\n            </div>\r\n          </div>\r\n          <div id="customizer-workspace-content">\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id="app-fail" style="display: none">\r\n\r\n        <div id="app-fail-container">\r\n          <h1><i class="fa fa-fw fa-2x fa-exclamation-triangle"></i></h1>\r\n          <h1>Requires WebGL!</h1>\r\n          <p>\r\n            It\'s also possible that WebGL is disabled in your browser or has failed to load.  You\'ll need to use a\r\n            web browser that <a href="http://caniuse.com/#search=webgl">supports WebGL</a> to use this app.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</script>\r\n\r\n<script type="text/template" id="description-template">\r\n  <div id="customizer-header-container">\r\n    <% if ( maintainers[0].username && maintainers[0].username !=\'\' ) { %>\r\n      <div>\r\n        <span>by: </span>\r\n        <span class="customize-author">\r\n          <b><%=  maintainers[0].username %></b>\r\n        </span>\r\n      </div>\r\n    <% }else if ( maintainers[0].email != \'\' ){ %>\r\n      <div>\r\n        <span>by: </span>\r\n        <span class="customize-author">\r\n          <b><%=  maintainers[0].email %></b>\r\n        </span>\r\n      </div>\r\n    <% } %>\r\n  </div>\r\n  </div>\r\n\t<% if ( description && description.trim() ) { %>\r\n\t\t<div id="customizer-description">\r\n\t\t<%= description %>\r\n\t\t</div>\r\n\t<% } %>\r\n</script>\r\n\r\n<script type="text/template" id="workspace-template">\r\n</script>\r\n\r\n<script type="text/template" id="widget-template">\r\n\r\n  <span class="name">\r\n    <% if ( !name || name === typeName) { %>\r\n      <%= typeName != "CustomNode" ? typeName : type.functionName  %>\r\n    <% } else { %>\r\n      <%= name %>\r\n    <% } %>\r\n  </span>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="customizer-errors-template">\r\n\r\n  <% if (errors) { %>\r\n    <div class="customizer-errors-container">\r\n      <div class="header-container-errors">\r\n        <i id="exclamation" class="fa fa-exclamation-circle fa-2x"></i>\r\n        Uh oh! There\r\n        <% if (errCount > 1) { %>\r\n          were <%= errCount %> errors\r\n        <% } else { %>\r\n          was <%= errCount %> error\r\n        <% } %>\r\n      </div>\r\n      <div class="error-list">\r\n        <%= errors %>\r\n      </div>\r\n    </div>\r\n  <% } %>\r\n</script>\r\n\r\n<script type="text/template" id="slider-widget-template">\r\n\r\n  <span class="name">\r\n    <% if ( !name || name === typeName) { %>\r\n      <%= typeName != "CustomNode" ? typeName : type.functionName  %>\r\n    <% } else { %>\r\n      <%= name %>\r\n    <% } %>\r\n  </span>\r\n\r\n  <div class="widget-slider slider"></div>\r\n\r\n  <div class="widget-num-data-container num-data-container">\r\n    <input type="number" class="widget-currentValue currentValue" value="<%= type.value %>" />\r\n  </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="number-widget-template">\r\n\r\n  <span class="name">\r\n    <% if ( !name || name === typeName ) { %>\r\n      <%= typeName != "CustomNode" ? typeName : type.functionName  %>\r\n    <% } else { %>\r\n      <%= name %>\r\n    <% } %>\r\n  </span>\r\n\r\n  <div class=" widget-num-data-container num-data-container">\r\n    <input type="text" class="widget-current-value currentValue" value="<%= type.value %>" />\r\n  </div>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="widget-code-block-template">\r\n\r\n    <span class="name">\r\n      <% if ( !name ) { %>\r\n        <%= typeName %>\r\n      <% } else { %>\r\n        <%= name %>\r\n      <% } %>\r\n    </span>\r\n\r\n    <code class="language-designScript widget-code-block-input" contenteditable><%= extra.code %></code>\r\n\r\n</script>\r\n\r\n<script type="text/template" id="widget-boolean-template">\r\n\r\n  <span class="name">\r\n    <% if ( !name ) { %>\r\n      <%= typeName %>\r\n    <% } else { %>\r\n      <%= name %>\r\n    <% } %>\r\n  </span>\r\n\r\n  <input type="radio" class="true-flag" name=<%= "radio" +_id %> <%= extra.value ? \'checked\' : \'\' %> />\r\n  <label style="padding-right: 5px">True</label>\r\n  <input type="radio" class="false-flag" name=<%= "radio" +_id %> <%= extra.value ? \'\' : \'checked\' %> />\r\n  <label>False</label>\r\n\r\n</script>\r\n<script type="text/template" id="widget-string-template">\r\n\r\n    <span class="name">\r\n      <% if ( !name ) { %>\r\n        <%= typeName %>\r\n      <% } else { %>\r\n        <%= name %>\r\n      <% } %>\r\n    </span>\r\n\r\n    <textarea class="widget-string-input"><%= extra.value %></textarea>\r\n\r\n</script>\r\n\r\n'}),n("text!templates/managerTemplates.tpl",[],function(){return'<script type="text/template" id="manager-main-template">\r\n\r\n    <div id="manager-wrapper" class="modal-box manager-modal">\r\n\r\n        <div id="manager-top-bar">\r\n            <div id="manager-top-bar-content">\r\n                <a id="exit-manager" class="manager-menu-icon"><i class="fa fa-times"></i></a>\r\n            </div>\r\n        </div>\r\n\r\n        <div id="manager-table-container">\r\n            <div id="manager-table-control-group">\r\n                <div id="manager-search-container">\r\n                    <i class="fa fa-search"></i>\r\n                    <input id="manager-search" type="search"  placeholder="Search">\r\n                </div>\r\n            </div>\r\n\r\n            <table id="manager-table" class="table table-hover">\r\n                <thead>\r\n                    <tr>\r\n                        <th class="ws-allow-copy"><span id="header-copy">Allow Copy? </th>\r\n                        <th class="ws-name"><span id="header-name">Name <span id="sort-arrow-name"><i class="fa fa-unsorted"></i></span></span></th>\r\n                        <th class="ws-description"><span id="header-description">Description <span id="sort-arrow-desc"><i class="fa fa-unsorted"></i></span></span></th>\r\n                        <th class="ws-date-edited"><span id="header-date">Last Modified <span id="sort-arrow-date"><i class="fa fa-sort-down"></i></span></span></th>\r\n                    </tr>\r\n                </thead>\r\n                    <tbody id="workspace-table-records">\r\n\r\n                    </tbody>\r\n            </table>\r\n\r\n        </div>\r\n\r\n        <div id="empty-workspaces" class="empty-table" style="display:none">\r\n        You have no workspaces! Get cracking!\r\n        </div>\r\n\r\n        <div id="workspace-edit" class="modal row col">\r\n\r\n        </div>\r\n        <div id="share-customizer" class="modal row col">\r\n\r\n        </div>\r\n        <div id="delete-workspace" class="modal row col">\r\n\r\n        </div>\r\n\r\n    </div>\r\n</script>\r\n\r\n<script type="text/template" id="workspace-record-template">\r\n    <td class="ws-allow-copy">\r\n                <% if (isCustomizer) { %>\r\n                <i class="fa fa-check">\r\n                <% } %>\r\n    </td>\r\n    <td id="open-workspace-button" class="ws-name"><%= name %></td>\r\n    <td class="ws-description"><%- description %></td>\r\n    <td class="ws-date-edited">\r\n        <span><%= prettyDate %></span>\r\n        <div id="workspace-record-controls">\r\n        </div>\r\n    </td>\r\n</script>\r\n\r\n<script type="text/template" id="record-images">\r\n    <i id="edit-button" class="fa fa-pencil fa-1x"></i>\r\n    <i id="delete-button" class="fa fa-trash-o fa-1x"></i>\r\n    <i id="share-button" class="fa fa-share-alt fa-1x"></i>\r\n</script>\r\n\r\n<script type="text/template" id="editor-template">\r\n\r\n    <div id="editor-box" class="modal-box">\r\n\r\n        <div class="inner-box">\r\n           <span class="label">Edit Workspace Details</span>\r\n        </div>\r\n\r\n        <div class="inner-box">\r\n\r\n            <div id="manager-failure-message"></div>\r\n\r\n             <div class="form-group">\r\n                <label for="name" class="control-label">Is Copyable</label>\r\n                <input type="checkbox" id="workspace-copyable" <%= isCustomizer ? "checked" : ""%>>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label for="name" class="control-label">Name</label>\r\n                <input type="text" name="name" id="workspace-name" placeholder="name" class="form-control" value="<%- name %>">\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label for="description" class="control-label">Description</label>\r\n                <textarea name="description" id="workspace-description" placeholder="description" class="form-control"><%= description %></textarea>\r\n            </div>\r\n\r\n            <div class="form-group manager-form-group">\r\n                <button id="exit" class="btn btn-primary">Cancel</button>\r\n                <button id="save-workspace" class="btn btn-primary">Save</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</script>\r\n\r\n<script  type="text/template" id="share-customizer-template">\r\n\r\n<div id="wrapper-customizer-share" class="modal-box">\r\n    <div class="inner-box">\r\n        <span class="label">Share Customizer</span>\r\n    </div>\r\n\r\n    <div class="inner-box">\r\n        <label >Share the selected Customizer with this link:</label>\r\n        <input type="text" name="url-string" id="url-string" class="form-control" value="<%= url %>">\r\n    </div>\r\n\r\n    <div class="inner-box">\r\n        <div class="form-group manager-form-group">\r\n            <button id="manager-exit-share" class="btn btn-primary">Cancel</button>\r\n        </div>\r\n    </div>   \r\n</div>\r\n</script>\r\n\r\n<script type="text/template" id="delete-template">\r\n    <div class="modal-box" id="wrapper-delete">\r\n        <div class="inner-box">\r\n            <span class="label">Delete Workspace</span>\r\n        </div>\r\n\r\n        <div class="inner-box">\r\n            <label>Are you sure you want to delete this workspace?</label>\r\n            <div class="form-group manager-form-group">\r\n                <button id="confirm-delete-button" class="btn btn-primary">Yes</button>\r\n                <button id="cancel-delete-button" class="btn btn-primary">No</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</script>\r\n'}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.7",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){s.detach().trigger("closed.bs.alert").remove()}var i=e(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=e("#"===o?[]:o);t&&t.preventDefault(),s.length||(s=i.closest(".alert")),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,o)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target).closest(".btn");t.call(r,"toggle"),e(n.target).is('input[type="radio"], input[type="checkbox"]')||(n.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),s="string"==typeof t?t:o.slide;i||r.data("bs.carousel",i=new n(this,o)),"number"==typeof t?i.to(t):s?i[s]():o.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,o=(n+i)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(t,i),s=this.interval,a="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(o)]);p&&p.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,i.addClass(a),o.addClass(a),i.one("bsTransitionEnd",function(){o.removeClass([t,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(h)),s&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),o=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=e.extend({},o.data(),i.data()),a=i.attr("data-slide-to");a&&(s.interval=!1),t.call(o,s),a&&o.data("bs.carousel").to(a),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),o=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.7",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var l=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[s](this.$element[0][l])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var o=t(i),s=o.data("bs.collapse"),a=s?"toggle":i.data();n.call(o,a)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(o).each(function(){var r=e(this),i=t(r),o={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new s(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.7",s.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var o=t(i),s=o.hasClass("open");if(n(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var a={relatedTarget:this};if(o.trigger(r=e.Event("show.bs.dropdown",a)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",a))}return!1}},s.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),s=i.hasClass("open");if(!s&&27!=n.which||s&&27==n.which)return 27==n.which&&i.find(o).trigger("focus"),r.trigger("click");var a=" li:not(.disabled):visible a",l=i.find(".dropdown-menu"+a);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),s=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);o||i.data("bs.modal",o=new n(this,s)),"string"==typeof t?o[t](r):s.show&&o.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(o,s,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var s=i[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){
var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue())return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),p=o[0].offsetWidth,h=o[0].offsetHeight;if(c){var d=a,f=this.getPosition(this.$viewport);a="bottom"==a&&u.bottom+h>f.bottom?"top":"top"==a&&u.top-h<f.top?"bottom":"right"==a&&u.right+p>f.width?"left":"left"==a&&u.left-p<f.left?"right":a,o.removeClass(d).addClass(a)}var m=this.getCalculatedOffset(a,u,p,h);this.applyPlacement(m,a);var g=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,s=parseInt(r.css("margin-top"),10),a=parseInt(r.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var l=r[0].offsetWidth,c=r[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var p=/top|bottom/.test(n),h=p?2*u.left-i+l:2*u.top-o+c,d=p?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][d],p)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&o.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,o=e(this.$tip),s=e.Event("hide.bs."+this.type);if(this.$element.trigger(s),!s.isDefaultPrevented())return o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,s=r?{top:0,left:0}:o?null:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,l,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-o-s.scroll,l=t.top+o-s.scroll+r;a<s.top?i.top=s.top-a:l>s.top+s.height&&(i.top=s.top+s.height-l)}else{var c=t.left-o,u=t.left+o+n;c<s.left?i.left=s.left-c:u>s.right&&(i.left=s.left+s.width-u)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#./.test(i)&&e(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return s!=(e=o[o.length-1])&&this.activate(e);if(s&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)s!=o[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),s=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=e(r);this.activate(t.closest("li"),n),this.activate(a,a.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var s=r.find("> .active"),a=i&&e.support.transition&&(s.length&&s.hasClass("fade")||!!r.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),o="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,o)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.7",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+s<=e-r)&&"bottom";var a=null==this.affixed,l=a?i:o.top,c=a?s:t;return null!=n&&i<=n?"top":null!=r&&l+c>=e-r&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,s=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var a=this.getState(s,t,i,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-t-o})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),n("bootstrap",function(){});var r="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},i=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=r.Prism={manual:r.Prism&&r.Prism.manual,util:{encode:function(e){return e instanceof i?new i(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=n.util.clone(e[i]));return r;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var i in t)r[i]=t[i];return r},insertBefore:function(e,t,r,i){i=i||n.languages;var o=i[e];if(2==arguments.length){r=arguments[1];for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);return o}var a={};for(var l in o)if(o.hasOwnProperty(l)){if(l==t)for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s]);a[l]=o[l]}return n.languages.DFS(n.languages,function(t,n){n===i[e]&&t!=e&&(this[t]=a)}),i[e]=a},DFS:function(e,t,r,i){i=i||{};for(var o in e)e.hasOwnProperty(o)&&(t.call(e,o,e[o],r||o),"Object"!==n.util.type(e[o])||i[n.util.objId(e[o])]?"Array"!==n.util.type(e[o])||i[n.util.objId(e[o])]||(i[n.util.objId(e[o])]=!0,n.languages.DFS(e[o],t,o,i)):(i[n.util.objId(e[o])]=!0,n.languages.DFS(e[o],t,null,i)))}},plugins:{},highlightAll:function(e,t){var r={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",r);for(var i,o=r.elements||document.querySelectorAll(r.selector),s=0;i=o[s++];)n.highlightElement(i,e===!0,r.callback)},highlightElement:function(t,i,o){for(var s,a,l=t;l&&!e.test(l.className);)l=l.parentNode;l&&(s=(l.className.match(e)||[,""])[1].toLowerCase(),a=n.languages[s]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+s,l=t.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+s);var c=t.textContent,u={element:t,language:s,grammar:a,code:c};if(n.hooks.run("before-sanity-check",u),!u.code||!u.grammar)return u.code&&(u.element.textContent=u.code),void n.hooks.run("complete",u);if(n.hooks.run("before-highlight",u),i&&r.Worker){var p=new Worker(n.filename);p.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},p.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(t),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,r){var o=n.tokenize(e,t);return i.stringify(n.util.encode(o),r)},tokenize:function(e,t,r){var i=n.Token,o=[e],s=t.rest;if(s){for(var a in s)t[a]=s[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a]){var l=t[a];l="Array"===n.util.type(l)?l:[l];for(var c=0;c<l.length;++c){var u=l[c],p=u.inside,h=!!u.lookbehind,d=!!u.greedy,f=0,m=u.alias;if(d&&!u.pattern.global){var g=u.pattern.toString().match(/[imuy]*$/)[0];u.pattern=RegExp(u.pattern.source,g+"g")}u=u.pattern||u;for(var y=0,v=0;y<o.length;v+=o[y].length,++y){var b=o[y];if(o.length>e.length)break e;if(!(b instanceof i)){u.lastIndex=0;var S=u.exec(b),w=1;if(!S&&d&&y!=o.length-1){if(u.lastIndex=v,S=u.exec(e),!S)break;for(var x=S.index+(h?S[1].length:0),C=S.index+S[0].length,_=y,k=v,A=o.length;_<A&&k<C;++_)k+=o[_].length,x>=k&&(++y,v=k);if(o[y]instanceof i||o[_-1].greedy)continue;w=_-y,b=e.slice(v,k),S.index-=v}if(S){h&&(f=S[1].length);var x=S.index+f,S=S[0].slice(f),C=x+S.length,D=b.slice(0,x),T=b.slice(C),P=[y,w];D&&P.push(D);var M=new i(a,p?n.tokenize(S,p):S,m,S,d);P.push(M),T&&P.push(T),Array.prototype.splice.apply(o,P)}}}}}return o},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var i,o=0;i=r[o++];)i(t)}}},i=n.Token=function(e,t,n,r,i){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length,this.greedy=!!i};if(i.stringify=function(e,t,r){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return i.stringify(n,t,e)}).join("");var o={type:e.type,content:i.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if("comment"==o.type&&(o.attributes.spellcheck="true"),e.alias){var s="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(o.classes,s)}n.hooks.run("wrap",o);var a=Object.keys(o.attributes).map(function(e){return e+'="'+(o.attributes[e]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+(a?" "+a:"")+">"+o.content+"</"+o.tag+">"},!r.document)return r.addEventListener?(r.addEventListener("message",function(e){var t=JSON.parse(e.data),i=t.language,o=t.code,s=t.immediateClose;r.postMessage(n.highlight(o,n.languages[i],i)),s&&r.close()},!1),r.Prism):r.Prism;var o=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return o&&(n.filename=o.src,!document.addEventListener||n.manual||o.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener("DOMContentLoaded",n.highlightAll))),r.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=i),"undefined"!=typeof global&&(global.Prism=i),i.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/i,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},i.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),i.languages.xml=i.languages.markup,i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:{pattern:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},i.languages.css.atrule.inside.rest=i.util.clone(i.languages.css),i.languages.markup&&(i.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:i.languages.css,alias:"language-css"}}),i.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:i.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:i.languages.css}},alias:"language-css"}},i.languages.markup.tag)),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),i.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),i.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&i.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:i.languages.javascript,alias:"language-javascript"}}),i.languages.js=i.languages.javascript,function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.forEach&&Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(t){for(var n,r=t.getAttribute("data-src"),o=t,s=/\blang(?:uage)?-(?!\*)(\w+)\b/i;o&&!s.test(o.className);)o=o.parentNode;if(o&&(n=(t.className.match(s)||[,""])[1]),!n){var a=(r.match(/\.(\w+)$/)||[,""])[1];n=e[a]||a}var l=document.createElement("code");l.className="language-"+n,t.textContent="",l.textContent="Loading…",t.appendChild(l);var c=new XMLHttpRequest;c.open("GET",r,!0),c.onreadystatechange=function(){4==c.readyState&&(c.status<400&&c.responseText?(l.textContent=c.responseText,i.highlightElement(l)):c.status>=400?l.textContent="✖ Error "+c.status+" while fetching file: "+c.statusText:l.textContent="✖ Error: File does not exist or is empty")},c.send(null)})},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight))}(),n("Prism",function(){}),n("augment",["require","exports","Prism"],function(e,t){"use strict";return i.languages.designScript={string:/("|')(\\?.)*?\1/g,comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//g,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*?(\r?\n|$)/g,lookbehind:!0}],keyword:/\b(local|static|this|class|extends|throw|catch|try|def|function|constructor|import|from|for|in|while|break|continue|return|public|private|protected|int|double|string|bool|var|char|void|true|false|null|Associative|Imperative|Options|elseif|else|if)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g},Object.defineProperty(Array.prototype,"equals",{enumerable:!1,value:function(e){if(this===e)return!0;if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0;t<this.length;++t)if(this[t]!==e[t])return!1;return!0}})}),n("IDynamoApplication",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),function(){function e(e){function t(t,n,r,i,o,s){for(;o>=0&&s>o;o+=e){var a=i?i[o]:o;r=n(r,t[a],a,t)}return r}return function(n,r,i,o){r=S(r,o,4);var s=!D(n)&&b.keys(n),a=(s||n).length,l=e>0?0:a-1;return arguments.length<3&&(i=n[s?s[l]:l],l+=e),t(n,r,i,s,l,a)}}function t(e){return function(t,n,r){n=w(n,r);for(var i=A(t),o=e>0?0:i-1;o>=0&&i>o;o+=e)if(n(t[o],o,t))return o;return-1}}function r(e,t,n){return function(r,i,o){var s=0,a=A(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(p.call(r,s,a),b.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&a>o;o+=e)if(r[o]===i)return o;return-1}}function i(e,t){var n=N.length,r=e.constructor,i=b.isFunction(r)&&r.prototype||l,o="constructor";for(b.has(e,o)&&!b.contains(t,o)&&t.push(o);n--;)o=N[n],o in e&&e[o]!==i[o]&&!b.contains(t,o)&&t.push(o)}var o=this,s=o._,a=Array.prototype,l=Object.prototype,c=Function.prototype,u=a.push,p=a.slice,h=l.toString,d=l.hasOwnProperty,f=Array.isArray,m=Object.keys,g=c.bind,y=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):o._=b,b.VERSION="1.8.3";var S=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?S(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var x=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],s=e(o),a=s.length,l=0;a>l;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}},C=function(e){if(!b.isObject(e))return{};if(y)return y(e);v.prototype=e;var t=new v;return v.prototype=null,t},_=function(e){return function(t){return null==t?void 0:t[e]}},k=Math.pow(2,53)-1,A=_("length"),D=function(e){var t=A(e);return"number"==typeof t&&t>=0&&k>=t};b.each=b.forEach=function(e,t,n){t=S(t,n);var r,i;if(D(e))for(r=0,i=e.length;i>r;r++)t(e[r],r,e);else{var o=b.keys(e);for(r=0,i=o.length;i>r;r++)t(e[o[r]],o[r],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var r=!D(e)&&b.keys(e),i=(r||e).length,o=Array(i),s=0;i>s;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var r;return r=D(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==r&&r!==-1?e[r]:void 0},b.filter=b.select=function(e,t,n){var r=[];return t=w(t,n),b.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var r=!D(e)&&b.keys(e),i=(r||e).length,o=0;i>o;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var r=!D(e)&&b.keys(e),i=(r||e).length,o=0;i>o;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,r){return D(e)||(e=b.values(e)),("number"!=typeof n||r)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=function(e,t){var n=p.call(arguments,2),r=b.isFunction(t);return b.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t&&null!=e){e=D(e)?e:b.values(e);for(var a=0,l=e.length;l>a;a++)r=e[a],r>o&&(o=r)}else t=w(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(i>s||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o},b.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t&&null!=e){e=D(e)?e:b.values(e);for(var a=0,l=e.length;l>a;a++)r=e[a],o>r&&(o=r)}else t=w(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(s>i||1/0===i&&1/0===o)&&(o=e,s=i)});return o},b.shuffle=function(e){for(var t,n=D(e)?e:b.values(e),r=n.length,i=Array(r),o=0;r>o;o++)t=b.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},b.sample=function(e,t,n){return null==t||n?(D(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;
if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={};return n=w(n,r),b.each(t,function(r,o){var s=n(r,o,t);e(i,r,s)}),i}};b.groupBy=T(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=T(function(e,t,n){e[n]=t}),b.countBy=T(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?p.call(e):D(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:D(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var r=[],i=[];return b.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},b.first=b.head=b.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return p.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return p.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var P=function(e,t,n,r){for(var i=[],o=0,s=r||0,a=A(e);a>s;s++){var l=e[s];if(D(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=P(l,t,n));var c=0,u=l.length;for(i.length+=u;u>c;)i[o++]=l[c++]}else n||(i[o++]=l)}return i};b.flatten=function(e,t){return P(e,t,!1)},b.without=function(e){return b.difference(e,p.call(arguments,1))},b.uniq=b.unique=function(e,t,n,r){b.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],s=0,a=A(e);a>s;s++){var l=e[s],c=n?n(l,s,e):l;t?(s&&o===c||i.push(l),o=c):n?b.contains(o,c)||(o.push(c),i.push(l)):b.contains(i,l)||i.push(l)}return i},b.union=function(){return b.uniq(P(arguments,!0,!0))},b.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=A(e);i>r;r++){var o=e[r];if(!b.contains(t,o)){for(var s=1;n>s&&b.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},b.difference=function(e){var t=P(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,A).length||0,n=Array(t),r=0;t>r;r++)n[r]=b.pluck(e,r);return n},b.object=function(e,t){for(var n={},r=0,i=A(e);i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,n,r){n=w(n,r,1);for(var i=n(t),o=0,s=A(e);s>o;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o},b.indexOf=r(1,b.findIndex,b.sortedIndex),b.lastIndexOf=r(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;r>o;o++,e+=n)i[o]=e;return i};var M=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=C(e.prototype),s=e.apply(o,i);return b.isObject(s)?s:o};b.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,p.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function(){return M(e,r,t,this,n.concat(p.call(arguments)))};return r},b.partial=function(e){var t=p.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),s=0;i>s;s++)o[s]=t[s]===b?arguments[r++]:t[s];for(;r<arguments.length;)o.push(arguments[r++]);return M(e,n,this,this,o)};return n},b.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return b.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=function(e,t){var n=p.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var r,i,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:b.now(),s=null,o=e.apply(r,i),s||(r=i=null)};return function(){var c=b.now();a||n.leading!==!1||(a=c);var u=t-(c-a);return r=this,i=arguments,0>=u||u>t?(s&&(clearTimeout(s),s=null),a=c,o=e.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(l,u)),o}},b.debounce=function(e,t,n){var r,i,o,s,a,l=function(){var c=b.now()-s;t>c&&c>=0?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=b.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(a=e.apply(o,i),o=i=null),a}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},b.once=b.partial(b.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return E&&i(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return E&&i(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},b.mapObject=function(e,t,n){t=w(t,n);for(var r,i=b.keys(e),o=i.length,s={},a=0;o>a;a++)r=i[a],s[r]=t(e[r],r,e);return s},b.pairs=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},b.invert=function(e){for(var t={},n=b.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=x(b.allKeys),b.extendOwn=b.assign=x(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var r,i=b.keys(e),o=0,s=i.length;s>o;o++)if(r=i[o],t(e[r],r,e))return r},b.pick=function(e,t,n){var r,i,o={},s=e;if(null==s)return o;b.isFunction(t)?(i=b.allKeys(s),r=S(t,n)):(i=P(arguments,!1,!1,1),r=function(e,t,n){return t in n},s=Object(s));for(var a=0,l=i.length;l>a;a++){var c=i[a],u=s[c];r(u,c,s)&&(o[c]=u)}return o},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var r=b.map(P(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(r,t)}}return b.pick(e,t,n)},b.defaults=x(b.allKeys,!0),b.create=function(e,t){var n=C(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;r>o;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!O(e[l],t[l],n,r))return!1}else{var c,u=b.keys(e);if(l=u.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!b.has(t,c)||!O(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(e,t){return O(e,t)},b.isEmpty=function(e){return null==e||(D(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length)},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=f||function(e){return"[object Array]"===h.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&d.call(e,t)},b.noConflict=function(){return o._=s,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=_,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var r=Array(Math.max(0,e));t=S(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},V=b.invert(I),L=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};b.escape=L(I),b.unescape=L(V),b.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),b.isFunction(r)?r.call(e):r};var R=0;b.uniqueId=function(e){var t=++R+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,j=function(e){return"\\"+B[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var r=RegExp([(t.escape||G).source,(t.interpolate||G).source,(t.evaluate||G).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,s,a){return o+=e.slice(i,a).replace(F,j),i=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var a=function(e){return s.call(this,e,b)},l=t.variable||"obj";return a.source="function("+l+"){\n"+o+"}",a},b.chain=function(e){var t=b(e);return t._chain=!0,t};var z=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),z(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],z(this,n)}}),b.each(["concat","join","slice"],function(e){var t=a[e];b.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof n&&n.amd&&n("underscore",[],function(){return b})}.call(this),n("jquery",[],function(){return jQuery}),function(e){var r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof n&&n.amd)n("backbone",["underscore","jquery","exports"],function(t,n,i){r.Backbone=e(r,i,t,n)});else if("undefined"!=typeof exports){var i,o=t("underscore");try{i=t("jquery")}catch(e){}e(r,exports,o,i)}else r.Backbone=e(r,{},r._,r.jQuery||r.Zepto||r.ender||r.$)}(function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],l(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],l(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}},a=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=s(t,i,r))})},l=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?c(e):n.isString(e)?function(t){return t.get(e)}:e},c=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},u=t.Events={},p=/\s+/,h=function(e,t,r,i,o){var s,a=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(s=n.keys(r);a<s.length;a++)t=h(e,t,s[a],r[s[a]],o)}else if(r&&p.test(r))for(s=r.split(p);a<s.length;a++)t=e(t,s[a],i,o);else t=e(t,r,i,o);return t};u.on=function(e,t,n){return d(this,e,t,n)};var d=function(e,t,n,r,i){if(e._events=h(f,e._events||{},t,n,{context:r,ctx:e,listening:i}),i){var o=e._listeners||(e._listeners={});o[i.id]=i}return e};u.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[i];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[i]={obj:e,objId:i,id:a,listeningTo:o,count:0}}return d(e,t,r,this,s),this};var f=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return e};u.off=function(e,t,n){return this._events?(this._events=h(m,this._events,e,t,{context:n,listeners:this._listeners}),this):this},u.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(t,r,this)}return this};var m=function(e,t,r,i){if(e){var o,s=0,a=i.context,l=i.listeners;if(t||r||a){for(var c=t?[t]:n.keys(e);s<c.length;s++){t=c[s];var u=e[t];if(!u)break;for(var p=[],h=0;h<u.length;h++){var d=u[h];r&&r!==d.callback&&r!==d.callback._callback||a&&a!==d.context?p.push(d):(o=d.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}p.length?e[t]=p:delete e[t]}return e}for(var f=n.keys(l);s<f.length;s++)o=l[f[s]],delete l[o.id],delete o.listeningTo[o.objId]}};u.once=function(e,t,r){var i=h(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},u.listenToOnce=function(e,t,r){var i=h(g,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var g=function(e,t,r,i){if(r){var o=e[t]=n.once(function(){i(t,o),r.apply(this,arguments)});o._callback=r}return e};u.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return h(y,this._events,e,void 0,n),this};var y=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&v(i,r),o&&v(o,[t].concat(r))}return e},v=function(e,t){var n,r=-1,i=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};u.bind=u.on,u.unbind=u.off,n.extend(t,u);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,p=this._previousAttributes;for(var h in i)t=i[h],n.isEqual(c[h],t)||a.push(h),n.isEqual(p[h],t)?delete u[h]:u[h]=t,o?delete c[h]:c[h]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=r);for(var d=0;d<a.length;d++)this.trigger("change:"+a[d],this,c[a[d]],r)}if(l)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;return!!t.set(i,e)&&(r&&r.call(e.context,t,n,e),void t.trigger("sync",t,n,e))},j(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0,parse:!0},r);var o=r.wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,a=r.success,l=this.attributes;r.success=function(e){s.attributes=l;var t=r.parse?s.parse(e,r):e;return o&&(t=n.extend({},i,t)),!(t&&!s.set(t,r))&&(a&&a.call(r.context,s,e,r),void s.trigger("sync",s,e,r))},j(this,r),i&&o&&(this.attributes=n.extend({},l,i));var c=this.isNew()?"create":r.patch?"patch":"update";"patch"!==c||r.attrs||(r.attrs=i);var u=this.sync(c,this,r);return this.attributes=l,u},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(j(this,e),s=this.sync("delete",this,e)),i||o(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}});var S={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(b,S,"attributes");var w=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},x={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},_=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),o=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<o;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+o+n]=i[r]};n.extend(w.prototype,u,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,C))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){t=n.extend({},x,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],l=[],c=[],u=[],p={},h=t.add,d=t.merge,f=t.remove,m=!1,g=this.comparator&&null==i&&t.sort!==!1,y=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){o=e[s];var v=this.get(o);if(v){if(d&&o!==v){var b=this._isModel(o)?o.attributes:o;t.parse&&(b=v.parse(b,t)),v.set(b,t),c.push(v),g&&!m&&(m=v.hasChanged(y))}p[v.cid]||(p[v.cid]=!0,a.push(v)),e[s]=v}else h&&(o=e[s]=this._prepareModel(o,t),o&&(l.push(o),this._addReference(o,t),p[o.cid]=!0,a.push(o)))}if(f){for(s=0;s<this.length;s++)o=this.models[s],p[o.cid]||u.push(o);u.length&&this._removeModels(u,t)}var S=!1,w=!g&&h&&f;if(a.length&&w?(S=this.length!==a.length||n.some(this.models,function(e,t){return e!==a[t]}),this.models.length=0,_(this.models,a,0),this.length=this.models.length):l.length&&(g&&(m=!0),_(this.models,l,null==i?this.length:i),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(s=0;s<l.length;s++)null!=i&&(t.index=i+s),o=l[s],o.trigger("add",o,this,t);(m||S)&&this.trigger("sort",this,t),(l.length||u.length||c.length)&&(t.changes={added:l,removed:u,merged:c},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var r=t.wait;if(e=this._prepareModel(e,t),!e)return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var k={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(w,k,"models");var A=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,T)),this._ensureElement(),this.initialize.apply(this,arguments)},D=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(A.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(D);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=P[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||F()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1);var l=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,l&&l.call(i.context,e,t,n)};var c=i.xhr=t.ajax(n.extend(s,i));return r.trigger("request",r,c,i),c};var P={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var M=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,O=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(M.prototype,u,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var s=o._extractParameters(e,n);o.execute(i,s,r)!==!1&&(o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),t.history.trigger("route",o,r,s))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(I,"\\$&").replace(E,"(?:$1)?").replace(N,function(e,t){return t?e:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var V=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,G=/#.*$/;V.started=!1,n.extend(V.prototype,u,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(L,"")},start:function(e){if(V.started)throw new Error("Backbone.history has already been started");if(V.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(R,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){
return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),V.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!V.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(G,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new V;var B=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};b.extend=w.extend=M.extend=A.extend=V.extend=B;var F=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SearchElement",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"DisplayName",{get:function(){return this.get("displayName")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Description",{get:function(){return this.get("description")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CreationName",{get:function(){return this.get("creationName")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ConcreteType",{get:function(){return this.get("concreteType")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Category",{get:function(){return this.get("category")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"InPorts",{get:function(){return this.get("inPorts")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OutPorts",{get:function(){return this.get("outPorts")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.get("selected")},set:function(e){this.set("selected",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ArgsString",{get:function(){var e=this.get("args");return e&&e.length>0?"("+e.join(", ")+")":""},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{name:null,creationName:null,displayName:null,category:null,description:null,searchTags:[],searchWeights:[],inPorts:[],outPorts:[],isCustomNode:!1,functionId:-1,args:[],selected:!1,concreteType:null}},t.prototype.initialize=function(e,t){this.app=e.app,this.parent=t?t.parent:null},t}(n.Model);return r}),n("BaseMessage",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.type=e}return e}();return n});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SaveFileMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t,n,r){var i=e.call(this,"SaveFileMessage")||this;return i.guid=t,i.fileName=r,n&&(i.filePath=n),i}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ClearWorkspaceMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t){var n=e.call(this,"ClearWorkspaceMessage")||this;return n.ClearOnlyHome=t,n}return o(t,e),t}(n);return r});var s=s||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},s=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),a=e.webkitRequestFileSystem,l=e.requestFileSystem||a||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u="application/octet-stream",p=0,h=4e4,d=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,h)},f=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){c(e)}}},m=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},g=function(t,c,h){h||(t=m(t));var g,y,v,b=this,S=t.type,w=!1,x=function(){f(b,"writestart progress write writeend".split(" "))},C=function(){if(y&&s&&"undefined"!=typeof FileReader){var r=new FileReader;return r.onloadend=function(){var e=r.result;y.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),b.readyState=b.DONE,x()},r.readAsDataURL(t),void(b.readyState=b.INIT)}if(!w&&g||(g=n().createObjectURL(t)),y)y.location.href=g;else{var i=e.open(g,"_blank");void 0===i&&s&&(e.location.href=g)}b.readyState=b.DONE,x(),d(g)},_=function(e){return function(){if(b.readyState!==b.DONE)return e.apply(this,arguments)}},k={create:!0,exclusive:!1};return b.readyState=b.INIT,c||(c="download"),i?(g=n().createObjectURL(t),void setTimeout(function(){r.href=g,r.download=c,o(r),x(),d(g),b.readyState=b.DONE})):(e.chrome&&S&&S!==u&&(v=t.slice||t.webkitSlice,t=v.call(t,0,t.size,u),w=!0),a&&"download"!==c&&(c+=".download"),(S===u||a)&&(y=e),l?(p+=t.size,void l(e.TEMPORARY,p,_(function(e){e.root.getDirectory("saved",k,_(function(e){var n=function(){e.getFile(c,k,_(function(e){e.createWriter(_(function(n){n.onwriteend=function(t){y.location.href=e.toURL(),b.readyState=b.DONE,f(b,"writeend",t),d(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&C()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=b["on"+e]}),n.write(t),b.abort=function(){n.abort(),b.readyState=b.DONE},b.readyState=b.WRITING}),C)}),C)};e.getFile(c,{create:!1},_(function(e){e.remove(),n()}),_(function(e){e.code===e.NOT_FOUND_ERR?n():C()}))}),C)}),C)):void C())},y=g.prototype,v=function(e,t,n){return new g(e,t,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=m(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(y.abort=function(){var e=this;e.readyState=e.DONE,f(e,"abort")},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,v)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=s:"undefined"!=typeof n&&null!==n&&null!==n.amd&&n("FileSaver",[],function(){return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("RestoreDynamoGroupsMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t,n){var r=e.call(this,"RestoreDynamoGroupsMessage")||this;return r.workspaceGuid=t,r.groups=n,r}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SetWatch3DCameraMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t,n,r){var i=e.call(this,"SetWatch3DCameraMessage")||this;return i.workspaceGuid=t,i.nodeGuids=n,i.cameras=r,i}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("RestoreNodesPositionsMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t,n){var r=e.call(this,"RestoreNodesPositionsMessage")||this;return r.workspaceGuid=t,r.boundingBox=n,r}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SaveUploader",["require","exports","backbone","SaveFileMessage","ClearWorkspaceMessage","FileSaver","RestoreDynamoGroupsMessage","SetWatch3DCameraMessage","RestoreNodesPositionsMessage"],function(e,t,n,r,i,s,a,l,c){"use strict";var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.endsWith=function(e,t){return e.indexOf(t,e.length-t.length)>-1},t.prototype.initialize=function(e,t){this.app=e.app,this.proxyNodesDependencies=new Array,this.availableCustomNodeDefinitions=new Array,this.listenTo(this.app,"replace-old-home",this.replaceOldHome),this.listenTo(this.app,"creation-data-received:event",this.createWorkspaceWithData),this.listenTo(this.app,"saved-file-received:event",this.downloadFile),this.listenTo(this.app,"proxy-nodes-data-received:event",this.setProxyNodesDependenciesData)},t.prototype.clearHomeWorkspace=function(){var e=this.getHomeWorkspace(),t=function(e){e.set("name","Untitled"),e.set("tabName","Untitled")};this.sendStringMessage(new i(!0)),e&&this.app.get("workspaces").remove(e),this.app.newWorkspace(t)},t.prototype.replaceOldHome=function(){this.sendStringMessage(new i(!0))},t.prototype.getHomeWorkspace=function(){return this.getWorkspaceByGuid()},t.prototype.getWorkspaceByGuid=function(e){var t=this.app.get("workspaces"),n=e?t.where({guid:e}):t.where({isCustomNode:!1});return n.length?n[0]:null},t.prototype.getCurrentWorkspaceGuid=function(){var e=this.app.getCurrentWorkspace(),t=e.get("isCustomNode")?e.get("guid"):"";return t},t.prototype.synchronizeNodeCoordinates=function(){var e=this.app.getCurrentWorkspace().get("nodes");e.each(function(e){e.trigger("update-node-position"),"Number Slider"!==e.get("creationName")&&"Integer Slider"!==e.get("creationName")||e.trigger("update-slider")})},t.prototype.synchronizeWatch3DCameras=function(){var e=this.app.getCurrentWorkspace().get("nodes"),t=this.app.getCurrentWorkspace().get("guid"),n=[],r=[];e.each(function(e){var t=e.serialize();if("Watch 3D"!==t.typeName.toString())return!0;n.push(t._id);var i=t.extra.cameraData;r.push({name:i.name,eyeX:i.eyeX,eyeY:i.eyeY,eyeZ:i.eyeZ,lookX:i.lookX,lookY:i.lookY,lookZ:i.lookZ,upX:i.upX,upY:i.upY,upZ:i.upZ})}),this.sendStringMessage(new l(t,n,r))},t.prototype.saveFile=function(){var e=this.app.getCurrentWorkspace(),n=e.get("tabName"),i=e.get("isCustomNode")?".dyf":".dyn";n?t.endsWith(n.toLowerCase(),i)||(n+=i):n=(e.get("isCustomNode")?"Custom Node":"Untitled")+i,t.currentWorkspaceFileName=n,this.synchronizeNodeCoordinates(),this.synchronizeWatch3DCameras();var o=this.getCurrentWorkspaceGuid();this.sendCameraData(o),this.sendGroups(o,e.get("groups")),e.get("isShared")&&this.sendTransformedNodes(o),this.sendStringMessage(new r(o))},t.prototype.sendStringMessage=function(e){this.app.runner.post({kind:"post",message:JSON.stringify(e)})},t.prototype.sendCameraData=function(e){this.app.trigger("send-camera-info",e)},t.prototype.sendTransformedNodes=function(e){var t=this.app.getCurrentWorkspace(),n=t.get("dynamoBox"),r={minX:n[0],maxX:n[1],minY:n[2],maxY:n[3]};this.sendStringMessage(new c(e,r))},t.prototype.sendGroups=function(e,t){t&&t.length&&this.sendStringMessage(new a(e,t))},t.prototype.downloadFile=function(e){var t=new Blob([JSON.stringify(e.fileContent,null,2)],{type:"application/json"});s(t,e.fileContent.Name+".dyn")},t.prototype.createWorkspaceWithData=function(e){var t,n=this.app;for(t=0;t<e.nodes.length;t++){var r=e.nodes[t];r.typeName=r.creationName}for(t=0;t<e.connections.length;t++)e.connections[t]._id=n.makeId();var i,o=n.get("workspaces"),s=function(t){n.trigger("computation-completed:event",e),t.get("nodes").length&&n.trigger("ws-data-loaded"),this.trigger("request-workspace-browser-refresh"),e.guid&&this.setAvailableCustomNodeDefinitions(e.guid)}.bind(this),a=!!e.guid;if(i=a?o.where({guid:e.guid}):o.where({isCustomNode:!1}),i.length){var l=i[0];o.remove(l),a?n.openWorkspace(l.get("_id"),s,e):n.newWorkspace(s,e)}else a?(i=this.app.storageBrowser?this.app.storageBrowser.get("workspaces").where({guid:e.guid}):[],i.length?n.openWorkspace(i[0].get("_id"),s,e):n.newNodeWorkspace(s,null,e)):n.newWorkspace(s,e)},t.prototype.setProxyNodesDependenciesData=function(e){this.proxyNodesDependencies.indexOf(e)===-1&&this.proxyNodesDependencies.push(e),this.availableCustomNodeDefinitions.indexOf(e.customNodeId)>-1&&this.updateDependenciesAndNodes(e)},t.prototype.setAvailableCustomNodeDefinitions=function(e){this.availableCustomNodeDefinitions.indexOf(e)===-1&&this.availableCustomNodeDefinitions.push(e);var t=this.proxyNodesDependencies.filter(function(t){return t.customNodeId===e});t.length&&this.updateDependenciesAndNodes(t[0])},t.prototype.updateDependenciesAndNodes=function(e){var t,n=this.app.get("workspaces"),r=e.workspaceId?n.where({guid:e.workspaceId}):n.where({isCustomNode:!1}),i=n.where({guid:e.customNodeId});if(r.length&&i.length){var o=r[0];t=i[0].get("_id");for(var s=0;s<e.nodesIds.length;s++){var a=o.get("nodes").where({_id:e.nodesIds[s]});if(a.length){var l=a[0];l.get("extra")&&(l.get("extra").isProxy=!1,l.get("extra").functionId=t),l.set("isProxy",!1),l.get("type").functionId=t}}if(t&&o.get("workspaceDependencyIds").indexOf(t)===-1){var c=function(){o.addWorkspaceDependency(t,!0),o.syncCustomNodesWithWorkspace(t)};i[0].runner?c():this.listenToOnce(i[0],"ws-deps-are-loaded",c)}}var u=this.availableCustomNodeDefinitions.indexOf(e.customNodeId);this.availableCustomNodeDefinitions.splice(u,1),u=this.proxyNodesDependencies.indexOf(e),this.proxyNodesDependencies.splice(u,1)},t}(n.Model);return u});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("FLOOD",["require","exports"],function(e,t){"use strict";Object.defineProperty(Array.prototype,"remove",{enumerable:!1,value:function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)}});var n;return function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;for(var r in t)n[r]=t[r];return n}return o(t,e),t.wrap=function(){if(0!==arguments.length)return 1===arguments.length?arguments[0]:new t(arguments)},t}(Object);e.MultiOutResult=t;var n=function(){function e(){}return e}();e.AnyType=n;var r=function(){function e(){}return e}();e.AnyTypeButQuotedArray=r,e.characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e.currentInputChar=0,e.currentOutputChar=0;var i;!function(e){var t=function(){function e(e){e=e||{},this.replication=e.replication||"applyLongest",e.inputs?(e.inputs.forEach(function(e,t){e.parentNode=this,e.parentIndex=t}.bind(this)),this.inputs=e.inputs):this.inputs=[],e.outputs?(e.outputs.forEach(function(e,t){e.parentNode=this,e.parentIndex=t}.bind(this)),this.outputs=e.outputs):this.outputs=[],this.typeName=e.typeName||"noTypeName",this.concreteType=e.concreteType||this.typeName}return e.prototype.extend=function(e){},e.prototype.inputTypes=function(){return this.inputs.map(function(e){return e.type})},e.prototype.addInputPort=function(e,t,n){this.inputs.push(new r(e,t,n,this,this.inputs.length))},e.prototype.addOutputPort=function(e,t){this.outputs.push(new i(e,t,this,this.outputs.length))},e}();e.NodeType=t;var n=function(){function e(e,t,n,r,i,o,s){this.name=e,this.type=t,this.typeName=this.constructPortTypeName(t),this.parentNode=n,this.parentIndex=void 0!=r?r:0,this.oppNode=o,this.oppIndex=void 0!=s?s:0,this.toolTip=i}return e.prototype.constructPortTypeName=function(e){if(e){if(e instanceof Array)return e.map(this.constructPortTypeName).join(" of ");if(e.floodTypeName)return e.floodTypeName;var t=/function (.{1,})\(/,n=t.exec(e.toString());return n&&n.length>1?n[1]:""}},e}();e.NodePort=n;var r=function(e){function t(t,n,r,i,o,s,a,l){var c=e.call(this,t,n,i,o,s,a,l)||this;return c.defaultVal=r,c.useDefault=void 0!==r&&null!==r,c}return o(t,e),t}(n);e.InputPort=r;var i=function(e){function t(t,n,r,i,o,s,a){return e.call(this,t,n,r,i,o,s,a)||this}return o(t,e),t}(n);e.OutputPort=i}(i=e.BaseTypes||(e.BaseTypes={}));var s;!function(s){var l=function(s){function l(t,o,a,l,c){var u=s.call(this,{typeName:"CustomNode",concreteType:l||"Dynamo.Graph.Nodes.CustomNodes.Function, DynamoCore"})||this;return u.setNumInputs=function(e){"number"!=typeof e||e<0||this.inputs.length===e||(this.inputs.length<e&&this.addInput(),this.inputs.length>e&&this.removeInput(),this.setNumInputs(e))},u.setNumOutputs=function(e){"number"!=typeof e||e<0||this.outputs.length===e||(this.outputs.length<e&&this.addOutput(),this.outputs.length>e&&this.removeOutput(),this.setNumOutputs(e))},u.addInput=function(){var t=new i.InputPort(e.characters[this.inputs.length],[r],0);t.parentNode=this,t.parentIndex=this.inputs.length,this.inputs.push(t)}.bind(u),u.removeInput=function(){0!==this.inputs.length&&this.inputs.pop()}.bind(u),u.addOutput=function(){var t=new i.OutputPort(e.characters[this.outputs.length],[n]);t.parentNode=this,t.parentIndex=this.outputs.length,this.outputs.push(t)}.bind(u),u.removeOutput=function(){0!==this.outputs.length&&this.outputs.pop()}.bind(u),u.functionName=t,u.functionId=o,u.guid=a,u.lambda=c,u}return o(l,s),l.prototype.eval=function(){if(!this.lambda)throw new Error("The custom node is not yet compiled.");var e=Array.prototype.slice.call(arguments,0),t=[this.lambda].concat(e);return this.S.eval(t)},l.prototype.extend=function(e){e.functionName&&"string"==typeof e.functionName&&(this.functionName=e.functionName),e.functionId&&"string"==typeof e.functionId&&(this.functionId=e.functionId),e.guid&&"string"==typeof e.guid&&(this.guid=e.guid),e.numInputs&&"number"==typeof e.numInputs&&this.setNumInputs(e.numInputs),e.numOutputs&&"number"==typeof e.numOutputs&&this.setNumOutputs(e.numOutputs)},l.prototype.setInputTypes=function(e){for(var t=0;t<this.inputs.length;t++)this.inputs[t].type=e[t]},l.nodesOfType=function(e,t){return t.filter(function(t){return t instanceof e})},l.findInputTypes=function(e){var t=l.nodesOfType(a.Input,e);return t.map(function(t,i){var o=e.reduce(function(e,n){var r=n.getIndexOfInputNode(t);return r<0?e:(e.push(n.inputs[r].type),e)},[]);if(0===o.length)return r;var s=o[0],a=s.last();o.map(function(e){return e.last()}).forEach(function(e){if(e!==a&&e!==n&&e!==r)throw new TypeError("One of the inputs is connected to multiple nodes with incompatible types!")});for(var l=0,c=-1,u=o.length-1;u>=0;u--)o[u].length>l&&(c=u,l=o[u].length);return o[l]})},l.compileNodesToLambda=function(e){var n=e.filter(function(e){return e instanceof a.Input}),r=e.filter(function(e){return e instanceof a.Output}),i=n.map(function(e){return e.compile()}),o=r.map(function(e){return e.compile()}),s=o.length>1?[t.wrap()].concat(o):o[0];return e.forEach(function(e){e.alwaysDirty=!0}),["lambda",i,s]},l}(i.NodeType);s.CustomNode=l}(s=e.InternalNodeTypes||(e.InternalNodeTypes={}));var a;!function(t){var s=function(e){function t(n){var r=this,o={outputs:[new i.OutputPort("⇒",[t])],typeName:"Number",concreteType:n};return r=e.call(this,o)||this,r.lastValue=0,r}return o(t,e),t.prototype.extend=function(e){void 0!=e.value&&"number"==typeof e.value?this.lastValue=e.value:this.lastValue=0},t}(i.NodeType);t.Number=s;var a=function(e){function t(t,r,o){var s=this,a=[],l=[];t?t.forEach(function(e){a.push(new i.InputPort(e.name||"⇒",[e.type?{floodTypeName:e.type}:n],e.defaultValue,void 0,void 0,e.toolTip))}):a.push(new i.InputPort("A",[n],0)),r?r.forEach(function(e){l.push(new i.OutputPort(e.name||"⇒",[n],void 0,void 0,e.toolTip))}):l.push(new i.OutputPort("⇒",[n]));var c={inputs:a,outputs:l,typeName:"ServerNode",concreteType:o};return s=e.call(this,c)||this}return o(t,e),t.prototype.setInputs=function(e){for(var t,n=0,r=e.length,i=this.inputs.length;n<r;n++)t=e[n]?e[n]:"A",i>n?this.inputs[n].name=t:this.addInput(t);if(i>r)for(n=0;n<i-r;n++)this.removeInput()},t.prototype.setOutputs=function(e){for(var t,n=0,r=e.length,i=this.outputs.length;n<r;n++)t="⇒",i>n?this.outputs[n].name=t:this.addOutput(t);if(i>r)for(n=0;n<i-r;n++)this.removeOutput()},t.prototype.addInput=function(e,t,r){var o=new i.InputPort(e,[t?{floodTypeName:t}:n],void 0,this,this.inputs.length,r);this.inputs.push(o)},t.prototype.removeInput=function(){0!==this.inputs.length&&this.inputs.pop()},t.prototype.addOutput=function(e,t){var r=new i.OutputPort(e,[n],this,this.outputs.length,t);this.outputs.push(r)},t.prototype.removeOutput=function(){0!==this.outputs.length&&this.outputs.pop()},t.prototype.eval=function(){return 1},t}(i.NodeType);t.ServerNode=a;var l=function(t){function n(n,o){var s=this,a={typeName:"Input",outputs:[new i.OutputPort("⇒",[r])],concreteType:o||"Dynamo.Graph.Nodes.CustomNodes.Symbol, DynamoCore"};return s=t.call(this,a)||this,void 0===n&&(n=e.characters[e.currentInputChar++]),s.name=n,s}return o(n,t),n.prototype.compile=function(){return this.name},n.prototype.printExpression=function(){return this.name},n}(i.NodeType);t.Input=l;var c=function(t){function r(r,o){var s=this,a={inputs:[new i.InputPort("⇒",[n])],typeName:"Output",concreteType:o||"Dynamo.Graph.Nodes.CustomNodes.Output, DynamoCore"};return s=t.call(this,a)||this,void 0===r&&(r=e.characters[e.currentInputChar++]),s.name=r,s}return o(r,t),r}(i.NodeType);t.Output=c}(a=e.NodeTypes||(e.NodeTypes={}))}(n||(n={})),n}),n("staticHelpers",["require","exports"],function(e,t){"use strict";var n=["Number","String","Boolean"],r=["Input","Output"],i=function(){function e(){}return e.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.mapNode=function(e){var t={_id:e._id,creationName:e.creationName,name:e.displayName,position:e.position,ignoreDefaults:e.ignoreDefaults,replication:e.replication,visible:e.isGeometryVisible,isFrozen:e.isFrozen,isPinned:e.isPinned,isCustomNode:!1,extra:{}};if(n.indexOf(e.creationName)>-1)t.extra={value:e.value};else if(r.indexOf(e.creationName)>-1)t.extra={name:e.value};else if(e.value){var i=JSON.parse(e.value);t.extra=i,i.Code&&(t.extra.code=i.Code),i.Script&&(t.extra.script=i.Script),t.extra.inputs=i.InPorts,t.extra.outputs=i.OutPorts,i.LineIndices&&(t.extra.lineIndices=i.LineIndices),e.isCustomNode&&(t.isCustomNode=!0,t.extra.creationName=e.creationName,t.creationName="CustomNode",t.extra.functionName=e.displayName,t.extra.displayName=e.displayName,t.extra.numInputs=i.InPorts.length,t.extra.numOutputs=i.OutPorts.length)}return t},e.generatePortNames=function(e){var t=[],n="A",r=0,i=0;for(r=n.charCodeAt(0)+e,i=n.charCodeAt(0);i<r;i++)t.push(String.fromCharCode(i));return t},e.getArrayFromBase64string=function(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},e.getByteArray=function(e){return this.getArrayFromBase64string(e)},e.getIntArray=function(e){var t=this.getArrayFromBase64string(e).buffer;return new Int32Array(t)},e.getFloatArray=function(e){var t=this.getArrayFromBase64string(e).buffer;return new Float32Array(t)},e.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.getPrettyDate=function(e){var t=((new Date).getTime()-e.getTime())/1e3,n=Math.floor(t/86400);if(!(isNaN(n)||n<0||n>=31))return 0==n&&(t<60&&"just now"||t<120&&"1 minute ago"||t<3600&&Math.floor(t/60)+" minutes ago"||t<7200&&"1 hour ago"||t<86400&&Math.floor(t/3600)+" hours ago")||1==n&&"Yesterday"||n<7&&n+" days ago"||n<31&&Math.ceil(n/7)+" weeks ago"},e.parseURL=function(e){var t=document.createElement("a");return t.href=e,{protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash}},e.getIdFromURL=function(e,t){var n=e.split(t);if(n.length>1)return n[n.length-1]},e.getSourceScriptPath=function(){if(window&&window.location&&void 0!==window.location.href){var e=document.querySelectorAll("script[src]");if(e.length>0)return e[e.length-1].src}},e.getCurrentProtocol=function(e){if(e){var t=e.split("/");if(t.length>0)return t[0]}},e.getFilePath=function(e,t){if(e){var n=this.getCurrentProtocol(e);if("file:"==n){var r=e.indexOf(t);if(r>0)return e.substring(0,r)}}},e.removeDashes=function(e){return e.replace(/-/g,"")},e}();return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("GetArrayItemsMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t){var n=e.call(this,"GetNodeArrayItemsMessage")||this;return n.nodeId=t.nodeId,n.indexFrom=t.indexFrom,n.length=t.numberToRequest,n}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ArrayItem",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"isCollection",{get:function(){return this.get("isCollection")},set:function(e){this.set("isCollection",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemDescription",{get:function(){return this.get("itemDescription")},set:function(e){this.set("itemDescription",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subItems",{get:function(){return this.get("subItems")},set:function(e){this.set("subItems",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arrayIndex",{get:function(){return this.get("arrayIndex")},set:function(e){this.set("arrayIndex",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arrayLength",{get:function(){return this.get("arrayLength")},set:function(e){this.set("arrayLength",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemTotalRecursive",{get:function(){return this.get("itemTotalRecursive")},set:function(e){this.set("itemTotalRecursive",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elementTotalRecursive",{get:function(){return this.get("elementTotalRecursive")},set:function(e){this.set("elementTotalRecursive",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indent",{get:function(){return this.get("indent")},set:function(e){this.set("indent",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalIndex",{get:function(){return this.get("globalIndex")},set:function(e){this.set("globalIndex",e)},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{isCollection:!1,itemDescription:"",subItems:[],arrayIndex:0,arrayLength:0,itemTotalRecursive:0,elementTotalRecursive:0,indent:0,globalIndex:0}},t.prototype.initialize=function(e,n){if(n){var r=n.initialData;if(r&&r.constructor===Array){var i=n.listTreeData;this.itemTotalRecursive=parseInt(i[1]),this.elementTotalRecursive=parseInt(i[2]),this.itemDescription="List",(r.length||this.itemTotalRecursive)&&(this.isCollection=!0,this.arrayLength=parseInt(i[0]));for(var o=[],s=0;s<r.length;s++){var a=new t({arrayIndex:s},{initialData:r[s],listTreeData:i[3][s]});o.push(a)}this.subItems=o}else void 0===r?this.itemDescription="undefined":null===r?this.itemDescription="null":this.itemDescription=r.toString()}},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("BaseNode",["require","exports","backbone","FLOOD","staticHelpers","GetArrayItemsMessage","ArrayItem"],function(e,t,n,r,i,s,a){"use strict";var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initialArrayItemRequestAmount=500,t.arrayRequestReRun=!1,t}return o(t,e),Object.defineProperty(t.prototype,"idAttribute",{get:function(){return"_id"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.get("_id")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.get("name")},set:function(e){this.set("name",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.get("position")},set:function(e){this.set("position",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typeName",{get:function(){return this.get("typeName")},set:function(e){this.set("typeName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"creationName",{get:function(){return this.get("creationName")},set:function(e){this.set("creationName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.get("description")},set:function(e){this.set("description",e)},enumerable:!0,configurable:!0
}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this.get("displayName")},set:function(e){this.set("displayName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.get("type")},set:function(e){this.set("type",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputConnections",{get:function(){return this.get("inputConnections")},set:function(e){this.set("inputConnections",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputConnections",{get:function(){return this.get("outputConnections")},set:function(e){this.set("outputConnections",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.get("selected")},set:function(e){this.set("selected",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodePortData",{get:function(){return this.get("nodePortData")},set:function(e){this.set("nodePortData",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isArray",{get:function(){return this.get("isArray")},set:function(e){this.set("isArray",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arrayItems",{get:function(){return this.get("arrayItems")},set:function(e){this.set("arrayItems",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arrayItemTotals",{get:function(){return this.get("arrayItemTotals")},set:function(e){this.set("arrayItemTotals",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{get:function(){return this.get("numItems")},set:function(e){this.set("numItems",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDepth",{get:function(){return this.get("maxDepth")},set:function(e){this.set("maxDepth",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numElements",{get:function(){return this.get("numElements")},set:function(e){this.set("numElements",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastValue",{get:function(){return this.get("lastValue")},set:function(e){this.set("lastValue",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"failureMessage",{get:function(){return this.get("failureMessage")},set:function(e){this.set("failureMessage",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"persistentFailureMessage",{get:function(){return this.get("persistentFailureMessage")},set:function(e){this.set("persistentFailureMessage",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasGeometry",{get:function(){return this.get("hasGeometry")},set:function(e){this.set("hasGeometry",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.get("visible")},set:function(e){this.set("visible",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"replication",{get:function(){return this.get("replication")},set:function(e){this.set("replication",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extra",{get:function(){return this.get("extra")},set:function(e){this.set("extra",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ignoreDefaults",{get:function(){return this.get("ignoreDefaults")},set:function(e){this.set("ignoreDefaults",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEvaluating",{get:function(){return this.get("isEvaluating")},set:function(e){this.set("isEvaluating",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isProxy",{get:function(){return this.get("isProxy")},set:function(e){this.set("isProxy",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFrozen",{get:function(){return this.get("isFrozen")},set:function(e){this.set("isFrozen",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPinned",{get:function(){return this.get("isPinned")},set:function(e){this.set("isPinned",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFrozenByUpstream",{get:function(){return this.get("isFrozenByUpstream")},set:function(e){this.set("isFrozenByUpstream",e)},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{name:"DefaultNodeName",position:[10,10],typeName:"Add",creationName:"Add",displayName:"Add",description:"a Node",type:null,inputConnections:[],outputConnections:[],selected:!0,isArray:!1,arrayItems:null,numItems:null,maxDepth:null,numElements:null,arrayItemTotals:[],lastValue:null,failureMessage:null,persistentFailureMessage:null,hasGeometry:!1,visible:!0,replication:"applyAuto",extra:{},ignoreDefaults:[],isEvaluating:!1,isProxy:!1,isFrozen:!1,isPinned:!1}},t.prototype.initialize=function(e,t){var n=this.findConcreteType(t,"Unknown ConcreteType");if(e.typeName&&r.NodeTypes[e.typeName])this.type=new r.NodeTypes[e.typeName](n),this.creationName=e.typeName,this.displayName=e.typeName,this.description=this.displayName;else if(e.typeName&&r.InternalNodeTypes[e.typeName])this.type=new r.InternalNodeTypes[e.typeName],this.creationName=e.extra.creationName,this.displayName=e.extra.displayName,this.description=e.extra.description||this.displayName;else{var i=this.generateDefaultPorts(e,t).inputs,o=this.generateDefaultPorts(e,t).outputs;t.searchElement&&(i=t.searchElement.InPorts,o=t.searchElement.OutPorts,this.displayName=t.searchElement.DisplayName,this.creationName=t.searchElement.CreationName,this.description=t.searchElement.Description),this.type=new r.NodeTypes.ServerNode(i,o,n)}this.initAttrs(e,t)},t.prototype.generateDefaultPorts=function(e,t){return!t.SearchElement&&this.get("DynMetaData")?{inputs:_.map(this.get("DynMetaData").inputs,function(e){return{name:e.Name,type:null,defaultValue:null,toolTip:e.Description}}),outputs:_.map(this.get("DynMetaData").outputs,function(e){return{name:e.Name,type:null,defaultValue:null,toolTip:e.Description}})}:!t.searchElement&&e.ignoreDefaults?{inputs:_.map(i.generatePortNames(e.ignoreDefaults.length),function(e){return{name:e,type:null,defaultValue:null,toolTip:null}}),outputs:[]}:{inputs:[],outputs:[]}},t.prototype.findConcreteType=function(e,t){var n=this.get("DynMetaData")?this.get("DynMetaData").concreteType:t;return e&&e.searchElement&&(n=e.searchElement.ConcreteType),n},t.prototype.initAttrs=function(e,t){if(e.name&&"DefaultNodeName"!==e.name||this.set("name",this.get("displayName")),e.extra?(this.get("type").extend(e.extra),e.extra.isProxy?this.set("isProxy",!0):this.set("isProxy",!1)):this.set("isProxy",!1),e.lastValue&&(this.get("type").value=e.lastValue),e.ignoreDefaults&&e.ignoreDefaults.length>0&&this.get("type").inputs.length===e.ignoreDefaults.length)for(var n=0;n<e.ignoreDefaults.length;n++)this.get("type").inputs[n].useDefault=!e.ignoreDefaults[n];else e.ignoreDefaults=this.get("type").inputs.map(function(e){return!e.useDefault});this.isFrozenByUpstream=!1,this.set("ignoreDefaults",e.ignoreDefaults),this.set("nodePortData",e.nodePortData),this.listenTo(this,"remove",this.onRemove),this.initializePorts(),this.listenTo(this,"change:extra",this.onChangedExtra)},t.prototype.onChangedExtra=function(){this.trigger("update-node"),this.trigger("requestRun")},t.prototype.serialize=function(){var e={name:this.get("name"),position:this.get("position"),typeName:this.get("typeName"),creationName:this.get("creationName"),displayName:this.get("displayName"),selected:this.get("selected"),visible:this.get("visible"),ignoreDefaults:this.get("ignoreDefaults"),_id:this.get("_id"),replication:this.get("replication"),extra:this.get("extra"),isFrozen:this.get("isFrozen"),isPinned:this.get("isPinned"),nodePortData:this.get("nodePortData")};return e},t.prototype.initializePorts=function(){var e=this.get("type");this.set("inputConnections",new Array(e.inputs.length)),this.set("outputConnections",new Array(e.outputs.length))},t.prototype.updateValue=function(e){if("ExecutedNode"==e.$type){if(e.data)if(null!=e.numItems){if(this.numItems=parseInt(e.numItems),this.maxDepth=parseInt(e.maxDepth),this.numElements=parseInt(e.numElements),this.arrayItemTotals=e.totals?JSON.parse(e.totals):[],this.isArray=!1,this.numElements){this.currentArrayItemRequestAmount=this.arrayRequestReRun?this.numElements:Math.min(this.numElements,this.initialArrayItemRequestAmount);var t={indexFrom:0,numberToRequest:this.currentArrayItemRequestAmount,nodeId:this.get("_id")};this.trigger("request-array-items",new s(t))}this.numItems?this.lastValue="List":this.lastValue="Empty List"}else null!==e.data&&(this.lastValue=e.data,this.numItems=null,this.maxDepth=null,this.numElements=null,this.arrayItemTotals=[],this.isArray=!1,this.lastValue=e.data);e.containsGeometryData!==this.hasGeometry&&(this.hasGeometry=e.containsGeometryData),this.arrayItems=null,"PersistentWarning"==e.state?(this.persistentFailureMessage=e.stateMessage,this.trigger("evalWarning",this.persistentFailureMessage)):"Warning"===e.state?this.trigger("evalWarning",e.stateMessage):"Error"===e.state?this.trigger("evalFailed",e.stateMessage):this.persistentFailureMessage?this.trigger("evalWarning",this.persistentFailureMessage):"Active"!==e.state||this.isFrozen||(this.failureMessage=null,this.trigger("evalBegin")),this.trigger("requestRender")}},t.prototype.updateArrayItems=function(){this.currentArrayItemRequestAmount=this.numElements;var e={indexFrom:0,numberToRequest:this.currentArrayItemRequestAmount,nodeId:this.get("_id")};this.trigger("request-array-items",new s(e))},t.prototype.appendArrayItems=function(e){if(e.indexFrom===-1)this.isArray=!1,this.arrayItems=null,this.arrayRequestReRun=!0,this.trigger("requestRun");else{var t=e.items?JSON.parse(e.items):[];this.set("arrayItems",new a({},{initialData:t,listTreeData:this.arrayItemTotals})),this.set("isArray",!0),this.arrayRequestReRun=!1}this.trigger("requestRender")},t.prototype.onRemove=function(){this.trigger("removed")},t.prototype.select=function(){this.selected=!1},t.prototype.deselect=function(){this.selected=!0},t.prototype.getPorts=function(e){return e?this.get("outputConnections"):this.get("inputConnections")},t.prototype.isPortConnected=function(e,t){if(!this.isValidPort(e,t))return!0;var n=this.getPorts(t);return null!=n[e]&&n[e].length>0},t.prototype.isPartialFunctionApplication=function(){for(var e=this.get("inputConnections").length,t=0;t<e;t++)if(!this.isPortConnected(t,!1)&&!this.isInputPortUsingDefault(t))return!0;return!1},t.prototype.isInputPortUsingDefault=function(e){return!!this.isValidPort(e,!1)&&!this.get("ignoreDefaults")[e]},t.prototype.getPortType=function(e,t){if(e<0)return null;var n=this.get("type"),r=t?n.outputs:n.inputs;return r.length>e?r[e].type:null},t.prototype.isValidPort=function(e,t){return null!=this.getPortType(e,t)},t.prototype.getOppositeNodeAndPort=function(e,t){return this.isValidPort(e,t)?this.getPorts(t)[e]:null},t.prototype.isOutputNode=function(){return this.get("outputConnections").reduce(function(e,t){return e&&0===t.length},!0)},t.prototype.connectPort=function(e,t,n){return this.isValidPort(e,t)?(this.getPorts(t)[e]||(this.getPorts(t)[e]=[]),this.getPorts(t)[e].push(n),this.listenTo(n,"remove",function(){return function(){this.disconnectPort(e,n,t)}.bind(this)}.bind(this)()),this.trigger("connection",e,t,n),this.trigger("change"),this):null},t.prototype.getConnectionAtIndex=function(e,t,n){var r=this.getAllConnectionsAtPort(e,t);return null==r?null:(void 0===n&&(n=0),n>=r.length||n<0?null:r[n])},t.prototype.getAllConnectionsAtPort=function(e,t){return this.isValidPort(e,t)?(void 0===t&&(t=!1),this.getPorts(t)[e]):null},t.prototype.disconnectPort=function(e,t,n){var r,i=-1;this.isValidPort(e,n)&&(r=this.getPorts(n)[e],r&&(t?i=r.indexOf(t):!n&&r.length>0&&(i=0,t=r[0],n=!1,this.trigger("request-remove-conn-from-collection",t)),i!==-1&&(r.remove(i),this.trigger("disconnection",e,n,t),this.trigger("change"))))},t}(n.Model);return l});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Nodes",["require","exports","backbone","BaseNode"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.getTransfCoordinates=function(e,n,r){var i=(r-e)/(n-e);return t.maxSize*i},t.prototype.initialize=function(e,t){this.model=r,this.initialDragPositions=[]},t.prototype.toJSON=function(){return this.models.map(function(e){return e.serialize()})},t.prototype.selectAll=function(){this.where({selected:!1}).forEach(function(e){e.set({selected:!0})})},t.prototype.deselectAll=function(){this.where({selected:!0}).forEach(function(e){e.set("selected",!1)})},t.prototype.moveSelected=function(e){var t=0;this.where({selected:!0}).forEach(function(n,r){var i=this.initialDragPositions[t++];n.set("position",[i[0]+e[0],i[1]+e[1]])}.bind(this))},t.prototype.startDragging=function(){this.initialDragPositions=[],this.where({selected:!0}).forEach(function(e){this.initialDragPositions.push(e.get("position"))}.bind(this))},t.prototype.transformCoordinates=function(e){var n=0,r=0;e.minX<0?n=Math.abs(e.minX):e.maxX>t.maxSize&&(n=-1*Math.abs(t.maxSize-e.maxX)),e.minY<0?r=Math.abs(e.minY):e.maxY>t.maxSize&&(r=-1*Math.abs(t.maxSize-e.maxY)),this.forEach(function(i){var o=[];o[0]=Math.abs(e.minX-e.maxX)>t.maxSize?t.getTransfCoordinates(e.minX,e.maxX,i.get("position")[0]):i.get("position")[0]+n,o[1]=Math.abs(e.minY-e.maxY)>t.maxSize?t.getTransfCoordinates(e.minY,e.maxY,i.get("position")[1]):i.get("position")[1]+r,i.set("position",o)})},t.prototype.getDraggingResult=function(){var e=[],t=0;return this.where({selected:!0}).forEach(function(n){var r=this.initialDragPositions[t++],i=n.get("position");e.push({property:"position",_id:n.get("_id"),oldValue:r,newValue:i})}.bind(this)),e},t.maxSize=19e3,t}(n.Collection);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Connection",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"idAttribute",{get:function(){return"_id"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startNodeId",{get:function(){return this.get("startNodeId")},set:function(e){this.set("startNodeId",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endNodeId",{get:function(){return this.get("endNodeId")},set:function(e){this.set("endNodeId",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPortIndex",{get:function(){return this.get("startPortIndex")},set:function(e){this.set("startPortIndex",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPortIndex",{get:function(){return this.get("endPortIndex")},set:function(e){this.set("endPortIndex",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isProxy",{get:function(){return this.get("isProxy")},set:function(e){this.set("isProxy",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isConnectionFromOutPort",{get:function(){return this.get("isConnectionFromOutPort")},set:function(e){this.set("isConnectionFromOutPort",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proxyPosition",{get:function(){return this.get("proxyPosition")},set:function(e){this.set("proxyPosition",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this.get("hidden")},set:function(e){this.set("hidden",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFrozen",{get:function(){return this.get("isFrozen")},set:function(e){this.set("isFrozen",e)},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{startNodeId:0,endNodeId:0,startPortIndex:0,endPortIndex:0,isProxy:!1,isConnectionFromOutPort:!1,proxyPosition:[0,0],hidden:!1,isFrozen:!1}},t.prototype.initialize=function(e,t){if(this.startNode=null,this.endNode=null,this.silentRemove=!1,t&&t.startNode){var n=t.startNode.isFrozen||t.startNode.isFrozenByUpstream;this.set("isFrozen",n)}e.isProxy||(this.startNode=t.startNode,this.endNode=t.endNode)},t.prototype.getOpposite=function(e){return e===this.startNode?{node:this.endNode,portIndex:this.get("endPortIndex")}:e===this.endNode?{node:this.startNode,portIndex:this.get("startPortIndex")}:{node:null,portIndex:-1}},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Connections",["require","exports","backbone","Connection"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){this.model=r},t}(n.Collection);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Marquee",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"idAttribute",{get:function(){return"_id"},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{x:10,y:10,width:50,height:50,hidden:!0}},t.prototype.initialize=function(e,t){this.workspace=t.workspace,this.startCorner=[10,10],this.endCorner=[20,20]},t.prototype.updateRawValues=function(){this.set("width",Math.abs(this.startCorner[0]-this.endCorner[0])),this.set("height",Math.abs(this.startCorner[1]-this.endCorner[1])),this.set("x",Math.min(this.startCorner[0],this.endCorner[0])),this.set("y",Math.min(this.startCorner[1],this.endCorner[1]))},t.prototype.setStartCorner=function(e){this.startCorner=e,this.endCorner=e,this.updateRawValues()},t.prototype.setEndCorner=function(e){this.endCorner=e,this.updateRawValues()},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("WorkspaceResolver",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"dependenciesLoaded",{get:function(){return this.get("dependenciesLoaded")},set:function(e){this.set("dependenciesLoaded",e)},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e,t){this.workspace=t.workspace,this.workspaces=t.workspaces,this.awaitedWorkspaceDependencyIds=null,this.watchedDependencies={},this.dependenciesLoaded=!1},t.prototype.resolveAll=function(){this.initializeDependencies(this.workspace.workspaceDependencyIds)},t.prototype.initializeDependencies=function(e){var t=this;return e&&0!==e.length?(this.awaitedWorkspaceDependencyIds=[],console.log(this.workspace.name+" has dependencies: "+JSON.stringify(e)),this.listenTo(this.workspaces,"add",this.resolveDependency),void e.forEach(function(e){t.awaitOrResolveDependency(e)})):(console.log(this.workspace.name+" has no dependencies"),this.dependenciesLoaded=!0,this.workspace.runAllowed=!0,void this.workspace.trigger("requestRun"))},t.prototype.cleanupDependencies=function(){this.workspace.workspaceDependencyIds=this.workspace.regenerateDependencies()},t.prototype.awaitOrResolveDependency=function(e){var t=this.workspaces.get(e);return this.awaitedWorkspaceDependencyIds.push(e),t?t.resolver.dependenciesLoaded?void this.resolveDependency(t):void this.listenToOnce(t,"ws-deps-are-loaded",this.resolveDependency):void this.workspace.storageBrowser.trigger("loadWorkspaceDependency",e)},t.prototype.resolveDependency=function(e){if(e.id!==this.workspace.id&&!this.dependenciesLoaded){if(!e.resolver.dependenciesLoaded)return void this.listenToOnce(e,"ws-deps-are-loaded",this.resolveDependency);var t=this.awaitedWorkspaceDependencyIds.indexOf(e.id);t>=0&&(this.awaitedWorkspaceDependencyIds.remove(t),this.watchOneDependency(e),this.syncCustomNodesWithWorkspace(e)),0===this.awaitedWorkspaceDependencyIds.length&&(this.dependenciesLoaded=!0,this.workspace.runAllowed=!0,this.workspace.trigger("requestRun"),this.cleanupDependencies(),this.workspaces.get(this.workspace.id)&&this.workspace.trigger("ws-deps-are-loaded",this.workspace),this.stopListening(this.workspaces,"add"))}},t.prototype.addWorkspaceDependency=function(e,t){var n=this.workspaces.get(e);if(!n)throw new Error("You tried to add an unloaded workspace as a dependency!");var r=n.get("workspaceDependencyIds"),i=this.workspace.get("workspaceDependencyIds"),o=_.union([e],i,r);this.workspace.set("workspaceDependencyIds",o),t&&this.watchDependency(e)},t.prototype.watchDependency=function(e){var t=this.workspaces.get(e),n=t.workspaceDependencyIds.concat(e);n.forEach(function(e){this.watchOneDependency(e)}.bind(this))},t.prototype.watchOneDependency=function(e){if(e.id||(e=this.workspaces.get(e)),!this.watchedDependencies[e.id]){this.watchedDependencies[e.id]=!0;var t=function(){this.syncCustomNodesWithWorkspace(e)}.bind(this),n=function(){this.syncCustomNodesWithWorkspace(e),this.workspace.trigger("requestRun")}.bind(this),r=function(){this.syncCustomNodesWithWorkspace(e),this.workspace.trigger("updateRunner")}.bind(this);this.listenTo(e,"change:name",t),this.listenTo(e,"change:workspaceDependencyIds",t),this.listenTo(e,"requestRun",n),this.listenTo(e,"updateRunner",r)}},t.prototype.syncCustomNodesWithWorkspace=function(e){"string"==typeof e&&(e=this.workspaces.get(e)),this.syncDependencies(e),this.syncDirectlyAffectedCustomNodesWithWorkspace(e),this.syncIndirectlyAffectedCustomNodesWithWorkspace(e)},t.prototype.syncDependencies=function(e){var t=this.workspace.get("workspaceDependencyIds"),n=e.get("workspaceDependencyIds"),r=_.difference(n,t);r.forEach(function(e){this.addWorkspaceDependency(e,!0)}.bind(this))},t.prototype.syncDirectlyAffectedCustomNodesWithWorkspace=function(e){var t=this.workspace.getCustomNodesWithId(e.id),n=e.getCustomNodeInputsOutputs(!1),r=e.getCustomNodeInputsOutputs(!0);t.forEach(function(t){var i=t.get("inputConnections"),o=n.length-i.length;if(o>0)for(var s=0;s<o;s++)i.push([]);else for(var s=0;s<-o;s++){var a=t.getConnectionAtIndex(i.length-1);null!=a&&this.workspace.removeConnection(a),i.pop()}var l=t.get("outputConnections"),c=r.length-l.length;if(c>0)for(var s=0;s<c;s++)l.push([]);else for(var s=0;s<-c;s++){var u=t.get("outputConnections").last();u&&u.slice(0).forEach(function(e){this.workspace.removeConnection(e)}.bind(this)),l.pop()}t.get("type").functionName=e.get("name"),t.get("type").setNumInputs(n.length),t.get("type").setNumOutputs(r.length),t.set("displayedName",e.get("name"));var p=JSON.parse(JSON.stringify(t.get("extra")));p.numInputs=n.length,p.numOutputs=r.length,p.functionName=e.get("name"),p.inputNames=n.map(function(e,t){var n=e.get("extra");return void 0!==n&&n.name&&""!==n.name?n.name:String.fromCharCode(97+t)}),p.inputNames.forEach(function(e,n){var r=t.get("type").inputs[n];r.name=e,r.toolTip=e}),p.outputNames=r.map(function(e,t){var n=e.get("extra");return void 0!==n&&n.name&&""!==n.name?n.name:String.fromCharCode(97+t)}),p.outputNames.forEach(function(e,n){var r=t.get("type").outputs[n];r.name=e,r.toolTip=e}),t.set("extra",p),t.trigger("requestRender")}.bind(this)),t.length>0&&this.workspace.sync("update",this.workspace,null)},t.prototype.syncIndirectlyAffectedCustomNodesWithWorkspace=function(e){var t=this.getIndirectlyAffectedCustomNodes(e.id);t.length&&this.workspace.sync("update",this.workspace,null)},t.prototype.getIndirectlyAffectedCustomNodes=function(e){var t=this.workspace.getCustomNodes();return t.filter(function(t){var n=t.get("type").functionId,r=this.workspaces.get(n);if(!r)return!1;var i=r.get("workspaceDependencyIds");return n!=e&&i.indexOf(e)!=-1}.bind(this))},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("NumberNode",["require","exports","BaseNode"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){n.prototype.initialize.call(this,e,t),this.set("replication","applyDisabled")},t.prototype.updateValue=function(){},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CodeBlockNode",["require","exports","BaseNode","FLOOD"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){var n=[],i=[];if(e.extra&&e.extra.inputs){var o=[];e.extra.oldInputs=e.extra.inputs;for(var s=0;s<e.extra.inputs.length;s++){var a=e.extra.oldInputs[s].replace(/['"]+/g,"");o.push(a)}e.extra.oldInputs=o,n=e.extra.inputs.map(function(e){return{name:e,type:null,defaultValue:null,toolTip:e}})}if(e.extra&&e.extra.outputs){var l=[];e.extra.oldOutputs=e.extra.outputs;for(var s=0;s<e.extra.outputs.length;s++){var a=e.extra.oldOutputs[s].replace(/['"]+/g,"");l.push(a)}e.extra.oldOutputs=l,i=e.extra.outputs.map(function(e){return{name:"⇒",type:null,defaultValue:null,toolTip:e}})}var c=this.findConcreteType(t,"Code Block");this.type=new r.NodeTypes.ServerNode(n,i,c),this.creationName="Code Block",this.displayName="Code Block",this.description=t.searchElement.Description,this.lastValue="",this.set("showLockCheckbox",!0),this.failureMessage||(this.failureMessage=""),this.extra||(this.extra={}),this.initAttrs(e,t)},t.prototype.updateData=function(e){var t=e.data,r=!1,i=JSON.parse(JSON.stringify(this.get("extra")));t.code&&i.code!==t.code&&(i.code=t.code,r=!0),(!i.lineIndices&&t.lineIndices.length||i.lineIndices&&!i.lineIndices.equals(t.lineIndices))&&(i.lineIndices=t.lineIndices,r=!0),i.inputs||(i.inputs=[]),i.oldInputs=i.inputs,i.inputs.equals(t.inPorts)||(i.inputs=t.inPorts,r=!0),i.outputs||(i.outputs=[]),i.oldOutputs=i.outputs,i.outputs.equals(t.outPorts)||(i.outputs=t.outPorts,r=!0),e.data=t,n.prototype.updateValue.call(this,e),r?(this.set("extra",i),this.trigger("connections-update")):this.trigger("cbn-up-to-date")},t}(n);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("StringNode",["require","exports","BaseNode"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.updateValue=function(){},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("BooleanNode",["require","exports","BaseNode"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.updateValue=function(){},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("VariableInputNode",["require","exports","BaseNode","FLOOD"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){var n,i,o,s;if(e.extra&&e.extra.varInputs){var a=e.extra.varInputs;n=a.map(function(e){return{name:e.name,type:e.type,defaultValue:null,toolTip:e.type}})}else t.searchElement&&(n=t.searchElement.InPorts);var l=this.findConcreteType(t,"Variable Input Node");if(t.searchElement&&(o=t.searchElement.OutPorts,this.displayName=t.searchElement.DisplayName,this.creationName=t.searchElement.CreationName,this.description=t.searchElement.Description,i=t.searchElement.InPorts,Array.isArray(i))){this.set("inPortMinimum",i.length),s=i.slice(-1)[0];var c=s.name.slice(-1),u=isNaN(parseInt(c))?0:parseInt(c),p=i.length-1-u;this.set("inPortVariableIndexOffset",p)}this.type=new r.NodeTypes.ServerNode(n,o,l),this.set("lastValue",""),this.failureMessage||(this.failureMessage=""),this.extra||(this.extra={}),this.displayName||(this.displayName=""),this.get("inPortMinimum")||this.set("inPortMinimum",1),this.get("inPortVariableIndexOffset")||this.set("inPortVariableIndexOffset",0),this.initAttrs(e,t)},t}(n);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("PythonScriptNode",["require","exports","VariableInputNode"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){n.prototype.initialize.call(this,e,t);var r=JSON.parse(JSON.stringify(this.get("extra")));r.script||(r.script="import clr\nclr.AddReference('ProtoGeometry')\nfrom Autodesk.DesignScript.Geometry import *\n#The inputs to this node will be stored as a list in the IN variable.\ndataEnteringNode = IN\n\n#Assign your output to the OUT variable\nOUT = 0",this.set("extra",r))},t.prototype.updateData=function(e){var t=JSON.parse(e.data),r=JSON.parse(JSON.stringify(this.get("extra")));n.prototype.updateValue.call(this,e),t.Script&&(r.script=t.Script,this.set("extra",r))},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("FormulaNode",["require","exports","BaseNode","FLOOD"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){var n=[],i=[];
e.extra&&e.extra.inputs&&(e.extra.oldInputs=e.extra.inputs,n=e.extra.inputs.map(function(e){return{name:e,type:"number",defaultValue:null,toolTip:"variable"}}),i=e.extra.outputs.map(function(e){return{name:"⇒",type:"number",defaultValue:null,toolTip:e}}));var o=this.findConcreteType(t,"Formula");this.set("type",new r.NodeTypes.ServerNode(n,i,o)),this.set("creationName","Formula"),this.set("displayName","Formula"),this.set("lastValue",""),this.failureMessage||(this.failureMessage=""),this.get("extra")||this.set("extra",{}),this.initAttrs(e,t)},t.prototype.updateData=function(e){var t=e.data;t.script=e.formulaString;var r=!1,i=JSON.parse(JSON.stringify(this.get("extra")));t.script&&i.script!==t.script&&(i.script=t.script,r=!0),i.inputs||(i.inputs=[]),i.oldInputs=i.inputs,i.inputs.equals(t.inPorts)||(i.inputs=t.inPorts,r=!0),i.outputs||(i.outputs=[]),e.data=t.data,n.prototype.updateValue.call(this,e),r?(this.set("extra",i),this.trigger("connections-update")):this.trigger("cbn-up-to-date")},t}(n);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ConvertNode",["require","exports","BaseNode"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"unitSource",{get:function(){return this.get("unitSource")},set:function(e){this.set("unitSource",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultValues",{get:function(){return this.get("defaultValues")},set:function(e){this.set("defaultValues",e)},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e,t){n.prototype.initialize.apply(this,arguments);var r=t.searchElement&&t.searchElement.extra;r?(this.unitSource=r.unitSource,this.defaultValues={},r.defaultValues.forEach(function(e){this[e.metric]=e.value}.bind(this.defaultValues))):(this.unitSource=[{metric:"Length",values:["Feet","Inches","Millimeters","Centimeters","Meters","Decimeters"]},{metric:"Area",values:["SquareMeter","SquareFoot","SquareInch","SquareCentimeter","SquareMillimeter","Acres","Hectares"]},{metric:"Volume",values:["CubicMeters","CubicFoot","CubicInches","CubicCentimeter","CubicMillimeter","CubicYards","Litres","USGallons"]}],this.defaultValues={Length:"Meters",Area:"SquareMeter",Volume:"CubicMeters"}),this.extra||(this.extra={});var i=this.get("extra");i.selectedMetric||(i.selectedMetric=this.unitSource[0].metric),i.selectedMetricValues=_.findWhere(this.unitSource,{metric:i.selectedMetric}).values,i.selectedConvertFrom&&i.selectedMetricValues.indexOf(i.selectedConvertFrom)!==-1||(i.selectedConvertFrom=this.defaultValues[i.selectedMetric]),i.selectedConvertTo&&i.selectedMetricValues.indexOf(i.selectedConvertTo)!==-1||(i.selectedConvertTo=this.defaultValues[i.selectedMetric]),i.metricValues=i.selectedMetric+";"+i.selectedConvertFrom+";"+i.selectedConvertTo},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ArrayItemView",["require","exports","backbone","underscore"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"div"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"array-items"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#array-item-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){if(this.subItemViews=[],this.model.get("isCollection"))for(var n=this.model.get("subItems"),r=0;r<n.length;r++)this.subItemViews.push(new t({model:n[r]}));this.expanded=!0,this.visibleItemsNumber=0},t.prototype.events=function(){return{"click span.index":"toggleExpandCollapse"}},t.prototype.render=function(){if(this.$el.html(this.template(this.model.toJSON())),this.model.get("isCollection")){this.$el.addClass("isCollection");for(var e=void 0,t=0;t<this.subItemViews.length;t++)e=this.subItemViews[t].render().$el,this.$el.append(e);this.expanded=!0,this.$el.addClass("expanded")}return this},t.prototype.toggleExpandCollapse=function(e){if(e&&e.stopPropagation(),this.model.get("isCollection")){var t=this.subItemViews.length;this.expanded?this.collapse(t):this.expand(t)}},t.prototype.expand=function(e){this.$el.addClass("expanded");var t;for(t=0;t<e&&t<this.subItemViews.length;t++)this.subItemViews[t].$el.removeClass("hidden");for(t=e;t<this.subItemViews.length;t++)this.subItemViews[t].$el.addClass("hidden");this.expanded=!0},t.prototype.collapse=function(e){this.$el.removeClass("expanded");for(var t=0;t<e&&t<this.subItemViews.length;t++)this.subItemViews[t].$el.addClass("hidden");this.expanded=!1},t}(n.View);return i}),!function e(n,r,i){function o(a,l){if(!r[a]){if(!n[a]){var c="function"==typeof t&&t;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[a]={exports:{}};n[a][0].call(p.exports,function(e){var t=n[a][1][e];return o(t?t:e)},p,p.exports,e,n,r,i)}return r[a].exports}for(var s="function"==typeof t&&t,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,r){"use strict";var i=e("../main");"function"==typeof n&&n.amd?n("perfectscrollbar",i):(window.PerfectScrollbar=i,"undefined"==typeof window.Ps&&(window.Ps=i))},{"../main":7}],2:[function(e,t,n){"use strict";function r(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function i(e,t){var n=e.className.split(" "),r=n.indexOf(t);r>=0&&n.splice(r,1),e.className=n.join(" ")}n.add=function(e,t){e.classList?e.classList.add(t):r(e,t)},n.remove=function(e,t){e.classList?e.classList.remove(t):i(e,t)},n.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],3:[function(e,t,n){"use strict";function r(e,t){return window.getComputedStyle(e)[t]}function i(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function o(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}var s={};s.e=function(e,t){var n=document.createElement(e);return n.className=t,n},s.appendTo=function(e,t){return t.appendChild(e),e},s.css=function(e,t,n){return"object"==typeof t?o(e,t):"undefined"==typeof n?r(e,t):i(e,t,n)},s.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},s.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},s.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return s.matches(e,t)})},t.exports=s},{}],4:[function(e,t,n){"use strict";var r=function(e){this.element=e,this.events={}};r.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},r.prototype.unbind=function(e,t){var n="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new r(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},i.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},t.exports=i},{}],5:[function(e,t,n){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],6:[function(e,t,n){"use strict";var r=e("./class"),i=e("./dom"),o=n.toInt=function(e){return parseInt(e,10)||0},s=n.clone=function(e){if(e){if(e.constructor===Array)return e.map(s);if("object"==typeof e){var t={};for(var n in e)t[n]=s(e[n]);return t}return e}return null};n.extend=function(e,t){var n=s(e);for(var r in t)n[r]=s(t[r]);return n},n.isEditable=function(e){return i.matches(e,"input,[contenteditable]")||i.matches(e,"select,[contenteditable]")||i.matches(e,"textarea,[contenteditable]")||i.matches(e,"button,[contenteditable]")},n.removePsClasses=function(e){for(var t=r.list(e),n=0;n<t.length;n++){var i=t[n];0===i.indexOf("ps-")&&r.remove(e,i)}},n.outerWidth=function(e){return o(i.css(e,"width"))+o(i.css(e,"paddingLeft"))+o(i.css(e,"paddingRight"))+o(i.css(e,"borderLeftWidth"))+o(i.css(e,"borderRightWidth"))},n.startScrolling=function(e,t){r.add(e,"ps-in-scrolling"),"undefined"!=typeof t?r.add(e,"ps-"+t):(r.add(e,"ps-x"),r.add(e,"ps-y"))},n.stopScrolling=function(e,t){r.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?r.remove(e,"ps-"+t):(r.remove(e,"ps-x"),r.remove(e,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(e,t,n){"use strict";var r=e("./plugin/destroy"),i=e("./plugin/initialize"),o=e("./plugin/update");t.exports={initialize:i,update:o,destroy:r}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(e,t,n){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(e,t,n){"use strict";var r=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances");t.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),o.remove(e))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(e,t,n){"use strict";function r(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",function(r){var i=r.pageY-window.pageYOffset-n(t.scrollbarYRail).top,a=i>t.scrollbarYTop?1:-1;s(e,"top",e.scrollTop+a*t.containerHeight),o(e),r.stopPropagation()}),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",function(r){var i=r.pageX-window.pageXOffset-n(t.scrollbarXRail).left,a=i>t.scrollbarXLeft?1:-1;s(e,"left",e.scrollLeft+a*t.containerWidth),o(e),r.stopPropagation()})}var i=e("../instances"),o=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=i.get(e);r(e,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(e,t,n){"use strict";function r(e,t){function n(n){var i=r+n*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);i<0?t.scrollbarXLeft=0:i>s?t.scrollbarXLeft=s:t.scrollbarXLeft=i;var a=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",a)}var r=null,i=null,a=function(t){n(t.pageX-i),l(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarX,"mousedown",function(n){i=n.pageX,r=o.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function i(e,t){function n(n){var i=r+n*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);i<0?t.scrollbarYTop=0:i>s?t.scrollbarYTop=s:t.scrollbarYTop=i;var a=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",a)}var r=null,i=null,a=function(t){n(t.pageY-i),l(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarY,"mousedown",function(n){i=n.pageY,r=o.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var o=e("../../lib/helper"),s=e("../../lib/dom"),a=e("../instances"),l=e("../update-geometry"),c=e("../update-scroll");t.exports=function(e){var t=a.get(e);r(e,t),i(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(e,t,n){"use strict";function r(e,t){function n(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var r=!1;t.event.bind(e,"mouseenter",function(){r=!0}),t.event.bind(e,"mouseleave",function(){r=!1});var s=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=o.matches(t.scrollbarX,":focus")||o.matches(t.scrollbarY,":focus");if(r||u){var p=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(p){if("IFRAME"===p.tagName)p=p.contentDocument.activeElement;else for(;p.shadowRoot;)p=p.shadowRoot.activeElement;if(i.isEditable(p))return}var h=0,d=0;switch(c.which){case 37:h=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:d=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:h=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:d=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=c.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-d),l(e,"left",e.scrollLeft+h),a(e),s=n(h,d),s&&c.preventDefault()}}})}var i=e("../../lib/helper"),o=e("../../lib/dom"),s=e("../instances"),a=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){var t=s.get(e);r(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(e,t,n){"use strict";function r(e,t){function n(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function r(e){var t=e.deltaX,n=-1*e.deltaY;return"undefined"!=typeof t&&"undefined"!=typeof n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}function i(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){if(!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var i=r.scrollHeight-r.clientHeight;if(i>0&&!(0===r.scrollTop&&n>0||r.scrollTop===i&&n<0))return!0;var o=r.scrollLeft-r.clientWidth;if(o>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===o&&t>0))return!0}return!1}function a(a){var c=r(a),u=c[0],p=c[1];i(u,p)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(p?s(e,"top",e.scrollTop-p*t.settings.wheelSpeed):s(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?s(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):s(e,"left",e.scrollLeft-p*t.settings.wheelSpeed),l=!0):(s(e,"top",e.scrollTop-p*t.settings.wheelSpeed),s(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),o(e),l=l||n(u,p),l&&(a.stopPropagation(),a.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",a):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",a)}var i=e("../instances"),o=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=i.get(e);r(e,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(e,t,n){"use strict";function r(e,t){t.event.bind(e,"scroll",function(){o(e)})}var i=e("../instances"),o=e("../update-geometry");t.exports=function(e){var t=i.get(e);r(e,t)}},{"../instances":18,"../update-geometry":19}],15:[function(e,t,n){"use strict";function r(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function r(){c||(c=setInterval(function(){return o.get(e)?(a(e,"top",e.scrollTop+u.top),a(e,"left",e.scrollLeft+u.left),void s(e)):void clearInterval(c)},50))}function l(){c&&(clearInterval(c),c=null),i.stopScrolling(e)}var c=null,u={top:0,left:0},p=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?p=!0:(p=!1,l())}),t.event.bind(window,"mouseup",function(){p&&(p=!1,l())}),t.event.bind(window,"keyup",function(){p&&(p=!1,l())}),t.event.bind(window,"mousemove",function(t){if(p){var n={x:t.pageX,y:t.pageY},o={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<o.left+3?(u.left=-5,i.startScrolling(e,"x")):n.x>o.right-3?(u.left=5,i.startScrolling(e,"x")):u.left=0,n.y<o.top+3?(o.top+3-n.y<5?u.top=-5:u.top=-20,i.startScrolling(e,"y")):n.y>o.bottom-3?(n.y-o.bottom+3<5?u.top=5:u.top=20,i.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():r()}})}var i=e("../../lib/helper"),o=e("../instances"),s=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=o.get(e);r(e,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(e,t,n){"use strict";function r(e,t,n,r){function i(n,r){var i=e.scrollTop,o=e.scrollLeft,s=Math.abs(n),a=Math.abs(r);if(a>s){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(s>a&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}function l(t,n){a(e,"top",e.scrollTop-n),a(e,"left",e.scrollLeft-t),s(e)}function c(){S=!0}function u(){S=!1}function p(e){return e.targetTouches?e.targetTouches[0]:e}function h(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function d(e){if(h(e)){w=!0;var t=p(e);g.pageX=t.pageX,g.pageY=t.pageY,y=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function f(e){if(!w&&t.settings.swipePropagation&&d(e),!S&&w&&h(e)){var n=p(e),r={pageX:n.pageX,pageY:n.pageY},o=r.pageX-g.pageX,s=r.pageY-g.pageY;l(o,s),g=r;var a=(new Date).getTime(),c=a-y;c>0&&(v.x=o/c,v.y=s/c,y=a),i(o,s)&&(e.stopPropagation(),e.preventDefault())}}function m(){!S&&w&&(w=!1,clearInterval(b),b=setInterval(function(){return o.get(e)&&(v.x||v.y)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?void clearInterval(b):(l(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(b)},10))}var g={},y=0,v={},b=null,S=!1,w=!1;n?(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",d),t.event.bind(e,"touchmove",f),t.event.bind(e,"touchend",m)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",d),t.event.bind(e,"pointermove",f),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",d),t.event.bind(e,"MSPointerMove",f),t.event.bind(e,"MSPointerUp",m)))}var i=e("../../lib/helper"),o=e("../instances"),s=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){if(i.env.supportsTouch||i.env.supportsIePointer){var t=o.get(e);r(e,t,i.env.supportsTouch,i.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(e,t,n){"use strict";var r=e("../lib/helper"),i=e("../lib/class"),o=e("./instances"),s=e("./update-geometry"),a={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},l=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var n=o.add(e);n.settings=r.extend(n.settings,t),i.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){a[t](e)}),l(e),s(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(e,t,n){"use strict";function r(e){function t(){l.add(e,"ps-focus")}function n(){l.remove(e,"ps-focus")}var r=this;r.settings=a.clone(c),r.containerWidth=null,r.containerHeight=null,r.contentWidth=null,r.contentHeight=null,r.isRtl="rtl"===u.css(e,"direction"),r.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),r.negativeScrollAdjustment=r.isNegativeScroll?e.scrollWidth-e.clientWidth:0,r.event=new p,r.ownerDocument=e.ownerDocument||document,r.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),r.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),r.scrollbarXRail),r.scrollbarX.setAttribute("tabindex",0),r.event.bind(r.scrollbarX,"focus",t),r.event.bind(r.scrollbarX,"blur",n),r.scrollbarXActive=null,r.scrollbarXWidth=null,r.scrollbarXLeft=null,r.scrollbarXBottom=a.toInt(u.css(r.scrollbarXRail,"bottom")),r.isScrollbarXUsingBottom=r.scrollbarXBottom===r.scrollbarXBottom,r.scrollbarXTop=r.isScrollbarXUsingBottom?null:a.toInt(u.css(r.scrollbarXRail,"top")),r.railBorderXWidth=a.toInt(u.css(r.scrollbarXRail,"borderLeftWidth"))+a.toInt(u.css(r.scrollbarXRail,"borderRightWidth")),u.css(r.scrollbarXRail,"display","block"),r.railXMarginWidth=a.toInt(u.css(r.scrollbarXRail,"marginLeft"))+a.toInt(u.css(r.scrollbarXRail,"marginRight")),u.css(r.scrollbarXRail,"display",""),r.railXWidth=null,r.railXRatio=null,r.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),r.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),r.scrollbarYRail),r.scrollbarY.setAttribute("tabindex",0),r.event.bind(r.scrollbarY,"focus",t),r.event.bind(r.scrollbarY,"blur",n),r.scrollbarYActive=null,r.scrollbarYHeight=null,r.scrollbarYTop=null,r.scrollbarYRight=a.toInt(u.css(r.scrollbarYRail,"right")),r.isScrollbarYUsingRight=r.scrollbarYRight===r.scrollbarYRight,r.scrollbarYLeft=r.isScrollbarYUsingRight?null:a.toInt(u.css(r.scrollbarYRail,"left")),r.scrollbarYOuterWidth=r.isRtl?a.outerWidth(r.scrollbarY):null,r.railBorderYWidth=a.toInt(u.css(r.scrollbarYRail,"borderTopWidth"))+a.toInt(u.css(r.scrollbarYRail,"borderBottomWidth")),u.css(r.scrollbarYRail,"display","block"),r.railYMarginHeight=a.toInt(u.css(r.scrollbarYRail,"marginTop"))+a.toInt(u.css(r.scrollbarYRail,"marginBottom")),u.css(r.scrollbarYRail,"display",""),r.railYHeight=null,r.railYRatio=null}function i(e){return e.getAttribute("data-ps-id")}function o(e,t){e.setAttribute("data-ps-id",t)}function s(e){e.removeAttribute("data-ps-id")}var a=e("../lib/helper"),l=e("../lib/class"),c=e("./default-setting"),u=e("../lib/dom"),p=e("../lib/event-manager"),h=e("../lib/guid"),d={};n.add=function(e){var t=h();return o(e,t),d[t]=new r(e),d[t]},n.remove=function(e){delete d[i(e)],s(e)},n.get=function(e){return d[i(e)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(e,t,n){"use strict";function r(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function i(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,a.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,a.css(t.scrollbarYRail,r),a.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),a.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var o=e("../lib/helper"),s=e("../lib/class"),a=e("../lib/dom"),l=e("./instances"),c=e("./update-scroll");t.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=a.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){a.remove(e)}),a.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=a.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){a.remove(e)}),a.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=r(t,o.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=o.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=r(t,o.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=o.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),i(e,t),t.scrollbarXActive?s.add(e,"ps-active-x"):(s.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?s.add(e,"ps-active-y"):(s.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(e,t,n){"use strict";var r,i,o=e("./instances"),s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};t.exports=function(e,t,n){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(s("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(s("ps-x-reach-start")));var a=o.get(e);"top"===t&&n>=a.contentHeight-a.containerHeight&&(n=a.contentHeight-a.containerHeight,n-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(s("ps-y-reach-end"))),"left"===t&&n>=a.contentWidth-a.containerWidth&&(n=a.contentWidth-a.containerWidth,n-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(s("ps-x-reach-end"))),r||(r=e.scrollTop),i||(i=e.scrollLeft),"top"===t&&n<r&&e.dispatchEvent(s("ps-scroll-up")),"top"===t&&n>r&&e.dispatchEvent(s("ps-scroll-down")),"left"===t&&n<i&&e.dispatchEvent(s("ps-scroll-left")),"left"===t&&n>i&&e.dispatchEvent(s("ps-scroll-right")),"top"===t&&(e.scrollTop=r=n,e.dispatchEvent(s("ps-scroll-y"))),"left"===t&&(e.scrollLeft=i=n,e.dispatchEvent(s("ps-scroll-x")))}},{"./instances":18}],21:[function(e,t,n){"use strict";var r=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances"),s=e("./update-geometry"),a=e("./update-scroll");t.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),s(e),a(e,"top",e.scrollTop),a(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]),function(e){"function"==typeof n&&n.amd?n("../version",["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}),function(e){"function"==typeof n&&n.amd?n("../ie",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}),function(e){"function"==typeof n&&n.amd?n("../widget",["jquery","./version"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var r,i,o;for(o=0;null!=(i=n[o]);o++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(e){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,o,s,a={},l=t.split(".")[0];t=t.split(".")[1];var c=l+"-"+t;return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},i=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(r,function(t,r){return e.isFunction(r)?void(a[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(a[t]=r)}),o.prototype=e.widget.extend(s,{widgetEventPrefix:i?s.widgetEventPrefix||t:t},a,{constructor:o,namespace:l,widgetName:t,widgetFullName:c}),i?(e.each(i._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete i._childConstructors):n._childConstructors.push(o),
e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var r,i,o=n.call(arguments,1),s=0,a=o.length;s<a;s++)for(r in o[s])i=o[s][r],o[s].hasOwnProperty(r)&&void 0!==i&&(e.isPlainObject(i)?t[r]=e.isPlainObject(t[r])?e.widget.extend({},t[r],i):e.widget.extend({},i):t[r]=i);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=n.call(arguments,1),l=this;return s?this.length||"instance"!==o?this.each(function(){var n,r=e.data(this,i);return"instance"===o?(l=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,a),n!==r&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):l=void 0:(a.length&&(o=e.widget.extend.apply(null,[o].concat(a))),this.each(function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new r(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},r=t.split("."),t=r.shift(),r.length){for(i=s[t]=e.widget.extend({},this.options[t]),o=0;o<r.length-1;o++)i[r[o]]=i[r[o]]||{},i=i[r[o]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t)i=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&i&&i.length&&(r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,o){var s,a;for(a=0;a<n.length;a++)s=i.classesElementLookup[n[a]]||e(),s=e(t.add?e.unique(s.get().concat(t.element.get())):s.not(t.element).get()),i.classesElementLookup[n[a]]=s,r.push(n[a]),o&&t.classes[n[a]]&&r.push(t.classes[n[a]])}var r=[],i=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(r,i){e.inArray(t.target,i)!==-1&&(n.classesElementLookup[r]=e(i.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r="boolean"==typeof r?r:n;var i="string"==typeof e||null===e,o={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return o.element.toggleClass(this._classes(o),r),this},_on:function(t,n,r){var i,o=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,s){function a(){if(t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?o[s]:s).apply(o,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=r.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?i.on(c,u,a):n.on(c,a)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,o,s=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,o){"string"==typeof i&&(i={effect:i});var s,a=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),s=!e.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),s&&e.effects&&e.effects.effect[a]?r[t](i):a!==t&&r[a]?r[a](i.duration,i.easing,o):r.queue(function(n){e(this)[t](),o&&o.call(r[0]),n()})}}),e.widget}),function(e){"function"==typeof n&&n.amd?n("mouse",["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(i&&!o&&this._mouseCapture(n))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof n&&n.amd?n("../disable-selection",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})}),function(e){"function"==typeof n&&n.amd?n("../plugin",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,n,r){var i,o=e.ui[t].prototype;for(i in r)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,o=e.plugins[t];if(o&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}}}),function(e){"function"==typeof n&&n.amd?n("resizable",["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0||(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n=this.options,r=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(r._removeClass("ui-resizable-autohide"),r._handles.show())}).on("mouseleave",function(){n.disabled||r.resizing||(r._addClass("ui-resizable-autohide"),r._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,r,i,o,s=this.options,a=this;if(this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),r=this.handles.split(","),this.handles={},n=0;n<r.length;n++)t=e.trim(r[n]),i="ui-resizable-"+t,o=e("<div>"),this._addClass(o,"ui-resizable-handle "+i),o.css({zIndex:s.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var n,r,i,o;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)r=e(this.handles[n])[0],(r===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,o=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,r+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,o=this.axis,s=t.pageX-i.left||0,a=t.pageY-i.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[t,s,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,r,i,o,s,a,l,c=this.options,u=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,o=r?0:u.sizeDiff.width,s={width:u.helper.width()-o,height:u.helper.height()-i},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,i=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),n<o.maxWidth&&(o.maxWidth=n),i<o.maxHeight&&(o.maxHeight=i)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),o&&c&&(e.left=a-t.minWidth),r&&c&&(e.left=a-t.maxWidth),s&&u&&(e.top=l-t.minHeight),i&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(r[t])||0,n[t]+=parseFloat(i[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,o=i.length&&/textarea/i.test(i[0].nodeName),s=o&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,o,s,a,l=e(this).resizable("instance"),c=l.options,u=l.element,p=c.containment,h=p instanceof e?p.get(0):/parent/.test(p)?u.parent().get(0):p;h&&(l.containerElement=e(h),/document/.test(p)||p===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=l._num(t.css("padding"+r))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=l.containerOffset,i=l.containerSize.height,o=l.containerSize.width,s=l._hasScroll(h,"left")?h.scrollWidth:o,a=l._hasScroll(h)?h.scrollHeight:i,l.parentData={element:h,left:r.left,top:r.top,width:s,height:a}))},resize:function(t){var n,r,i,o,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||t.shiftKey,p={top:0,left:0},h=s.containerElement,d=!0;h[0]!==document&&/static/.test(h.css("position"))&&(p=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-p.left),u&&(s.size.height=s.size.width/s.aspectRatio,d=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,d=!1),s.position.top=s._helper?l.top:0),i=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),i&&o?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),n=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-p.left:s.offset.left-l.left)),r=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-p.top:s.offset.top-l.top)),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,u&&(s.size.height=s.size.width/s.aspectRatio,d=!1)),r+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-r,u&&(s.size.width=s.size.height*s.aspectRatio,d=!1)),d||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,o=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-i.left-r.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-i.left-r.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,o=r.originalSize,s=r.originalPosition,a={height:r.size.height-o.height||0,width:r.size.width-o.width||0,top:r.position.top-s.top||0,left:r.position.left-s.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},o=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(r[t]||0)+(a[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),e.uiBackCompat!==!1&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,o=n.originalSize,s=n.originalPosition,a=n.axis,l="number"==typeof r.grid?[r.grid,r.grid]:r.grid,c=l[0]||1,u=l[1]||1,p=Math.round((i.width-o.width)/c)*c,h=Math.round((i.height-o.height)/u)*u,d=o.width+p,f=o.height+h,m=r.maxWidth&&r.maxWidth<d,g=r.maxHeight&&r.maxHeight<f,y=r.minWidth&&r.minWidth>d,v=r.minHeight&&r.minHeight>f;r.grid=l,y&&(d+=c),v&&(f+=u),m&&(d-=c),g&&(f-=u),/^(se|s|e)$/.test(a)?(n.size.width=d,n.size.height=f):/^(ne)$/.test(a)?(n.size.width=d,n.size.height=f,n.position.top=s.top-h):/^(sw)$/.test(a)?(n.size.width=d,n.size.height=f,n.position.left=s.left-p):((f-u<=0||d-c<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),f-u>0?(n.size.height=f,n.position.top=s.top-h):(f=u-t.height,n.size.height=f,n.position.top=s.top+o.height-f),d-c>0?(n.size.width=d,n.position.left=s.left-p):(d=c-t.width,n.size.width=d,n.position.left=s.left+o.width-d))}}),e.ui.resizable});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("BaseNodeView",["require","exports","backbone","underscore","jquery","ArrayItemView","FLOOD","perfectscrollbar","resizable"],function(e,t,n,r,i,s,a,l){"use strict";var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectable=!0,t.bubbleExpanded=!1,t.bubbleMaxPreviewRowNumber=15.5,t.bubbleDragWidthMax=0,t.bubbleDragHeightMax=0,t.bubbleDragWidthMin=0,t.bubbleDragHeightMin=0,t.isResizable=!1,t.isScrollable=!1,t}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"div"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"node"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#node-template").html())},enumerable:!0,configurable:!0}),t.prototype.inputSet=function(){},t.prototype.events=function(){return{"mousedown .node-port-region-output":"nodePortSelected","mousedown .node-port-region-input":"nodePortSelected","mouseenter .node-port-region-output":"nodePortMouseEnter","mouseenter .node-port-region-input":"nodePortMouseEnter","mouseleave .node-port-region":"nodePortMouseLeave","mouseenter #pin-button":"togglePreviewBubble","mouseleave #pin-button":"togglePreviewBubble","mouseenter .node-last-value-container":"renderPinButton","mouseleave .node-last-value-container":"renderPinButton","touchstart .node-port-output":"beginTouchConnection","touchstart .node-port-input":"beginTouchDisconnection",touchstart:"touchstart","click .node-port-region":"stopPropagation",click:"selectThis","change .use-default-checkbox":"useDefaultClick","blur .name-input":"updateName","click .toggle-vis":"toggleGeomVis","click .rep-type":"replicationClick","click .name-input":"stopPropagation","click .node-last-value-container":"stopPropagation","click .node-failure-message-container":"stopPropagation","click input.shown-items":"stopPropagation","click #pin-button":"togglePreviewBubble","click .more-items-text":"maxPreviewChanged","mousewheel .node-last-value-container":"stopPropagation","DOMMouseScroll .node-last-value-container":"stopPropagation","MozMousePixelScroll .node-last-value-container":"stopPropagation"}},t.prototype.initialize=function(e){this.portHeight=29,this.listenTo(this.model,"requestRender",this.render),this.listenTo(this.model,"requestRenderLastValue",this.renderLastValue),this.listenTo(this.model,"change:position",this.move),this.listenTo(this.model,"change:ignoreDefaults",this.colorPorts),this.listenTo(this.model,"change:name",this.render),
this.listenTo(this.model,"connection",this.colorPorts),this.listenTo(this.model,"disconnection",this.colorPorts),this.listenTo(this.model,"change:selected",this.colorSelected),this.listenTo(this.model,"change:visible change:isFrozen change:isFrozenByUpstream",this.render),this.listenTo(this.model,"change:isEvaluating",this.colorEvaluating),this.listenTo(this.model,"change:isPinned",this.renderPreviewBubble),this.listenTo(this.model,"change:isPinned",this.renderPinButton),this.listenTo(this.model,"change:isPinned",this.syncPinState),this.listenTo(this,"change:bubbleExpanded",this.renderPreviewBubble),this.listenTo(this.model,"evalWarning",this.onEvalWarning),this.listenTo(this.model,"evalFailed",this.onEvalFailed),this.listenTo(this.model,"evalBegin",this.onEvalBegin),this.$workspace_canvas=i("#workspace_canvas"),this.position=this.model.get("position"),this.selectable=!0,this.arrayItemView=null,this.freezeInput=null,this.getCustomContents=null,this.outputPorts=[],this.inputPorts=[],this.portGroup=null,this.lockInput=null,this.silent=!1},t.prototype.togglePreviewBubble=function(e){this.$el.find(".node-last-value-container");"click"==e.type?this.model.isPinned=!this.model.isPinned:("mouseenter"==e.type?this.bubbleExpanded=!0:"mouseleave"==e.type&&(this.renderPinButton(e),this.model.isPinned||(this.bubbleExpanded=!1)),this.trigger("change:bubbleExpanded")),e.stopPropagation()},t.prototype.syncPinState=function(){var e={property:"isPinned",_id:this.model.id,newValue:this.model.isPinned};this.trigger("request-set-node-prop",e)},t.prototype.renderPinButton=function(e){var t=this.$el.find("#pin-button");this.model.isPinned?t.addClass("pinned"):t.removeClass("pinned"),e.target&&("mouseenter"==e.type?t.addClass("show"):"mouseleave"==e.type&&e.toElement!=t[0]&&t.removeClass("show"),e.stopPropagation())},t.prototype.renderPreviewBubble=function(){var e=this.$el.find(".node-last-value-container");if(this.renderLastValue(),this.model.isPinned||this.bubbleExpanded){e.addClass("node-last-value-container-expanded");var n=this.$el.outerWidth(!0),r=this.$el.find(".node-last-value").outerWidth(!0)+t.bubbleWidthPaddingBorder;if(this.bubbleDragWidthMax=this.bubbleDragWidthMin=n,this.bubbleDragHeightMax=this.bubbleDragHeightMin=t.bubbleRowHeight+t.bubbleHeightPaddingBorder,r>2*n)e.css({left:"-50%",right:"-50%",top:e.css("top")}),this.bubbleDragWidthMax=r+t.allowance,this.bubbleDragWidthMin=2*n,this.isResizable=!0,this.isScrollable=!0;else if(r>n){var i=-(r-n)/2,o=i.toString()+"px";e.css({left:o,right:o,top:e.css("top")}),this.bubbleDragWidthMax=r+t.allowance,this.bubbleDragWidthMin=r}if(this.model.isArray){var s=this.model.arrayItems.elementTotalRecursive;this.model.arrayItems.elementTotalRecursive>this.bubbleMaxPreviewRowNumber&&(s=this.bubbleMaxPreviewRowNumber,this.isResizable=!0,this.isScrollable=!0);var a=s*t.bubbleRowHeight+t.bubbleHeightPaddingBorder+t.bubbleHeightListPanel;a=Math.ceil(a);var l=e.outerHeight(!0),c=l>a?l:a,u=c.toString()+"px",p=-c-2,h=p.toString()+"px";e.css({bottom:h,height:u,top:e.css("top")}),this.bubbleDragHeightMax=this.model.arrayItems.elementTotalRecursive*t.bubbleRowHeight+t.bubbleHeightPaddingBorder+t.bubbleHeightListPanel+t.allowance,this.bubbleDragHeightMin=a}}else e.removeClass("node-last-value-container-expanded"),e.css({left:"",right:"",bottom:"",height:"",top:""}),e.find(".node-last-value-wrapper").scrollTop(0),this.isResizable=this.isScrollable=!1,e.css({width:"",height:""});return this.renderScrollBarAndResizable(),this},t.prototype.renderScrollBarAndResizable=function(){var e=this.$el.find(".node-last-value-container"),t=this.$el.find(".node-last-value-wrapper");if(0!=t.length){try{l.destroy(t[0])}catch(e){}try{e.resizable("destroy")}catch(e){}if(this.isResizable&&this.model.isPinned)try{e.resizable({maxHeight:this.bubbleDragHeightMax,maxWidth:this.bubbleDragWidthMax,minHeight:this.bubbleDragHeightMin,minWidth:this.bubbleDragWidthMin,disabled:!1})}catch(e){}this.isScrollable&&l.initialize(t[0],{maxScrollbarLength:160,minScrollbarLength:90})}},t.prototype.updateName=function(e){var t=this.$el.find(".name-input"),n=i.trim(t.val());if(n&&"DefaultNodeName"!==n||(n=this.model.get("displayName")),t.val(n),this.model.get("name")!==n){var r={property:"name",_id:this.model.id,newValue:n};this.model.trigger("request-set-node-prop",r)}},t.prototype.onEvalWarning=function(e){this.$el.addClass("node-warning"),this.$el.removeClass("node-failed"),this.model.failureMessage="Warning: "+e},t.prototype.onEvalFailed=function(e){this.$el.addClass("node-failed"),this.$el.removeClass("node-warning"),this.model.failureMessage="Error: "+e},t.prototype.onEvalBegin=function(){this.$el.removeClass("node-failed"),this.$el.removeClass("node-warning")},t.prototype.useDefaultClick=function(e){var t=parseInt(i(e.currentTarget).attr("data-index")),n=JSON.parse(JSON.stringify(this.model.get("ignoreDefaults")));n[t]=!i(e.target).is(":checked");var r={property:"ignoreDefaults",_id:this.model.id,newValue:n};this.model.trigger("request-set-node-prop",r),this.model.trigger("requestRun")},t.prototype.replicationClick=function(e){var t={property:"replication",_id:this.model.id,newValue:i(e.target).attr("data-rep-type")};this.model.trigger("request-set-node-prop",t),this.model.trigger("requestRun")},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.toggleGeomVis=function(e){var t=!this.model.get("visible");this.model.set("visible",t);var n={property:"visible",_id:this.model.id,newValue:t};this.model.trigger("request-set-node-prop",n),e.stopPropagation()},t.prototype.beginTouchDisconnection=function(e){var t=parseInt(i(e.currentTarget).attr("data-index"));if(this.model.isPortConnected(t,!1)){var n=this.model.get("inputConnections"),r=n[t][0];this.model.trigger("request-remove-conn",r.toJSON()),e.stopPropagation(),e.preventDefault()}},t.prototype.beginTouchConnection=function(e){i("body").one("touchend",function(e){var t=e.originalEvent.changedTouches[0],n=i(document.elementFromPoint(t.pageX,t.pageY));if(n.hasClass("node-port-input")||(n=n.parent(".node-port-input")),n.attr("data-index")){this.model.trigger("request-set-draggingproxy",!0);var r=i.Event("mouseup");n.trigger(r),this.model.trigger("request-set-draggingproxy",!1)}}.bind(this))},t.prototype.nodePortSelected=function(e){var t,n=e.currentTarget.className.includes("output"),r=parseInt(i(e.currentTarget).children().attr("data-index")),o=this.model.get("_id"),s=this.getPortPosition(r,n),a=!1;if(e.currentTarget==e.target&&(a=!0),!n&&this.model.isPortConnected(r,!1)){var l=this.model.get("inputConnections");t=l[r][0]}this.model.trigger("port-selected",t,o,r,s,n,a),e.stopPropagation()},t.prototype.nodePortMouseEnter=function(e){var t=e.currentTarget.className.includes("output"),n=parseInt(i(e.currentTarget).children().attr("data-index")),r=this.getPortPosition(n,t);this.model.trigger("port-snap-update",!0,r)},t.prototype.nodePortMouseLeave=function(e){var t;this.model.trigger("port-snap-update",!1,t)},t.prototype.select=function(){this.model.set("selected",!0)},t.prototype.touchstart=function(e){var t=null!=e.target&&("input"==e.target.tagName.toLowerCase()||"code"==e.target.tagName.toLowerCase());t&&(e.target.focus(),this.selectable=!1,setTimeout(function(){this.selectable=!0}.bind(this),300))},t.prototype.selectThis=function(e){this.selectable&&(this.model.get("selected")?this.model.trigger("deselect-all-nodes"):(e.shiftKey||this.model.trigger("deselect-all-nodes"),this.model.set("selected",!0)))},t.prototype.cleanUpHandlers=function(){var e=this.$el.find(".node-port-input");e.each(function(e,t){i(t).tooltip("destroy")});var t=this.$el.find(".node-port-output");return t.each(function(e,t){i(t).tooltip("destroy")}),this},t.prototype.render=function(){return this.cleanUpHandlers().renderNode().colorSelected().colorEvaluating().moveNode().renderPorts().renderPreviewBubble(),this},t.prototype.renderNode=function(){var e=this,t=this.model.toJSON();t.preview=this.formatPreview(t.lastValue),this.$el.html(this.template(t)),this.$el.find(".node-last-value-more").addClass("hidden"),this.model.isArray&&this.model.numElements>1&&(this.model.currentArrayItemRequestAmount<this.model.numElements&&this.$el.find(".node-last-value-more").removeClass("hidden request"),this.arrayItemView=new s({model:this.model.arrayItems}),this.$el.find("div.node-last-value").html(this.arrayItemView.render().$el)),null!=this.getCustomContents&&this.$el.find(".node-center-panel").html(this.getCustomContents()),this.freezeInput=this.$el.find(".freeze-input"),this.freezeInput.change(this.freezeChanged.bind(this)),this.model.isFrozen||this.model.isFrozenByUpstream?this.$el.addClass("frozen-node"):this.$el.removeClass("frozen-node"),this.$el.find(".node-data-container").find(".name").tooltip({title:this.model.description,placement:"top",delay:400});var n=this.model.type.inputs,r=this.model.type.outputs;if(n.map(function(t,n){var r={title:t.toolTip||t.typeName,placement:"left",delay:400,container:"body"};e.addTooltipToPort(t,n,r)}),r.map(function(t,n){var r={title:t.toolTip,placement:"right",delay:400,container:"body"};e.addTooltipToPort(t,n,r)}),this.$el.hasClass("node-failed")||this.$el.hasClass("node-warning")){var i=this.$el.find(".node-failure-message-container").outerHeight();this.$el.find(".node-failure-message-container").css("top","-"+i.toString()+"px")}return this},t.prototype.freezeChanged=function(e){if(this.model.get("isFrozenByUpstream"))return this.freezeInput.val(this.model.get("isFrozen")),void this.freezeInput.prop("disabled",!0);var t=this.freezeInput.is(":checked");this.model.trigger("request-set-node-prop",{property:"isFrozen",_id:this.model.id,newValue:t}),t||this.model.trigger("requestRun"),e.stopPropagation()},t.prototype.maxPreviewChanged=function(e){this.$el.find(".node-last-value-more").addClass("request"),this.model.updateArrayItems(),e.stopPropagation()},t.prototype.truncatePreview=function(e,t){if(void 0===t&&(t=20),"string"==typeof e)return e;if(!e||!e.length||e.length<100)return e;var n={},r=0;for(var i in e){if(r>t)break;n[i]=e[i],r++}return n.length=e.length,n},t.prototype.formatPreview=function(e){return"string"==typeof e?e.replace(new RegExp("\t","g"),"").replace(new RegExp("\n","g"),""):JSON.stringify(e,this.prettyPrint.bind(this))},t.prototype.prettyPrint=function(e,t){return"number"==typeof t?t.toPrecision(4):"string"==typeof t?t.replace(new RegExp("\t","g"),"").replace(new RegExp("\n","g"),""):t&&t.length&&t.length>100?this.truncatePreview(t):t},t.prototype.renderLastValue=function(){var e=this.formatPreview(this.model.lastValue),t=this.$el.find(".node-last-value-container");return this.model.isArray?(t.addClass("isArray"),0==this.model.numItems&&t.addClass("hideItemCount"),this):(t.removeClass("isArray hideItemCount"),null!=this.model.lastValue&&(this.bubbleExpanded||this.model.isPinned||(e=e.split("(")[0])),t.find(".node-last-value").html(e),this)},t.prototype.colorEvaluating=function(){return this.model.get("isEvaluating")?this.$el.addClass("node-evaluating"):this.$el.removeClass("node-evaluating"),this},t.prototype.colorSelected=function(){return this.model.get("selected")?this.$el.addClass("node-selected"):this.$el.removeClass("node-selected"),this},t.prototype.svgTransform=function(){return"translate("+this.position[0]+" "+this.position[1]+")"},t.prototype.getPortPosition=function(e,t){var n=this.position[0],r=this.position[1];if(t)try{n+=parseInt(this.outputPorts[e].getAttribute("cx"))+4,r+=parseInt(this.outputPorts[e].getAttribute("cy"))}catch(e){}else try{n+=parseInt(this.inputPorts[e].getAttribute("cx"))-3,r+=parseInt(this.inputPorts[e].getAttribute("cy"))}catch(e){}return[n,r]},t.prototype.colorPorts=function(){var e=!1;return this.inputPorts.forEach(function(t,n){t.setAttribute("stroke","black"),this.model.isPortConnected(n,!1)?t.setAttribute("fill","black"):this.model.isInputPortUsingDefault(n)?t.setAttribute("fill","white"):(e=!0,t.setAttribute("fill","grey"),t.setAttribute("stroke","white"))}.bind(this)),this.outputPorts.forEach(function(t,n){t.setAttribute("stroke","black"),this.model.isPortConnected(n,!0)?t.setAttribute("fill","black"):e?(t.setAttribute("fill","grey"),t.setAttribute("stroke","white")):t.setAttribute("fill","white")}.bind(this)),this},t.prototype.move=function(){return this.moveNode().movePorts()},t.prototype.moveNode=function(){var e=this.model.get("position");return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),this.position=e,this.$el.css("left",this.position[0]),this.$el.css("top",this.position[1]),this},t.prototype.movePorts=function(){return this.portGroup&&this.portGroup.setAttribute("transform",this.svgTransform()),this},t.prototype.addTooltipToPort=function(e,t,n){var r=e instanceof a.BaseTypes.InputPort?"input":"output",i=this.$el.find(".node-port-"+r+"[data-index=' "+t+" ']");i.tooltip(n),i.on("click",function(e){i.tooltip("hide")})},t.prototype.renderPorts=function(){this.portGroup?i(this.portGroup).empty():(this.portGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.portGroup.setAttribute("transform",this.svgTransform())),this.inputPorts=[],this.outputPorts=[];var e=0,t=0,n=this.model.get("extra")||{},r=0,o=1,s=this.$el.parent().css("transform");"none"!=s&&(o=s.match(/-?[0-9\.]+/g)[0]);var a=this.model.type.inputs;if(a)for(var l=0;l<a.length;l++){var c=this.$el.find(".node-port-extra[data-index=' "+l+" ']");a[l].defaultVal||c.hide()}return this.$el.find(".node-port").each(function(s,a){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("r",3..toString()),l.setAttribute("stroke","black"),l.setAttribute("fill","white"),l.setAttribute("stroke-width","1.5"),i(a).hasClass("node-port-input")?(l.setAttribute("cx",(0).toString()),l.setAttribute("cy",(this.portHeight/2+1/o*i(a).position().top).toString()),this.inputPorts.push(l),e++):(n.lineIndices&&n.lineIndices.length>t&&(r=t>0?n.lineIndices[t]-n.lineIndices[t-1]-1:n.lineIndices[t]),l.setAttribute("cx",this.$el.width()+2.5),l.setAttribute("cy",(this.portHeight/2+1/o*(i(a).position().top+25*r)).toString()),this.outputPorts.push(l),t++),this.portGroup.appendChild(l)}.bind(this)),this.colorPorts(),this},t.prototype.dispose=function(){return this.undelegateEvents(),this.cleanUpHandlers(),this.remove(),n.View.prototype.remove.call(this),this},t.prototype.remove=function(){return this.$el.remove(),this.portGroup.parentNode&&this.portGroup.parentNode.removeChild(this.portGroup),this},t.prototype.silentSyncUI=function(e){},t.bubbleRowHeight=17,t.bubbleHeightPaddingBorder=7,t.bubbleWidthPaddingBorder=4,t.bubbleHeightListPanel=21,t.allowance=10,t}(n.View);return c});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ThreeCSGNodeView",["require","exports","BaseNodeView"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.formatPreview=function(e){if(null==e||void 0===e)return n.prototype.formatPreview.apply(this,arguments);if(void 0===e.length&&!e.normal&&!e.polygons&&!e.vertices)return n.prototype.formatPreview.apply(this,arguments);if(e.length>0&&!e[0].normal&&!e[0].polygons&&!e[0].vertices)return n.prototype.formatPreview.apply(this,arguments);if(e.normal)return"Plane";if(e.polygons)return"Solid";if(e.vertices)return"Polygon";if(e.length){for(var t=0,r=0,i=0,o=0;o<e.length;o++)e[o].polygons&&t++,e[o].normal&&i++,e[o].vertices&&r++;var s=t+" Solids",a=r+" Polygons",l=i+" Planes",c=[];return t>0&&c.push(s),i>0&&c.push(l),r>0&&c.push(a),0===i&&0===t&&0===r?"Nothing":c.join(",")}return"null"},t.prototype.renderNode=function(){n.prototype.renderNode.apply(this,arguments);var e=this.$el.find(".toggle-vis"),t=e.find("i"),r=e.find("span");return this.model.get("visible")?(t.addClass("fa-eye"),t.removeClass("fa-eye-slash"),r.html("Hide geometry")):(t.removeClass("fa-eye"),t.addClass("fa-eye-slash"),r.html("Show geometry")),this},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("WatchNodeView",["require","exports","underscore","jquery","BaseNodeView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#node-watch-template").html())},enumerable:!0,configurable:!0}),t.prototype.render=function(){i.prototype.render.apply(this,arguments),this.isScrollable=!0,i.prototype.renderScrollBarAndResizable.apply(this,arguments);var e=this.$el.find(".watch-data-container");return e.css({width:e.width().toString()+"px",height:e.height().toString()+"px"}),this.model.isArray?this.$el.find(".node-last-value-wrapper").css({height:"calc(100% - 22px)"}):this.$el.find(".list-level-panel").hide(),this},t}(i);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("BaseScriptNodeView",["require","exports","ThreeCSGNodeView"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e){n.prototype.initialize.apply(this,arguments),this.getCustomContents=function(){var e=this.model.toJSON();return this.innerTemplate(e)}},t.prototype.setCodeblockDraggableOption=function(){var e=this.$el.draggable("option","cancel");e.match(/.code-block-input/i)||this.$el.draggable("option","cancel",e+",.code-block-input")},t.prototype.finishEvaluating=function(){this.$el.removeClass("node-evaluating")},t.prototype.onChangedExtra=function(){this.render(),this.$el.addClass("node-evaluating")},t.prototype.onConnectionsUpdate=function(){var e=this.model.get("extra")||{};this.removeConnections(e),void 0!==e.inputs&&(this.setInputConnections(),this.setInputsProperty(e.inputs),this.model.get("type").setInputs(e.inputs)),void 0!==e.outputs&&(this.setOutputConnections(),this.setOutputsProperty(e.outputs),this.model.get("type").setOutputs(e.outputs)),this.render(),this.model.trigger("change:position"),this.finishEvaluating()},t.prototype.removeConnections=function(e){var t=0,n=0,r=null,i=null,o=null,s=null,a=0;for(i=this.model.getPorts(!1),n=i.length,t=n-1;t>=0;t--)s=e.oldInputs[t],s=s.replace(/['"]+/g,""),a=e.inputs.indexOf(s),a==-1&&(o=i[t],o&&o[0]&&(o[0].silentRemove=!0),this.model.disconnectPort(t,null,!1));for(i=this.model.getPorts(!0),n=i.length,t=n-1;t>=0;t--)if(s=e.oldOutputs[t],s=s.replace(/['"]+/g,""),a=e.outputs.indexOf(s),a==-1&&this.model.isPortConnected(t,!0))for(o=i[t];o.length;)r=o[0],r.silentRemove=!0,this.model.disconnectPort(t,r,!0),this.model.trigger("request-remove-conn-from-collection",r)},t.prototype.setInputConnections=function(){var e=this.model.get("inputConnections"),t=e.slice(0),n=this.model.get("extra"),r=0,i=0,o=0,s=null,a=n.oldInputs.length,l=n.inputs.length;for(r=0;r<l;r++)if(o=n.oldInputs.indexOf(n.inputs[r]),o==-1)e[r]=[];else if(s=t[o],e[r]=s,s&&r!=o)for(i=0;i<s.length;i++)s[i].set("endPortIndex",r);l<a&&e.remove(l,a-1)},t.prototype.setOutputConnections=function(){var e=this.model.get("outputConnections"),t=e.slice(0),n=this.model.get("extra"),r=0,i=0,o=0,s=null,a=n.oldOutputs.length,l=n.outputs.length;for(r=0;r<l;r++)if(o=n.oldOutputs.indexOf(n.outputs[r]),o==-1)e[r]=[];else if(s=t[o]||[],e[r]=s,s&&r!=o)for(i=0;i<s.length;i++)s[i].set("startPortIndex",r);l<a&&e.remove(l,a-1)},t.prototype.setInputsProperty=function(e){if(void 0!==e){var t=this.model.get("extra"),n=JSON.parse(JSON.stringify(t));n.inputs=e;var r={property:"extra",_id:this.model.get("_id"),newValue:n,oldValue:t};this.model.trigger("request-set-node-prop",r)}},t.prototype.setOutputsProperty=function(e){if(void 0!==e){var t=this.model.get("extra"),n=JSON.parse(JSON.stringify(t));n.outputs=e;var r={property:"extra",_id:this.model.get("_id"),newValue:n,oldValue:t};this.model.trigger("request-set-node-prop",r)}},t.prototype.renderNode=function(){return n.prototype.renderNode.apply(this,arguments)},t.prototype.moveNode=function(){return n.prototype.moveNode.apply(this,arguments)},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("FormulaView",["require","exports","underscore","jquery","BaseScriptNodeView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e){this.innerTemplate=n.template(r("#node-formula-template").html()),i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.onChangedExtra),this.listenTo(this.model,"connections-update",this.onConnectionsUpdate),this.listenTo(this.model,"cbn-up-to-date",this.finishEvaluating),this.input=null},t.prototype.renderNode=function(){return i.prototype.renderNode.apply(this,arguments),this.input=this.$el.find(".formula-text-input"),this.input.focus(function(e){this.selectable=!1,this.model.set("selected",!1),e.stopPropagation()}.bind(this)),this.input.blur(function(){var e=JSON.parse(JSON.stringify(this.model.get("extra")));if(e.script!==this.input.val()){e.script=this.input.val();var t={property:"extra",_id:this.model.get("_id"),newValue:e};this.model.trigger("request-set-node-prop",t),this.selectable=!0}}.bind(this)),this},t.prototype.removeConnections=function(e){var t=e.inputs,n=e.oldInputs;if(n.length>t.length)for(var r=n.length-1;r>=t.length;r--)this.model.disconnectPort(r,null,!1)},t.prototype.onConnectionsUpdate=function(){var e=this.model.get("extra")||{};this.removeConnections(e),void 0!==e.inputs&&(this.setInputsProperty(e.inputs),this.model.get("type").setInputs(e.inputs)),this.render(),this.model.trigger("change:position"),this.finishEvaluating()},t.prototype.moveNode=function(){return i.prototype.moveNode.apply(this,arguments),this},t}(i);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CodeBlockView",["require","exports","underscore","jquery","BaseScriptNodeView","Prism"],function(e,t,n,r,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e){this.innerTemplate=n.template(r("#code-block-template").html()),s.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.onChangedExtra),this.listenTo(this.model,"connections-update",this.onConnectionsUpdate),this.listenTo(this.model,"cbn-up-to-date",this.finishEvaluating),this.listenToOnce(this,"after-render",function(){var e=this.$el.find("code");e.data("x",e.outerWidth()),e.data("y",e.outerHeight())}),this.$el.on("mouseup",this.adjustElements.bind(this)),this.$el.on("mousemove",this.adjustElements.bind(this)),this.input=null},t.prototype.renderNode=function(){var e,t,n,r=0,o=0,a=0;if(s.prototype.renderNode.apply(this,arguments),this.input=this.$el.find(".code-block-input"),this.input.click(function(){this.input.attr("contenteditable","true"),this.input.focus()}.bind(this)),this.input.focus(function(e){this.selectable=!1,this.model.set("selected",!1),e.stopPropagation()}.bind(this)),this.input.blur(function(){this.selectable=!0,this.input.attr("contenteditable","false");var e=JSON.parse(JSON.stringify(this.model.get("extra")));if(!this.input[0].innerText)return void(this.input[0].innerText=e.code?e.code:"");if(e.code!=this.input[0].innerText){e.code=this.input[0].innerText;var t={property:"extra",_id:this.model.get("_id"),newValue:e};this.model.trigger("request-set-node-prop",t)}}.bind(this)),this.input.keyup(function(){this.renderPorts(),this.model.trigger("change:position")}.bind(this)),e=this.model.get("extra")||{},e.outputs)for(o=e.outputs.length;r<o;r++)n=this.$el.find(".node-port-output[data-index=' "+r+" ']"),e.lineIndices&&(a=r>0?e.lineIndices[r]-e.lineIndices[r-1]-1:e.lineIndices[r],t=25*a,n.css("margin-top",t),r>0&&(n=this.$el.find(".node-port-output[data-index=' "+(r-1)+" ']"),t?n.addClass("need-bottom"):n.removeClass("need-bottom")));var l=!0,c=e.lock===!!e.lock?e.lock:l;if(e.lock!==c){e.lock=c;var u={property:"extra",_id:this.model.get("_id"),newValue:e};this.model.trigger("lock-changed"),this.model.trigger("request-set-node-prop",u)}return this.lockInput=this.$el.find(".lock-input"),this.lockInput.prop("checked",c),this.lockInput.change(function(e){this.lockChanged.call(this,e),e.stopPropagation()}.bind(this)),this.trigger("after-render"),i.highlightAll(),this},t.prototype.moveNode=function(){return s.prototype.moveNode.apply(this,arguments),this.input[0].innerText||this.input.focus(),this},t.prototype.lockChanged=function(e){var t=JSON.parse(JSON.stringify(this.model.get("extra")));t.lock=this.lockInput.is(":checked");var n={property:"extra",_id:this.model.get("_id"),newValue:t};this.model.trigger("request-set-node-prop",n),this.model.trigger("lock-changed")},t.prototype.adjustElements=function(){var e=this.$el.find("code");e.outerWidth()===e.data("x")&&e.outerHeight()===e.data("y")||(this.renderPorts(),this.trigger("update-connections"),e.data("x",e.outerWidth()),e.data("y",e.outerHeight()))},t}(s);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("OutputView",["require","exports","underscore","jquery","BaseNodeView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#node-output-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.onChangedExtra)},t.prototype.onChangedExtra=function(){var e=this.model.get("extra"),t=void 0!=e?e.name:"";this.silentSyncUI(t)},t.prototype.render=function(){i.prototype.render.apply(this,arguments),this.$el.addClass("output-node");var e=this.model.get("extra"),t=void 0!=e.name?e.name:"";return this.inputText=this.$el.find(".text-input"),this.inputText.val(t),this.inputText.change(function(e){this.nameChanged(e),e.stopPropagation()}.bind(this)),this},t.prototype.nameChanged=function(){this.inputSet(),this.model.trigger("updateRunner")},t.prototype.silentSyncUI=function(e){this.silent=!0,this.inputText.val(e),this.silent=!1},t.prototype.inputSet=function(e,t){if(!this.silent){var n={name:this.inputText.val()},r={property:"extra",_id:this.model.get("_id"),newValue:n};this.model.trigger("request-set-node-prop",r)}},t}(i);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("InputView",["require","exports","underscore","jquery","BaseNodeView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#node-input-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.onChangedExtra)},t.prototype.onChangedExtra=function(){var e=this.model.get("extra"),t=void 0!=e?e.name:"";this.silentSyncUI(t)},t.prototype.render=function(){i.prototype.render.apply(this,arguments),this.$el.addClass("input-node");var e=this.model.get("extra"),t=void 0!=e.name?e.name:"";return this.inputText=this.$el.find(".text-input"),this.inputText.val(t),this.inputText.change(function(e){this.nameChanged(e),e.stopPropagation()}.bind(this)),this},t.prototype.nameChanged=function(){this.inputSet(),this.model.trigger("updateRunner")},t.prototype.silentSyncUI=function(e){this.silent=!0,this.inputText.val(e),this.silent=!1},t.prototype.inputSet=function(e,t){if(!this.silent){var n={name:this.inputText.val()},r={property:"extra",_id:this.model.get("_id"),newValue:n};this.model.trigger("request-set-node-prop",r)}},t}(i);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CustomNodeView",["require","exports","underscore","jquery","ThreeCSGNodeView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e){this.innerTemplate=n.template(r("#node-custom-template").html()),i.prototype.initialize.apply(this,arguments),this.getCustomContents=function(){this.$el.bind("dblclick",function(){this.trigger("request-open-definition",this.model.get("type").functionId)}.bind(this));var e=this.model.toJSON();return e.extra.script||(e.extra.script=this.model.get("type").script),this.innerTemplate(e)}},t}(i);return s}),n("StringBase",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.owner=e}return e.prototype.extraChanged=function(){var e=this.owner.model.get("extra");this.syncUI(e.value)},e.prototype.blurInput=function(){this.owner.selectable=!0;var e=this.owner.model.get("extra"),t=this.owner.$el.find(".string-node-input").val()||this.owner.$el.find(".widget-string-input").val();if(e.value!==t){var n={value:t},r={property:"extra",_id:this.owner.model.get("_id"),newValue:n};this.owner.model.trigger("request-set-node-prop",r),this.owner.model.trigger("updateRunner")}},e.prototype.syncUI=function(e){this.owner.$el.find(".string-node-input, .widget-string-input").val(e)},e}();return n});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("StringView",["require","exports","underscore","jquery","BaseNodeView","StringBase"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#node-string-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){var e=i.prototype.events.apply(this);return e=n.extend(e,{"focus .string-node-input":"focusInput",
"blur .string-node-input":"blurInput","keyup .string-node-input":"fitSize"})},t.prototype.initialize=function(e){this.stringBase=new s(this),i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.stringBase.extraChanged.bind(this.stringBase))},t.prototype.render=function(){var e=this.model.get("extra"),t=e.lock||!1;return i.prototype.render.apply(this,arguments),this.lockInput=this.$el.find(".lock-input"),this.lockInput.val(t),this.lockInput.change(function(e){this.lockChanged.call(this,e),e.stopPropagation()}.bind(this)),this.fitSize(),this},t.prototype.lockChanged=function(e){var t=JSON.parse(JSON.stringify(this.model.get("extra")));t.lock=this.lockInput.is(":checked"),this.model.trigger("request-set-node-prop",{property:"extra",_id:this.model.get("_id"),newValue:t}),this.model.trigger("lock-changed")},t.prototype.blurInput=function(){this.stringBase.blurInput()},t.prototype.focusInput=function(e){this.selectable=!1,this.model.set("selected",!1),e.stopPropagation()},t.prototype.fitSize=function(e){var t=e?e.originalEvent.srcElement:this.$el.find(".string-node-input")[0];t&&(r(t).height(0),r(t).height(t.scrollHeight),e&&e.stopPropagation())},t}(i);return a}),n("BooleanBase",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.owner=e}return e.prototype.extraChanged=function(){var e=this.owner.model.get("extra"),t=!!e.value;this.syncUI(t)},e.prototype.clickTrue=function(e){this.owner.model.get("extra").value!==!0&&(this.valueChanged(!0),e.stopPropagation())},e.prototype.clickFalse=function(e){this.owner.model.get("extra").value!==!1&&(this.valueChanged(!1),e.stopPropagation())},e.prototype.syncUI=function(e){e?this.owner.$el.find(".true-flag").prop("checked",!0):this.owner.$el.find(".false-flag").prop("checked",!0)},e.prototype.valueChanged=function(e){var t={value:e},n={property:"extra",_id:this.owner.model.get("_id"),newValue:t};this.owner.model.trigger("request-set-node-prop",n),this.owner.model.trigger("updateRunner")},e}();return n});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("BooleanView",["require","exports","underscore","jquery","BaseNodeView","BooleanBase"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#node-boolean-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){var e=i.prototype.events.apply(this);return e=n.extend(e,{"click .true-flag":"clickTrue","click .false-flag":"clickFalse"})},t.prototype.initialize=function(e){this.booleanBase=new s(this),i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.booleanBase.extraChanged.bind(this.booleanBase))},t.prototype.render=function(){var e=this.model.get("extra"),t=e.lock||!1;return i.prototype.render.apply(this,arguments),this.$el.find(".true-flag").attr("name",this.model.id+this.cid),this.$el.find(".false-flag").attr("name",this.model.id+this.cid),this.lockInput=this.$el.find(".lock-input"),this.lockInput.val(t),this.lockInput.change(function(e){this.lockChanged.call(this,e),e.stopPropagation()}.bind(this)),this},t.prototype.lockChanged=function(e){var t=JSON.parse(JSON.stringify(this.model.get("extra")));t.lock=this.lockInput.is(":checked"),this.model.trigger("request-set-node-prop",{property:"extra",_id:this.model.get("_id"),newValue:t}),this.model.trigger("lock-changed")},t.prototype.inputSet=function(){},t.prototype.silentSyncUI=function(e){},t.prototype.clickTrue=function(e){this.booleanBase.clickTrue(e)},t.prototype.clickFalse=function(e){this.booleanBase.clickFalse(e)},t}(i);return a}),function(e){"function"==typeof n&&n.amd?n("controlgroup",["jquery","../widget"],e):e(jQuery)}(function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,function(r,i){var o,s={};if(i)return"controlgroupLabel"===r?(o=t.element.find(i),o.each(function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),t._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(o.get()))):void(e.fn[r]&&(s=t["_"+r+"Options"]?t["_"+r+"Options"]("middle"):{classes:{}},t.element.find(i).each(function(){var i=e(this),o=i[r]("instance"),a=e.widget.extend({},s);if("button"!==r||!i.parent(".ui-spinner").length){o||(o=i[r]()[r]("instance")),o&&(a.classes=t._resolveClassesValues(a.classes,o)),i[r](a);var l=i[r]("widget");e.data(l[0],"ui-controlgroup-data",o?o:i[r]("instance")),n.push(l[0])}})))}),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var n=e(this),r=n.data("ui-controlgroup-data");r&&r[t]&&r[t]()})},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",r=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n),this._addClass(e,null,r)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,r={classes:{}};return r.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],r},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,r){var i={};return e.each(n,function(o){var s=r.options.classes[o]||"";s=e.trim(s.replace(t,"")),i[o]=(s+" "+n[o]).replace(/\s+/g," ")}),i},_setOption:function(e,t){return"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"===e?void this._callChildMethod(t?"disable":"enable"):void this.refresh()},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],function(e,r){var i=t[r]().data("ui-controlgroup-data");if(i&&n["_"+i.widgetName+"Options"]){var o=n["_"+i.widgetName+"Options"](1===t.length?"only":r);o.classes=n._resolveClassesValues(o.classes,i),i.element[i.widgetName](o)}else n._updateCornerClass(t[r](),r)}),this._callChildMethod("refresh"))}})}),function(e){"function"==typeof n&&n.amd?n("../escape-selector",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}()}),function(e){"function"==typeof n&&n.amd?n("../form",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}}),function(e){"function"==typeof n&&n.amd?n("../form-reset-mixin",["jquery","./form","./version"],e):e(jQuery)}(function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var n=t.data("ui-form-reset-instances");e.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}}),function(e){"function"==typeof n&&n.amd?n("../labels",["jquery","./version","./escape-selector"],e):e(jQuery)}(function(e){return e.fn.labels=function(){var t,n,r,i,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),r=this.attr("id"),r&&(t=this.eq(0).parents().last(),o=t.add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(r)+"']",i=i.add(o.find(n).addBack(n))),this.pushStack(i))}}),function(e){"function"==typeof n&&n.amd?n("checkboxradio",["jquery","../escape-selector","../form-reset-mixin","../labels","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n,r=this,i=this._super()||{};return this._readType(),n=this.element.labels(),this.label=e(n[n.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){r.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),t=this.element[0].disabled,null!=t&&(i.disabled=t),i},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t,n=this.element[0].name,r="input[name='"+e.ui.escapeSelector(n)+"']";return n?(t=this.form.length?e(this.form[0].elements).filter(r):e(r).filter(function(){return 0===e(this).form().length}),t.not(this.element)):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t)return this._super(e,t),"disabled"===e?(this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t)):void this.refresh()},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio}),function(e){"function"==typeof n&&n.amd?n("../keycode",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),function(e){"function"==typeof n&&n.amd?n("button",["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),e=this.element[0].disabled,null!=e&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var r="iconPosition"!==t,i=r?this.options.iconPosition:n,o="top"===i||"bottom"===i;this.icon?r&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),r&&this._addClass(this.icon,null,n),this._attachIcon(i),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),e.uiBackCompat!==!1&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){return"text"===e?void this._super("showLabel",t):("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),e.fn.button=function(t){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button}),function(e){"function"==typeof n&&n.amd?n("../safe-active-element",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){"function"==typeof n&&n.amd?n("spinner",["jquery","./button","../version","../keycode","../safe-active-element","../widget"],e):e(jQuery)}(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}return e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);null!=i&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var t=this.element[0]===e.ui.safeActiveElement(this.document[0]);t||(this.element.trigger("focus"),this.previous=r,this._delay(function(){this.previous=r}))}var r;r=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return this._start(t)!==!1&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&this._trigger("start",e)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=null!==r.min?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==r.max&&e>r.max?r.max:null!==r.min&&e<r.min?r.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var n,r,i;return"culture"===e||"numberFormat"===e?(n=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(n))):("max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(r=this.buttons.first().find(".ui-icon"),this._removeClass(r,null,this.options.icons.up),this._addClass(r,null,t.up),i=this.buttons.last().find(".ui-icon"),this._removeClass(i,null,this.options.icons.down),this._addClass(i,null,t.down)),void this._super(e,t))},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:t(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.uiBackCompat!==!1&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),e.ui.spinner}),n("NumberBase",["require","exports","underscore","jquery","spinner"],function(e,t,n,r){"use strict";var i=function(){function e(e){this.owner=e}return e.prototype.extraChanged=function(){var e=this.owner.model.get("extra");n.bind(this.owner.silentSyncUI,this.owner,e)()},e.prototype.getNumber=function(e){var t=parseFloat(e);return(!e&&0!==e||t.toString()!==e.toString())&&(t=NaN),t},e.prototype.getNumberWithDefault=function(e,t){var n=this.getNumber(e);return isNaN(n)&&(n=t),n},e.prototype.extractNumberFromExtra=function(){var e=this.owner.model.get("extra"),t=this.getNumberWithDefault(e.value,0);return t},e.prototype.extractNumberOrRangeFromExtra=function(){var e=this.owner.model.get("extra"),t=0;return null!=e.value&&(t=e.value),t},e.prototype.valChanged=function(e){e&&e.stopPropagation();var t=this.getNumber(this.owner.currentValueInput.val());return isNaN(t)?void this.owner.currentValueInput.val(this.oldValue):(this.oldValue=t,void n.bind(this.owner.inputSet,this.owner)())},e.prototype.baseRender=function(){var e=this.extractNumberOrRangeFromExtra();this.owner.currentValueInput=this.owner.$el.find(".currentValue"),this.owner.currentValueInput.val(e),this.oldValue=e,this.owner.currentValueInput.change(this.valChanged.bind(this));var t=this.owner,n=this.owner.currentValueInput.spinner(),i=this.owner.$el.find(".ui-spinner-button");return n.on("spinchange",function(e,t){r(this).change()}),n.on("spin",function(e,t){r(this).val(t.value),r(this).change()}),i.hide(),n.parent().hover(function(){i.toggle()},function(){i.toggle()}),i.click(function(e){e.stopImmediatePropagation()}),r(".dropdown.keep-open").on({"shown.bs.dropdown":function(){t.selectable=!1,t.model.set("selected",!1),r(this).data("closable",!1)},mouseleave:function(){r(this).data("closable",!0)},click:function(){r(this).data("closable",!1)},"hide.bs.dropdown":function(){return r(this).data("closable")&&(t.selectable=!0),r(this).data("closable")}}),this},e}();return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("NumberNodeView",["require","exports","underscore","jquery","BaseNodeView","NumberBase"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#number-node-view-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.numberBase=new s(this),i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.numberBase.extraChanged.bind(this.numberBase)),this.currentValueInput=null},t.prototype.render=function(){i.prototype.render.apply(this,arguments);var e=this.model.get("extra"),t=void 0!=e.lock&&e.lock;return this.lockInput=this.$el.find(".lock-input"),this.lockInput.val(t),this.lockInput.change(function(e){this.lockChanged(e),e.stopPropagation()}.bind(this)),n.bind(this.numberBase.baseRender,this.numberBase)(),this},t.prototype.inputSet=function(){if(!this.silent){var e={value:this.currentValueInput.val(),lock:this.lockInput.is(":checked")},t={property:"extra",_id:this.model.get("_id"),newValue:e};this.model.trigger("request-set-node-prop",t)}},t.prototype.silentSyncUI=function(e){this.silent=!0,this.currentValueInput.val(e.value),this.lockInput.val(e.lock),this.silent=!1},t.prototype.lockChanged=function(e){this.inputSet(),this.model.trigger("lock-changed")},t}(i);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("VariableInputView",["require","exports","underscore","jquery","ThreeCSGNodeView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e){this.innerTemplate=n.template(r("#variable-input-template").html()),i.prototype.initialize.apply(this,arguments),
this.getCustomContents=function(){var e=this.model.toJSON();return this.innerTemplate(e)}},t.prototype.events=function(){var e=i.prototype.events.apply(this);return e=n.extend(e,{"click .add-input":"addInput","click .remove-input":"removeInput"})},t.prototype.updatePorts=function(){var e=this.model.get("type"),t=this.model.get("extra"),n=JSON.parse(JSON.stringify(t)),r=e.inputs.map(function(e){return!e.useDefault});n.varInputs=e.inputs.map(function(e){return{name:e.name,type:e.typeName}}),this.model.set("ignoreDefaults",r);var i={property:"extra",_id:this.model.get("_id"),newValue:n,oldValue:t};this.model.trigger("request-set-node-prop",i),this.render(),this.model.trigger("update-node"),this.model.trigger("requestRun")},t.prototype.addInput=function(e){e.preventDefault(),e.stopPropagation();var t=this.model.get("type"),n=this.model.get("inputConnections"),r=this.model.get("inPortVariableIndexOffset"),i=t.inputs.length;26!==i&&(this.model.trigger("addInPort",this.model),t.addInput(this.getPortName(i-r),this.getPortDescription(i-r),this.getPortToolTip(i-r)),n.push([]),this.updatePorts())},t.prototype.removeInput=function(e){e.preventDefault(),e.stopPropagation();var t,n,r=this.model.get("type"),i=this.model.get("inPortMinimum");r.inputs.length!==i&&(this.model.trigger("removeInPort",this.model),t=this.model.get("inputConnections"),n=t[r.inputs.length-1],n&&n[0]&&(n[0].silentRemove=!0),this.model.disconnectPort(r.inputs.length-1,null,!1),t.pop(),r.removeInput(),this.updatePorts())},t.prototype.getPortName=function(e){var t=this.model.type.inputs.slice(-1)[0],n=t.name||"index",r=n.replace(/\d+/g,"");return r+e},t.prototype.getPortDescription=function(e){var t=this.model.type.inputs.slice(-1)[0],n=t.typeName||"index #",r=n.replace(/\d+/g,"");return r+e},t.prototype.getPortToolTip=function(e){var t=this.model.type.inputs.slice(-1)[0],n=t.toolTip||"index #",r=n.replace(/\d+/g,"");return r+e},t}(i);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("PythonEditorView",["require","exports","backbone","underscore","Prism"],function(e,t,n,r){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#pythonEditor"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"search-element category"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#python-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #save-python":"clickSave","click #exit-python":"clickExit"}},t.prototype.initialize=function(e){this.model=e.model,this.script=null},t.prototype.render=function(){return this.$el.html(this.template({script:this.model.get("extra").script})),this.script=this.$el.find("#python-script"),i.highlightElement(this.script[0]),this},t.prototype.clickSave=function(e){var t=this.model.get("extra"),n=JSON.parse(JSON.stringify(t));n.script=this.script[0].innerText;var r={property:"extra",_id:this.model.get("_id"),newValue:n,oldValue:t};this.model.trigger("request-set-node-prop",r),this.$el.fadeOut()},t.prototype.clickExit=function(e){this.$el.fadeOut()},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("PythonScriptView",["require","exports","underscore","VariableInputView","PythonEditorView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.events=function(){var e=r.prototype.events.apply(this);return e=n.extend(e,{dblclick:"openPythonScriptView"})},t.prototype.initialize=function(e){r.prototype.initialize.apply(this,arguments),this.pythonView=null},t.prototype.openPythonScriptView=function(){null==this.pythonView&&(this.pythonView=new i({model:this.model})),this.pythonView.render(),this.pythonView.$el.fadeIn()},t.prototype.getPortName=function(e){return"IN["+e+"]"},t.prototype.getPortDescription=function(e){return"Input #"+e},t}(r);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SliderNodeViewBase",["require","exports","underscore","NumberBase"],function(e,t,n,r){"use strict";var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.getCurrentValue=function(){return this.slider.slider("option","value")},t.prototype.getCurrentMax=function(){return this.slider.slider("option","max")},t.prototype.getCurrentMin=function(){return this.slider.slider("option","min")},t.prototype.getCurrentStep=function(){return this.slider.slider("option","step")},t.prototype.setSliderValue=function(e){return this.slider.slider("option","value",e)},t.prototype.extractFromExtra=function(){var e=this.owner.model.get("extra"),t=r.prototype.extractNumberFromExtra.call(this),n=t<-150?t:-150,i=t>150?t:150,o={value:t,min:n,max:i,step:.1,slide:function(){},change:function(){}};return o.min=this.getNumberWithDefault(e.min,n),o.max=this.getNumberWithDefault(e.max,i),o.step=this.getNumberWithDefault(e.step,.1),o},t.prototype.valChanged=function(e){e&&e.stopPropagation();var t=this.getNumber(this.owner.currentValueInput.val());return isNaN(t)?void this.owner.currentValueInput.val(this.getCurrentValue()):(t>this.maxInput.val()?(this.maxInput.val(t),this.slider.slider("option","max",t)):t<this.minInput.val()&&(this.minInput.val(t),this.slider.slider("option","min",t)),void this.setSliderValue(t))},t.prototype.minChanged=function(e){e&&e.stopPropagation();var t=this.getNumber(this.minInput.val());return isNaN(t)?void this.minInput.val(this.getCurrentMin()):(t>this.getCurrentMax()&&(t=this.getCurrentMax(),this.minInput.val(t)),this.getCurrentValue()<t&&(this.setSliderValue(t),this.owner.currentValueInput.val(t)),this.slider.slider("option","min",t),this.owner.currentValueInput.attr("min",t),void n.bind(this.owner.inputSet,this.owner)())},t.prototype.maxChanged=function(e){e&&e.stopPropagation();var t=this.getNumber(this.maxInput.val());return isNaN(t)?void this.maxInput.val(this.getCurrentMax()):(t<this.getCurrentMin()&&(t=this.getCurrentMin(),this.maxInput.val(t)),this.getCurrentValue()>t&&(this.setSliderValue(t),this.owner.currentValueInput.val(t)),this.slider.slider("option","max",t),this.owner.currentValueInput.attr("max",t),void n.bind(this.owner.inputSet,this.owner)())},t.prototype.stepChanged=function(e){e&&e.stopPropagation();var t=this.getNumber(this.stepInput.val());return isNaN(t)||t<=0?void this.stepInput.val(this.getCurrentStep()):(this.slider.slider("option","step",t),this.owner.currentValueInput.attr("step",t),void n.bind(this.owner.inputSet,this.owner)())},t.prototype.inputChanged=function(e,t){var n=t.value;this.owner.$el.find(".currentValue").html(n)},t.prototype.baseRender=function(){if(this.slider=this.owner.$el.find(".slider"),this.slider){var e=this.extractFromExtra();return e.change=this.owner.inputSet.bind(this.owner),e.slide=this.inputChanged.bind(this),this.slider.slider(e),r.prototype.baseRender.call(this),this.owner.currentValueInput.attr("min",e.min),this.owner.currentValueInput.attr("max",e.max),this.owner.currentValueInput.attr("step",e.step),this.minInput=this.owner.$el.find(".num-min"),this.minInput.val(e.min),this.minInput.change(this.minChanged.bind(this)),this.maxInput=this.owner.$el.find(".num-max"),this.maxInput.val(e.max),this.maxInput.change(this.maxChanged.bind(this)),this.stepInput=this.owner.$el.find(".num-step"),this.stepInput.val(e.step),this.stepInput.change(this.stepChanged.bind(this)),this}},t}(r);return i}),function(e){"function"==typeof n&&n.amd?n("slider",["jquery","./mouse","../keycode","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",s=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),t=i.length;t<n;t++)s.push(o);this.handles=i.add(e(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,o,s,a,l,c,u=this,p=this.options;return!p.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-u.values(t));(i>n||i===n&&(t===u._lastChangedValue||u.values(t)===p.min))&&(i=n,o=e(this),s=t)}),a=this._start(t,s),a!==!1&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),l=o.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,o;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),o=this._valueMin()+r*i,this._trimAlignValue(o)},_uiHash:function(e,t,n){var r={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(r.value=void 0!==t?t:this.values(e),r.values=n||this.values()),r},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,n){var r,i,o=this.value(),s=this.values();this._hasMultipleValues()&&(i=this.values(t?0:1),o=this.values(t),2===this.options.values.length&&this.options.range===!0&&(n=0===t?Math.min(i,n):Math.max(i,n)),s[t]=n),n!==o&&(r=this._trigger("slide",e,this._uiHash(t,n,s)),r!==!1&&(this._hasMultipleValues()?this.values(t,n):this.value(n)))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var r,i,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(r=this.options.values,i=arguments[0],o=0;o<r.length;o+=1)r[o]=this._trimAlignValue(i[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,n){var r,i=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),this._super(t,n),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=i-1;r>=0;r--)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(n=this.options.values.slice(),r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return 2*Math.abs(n)>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,r=Math.round((e-t)/n)*n;e=r+t,e>this.options.max&&(e-=n),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,n,r,i,o,s=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,u={};this._hasMultipleValues()?this.handles.each(function(r){n=(l.values(r)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===r&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},a.animate),1===r&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:a.animate})):(0===r&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},a.animate),1===r&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:a.animate}))),t=n}):(r=this.value(),i=this._valueMin(),o=this._valueMax(),n=o!==i?(r-i)/(o-i)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},a.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},a.animate))},_handleEvents:{keydown:function(t){var n,r,i,o,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),n=this._start(t,s),n===!1))return}switch(o=this.options.step,r=i=this._hasMultipleValues()?this.values(s):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-o)}this._slide(t,s,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),this._removeClass(e(t.target),null,"ui-state-active"))}}})});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("NumberSliderNodeView",["require","exports","underscore","jquery","BaseNodeView","SliderNodeViewBase","slider"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#slider-node-view-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.sliderNodeViewBase=new s(this),i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.sliderNodeViewBase.extraChanged.bind(this.sliderNodeViewBase)),this.currentValueInput=null},t.prototype.render=function(){i.prototype.render.apply(this,arguments);var e=this.model.get("extra"),t=void 0!=e.lock&&e.lock;return this.lockInput=this.$el.find(".lock-input"),this.lockInput.val(t),this.lockInput.change(function(e){this.lockChanged(e),e.stopPropagation()}.bind(this)),n.bind(this.sliderNodeViewBase.baseRender,this.sliderNodeViewBase)(),this},t.prototype.inputSet=function(){if(!this.silent){var e={value:this.sliderNodeViewBase.slider.slider("option","value"),min:this.sliderNodeViewBase.slider.slider("option","min"),step:this.sliderNodeViewBase.slider.slider("option","step"),max:this.sliderNodeViewBase.slider.slider("option","max"),lock:this.lockInput.is(":checked")},t={property:"extra",_id:this.model.get("_id"),newValue:e};this.model.trigger("request-set-node-prop",t)}},t.prototype.silentSyncUI=function(e){this.silent=!0,this.currentValueInput.val(e.value),this.sliderNodeViewBase.setSliderValue(e.value),this.sliderNodeViewBase.minInput.html(e.min),this.sliderNodeViewBase.maxInput.html(e.max),this.sliderNodeViewBase.stepInput.html(e.step),this.lockInput.val(e.lock),this.silent=!1},t.prototype.lockChanged=function(e){this.inputSet(),this.model.trigger("lock-changed")},t}(i);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("IntegerSliderNodeView",["require","exports","NumberSliderNodeView"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getNumber=function(e){var t=parseInt(e);return(!e&&0!==e||t.toString()!==e.toString())&&(t=NaN),t},t.prototype.extractFromExtra=function(){var e=this.sliderNodeViewBase.extractFromExtra.apply(this,arguments).bind(this.sliderNodeViewBase);return e.step=e.step>=1?e.step:1,e},t}(n);return r}),function(){var e,t,r,i,o,s,a,l,c,u,p,h,d,f,m,g,y,v,b,S,w,x,C,_,k,A,D,T,P,M,E,N,O,I,V,L,R,G,B,F,j,z,U,W,H,q,$,X,Y,J,K,Q,Z,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,pe,he,de,fe,me,ge,ye,ve,be,Se,we,xe,Ce,_e,ke,Ae=[].slice;we=function(){var e,t,n,r,i;for(e={},i="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,t=i.length;t>r;r++)n=i[r],e["[object "+n+"]"]=n.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),H=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),t>e&&(e=t),e>n&&(e=n),e},xe=function(e){return e.length>=3?[].slice.call(e):e[0]},S=function(e){var t;for(t in e)3>t?(e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e},i=Math.PI,ge=Math.round,C=Math.cos,T=Math.floor,ee=Math.pow,q=Math.log,ve=Math.sin,be=Math.sqrt,d=Math.atan2,Y=Math.max,h=Math.abs,a=2*i,o=i/3,t=i/180,s=180/i,b=function(){return arguments[0]instanceof e?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,arguments,function(){})},p=[],"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=b),"function"==typeof n&&n.amd?n("chroma",[],function(){return b}):(me="undefined"!=typeof exports&&null!==exports?exports:this,me.chroma=b),b.version="1.1.1",u={},l=[],c=!1,e=function(){function e(){var e,t,n,r,i,o,s,a,p;for(o=this,t=[],a=0,r=arguments.length;r>a;a++)e=arguments[a],null!=e&&t.push(e);if(s=t[t.length-1],null!=u[s])o._rgb=S(u[s](xe(t.slice(0,-1))));else{for(c||(l=l.sort(function(e,t){return t.p-e.p}),c=!0),p=0,i=l.length;i>p&&(n=l[p],!(s=n.test.apply(n,t)));p++);s&&(o._rgb=S(u[s].apply(u,t)))}null==o._rgb&&console.warn("unknown format: "+t),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.alpha=function(e){return arguments.length?(this._rgb[3]=e,this):this._rgb[3]},e.prototype.toString=function(){return this.name()},e}(),b._input=u,b.brewer=y={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Ce={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"},b.colors=x=Ce,F=function(){var e,t,n,i,o,s,a,l,c;return t=xe(arguments),o=t[0],e=t[1],n=t[2],l=(o+16)/116,a=isNaN(e)?l:l+e/500,c=isNaN(n)?l:l-n/200,l=r.Yn*j(l),a=r.Xn*j(a),c=r.Zn*j(c),s=ke(3.2404542*a-1.5371385*l-.4985314*c),i=ke(-.969266*a+1.8760108*l+.041556*c),n=ke(.0556434*a-.2040259*l+1.0572252*c),s=H(s,0,255),i=H(i,0,255),n=H(n,0,255),[s,i,n,t.length>3?t[3]:1]},ke=function(e){return ge(255*(.00304>=e?12.92*e:1.055*ee(e,1/2.4)-.055))},j=function(e){return e>r.t1?e*e*e:r.t2*(e-r.t0)},r={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ae=function(){var e,t,n,r,i,o,s,a;return r=xe(arguments),n=r[0],t=r[1],e=r[2],i=he(n,t,e),o=i[0],s=i[1],a=i[2],[116*s-16,500*(o-s),200*(s-a)]},de=function(e){return(e/=255)<=.04045?e/12.92:ee((e+.055)/1.055,2.4)},_e=function(e){return e>r.t3?ee(e,1/3):e/r.t2+r.t0},he=function(){var e,t,n,i,o,s,a;return i=xe(arguments),n=i[0],t=i[1],e=i[2],n=de(n),t=de(t),e=de(e),o=_e((.4124564*n+.3575761*t+.1804375*e)/r.Xn),s=_e((.2126729*n+.7151522*t+.072175*e)/r.Yn),a=_e((.0193339*n+.119192*t+.9503041*e)/r.Zn),[o,s,a]},b.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["lab"]),function(){})},u.lab=F,e.prototype.lab=function(){return ae(this._rgb)},f=function(e){var t,n,r,i,o,s,a,l,c,u,p;return e=function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)i=e[n],
r.push(b(i));return r}(),2===e.length?(c=function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)i=e[n],r.push(i.lab());return r}(),o=c[0],s=c[1],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push(o[t]+e*(s[t]-o[t]));return r}(),b.lab.apply(b,n)}):3===e.length?(u=function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)i=e[n],r.push(i.lab());return r}(),o=u[0],s=u[1],a=u[2],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push((1-e)*(1-e)*o[t]+2*(1-e)*e*s[t]+e*e*a[t]);return r}(),b.lab.apply(b,n)}):4===e.length?(p=function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)i=e[n],r.push(i.lab());return r}(),o=p[0],s=p[1],a=p[2],l=p[3],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push((1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*s[t]+3*(1-e)*e*e*a[t]+e*e*e*l[t]);return r}(),b.lab.apply(b,n)}):5===e.length&&(n=f(e.slice(0,3)),r=f(e.slice(2,5)),t=function(e){return.5>e?n(2*e):r(2*(e-.5))}),t},b.bezier=function(e){var t;return t=f(e),t.scale=function(){return b.scale(t)},t},b.cubehelix=function(e,t,n,r,i){var o,s,l;return null==e&&(e=300),null==t&&(t=-1.5),null==n&&(n=1),null==r&&(r=1),null==i&&(i=[0,1]),s=i[1]-i[0],o=0,l=function(l){var c,u,p,h,d,f,m,g,y;return c=a*((e+120)/360+t*l),m=ee(i[0]+s*l,r),f=0!==o?n[0]+l*o:n,u=f*m*(1-m)/2,h=C(c),y=ve(c),g=m+u*(-.14861*h+1.78277*y),d=m+u*(-.29227*h-.90649*y),p=m+1.97294*u*h,b(S([255*g,255*d,255*p]))},l.start=function(t){return null==t?e:(e=t,l)},l.rotations=function(e){return null==e?t:(t=e,l)},l.gamma=function(e){return null==e?r:(r=e,l)},l.hue=function(e){return null==e?n:(n=e,"array"===we(n)?(o=n[1]-n[0],0===o&&(n=n[1])):o=0,l)},l.lightness=function(e){return null==e?i:(i=e,"array"===we(i)?(s=i[1]-i[0],0===s&&(i=i[1])):s=0,l)},l.scale=function(){return b.scale(l)},l.hue(n),l},b.random=function(){var t,n,r,i;for(n="0123456789abcdef",t="#",r=i=0;6>i;r=++i)t+=n.charAt(T(16*Math.random()));return new e(t)},u.rgb=function(){var e,t,n,r;t=xe(arguments),n=[];for(e in t)r=t[e],n.push(r);return n},b.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["rgb"]),function(){})},e.prototype.rgb=function(){return this._rgb.slice(0,3)},e.prototype.rgba=function(){return this._rgb},l.push({p:15,test:function(e){var t;return t=xe(arguments),"array"===we(t)&&3===t.length?"rgb":4===t.length&&"number"===we(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),P=function(e){var t,n,r,i,o,s;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===e.length||7===e.length)&&(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),s=parseInt(e,16),i=s>>16,r=s>>8&255,n=255&s,[i,r,n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),s=parseInt(e,16),i=s>>24&255,r=s>>16&255,n=s>>8&255,t=ge((255&s)/255*100)/100,[i,r,n,t];if(null!=u.css&&(o=u.css(e)))return o;throw"unknown color: "+e},re=function(e,t){var n,r,i,o,s,a,l;return null==t&&(t="rgb"),s=e[0],i=e[1],r=e[2],n=e[3],l=s<<16|i<<8|r,a="000000"+l.toString(16),a=a.substr(a.length-6),o="0"+ge(255*n).toString(16),o=o.substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return a+o;case"argb":return o+a;default:return a}}()},u.hex=function(e){return P(e)},b.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["hex"]),function(){})},e.prototype.hex=function(e){return null==e&&(e="rgb"),re(this._rgb,e)},l.push({p:10,test:function(e){return 1===arguments.length&&"string"===we(e)?"hex":void 0}}),N=function(){var e,t,n,r,i,o,s,a,l,c,u,p,h,d;if(e=xe(arguments),i=e[0],u=e[1],s=e[2],0===u)l=r=t=255*s;else{for(d=[0,0,0],n=[0,0,0],h=.5>s?s*(1+u):s+u-s*u,p=2*s-h,i/=360,d[0]=i+1/3,d[1]=i,d[2]=i-1/3,o=a=0;2>=a;o=++a)d[o]<0&&(d[o]+=1),d[o]>1&&(d[o]-=1),6*d[o]<1?n[o]=p+6*(h-p)*d[o]:2*d[o]<1?n[o]=h:3*d[o]<2?n[o]=p+(h-p)*(2/3-d[o])*6:n[o]=p;c=[ge(255*n[0]),ge(255*n[1]),ge(255*n[2])],l=c[0],r=c[1],t=c[2]}return e.length>3?[l,r,t,e[3]]:[l,r,t]},oe=function(e,t,n){var r,i,o,s,a;return void 0!==e&&e.length>=3&&(s=e,e=s[0],t=s[1],n=s[2]),e/=255,t/=255,n/=255,o=Math.min(e,t,n),Y=Math.max(e,t,n),i=(Y+o)/2,Y===o?(a=0,r=Number.NaN):a=.5>i?(Y-o)/(Y+o):(Y-o)/(2-Y-o),e===Y?r=(t-n)/(Y-o):t===Y?r=2+(n-e)/(Y-o):n===Y&&(r=4+(e-t)/(Y-o)),r*=60,0>r&&(r+=360),[r,a,i]},b.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["hsl"]),function(){})},u.hsl=N,e.prototype.hsl=function(){return oe(this._rgb)},O=function(){var e,t,n,r,i,o,s,a,l,c,u,p,h,d,f,m,g,y;if(e=xe(arguments),i=e[0],m=e[1],y=e[2],y*=255,0===m)l=r=t=y;else switch(360===i&&(i=0),i>360&&(i-=360),0>i&&(i+=360),i/=60,o=T(i),n=i-o,s=y*(1-m),a=y*(1-m*n),g=y*(1-m*(1-n)),o){case 0:c=[y,g,s],l=c[0],r=c[1],t=c[2];break;case 1:u=[a,y,s],l=u[0],r=u[1],t=u[2];break;case 2:p=[s,y,g],l=p[0],r=p[1],t=p[2];break;case 3:h=[s,a,y],l=h[0],r=h[1],t=h[2];break;case 4:d=[g,s,y],l=d[0],r=d[1],t=d[2];break;case 5:f=[y,s,a],l=f[0],r=f[1],t=f[2]}return l=ge(l),r=ge(r),t=ge(t),[l,r,t,e.length>3?e[3]:1]},se=function(){var e,t,n,r,i,o,s,a,l;return s=xe(arguments),o=s[0],n=s[1],e=s[2],i=Math.min(o,n,e),Y=Math.max(o,n,e),t=Y-i,l=Y/255,0===Y?(r=Number.NaN,a=0):(a=t/Y,o===Y&&(r=(n-e)/t),n===Y&&(r=2+(e-o)/t),e===Y&&(r=4+(o-n)/t),r*=60,0>r&&(r+=360)),[r,a,l]},b.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["hsv"]),function(){})},u.hsv=O,e.prototype.hsv=function(){return se(this._rgb)},Q=function(e){var t,n,r;return"number"===we(e)&&e>=0&&16777215>=e?(r=e>>16,n=e>>8&255,t=255&e,[r,n,t,1]):(console.warn("unknown num color: "+e),[0,0,0,1])},ue=function(){var e,t,n,r;return r=xe(arguments),n=r[0],t=r[1],e=r[2],(n<<16)+(t<<8)+e},b.num=function(t){return new e(t,"num")},e.prototype.num=function(e){return null==e&&(e="rgb"),ue(this._rgb,e)},u.num=Q,l.push({p:10,test:function(e){return 1===arguments.length&&"number"===we(e)&&e>=0&&16777215>=e?"num":void 0}}),_=function(e){var t,n,r,i,o,s,a,l;if(e=e.toLowerCase(),null!=b.colors&&b.colors[e])return P(b.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(a=o.slice(1,4),i=s=0;2>=s;i=++s)a[i]=+a[i];a[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(a=o.slice(1,5),i=l=0;3>=l;i=++l)a[i]=+a[i];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(a=o.slice(1,4),i=t=0;2>=t;i=++t)a[i]=ge(2.55*a[i]);a[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(a=o.slice(1,5),i=n=0;2>=n;i=++n)a[i]=ge(2.55*a[i]);a[3]=+a[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,a=N(r),a[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,a=N(r),a[3]=+o[4]);return a},ne=function(e){var t;return t=e[3]<1?"rgba":"rgb","rgb"===t?t+"("+e.slice(0,3).map(ge).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(ge).join(",")+","+e[3]+")":void 0},fe=function(e){return ge(100*e)/100},E=function(e,t){var n;return n=1>t?"hsla":"hsl",e[0]=fe(e[0]||0),e[1]=fe(100*e[1])+"%",e[2]=fe(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},u.css=function(e){return _(e)},b.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["css"]),function(){})},e.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?ne(this._rgb):"hsl"===e.slice(0,3)?E(this.hsl(),this.alpha()):void 0},u.named=function(e){return P(Ce[e])},l.push({p:20,test:function(e){return 1===arguments.length&&null!=Ce[e]?"named":void 0}}),e.prototype.name=function(e){var t,n;arguments.length&&(Ce[e]&&(this._rgb=P(Ce[e])),this._rgb[3]=1),t=this.hex();for(n in Ce)if(t===Ce[n])return n;return t},z=function(){var e,n,r,i;return i=xe(arguments),r=i[0],e=i[1],n=i[2],n*=t,[r,C(n)*e,ve(n)*e]},U=function(){var e,t,n,r,i,o,s,a,l,c,u;return n=xe(arguments),a=n[0],i=n[1],s=n[2],c=z(a,i,s),e=c[0],t=c[1],r=c[2],u=F(e,t,r),l=u[0],o=u[1],r=u[2],[H(l,0,255),H(o,0,255),H(r,0,255),n.length>3?n[3]:1]},B=function(){var e,t,n,r,i,o;return o=xe(arguments),i=o[0],e=o[1],t=o[2],n=be(e*e+t*t),r=(d(t,e)*s+360)%360,0===ge(1e4*n)&&(r=Number.NaN),[i,n,r]},le=function(){var e,t,n,r,i,o,s;return o=xe(arguments),i=o[0],n=o[1],t=o[2],s=ae(i,n,t),r=s[0],e=s[1],t=s[2],B(r,e,t)},b.lch=function(){var t;return t=xe(arguments),new e(t,"lch")},b.hcl=function(){var t;return t=xe(arguments),new e(t,"hcl")},u.lch=U,u.hcl=function(){var e,t,n,r;return r=xe(arguments),t=r[0],e=r[1],n=r[2],U([n,e,t])},e.prototype.lch=function(){return le(this._rgb)},e.prototype.hcl=function(){return le(this._rgb).reverse()},te=function(e){var t,n,r,i,o,s,a,l,c;return null==e&&(e="rgb"),l=xe(arguments),a=l[0],i=l[1],t=l[2],a/=255,i/=255,t/=255,o=1-Math.max(a,Math.max(i,t)),r=1>o?1/(1-o):0,n=(1-a-o)*r,s=(1-i-o)*r,c=(1-t-o)*r,[n,s,c,o]},w=function(){var e,t,n,r,i,o,s,a,l;return t=xe(arguments),r=t[0],s=t[1],l=t[2],o=t[3],e=t.length>4?t[4]:1,1===o?[0,0,0,e]:(a=r>=1?0:ge(255*(1-r)*(1-o)),i=s>=1?0:ge(255*(1-s)*(1-o)),n=l>=1?0:ge(255*(1-l)*(1-o)),[a,i,n,e])},u.cmyk=function(){return w(xe(arguments))},b.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["cmyk"]),function(){})},e.prototype.cmyk=function(){return te(this._rgb)},u.gl=function(){var e,t,n,r,i;for(r=function(){var e,n;e=xe(arguments),n=[];for(t in e)i=e[t],n.push(i);return n}.apply(this,arguments),e=n=0;2>=n;e=++n)r[e]*=255;return r},b.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["gl"]),function(){})},e.prototype.gl=function(){var e;return e=this._rgb,[e[0]/255,e[1]/255,e[2]/255,e[3]]},ce=function(e,t,n){var r;return r=xe(arguments),e=r[0],t=r[1],n=r[2],e=$(e),t=$(t),n=$(n),.2126*e+.7152*t+.0722*n},$=function(e){return e/=255,.03928>=e?e/12.92:ee((e+.055)/1.055,2.4)},p=[],I=function(e,t,n,r){var i,o,s,a;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==we(e)&&(e=b(e)),"object"!==we(t)&&(t=b(t)),s=0,o=p.length;o>s;s++)if(i=p[s],r===i[0]){a=i[1](e,t,n,r);break}if(null==a)throw"color mode "+r+" is not supported";return a.alpha(e.alpha()+n*(t.alpha()-e.alpha())),a},b.interpolate=I,e.prototype.interpolate=function(e,t,n){return I(this,e,t,n)},b.mix=I,e.prototype.mix=e.prototype.interpolate,G=function(t,n,r,i){var o,s;return o=t._rgb,s=n._rgb,new e(o[0]+r*(s[0]-o[0]),o[1]+r*(s[1]-o[1]),o[2]+r*(s[2]-o[2]),i)},p.push(["rgb",G]),e.prototype.luminance=function(e,t){var n,r,i,o;return null==t&&(t="rgb"),arguments.length?(0===e?this._rgb=[0,0,0,this._rgb[3]]:1===e?this._rgb=[255,255,255,this._rgb[3]]:(r=1e-7,i=20,o=function(n,s){var a,l;return l=n.interpolate(s,.5,t),a=l.luminance(),Math.abs(e-a)<r||!i--?l:a>e?o(n,l):o(l,s)},n=ce(this._rgb),this._rgb=(n>e?o(b("black"),this):o(this,b("white"))).rgba()),this):ce(this._rgb)},Se=function(e){var t,n,r,i;return i=e/100,66>i?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*q(n),t=20>i?0:-254.76935184120902+.8274096064007395*(t=i-10)+115.67994401066147*q(t)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*q(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*q(n),t=255),S([r,n,t])},pe=function(){var e,t,n,r,i,o,s,a,l;for(s=xe(arguments),o=s[0],n=s[1],e=s[2],i=1e3,r=4e4,t=.4;r-i>t;)l=.5*(r+i),a=Se(l),a[2]/a[0]>=e/o?r=l:i=l;return ge(l)},b.temperature=b.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["temperature"]),function(){})},u.temperature=u.kelvin=u.K=Se,e.prototype.temperature=function(){return pe(this._rgb)},e.prototype.kelvin=e.prototype.temperature,b.contrast=function(t,n){var r,i,o,s;return("string"===(o=we(t))||"number"===o)&&(t=new e(t)),("string"===(s=we(n))||"number"===s)&&(n=new e(n)),r=t.luminance(),i=n.luminance(),r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)},e.prototype.get=function(e){var t,n,r,i,o,s;return r=this,o=e.split("."),i=o[0],t=o[1],s=r[i](),t?(n=i.indexOf(t),n>-1?s[n]:console.warn("unknown channel "+t+" in mode "+i)):s},e.prototype.set=function(e,t){var n,r,i,o,s,a;if(i=this,s=e.split("."),o=s[0],n=s[1])if(a=i[o](),r=o.indexOf(n),r>-1)if("string"===we(t))switch(t.charAt(0)){case"+":a[r]+=+t;break;case"-":a[r]+=+t;break;case"*":a[r]*=+t.substr(1);break;case"/":a[r]/=+t.substr(1);break;default:a[r]=+t}else a[r]=t;else console.warn("unknown channel "+n+" in mode "+o);else a=t;return i._rgb=b(a,o).alpha(i.alpha())._rgb,i},e.prototype.darken=function(e){var t,n;return null==e&&(e=1),n=this,t=n.lab(),t[0]-=r.Kn*e,b.lab(t).alpha(n.alpha())},e.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},e.prototype.darker=e.prototype.darken,e.prototype.brighter=e.prototype.brighten,e.prototype.saturate=function(e){var t,n;return null==e&&(e=1),n=this,t=n.lch(),t[1]+=e*r.Kn,t[1]<0&&(t[1]=0),b.lch(t).alpha(n.alpha())},e.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},e.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),b(t[0]*e,t[1]*e,t[2]*e,e)},m=function(e,t,n){if(!m[n])throw"unknown blend mode "+n;return m[n](e,t)},g=function(e){return function(t,n){var r,i;return r=b(n).rgb(),i=b(t).rgb(),b(e(r,i),"rgb")}},D=function(e){return function(t,n){var r,i,o;for(o=[],r=i=0;3>=i;r=++i)o[r]=e(t[r],n[r]);return o}},K=function(e,t){return e},J=function(e,t){return e*t/255},k=function(e,t){return e>t?t:e},W=function(e,t){return e>t?e:t},ye=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},Z=function(e,t){return 128>t?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},v=function(e,t){return 255*(1-(1-t/255)/(e/255))},A=function(e,t){return 255===e?255:(e=255*(t/255)/(1-e/255),e>255?255:e)},m.normal=g(D(K)),m.multiply=g(D(J)),m.screen=g(D(ye)),m.overlay=g(D(Z)),m.darken=g(D(k)),m.lighten=g(D(W)),m.dodge=g(D(A)),m.burn=g(D(v)),b.blend=m,b.analyze=function(e){var t,n,r,i;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;t>n;n++)i=e[n],null==i||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return b.limits(r,e,t)},r},b.scale=function(e,t){var n,r,i,o,s,a,l,c,u,p,h,d,f,m,g,y,v,S,w,x,C;return u="rgb",p=b("#ccc"),m=0,a=!1,s=[0,1],f=[],d=[0,0],n=!1,i=[],h=!1,c=0,l=1,o=!1,r={},x=function(e){var t,n,r,o,s,a,l;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===we(e)&&null!=(null!=(o=b.brewer)?o[e]:void 0)&&(e=b.brewer[e]),"array"===we(e)){for(e=e.slice(0),t=r=0,s=e.length-1;s>=0?s>=r:r>=s;t=s>=0?++r:--r)n=e[t],"string"===we(n)&&(e[t]=b(n));for(f.length=0,t=l=0,a=e.length-1;a>=0?a>=l:l>=a;t=a>=0?++l:--l)f.push(t/(e.length-1))}return w(),i=e},v=function(e){var t,r;if(null!=n){for(r=n.length-1,t=0;r>t&&e>=n[t];)t++;return t-1}return 0},C=function(e){return e},g=function(e){var t,r,i,o,s;return s=e,n.length>2&&(o=n.length-1,t=v(e),i=n[0]+(n[1]-n[0])*(0+.5*m),r=n[o-1]+(n[o]-n[o-1])*(1-.5*m),s=c+(n[t]+.5*(n[t+1]-n[t])-i)/(r-i)*(l-c)),s},S=function(e,t){var o,s,a,h,m,g,y,S;if(null==t&&(t=!1),isNaN(e))return p;if(t?S=e:n&&n.length>2?(o=v(e),S=o/(n.length-2),S=d[0]+S*(1-d[0]-d[1])):l!==c?(S=(e-c)/(l-c),S=d[0]+S*(1-d[0]-d[1]),S=Math.min(1,Math.max(0,S))):S=1,t||(S=C(S)),h=Math.floor(1e4*S),r[h])s=r[h];else{if("array"===we(i))for(a=m=0,y=f.length-1;y>=0?y>=m:m>=y;a=y>=0?++m:--m){if(g=f[a],g>=S){s=i[a];break}if(S>=g&&a===f.length-1){s=i[a];break}if(S>g&&S<f[a+1]){S=(S-g)/(f[a+1]-g),s=b.interpolate(i[a],i[a+1],S,u);break}}else"function"===we(i)&&(s=i(S));r[h]=s}return s},w=function(){return r={}},x(e),y=function(e){var t;return t=b(S(e)),h&&t[h]?t[h]():t},y.classes=function(e){var t;return null!=e?("array"===we(e)?(n=e,s=[e[0],e[e.length-1]]):(t=b.analyze(s),n=0===e?[t.min,t.max]:b.limits(t,"e",e)),y):n},y.domain=function(e){var t,n,r,o,a,u,p;if(!arguments.length)return s;if(c=e[0],l=e[e.length-1],f=[],r=i.length,e.length===r&&c!==l)for(a=0,o=e.length;o>a;a++)n=e[a],f.push((n-c)/(l-c));else for(t=p=0,u=r-1;u>=0?u>=p:p>=u;t=u>=0?++p:--p)f.push(t/(r-1));return s=[c,l],y},y.mode=function(e){return arguments.length?(u=e,w(),y):u},y.range=function(e,t){return x(e,t),y},y.out=function(e){return h=e,y},y.spread=function(e){return arguments.length?(m=e,y):m},y.correctLightness=function(e){return null==e&&(e=!0),o=e,w(),C=o?function(e){var t,n,r,i,o,s,a,l,c;for(t=S(0,!0).lab()[0],n=S(1,!0).lab()[0],a=t>n,r=S(e,!0).lab()[0],o=t+(n-t)*e,i=r-o,l=0,c=1,s=20;Math.abs(i)>.01&&s-- >0;)!function(){return a&&(i*=-1),0>i?(l=e,e+=.5*(c-e)):(c=e,e+=.5*(l-e)),r=S(e,!0).lab()[0],i=r-o}();return e}:function(e){return e},y},y.padding=function(e){return null!=e?("number"===we(e)&&(e=[e,e]),d=e,y):d},y.colors=function(){var t,r,i,o,a,l,c,u,p;if(o=0,a="hex",1===arguments.length&&("string"===we(arguments[0])?a=arguments[0]:o=arguments[0]),2===arguments.length&&(o=arguments[0],a=arguments[1]),o)return r=s[0],t=s[1]-r,function(){c=[];for(var e=0;o>=0?o>e:e>o;o>=0?e++:e--)c.push(e);return c}.apply(this).map(function(e){return y(r+e/(o-1)*t)[a]()});if(e=[],u=[],n&&n.length>2)for(i=p=1,l=n.length;l>=1?l>p:p>l;i=l>=1?++p:--p)u.push(.5*(n[i-1]+n[i]));else u=s;return u.map(function(e){return y(e)[a]()})},y},null==b.scales&&(b.scales={}),b.scales.cool=function(){return b.scale([b.hsl(180,1,.9),b.hsl(250,.7,.4)])},b.scales.hot=function(){return b.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},b.analyze=function(e,t,n){var r,i,o,s,a,l,c;if(a={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(e){null==e||isNaN(e)||(a.values.push(e),a.sum+=e,e<a.min&&(a.min=e),e>a.max&&(a.max=e),a.count+=1)},c=function(e,i){return n(e,i)?r(null!=t&&"function"===we(t)?t(e):null!=t&&"string"===we(t)||"number"===we(t)?e[t]:e):void 0},"array"===we(e))for(s=0,o=e.length;o>s;s++)l=e[s],c(l);else for(i in e)l=e[i],c(l,i);return a.domain=[a.min,a.max],a.limits=function(e,t){return b.limits(a,e,t)},a},b.limits=function(e,t,n){var r,i,o,s,a,l,c,u,p,d,f,m,g,y,v,S,w,x,C,_,k,A,D,P,M,E,N,O,I,V,L,R,G,B,F,j,z,U,W,H,$,X,J,K,Q,Z,te,ne,re,ie,oe,se,ae,le,ce;if(null==t&&(t="equal"),null==n&&(n=7),"array"===we(e)&&(e=b.analyze(e)),M=e.min,Y=e.max,oe=e.sum,le=e.values.sort(function(e,t){return e-t}),D=[],"c"===t.substr(0,1)&&(D.push(M),D.push(Y)),"e"===t.substr(0,1)){for(D.push(M),_=L=1,F=n-1;F>=1?F>=L:L>=F;_=F>=1?++L:--L)D.push(M+_/n*(Y-M));D.push(Y)}else if("l"===t.substr(0,1)){if(0>=M)throw"Logarithmic scales are only possible for values > 0";for(E=Math.LOG10E*q(M),P=Math.LOG10E*q(Y),D.push(M),_=ce=1,j=n-1;j>=1?j>=ce:ce>=j;_=j>=1?++ce:--ce)D.push(ee(10,E+_/n*(P-E)));D.push(Y)}else if("q"===t.substr(0,1)){for(D.push(M),_=r=1,X=n-1;X>=1?X>=r:r>=X;_=X>=1?++r:--r)R=le.length*_/n,G=T(R),G===R?D.push(le[G]):(B=R-G,D.push(le[G]*B+le[G+1]*(1-B)));D.push(Y)}else if("k"===t.substr(0,1)){for(O=le.length,y=new Array(O),x=new Array(n),ie=!0,I=0,S=null,S=[],S.push(M),_=i=1,J=n-1;J>=1?J>=i:i>=J;_=J>=1?++i:--i)S.push(M+_/n*(Y-M));for(S.push(Y);ie;){for(k=o=0,K=n-1;K>=0?K>=o:o>=K;k=K>=0?++o:--o)x[k]=0;for(_=s=0,Q=O-1;Q>=0?Q>=s:s>=Q;_=Q>=0?++s:--s){for(ae=le[_],N=Number.MAX_VALUE,k=a=0,Z=n-1;Z>=0?Z>=a:a>=Z;k=Z>=0?++a:--a)C=h(S[k]-ae),N>C&&(N=C,v=k);x[v]++,y[_]=v}for(V=new Array(n),k=l=0,te=n-1;te>=0?te>=l:l>=te;k=te>=0?++l:--l)V[k]=null;for(_=c=0,ne=O-1;ne>=0?ne>=c:c>=ne;_=ne>=0?++c:--c)w=y[_],null===V[w]?V[w]=le[_]:V[w]+=le[_];for(k=u=0,re=n-1;re>=0?re>=u:u>=re;k=re>=0?++u:--u)V[k]*=1/x[k];for(ie=!1,k=p=0,z=n-1;z>=0?z>=p:p>=z;k=z>=0?++p:--p)if(V[k]!==S[_]){ie=!0;break}S=V,I++,I>200&&(ie=!1)}for(A={},k=d=0,U=n-1;U>=0?U>=d:d>=U;k=U>=0?++d:--d)A[k]=[];for(_=f=0,W=O-1;W>=0?W>=f:f>=W;_=W>=0?++f:--f)w=y[_],A[w].push(le[_]);for(se=[],k=m=0,H=n-1;H>=0?H>=m:m>=H;k=H>=0?++m:--m)se.push(A[k][0]),se.push(A[k][A[k].length-1]);for(se=se.sort(function(e,t){return e-t}),D.push(se[0]),_=g=1,$=se.length-1;$>=g;_=g+=2)isNaN(se[_])||D.push(se[_])}return D},M=function(e,t,n){var r,i,s,l;return r=xe(arguments),e=r[0],t=r[1],n=r[2],e/=360,1/3>e?(i=(1-t)/3,l=(1+t*C(a*e)/C(o-a*e))/3,s=1-(i+l)):2/3>e?(e-=1/3,l=(1-t)/3,s=(1+t*C(a*e)/C(o-a*e))/3,i=1-(l+s)):(e-=2/3,s=(1-t)/3,i=(1+t*C(a*e)/C(o-a*e))/3,l=1-(s+i)),l=H(n*l*3),s=H(n*s*3),i=H(n*i*3),[255*l,255*s,255*i,r.length>3?r[3]:1]},ie=function(){var e,t,n,r,i,o,s,l;return s=xe(arguments),o=s[0],t=s[1],e=s[2],a=2*Math.PI,o/=255,t/=255,e/=255,i=Math.min(o,t,e),r=(o+t+e)/3,l=1-i/r,0===l?n=0:(n=(o-t+(o-e))/2,n/=Math.sqrt((o-t)*(o-t)+(o-e)*(t-e)),n=Math.acos(n),e>t&&(n=a-n),n/=a),[360*n,l,r]},b.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Ae.call(arguments).concat(["hsi"]),function(){})},u.hsi=M,e.prototype.hsi=function(){return ie(this._rgb)},V=function(e,t,n,r){var i,o,s,a,l,c,u,p,h,d,f,m,g;return"hsl"===r?(m=e.hsl(),g=t.hsl()):"hsv"===r?(m=e.hsv(),g=t.hsv()):"hsi"===r?(m=e.hsi(),g=t.hsi()):("lch"===r||"hcl"===r)&&(r="hcl",m=e.hcl(),g=t.hcl()),"h"===r.substr(0,1)&&(s=m[0],d=m[1],c=m[2],a=g[0],f=g[1],u=g[2]),isNaN(s)||isNaN(a)?isNaN(s)?isNaN(a)?o=Number.NaN:(o=a,1!==c&&0!==c||"hsv"===r||(h=f)):(o=s,1!==u&&0!==u||"hsv"===r||(h=d)):(i=a>s&&a-s>180?a-(s+360):s>a&&s-a>180?a+360-s:a-s,o=s+n*i),null==h&&(h=d+n*(f-d)),l=c+n*(u-c),p=b[r](o,h,l)},p=p.concat(function(){var e,t,n,r;for(n=["hsv","hsl","hsi","hcl","lch"],r=[],t=0,e=n.length;e>t;t++)X=n[t],r.push([X,V]);return r}()),R=function(e,t,n,r){var i,o;return i=e.num(),o=t.num(),b.num(i+(o-i)*n,"num")},p.push(["num",R]),L=function(t,n,r,i){var o,s,a;return s=t.lab(),a=n.lab(),o=new e(s[0]+r*(a[0]-s[0]),s[1]+r*(a[1]-s[1]),s[2]+r*(a[2]-s[2]),i)},p.push(["lab",L])}.call(this);var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ColorRangeView",["require","exports","underscore","jquery","chroma","BaseNodeView"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.getRGBColorString=function(e){var t=e.color.red,n=e.color.green,r=e.color.blue,i=255,o=e.color.alpha/i;return"rgba("+t+","+n+","+r+","+o+")"},t.getParameter=function(e){return e.parameter},t.jsonTryParse=function(e){try{return JSON.parse(e)}catch(e){}},Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#node-color-range-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){s.prototype.initialize.apply(this,arguments)},t.prototype.renderNode=function(){s.prototype.renderNode.apply(this,arguments);var e=this.$el.find(".node-last-value-container");this.$el.hasClass("node-failed")&&e.removeClass("hidden-value");var o,a,l=t.jsonTryParse(this.model.get("lastValue"));l&&l.length?(o=l.map(t.getRGBColorString),a=l.map(t.getParameter)):(o=t.defaultColors,a=t.defaultIndices);var c=this.$el.find(".color-scale"),u=c.width(),p=i.scale(o,a);return n.range(u).forEach(function(e){var t=e/(u-1),n={background:p(t).hex()};r("<div />").appendTo(c).css(n)}),this},t.defaultColors=["rgba(255,100,100,1)","rgba(255,255,0,1)","rgba(0,255,255,1)"],t.defaultIndices=[0,.5,1],t}(s);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ConvertNodeView",["require","exports","underscore","jquery","BaseNodeView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"innerTemplate",{get:function(){return n.template(r("#node-convert-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){var e=i.prototype.events.apply(this);return e=n.extend(e,{"change .metric":"onMetricChanged","change .convertFrom":"onFromChanged","change .convertTo":"onToChanged","click .exchange-button":"exchangeValues"})},t.prototype.initialize=function(e){i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.onChangedExtra),this.getCustomContents=function(){var e=this.model.toJSON();return e.unitSource=this.model.unitSource,this.innerTemplate(e)}},t.prototype.renderNode=function(){return i.prototype.renderNode.apply(this,arguments),this.metricList=this.$el.find(".metric"),this.convertFromList=this.$el.find(".convertFrom"),this.convertToList=this.$el.find(".convertTo"),this},t.prototype.onChangedExtra=function(){this.renderNode()},t.prototype.onMetricChanged=function(){var e=JSON.parse(JSON.stringify(this.model.extra)),t=this.metricList.find("option:selected").text();if(e.selectedMetric!==t){e.selectedMetric=t;var r=n.findWhere(this.model.get("unitSource"),{metric:t});e.selectedMetricValues=r.values,e.selectedConvertFrom=this.model.get("defaultValues")[e.selectedMetric],e.selectedConvertTo=this.model.get("defaultValues")[e.selectedMetric],this.updateExtra(e)}},t.prototype.onFromChanged=function(){var e=JSON.parse(JSON.stringify(this.model.extra)),t=this.convertFromList.find("option:selected").text();e.selectedConvertFrom!==t&&(e.selectedConvertFrom=t,this.updateExtra(e))},t.prototype.onToChanged=function(){var e=JSON.parse(JSON.stringify(this.model.extra)),t=this.convertToList.find("option:selected").text();e.selectedConvertTo!==t&&(e.selectedConvertTo=t,this.updateExtra(e))},t.prototype.updateExtra=function(e){e.metricValues=e.selectedMetric+";"+e.selectedConvertFrom+";"+e.selectedConvertTo;var t={property:"extra",_id:this.model.id,newValue:e};this.model.trigger("request-set-node-prop",t)},t.prototype.exchangeValues=function(){var e=JSON.parse(JSON.stringify(this.model.extra));e.selectedConvertFrom=e.selectedConvertTo,e.selectedConvertTo=this.model.get("extra").selectedConvertFrom,this.updateExtra(e)},t}(i);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("BaseWidgetView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"div"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"widget"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#widget-template").html())},enumerable:!0,configurable:!0}),t.prototype.inputSet=function(){},t.prototype.initialize=function(e){this.listenTo(this.model,"requestRender",this.render),this.listenTo(this.model,"change:selected",this.colorSelected),this.listenTo(this.model,"change:visible",this.render),this.silent=!1},t.prototype.colorSelected=function(){},t.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this},t.prototype.dispose=function(){return this.undelegateEvents(),n.View.prototype.remove.call(this),this},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("NumberSliderWidgetView",["require","exports","underscore","jquery","SliderNodeViewBase","BaseWidgetView","slider"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#slider-widget-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.sliderNodeViewBase=new i(this),s.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.sliderNodeViewBase.extraChanged.bind(this.sliderNodeViewBase)),this.currentValueInput=null},t.prototype.render=function(){return s.prototype.render.apply(this,arguments),n.bind(this.sliderNodeViewBase.baseRender,this.sliderNodeViewBase)(),this},t.prototype.inputSet=function(){if(!this.silent){var e=n.clone(this.model.get("extra"));e.value=this.sliderNodeViewBase.slider.slider("option","value");var t={property:"extra",_id:this.model.get("_id"),newValue:e};this.model.trigger("request-set-node-prop",t)}},t.prototype.silentSyncUI=function(e){this.silent=!0,this.currentValueInput.val(e.value),this.sliderNodeViewBase.setSliderValue(e.value),this.sliderNodeViewBase.minInput.html(e.min),this.sliderNodeViewBase.maxInput.html(e.max),this.sliderNodeViewBase.stepInput.html(e.step),this.silent=!1},t}(s);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CodeBlockWidgetView",["require","exports","underscore","jquery","BaseWidgetView","Prism"],function(e,t,n,r,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#widget-code-block-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.onChangedExtra)},t.prototype.onChangedExtra=function(){this.render()},t.prototype.render=function(){return s.prototype.render.apply(this,arguments),this.input=this.$el.find(".widget-code-block-input"),this.input.blur(function(){var e=JSON.parse(JSON.stringify(this.model.get("extra")));if(e.code!==this.input[0].innerText){e.code=this.input[0].innerText;var t={property:"extra",_id:this.model.get("_id"),newValue:e};this.model.trigger("request-set-node-prop",t)}}.bind(this)),i.highlightAll(),this},t}(s);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("StringWidgetView",["require","exports","underscore","jquery","BaseWidgetView","StringBase"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#widget-string-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"blur .widget-string-input":"blurInput"}},t.prototype.initialize=function(e){this.stringBase=new s(this),i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.stringBase.extraChanged.bind(this.stringBase)),this.currentValueInput=null},t.prototype.blurInput=function(){this.stringBase.blurInput();
},t.prototype.inputSet=function(){},t.prototype.silentSyncUI=function(e){},t}(i);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("BooleanWidgetView",["require","exports","underscore","jquery","BaseWidgetView","BooleanBase"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#widget-boolean-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click .true-flag":"clickTrue","click .false-flag":"clickFalse"}},t.prototype.initialize=function(e){this.booleanBase=new s(this),i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.booleanBase.extraChanged.bind(this.booleanBase))},t.prototype.render=function(){return e.prototype.render.call(this),this.$el.find(".true-flag").attr("name",this.model.id+this.cid),this.$el.find(".false-flag").attr("name",this.model.id+this.cid),this},t.prototype.inputSet=function(){},t.prototype.silentSyncUI=function(e){},t.prototype.clickTrue=function(e){this.booleanBase.clickTrue(e)},t.prototype.clickFalse=function(e){this.booleanBase.clickFalse(e)},t}(i);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("NumberWidgetView",["require","exports","underscore","jquery","BaseWidgetView","NumberBase"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return n.template(r("#number-widget-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.numberBase=new s(this),i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:extra",this.numberBase.extraChanged.bind(this.numberBase)),this.currentValueInput=null},t.prototype.render=function(){return i.prototype.render.apply(this,arguments),n.bind(this.numberBase.baseRender,this.numberBase)(),this},t.prototype.inputSet=function(){if(!this.silent){var e={value:this.currentValueInput.val()},t={property:"extra",_id:this.model.get("_id"),newValue:e};this.model.trigger("request-set-node-prop",t)}},t.prototype.silentSyncUI=function(e){this.silent=!0,this.currentValueInput.val(e.value),this.silent=!1},t}(i);return a}),n("NodeFactory",["require","exports","BaseNode","NumberNode","CodeBlockNode","StringNode","BooleanNode","VariableInputNode","PythonScriptNode","FormulaNode","ConvertNode","ThreeCSGNodeView","WatchNodeView","FormulaView","CodeBlockView","OutputView","InputView","CustomNodeView","StringView","BooleanView","NumberNodeView","VariableInputView","PythonScriptView","IntegerSliderNodeView","NumberSliderNodeView","ColorRangeView","ConvertNodeView","NumberSliderWidgetView","CodeBlockWidgetView","StringWidgetView","BooleanWidgetView","NumberWidgetView"],function(e,t,n,r,i,o,s,a,l,c,u,p,h,d,f,m,g,y,v,b,S,w,x,C,_,k,A,D,T,P,M,E){"use strict";var N=function(){function e(){}return e.searchForNodeTypeInMap=function(t){var n,r=Object.getOwnPropertyNames(e.map).filter(function(e){return e.indexOf(t)>-1}).map(function(t){return e.map[t]});return n=e.map.hasOwnProperty(t)||r.length>0?e.map[t]||r[0]:null},e.tolerantSearchForNode=function(e,t){var n=null,r=t.filter(function(t){return t.CreationName==e}),i=t.filter(function(t){return t.ConcreteType.indexOf(e)>-1}),o=t.filter(function(t){return t.ConcreteType==e}),s=t.filter(function(t){return t.DisplayName==e}),a=r.concat(o,s,i);return a.length>0&&(n=a[0]),n},e.create=function(e){var t=n,r=this.searchForNodeTypeInMap(e.config.typeName);null!=r&&(t=r.nodeModelConstructor);var i={searchElement:void 0};return i.searchElement=this.tolerantSearchForNode(e.config.typeName,e.searchElements),new t(e.config,i)},e.map={"Code Block":{nodeModelConstructor:i,nodeViewConstructor:f,nodeWidgetConstructor:T},"Dynamo.Graph.Nodes.CodeBlockNodeModel, DynamoCore":{nodeModelConstructor:i,nodeViewConstructor:f,nodeWidgetConstructor:T},Number:{nodeModelConstructor:r,nodeViewConstructor:S,nodeWidgetConstructor:E},"CoreNodeModels.Input.DoubleInput, CoreNodeModels":{nodeModelConstructor:r,nodeViewConstructor:S,nodeWidgetConstructor:E},String:{nodeModelConstructor:o,nodeViewConstructor:v,nodeWidgetConstructor:P},"CoreNodeModels.Input.StringInput, CoreNodeModels":{nodeModelConstructor:o,nodeViewConstructor:v,nodeWidgetConstructor:P},Boolean:{nodeModelConstructor:s,nodeViewConstructor:b,nodeWidgetConstructor:M},"CoreNodeModels.Input.BoolSelector, CoreNodeModels":{nodeModelConstructor:s,nodeViewConstructor:b,nodeWidgetConstructor:M},"Integer Slider":{nodeModelConstructor:r,nodeViewConstructor:C,nodeWidgetConstructor:D},"CoreNodeModels.Input.IntegerSlider, CoreNodeModels":{nodeModelConstructor:r,nodeViewConstructor:C,nodeWidgetConstructor:D},"Number Slider":{nodeModelConstructor:r,nodeViewConstructor:_,nodeWidgetConstructor:D},"CoreNodeModels.Input.DoubleSlider, CoreNodeModels":{nodeModelConstructor:r,nodeViewConstructor:_,nodeWidgetConstructor:D},"List.Create":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.CreateList, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"List.Combine":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.HigherOrder.Combine, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"DSCore.List.Join@var[]..[]":{nodeModelConstructor:a,nodeViewConstructor:w},"Dynamo.Graph.Nodes.ZeroTouch.DSVarArgFunction, DynamoCore":{nodeModelConstructor:a,nodeViewConstructor:w},"List.CartesianProduct":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.HigherOrder.CartesianProduct, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"List.Reduce":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.HigherOrder.Reduce, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"List.Scan":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.HigherOrder.ScanList, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"List.LaceShortest":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.HigherOrder.LaceShortest, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"List.LaceLongest":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.HigherOrder.LaceLongest, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"Function.Apply":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.HigherOrder.ApplyFunction, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"Function.Compose":{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.HigherOrder.ComposeFunctions, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},And:{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.Logic.And, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},Or:{nodeModelConstructor:a,nodeViewConstructor:w},"CoreNodeModels.Logic.Or, CoreNodeModels":{nodeModelConstructor:a,nodeViewConstructor:w},"Python Script":{nodeModelConstructor:l,nodeViewConstructor:x},"PythonNodeModels.PythonNode, PythonNodeModels":{nodeModelConstructor:l,nodeViewConstructor:x},Formula:{nodeModelConstructor:c,nodeViewConstructor:d},"CoreNodeModels.Formula, CoreNodeModels":{nodeModelConstructor:c,nodeViewConstructor:d},"Convert Between Units":{nodeModelConstructor:u,nodeViewConstructor:A},"CoreNodeModels.DynamoConvert, CoreNodeModels":{nodeModelConstructor:u,nodeViewConstructor:A},Show:{nodeModelConstructor:n,nodeViewConstructor:h},Watch:{nodeModelConstructor:n,nodeViewConstructor:h},"CoreNodeModels.Watch, CoreNodeModels":{nodeModelConstructor:n,nodeViewConstructor:h},Input:{nodeModelConstructor:n,nodeViewConstructor:g},"Dynamo.Graph.Nodes.CustomNodes.Symbol, DynamoCore":{nodeModelConstructor:n,nodeViewConstructor:g},Output:{nodeModelConstructor:n,nodeViewConstructor:m},"Dynamo.Graph.Nodes.CustomNodes.Output, DynamoCore":{nodeModelConstructor:n,nodeViewConstructor:m},Base:{nodeModelConstructor:n,nodeViewConstructor:p},"Color Range":{nodeModelConstructor:n,nodeViewConstructor:k},"CoreNodeModels.ColorRange, CoreNodeModels":{nodeModelConstructor:n,nodeViewConstructor:k},CustomNode:{nodeModelConstructor:n,nodeViewConstructor:y},"Dynamo.Graph.Nodes.CustomNodes.Function, DynamoCore":{nodeModelConstructor:n,nodeViewConstructor:y}},e}();return N});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("GeometryMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t){var n=e.call(this,"GetNodeGeometryMessage")||this;return n.nodeId=t,n}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Workspace",["require","exports","backbone","Nodes","Connection","Connections","FLOOD","Marquee","WorkspaceResolver","NodeFactory","GeometryMessage","staticHelpers","staticHelpers"],function(e,t,n,r,i,s,a,l,c,u,p,h,d){"use strict";var f=function(){function e(){}return e}(),m=function(){function e(){}return e}(),g=(function(){function e(){}return e}(),function(){function e(){}return e}()),y=(function(){function e(){}return e}(),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.internalCommands={multiple:function(e){var t=this.runAllowed;this.runAllowed=!1,e.commands.forEach(this.runInternalCommand.bind(this)),this.runAllowed=t,this.runRejected&&this.run()},addNode:function(e){var t=u.create({config:e,searchElements:this.searchElements});this.subscribeOnNodeEvents(t),this.nodes.add(t)},removeNode:function(e){var t=e._id,n=this.SearchForNodeById(t);this.nodes.remove(n),this.removeErrorFromMap(t)},addConnection:function(e){var t=(this.nodes,{});if(t.startNode=this.SearchForNodeById(e.startNodeId),t.endNode=this.SearchForNodeById(e.endNodeId),t.startNode&&t.endNode){var n=new i(e,t);this.get("connections").add(n),this.SearchForNodeById(n.get("startNodeId")).connectPort(n.get("startPortIndex"),!0,n),this.SearchForNodeById(n.get("endNodeId")).connectPort(n.get("endPortIndex"),!1,n)}},removeConnection:function(e){var t=this.get("connections").get(e._id);t&&this.get("connections").remove(t)},setNodeProperty:function(e){var t=this.SearchForNodeById(e._id),n=e.property;e.oldValue||(e.oldValue=JSON.parse(JSON.stringify(t.get(n)))),t.set(n,e.newValue),"isFrozen"===n&&this.toggleFreezeState(t,!1)},setRender:function(e){this.renderAllowed=e.renderAllowed,this.trigger("renderNodes")}},t.commandInversions={addNode:function(e){var t=JSON.parse(JSON.stringify(e));return t.kind="removeNode",t},multiple:function(e){var t=JSON.parse(JSON.stringify(e));return t.commands=t.commands.map(this.invertCommand.bind(this)),t.commands.reverse(),t},removeNode:function(e){var t=JSON.parse(JSON.stringify(e));return t.kind="addNode",t},addConnection:function(e){var t=JSON.parse(JSON.stringify(e));return t.kind="removeConnection",t},removeConnection:function(e){var t=JSON.parse(JSON.stringify(e));return t.kind="addConnection",t},setNodeProperty:function(e){var t=JSON.parse(JSON.stringify(e)),n=t.oldValue;return t.oldValue=t.newValue,t.newValue=n,t},setRender:function(e){var t=JSON.parse(JSON.stringify(e));return t.renderAllowed=!t.renderAllowed,t}},t}return o(t,e),Object.defineProperty(t.prototype,"idAttribute",{get:function(){return"_id"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.baseUrl+"/ws/"+this.get("_id")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.get("name")},set:function(e){this.set("name",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.get("description")},set:function(e){this.set("description",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this.get("nodes")},set:function(e){this.set("nodes",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabName",{get:function(){return this.get("tabName")},set:function(e){this.set("tabName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notes",{get:function(){return this.get("notes")},set:function(e){this.set("notes",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){return this.get("connections")},set:function(e){this.set("connections",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this.get("groups")},set:function(e){this.set("groups",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return this.get("zoom")},set:function(e){this.set("zoom",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.get("current")},set:function(e){this.set("current",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.get("isRunning")},set:function(e){this.set("isRunning",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastSaved",{get:function(){return this.get("lastSaved")},set:function(e){this.set("lastSaved",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this.get("offset")},set:function(e){this.set("offset",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"undoStack",{get:function(){return this.get("undoStack")},set:function(e){this.set("undoStack",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redoStack",{get:function(){return this.get("redoStack")},set:function(e){this.set("redoStack",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipBoard",{get:function(){return this.get("clipBoard")},set:function(e){this.set("clipBoard",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workspaceDependencyIds",{get:function(){return this.get("workspaceDependencyIds")},set:function(e){this.set("workspaceDependencyIds",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCustomNode",{get:function(){return this.get("isCustomNode")},set:function(e){this.set("isCustomNode",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"guid",{get:function(){return this.get("guid")},set:function(e){this.set("guid",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customNodeDescription",{get:function(){return this.get("customNodeDescription")},set:function(e){this.set("customNodeDescription",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customNodeCategory",{get:function(){return this.get("customNodeCategory")},set:function(e){this.set("customNodeCategory",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCustomizer",{get:function(){return this.get("isCustomizer")},set:function(e){this.set("isCustomizer",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notNotifyServer",{get:function(){return this.get("notNotifyServer")},set:function(e){this.set("notNotifyServer",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this.get("camera")},set:function(e){this.set("camera",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isShared",{get:function(){return this.get("isShared")},set:function(e){this.set("isShared",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dynamoBox",{get:function(){return this.get("dynamoBox")},set:function(e){this.set("dynamoBox",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dynamoOffset",{get:function(){return this.get("dynamoOffset")},set:function(e){this.set("dynamoOffset",e)},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{name:"Unnamed Workspace",tabName:"",description:"",nodes:null,notes:null,groups:null,connections:null,zoom:1,current:!1,isPublic:!1,isRunning:!1,lastSaved:Date.now(),offset:[4e3,4e3],undoStack:[],redoStack:[],clipBoard:[],workspaceDependencyIds:[],isCustomNode:!1,guid:null,customNodeDescription:"",customNodeCategory:"",isCustomizer:!1,notNotifyServer:!1,camera:[],isShared:!1,dynamoBox:[],dynamoOffset:[]}},t.prototype.initialize=function(e,t){var n=this;if(e=e||new f,t){this.draggingProxy=!1,this.isPortSnapping=!1,this.proxyConnection=null,this.dragSelect=!1,this.disableSync=!1,this.runAllowed=!1,this.renderAllowed=!0,this.pendingRequestsCount=0,this.nodeErrorMap={},this.customNode=null,this._isSerializing=!1,this.runner=null,this.runRejected=!1,(!e.offset||isNaN(e.offset[0])||isNaN(e.offset[1]))&&(e.offset=this.defaults().offset,this.set("offset",e.offset)),this.immediatelySendGeometry=t.immediatelySendGeometry,this.baseUrl=t.baseUrl,this.workspaces=t.workspaces,this.searchElements=t.searchElements,this.storageBrowser=t.storageBrowser,this.disableSync=t.disableSync,e.nodes?(this.createNodes(e),e.connections&&this.createConnections(e),this.nodes.each(function(e){var t=this.get("connections").findWhere({endNodeId:e.get("_id")});t||this.toggleFreezeState(e,!1,!0)}.bind(this))):(this.set("nodes",[]),this.set("connections",[])),this.set("notes",e.notes||[]),this.createGroups(e),e.notNotifyServer&&this.set("notNotifyServer",!0),this.marquee=new l({_id:-1,hidden:!0},{workspace:this}),this.proxyConnection=new i({_id:-1,isProxy:!0,isConnectionFromOutPort:!0,proxyPosition:[0,0],hidden:!0}),this.runAllowed=!1,this.sync=_.throttle(this.sync,2e3);var r=_.throttle(function(){this.sync("update",this)},1e3);if(this.listenTo(this,"runCommand change:name             change:workspaceDependencyIds change:dynamoBox",r),this.listenTo(this,"requestRun",this.run),this.listenTo(this.nodes,"change:selected",function(e){this.trigger("nodeSelected",{id:e.get("_id"),selected:e.get("selected")})}.bind(this)),this.listenTo(this.nodes,"change:visible",function(e){e.get("visible")&&e.get("needGeomUpdate")&&(e.set("needGeomUpdate",!1),this.requestNodeGeometry(e.id)),this.trigger("nodeVisible",{id:e.get("_id"),visible:e.get("visible")})}.bind(this)),this.listenTo(this.nodes,"remove",function(e){this.trigger("nodeRemoved",{id:e.get("_id")})}.bind(this)),this.listenTo(this,"change:current",function(e){this.trigger("changeWorkspace",{nodes:e.nodes.map(function(t){return{id:t.get("_id"),visible:e.get("current")&&t.get("visible")}})})}.bind(this)),this.listenTo(this.nodes,"geometryUpdated",function(e){this.trigger("geometryUpdated",e)}.bind(this)),this.listenTo(this,"change:isCustomizer",function(){this.sync("update",this)}),this.set("tabName",this.get("name")),this.get("isCustomNode")&&this.initializeCustomNode(),this.get("isShared")){var o=this.getNodesBoundingBox();this.nodes.transformCoordinates(o),this.get("dynamoBox").length||(this.needsFit=!0,this.set("dynamoBox",[o.minX,o.maxX,o.minY,o.maxY]))}t.logger&&(this.logger=t.logger),this.runner=this.subscribeToRunner(t.runner),this.resolver=new c(null,{workspace:this,workspaces:this.workspaces}),this.listenTo(this.resolver,"change:dependenciesLoaded",function(e){1==e.dependenciesLoaded&&n.runner.addWorkspaceToRunner(n)}),this.resolver.resolveAll()}},t.prototype.GetCurrentGeometry=function(){var e=this;this.nodes.filter(function(e){return e.hasGeometry}).forEach(function(t){e.requestNodeGeometry(t.id)})},t.prototype.requestNodeGeometry=function(e){this.runner.post({kind:"post",message:JSON.stringify(new p(e))})},t.prototype.getNodesBoundingBox=function(){var e=new g;return this.nodes.forEach(function(t){(void 0===e.maxX||t.get("position")[0]>e.maxX)&&(e.maxX=t.get("position")[0]),(void 0===e.minX||t.get("position")[0]<e.minX)&&(e.minX=t.get("position")[0]),(void 0===e.maxY||t.get("position")[1]>e.maxY)&&(e.maxY=t.get("position")[1]),(void 0===e.minY||t.get("position")[1]<e.minY)&&(e.minY=t.get("position")[1])}),e},t.prototype.createGroups=function(e){var t=[];if(this.set("groups",t),e.groups&&e.groups.length){var n=this.nodes.map(function(e){return e.get("_id")}).concat(this.get("notes").map(function(e){return e.id})),r=function(e){return n.indexOf(e)>-1};e.groups.forEach(function(e){e.models=e.models.filter(r),e.models.length&&t.push(e)})}},t.prototype.getCustomizerUrl=function(){var e=document.URL.match(/:\/\/(.[^\/]+)/)[1];return e+"/share/"+this.id},t.prototype.exportSTL=function(){this.trigger("exportSTL",{name:this.get("name")+".stl"})},t.prototype.clearAllNodeGeometry=function(){var e=this.nodes;e&&e.each&&e.each(function(e){this.trigger("clearNodeGeometry",{id:e.get("_id")})})},t.prototype.createNodes=function(e){this.clearAllNodeGeometry(),this.set("nodes",new r);for(var t,n,i=this.workspaces,o=this.get("workspaceDependencyIds")||[],s=[],a=this.storageBrowser?this.storageBrowser.get("workspaces"):null,l=0;l<e.nodes.length;l++){if(n=e.nodes[l],"CustomNode"===n.typeName){var c=n.extra.creationName,p=i.findWhere({guid:c});if(p)t=p.get("_id"),s.push(t),Array.prototype.push.apply(s,p.get("workspaceDependencyIds")||[]),n.extra.functionId=t,n.extra.isProxy=!1;else if(a&&(p=a.findWhere({guid:c})),p)t=p.get("_id"),s.push(t),Array.prototype.push.apply(s,p.get("workspaceDependencyIds")||[]),n.extra.functionId=t,n.extra.isProxy=!1;else{n.extra.isProxy=!0;var h=n.extra.functionId;if(h&&!this.disableSync){n.extra.functionId=null;var d=o.indexOf(h);d>-1&&o.splice(d,1)}}}var f=u.create({config:n,searchElements:this.searchElements});this.subscribeOnNodeEvents(f),this.nodes.add(f)}this.set("workspaceDependencyIds",_.union(o,_.uniq(s)))},t.prototype.subscribeOnNodeEvents=function(e){var t=this;this.listenTo(e,"request-set-node-prop",this.setNodeProperty),this.listenTo(e,"requestRun",function(){this.trigger("requestRun",this)}),this.listenTo(e,"updateRunner",function(){this.trigger("updateRunner")}),this.listenTo(e,"lock-changed",function(){this.trigger("updateCustomizer")}),this.listenTo(e,"port-selected",this.nodePortSelected),this.listenTo(e,"port-snap-update",this.nodePortSnapUpdate),this.listenTo(e,"request-remove-conn",this.removeConnection),this.listenTo(e,"request-remove-node",this.removeNodeById),this.listenTo(e,"request-remove-conn-from-collection",this.removeConnectionFromCollection),this.listenTo(e,"deselect-all-nodes",this.deselectAllNodes),this.listenTo(e,"request-set-draggingproxy",this.setDraggingProxy),this.listenTo(e,"request-array-items",this.requestArrayItems),this.listenTo(e,"evalFailed",function(n){t.addErrorToMap(e.id,n)}),this.listenTo(e,"evalBegin",function(){t.removeErrorFromMap(e.id)})},t.prototype.addErrorToMap=function(e,t){this.nodeErrorMap[e]=t,this.trigger("errorListChanged")},t.prototype.removeErrorFromMap=function(e){this.nodeErrorMap[e]&&(delete this.nodeErrorMap[e],this.trigger("errorListChanged"))},t.prototype.setDraggingProxy=function(e){this.draggingProxy=e},t.prototype.createConnections=function(e){var t=this.nodes.map(function(e){return e.get("_id")}),n=function(e){return t.indexOf(e)>-1},r=e.connections.filter(function(e){return n(e.startNodeId)&&n(e.endNodeId)});this.set("connections",new s(r)),_.each(this.get("connections").where({isProxy:!1}),function(e){e.startNode=this.SearchForNodeById(e.get("startNodeId")),e.endNode=this.SearchForNodeById(e.get("endNodeId")),e.startNode.connectPort(e.get("startPortIndex"),!0,e),e.endNode.connectPort(e.get("endPortIndex"),!1,e)},this)},t.prototype.subscribeOnNodesConnectionsChanges=function(){this.listenTo(this.get("connections"),"add remove",function(e){if(e.get("isFrozen")){var t=this.SearchForNodeById(e.get("endNodeId"));this.toggleFreezeState(t,!0)}this.trigger("change:connections"),this.trigger("requestRun",this)}),this.listenTo(this.nodes,"add remove",function(e){this.trigger("updateCustomizer"),this.trigger("change:nodes"),this.trigger("requestRun",this)}),this.listenTo(this.nodes,"remove",function(e){this.stopListening(e)})},t.prototype.initializeCustomNode=function(){this.customNode=new a.InternalNodeTypes.CustomNode(this.get("name"),this.get("_id"),this.get("guid"));var e=this.nodes.where({typeName:"Input"}).length,t=this.nodes.where({typeName:"Output"}).length;this.customNode.setNumInputs(e),this.customNode.setNumOutputs(t),this.customNode.searchTags=[this.get("name").toLowerCase()],this.customNode.description=this.get("customNodeDescription"),this.customNode.category=this.get("customNodeCategory"),this.searchElements.addCustomNode(this.customNode),this.listenTo(this,"change:name",function(){this.customNode.functionName=this.get("name"),this.customNode.searchTags=[this.get("name").toLowerCase()],this.searchElements.addCustomNode(this.customNode)})},t.prototype.toJSON=function(){if(this.set("undoStack",_.last(this.get("undoStack"),10)),this.set("redoStack",_.last(this.get("redoStack"),10)),this._isSerializing)return this.id||this.cid;this._isSerializing=!0;var e=_.clone(this.attributes);return _.each(e,function(t,n){null!==t&&void 0!==t&&_.isFunction(t.toJSON)&&(e[n]=t.toJSON())}),this._isSerializing=!1,e},t.prototype.subscribeToRunner=function(e){var t=this;return this.listenTo(e,"change:runningState",function(e){e.RunningState.workspace.id==t.id?t.isRunning=e.RunningState.isRunning:t.isRunning=!1}),e},t.prototype.dispose=function(){this.get("connections").reset(),this.nodes.reset(),this.resolver.stopListening(),this.stopListening(),this.runner.removeWorkspaceFromRunner(this)},t.prototype.getCustomNodeInputsOutputs=function(e){var t=e?"Output":"Input";return this.nodes.filter(function(e){return e.get("type").typeName===t})},t.prototype.getCustomNodes=function(){return this.nodes.filter(function(e){return e.get("type")instanceof a.InternalNodeTypes.CustomNode&&e.get("type").functionId})},t.prototype.getCustomNodesWithId=function(e){return this.getCustomNodes().filter(function(t){return t.get("type").functionId===e})},t.prototype.parse=function(e){return e.nodes=new r(e.nodes),e.connections=new s(e.connections),e},t.prototype.addToUndoAndClearRedo=function(e){this.get("undoStack").push(e),this.get("redoStack").length=0},t.prototype.removeSelected=function(){var e=!1,t={};if(this.nodes.each(function(n){n.get("selected")&&(e=!0,t[n.get("_id")]=n.serialize())}),e){var n={};this.get("connections").each(function(e){(t[e.get("startNodeId")]||t[e.get("endNodeId")])&&(n[e.get("_id")]||(e.silentRemove=!0,n[e.get("_id")]=e.toJSON()))});var r={kind:"multiple",commands:new Array};for(var i in n){var o=n[i];o.kind="removeConnection",r.commands.push(o)}var s={kind:"setRender",renderAllowed:!1};r.commands.push(s);for(var a in t){var l=t[a];l.kind="removeNode",r.commands.push(l)}s={kind:"setRender",renderAllowed:!0},r.commands.push(s),this.runInternalCommand(r),this.addToUndoAndClearRedo(r)}},t.prototype.makeId=function(){return h.guid()},t.prototype.copy=function(){var e=!1,t={};if(this.nodes.each(function(n){n.get("selected")&&(e=!0,t[n.get("_id")]=n.serialize())}),e){var n={},r=0;this.get("connections").each(function(e){e.get("_id")===-1||e.get("isProxy")||(t[e.get("startNodeId")]&&t[e.get("endNodeId")]||t[e.get("endNodeId")])&&(n[e.get("_id")]||(r++,n[e.get("_id")]=e.toJSON()))}),this.trigger("setClipboard",{nodes:t,connections:n})}},t.prototype.paste=function(){this.trigger("pastFromClipboard",this.get("_id"))},t.prototype.pasteFromClipboard=function(e){if(void 0!=e){var t=JSON.parse(JSON.stringify(e)),n={},r=_.reduce(t.nodes,function(e,t){return[Math.min(e[0],t.position[0]),Math.min(e[1],t.position[1])]},[1e8,1e8]),i=_.reduce(t.nodes,function(e,t){return[Math.max(e[0],t.position[0]),Math.max(e[1],t.position[1])]},[0,0]),o=Math.max(.85*(i[0]-r[0]),150)+50*Math.random(),s=Math.max(.25*(i[1]-r[1]),25)+50*Math.random(),a=0;_.each(t.nodes,function(e){n[e._id]=e;var t=e.position[0]+o,r=e.position[1]+s;n[e._id].position=[t,r],n[e._id]._id=this.makeId(),a++}.bind(this)),a>0&&this.deselectAllNodes();var l={};_.each(t.connections,function(e){n[e.endNodeId]&&(e.endNodeId=n[e.endNodeId]._id),n[e.startNodeId]&&(e.startNodeId=n[e.startNodeId]._id),l[e._id]=e,l[e._id]._id=this.makeId()}.bind(this));var c={kind:"multiple",commands:new Array},u={kind:"setRender",renderAllowed:!1};c.commands.push(u);for(var p in n){var h=t.nodes[p];h.kind="addNode",c.commands.push(h)}u={kind:"setRender",renderAllowed:!0},c.commands.push(u);for(var p in l){var d=l[p];d.kind="addConnection",c.commands.push(d)}this.runInternalCommand(c),this.addToUndoAndClearRedo(c);for(var p in n){var h=t.nodes[p],f=h.extra.functionId;"CustomNode"===h.typeName&&this.syncCustomNodesWithWorkspace(f)}}},t.prototype.addNodeByNameAndPosition=function(e,t){if(void 0!==e&&void 0!==t){var n=u.tolerantSearchForNode(e,this.searchElements);if(!n)return void console.warn("Could not find node with creationName, concreteType, or displayName in Library: "+e);var r=new m;return r.position=t,r._id=this.makeId(),n.get("isCustomNode")?(r.typeName="CustomNode",r.extra={functionId:n.get("functionId"),functionName:n.get("functionName"),creationName:n.CreationName,displayName:n.DisplayName,numInputs:n.get("numInputs"),numOutputs:n.get("numOutputs"),isProxy:!1,description:n.Description}):r.typeName=e,this.addNode(r),this.nodes.last()}},t.prototype.regenerateDependencies=function(){var e=this.getCustomNodes().map(function(e){return e.get("type").functionId}),t=e.map(function(e){return this.workspaces.get(e)}.bind(this)).map(function(e){return e?e.get("workspaceDependencyIds"):[]}),n=e.concat(t);return _.union.apply(null,n)},t.prototype.deselectAllNodes=function(){this.nodes.deselectAll()},t.prototype.addNode=function(e){this.deselectAllNodes();var t;if("CustomNode"===e.typeName){if(t=e.extra.functionId,t===this.get("_id"))return;var n=this.workspaces.get(t);if(this.isCyclicDependency(n,this.get("_id")))return;this.addWorkspaceDependency(t,!0)}var r=JSON.parse(JSON.stringify(e));r.kind="addNode",this.runInternalCommand(r),this.addToUndoAndClearRedo(r),"CustomNode"===e.typeName&&this.syncCustomNodesWithWorkspace(t)},t.prototype.isCyclicDependency=function(e,t){if(e.get("workspaceDependencyIds").indexOf(t)!==-1)return!0;for(var n=e.get("workspaceDependencyIds"),r=0;r<n.length;r++){var i=this.workspaces.get(n[r]);if(this.isCyclicDependency(i,t))return!0}return!1},t.prototype.addWorkspaceDependency=function(e,t){this.resolver.addWorkspaceDependency(e,t)},t.prototype.syncCustomNodesWithWorkspace=function(e){this.resolver.syncCustomNodesWithWorkspace(e)},t.prototype.removeNode=function(e){var t=JSON.parse(JSON.stringify(e));t.kind="removeNode",this.runInternalCommand(t),this.addToUndoAndClearRedo(t)},t.prototype.addConnection=function(e){var t=JSON.parse(JSON.stringify(e));t.kind="addConnection",this.runInternalCommand(t),this.addToUndoAndClearRedo(t)},t.prototype.connectNodes=function(e,t,n,r){var i={kind:"multiple",commands:new Array},o=this.SearchForNodeById(n);if(!o)return this;var s=o.getConnectionAtIndex(r);if(null!=s){s.silentRemove=!0;var a=s.toJSON();a.kind="removeConnection",i.commands.push(a)}var l={kind:"addConnection",startNodeId:e,startPortIndex:t,endNodeId:n,endPortIndex:r,_id:this.makeId()};return i.commands.push(l),
this.runInternalCommand(i),this.addToUndoAndClearRedo(i),this},t.prototype.removeConnection=function(e){var t=JSON.parse(JSON.stringify(e));t.kind="removeConnection",this.runInternalCommand(t),this.addToUndoAndClearRedo(t)},t.prototype.removeConnectionFromCollection=function(e){this.get("connections").remove(e)},t.prototype.setNodeProperty=function(e){var t=JSON.parse(JSON.stringify(e));t.kind="setNodeProperty",this.runInternalCommand(t),this.addToUndoAndClearRedo(t)},t.prototype.toggleFreezeState=function(e,t,n){var r=e.get("isFrozen")||e.get("isFrozenByUpstream");if(t){var i=this.get("connections").findWhere({endNodeId:e.get("_id"),isFrozen:!0}),o=!!i;e.set("isFrozenByUpstream",o)}var s=e.get("isFrozen")||e.get("isFrozenByUpstream");!n&&t&&r===s||_.each(this.get("connections").where({startNodeId:e.get("_id")}),function(e){e.set("isFrozen",s);var t=this.SearchForNodeById(e.get("endNodeId"));this.toggleFreezeState(t,!0)},this)},t.prototype.multipleSetNodeProperty=function(e){var t={kind:"multiple",commands:new Array};e.forEach(function(e){var n=JSON.parse(JSON.stringify(e));n.kind="setNodeProperty",t.commands.push(n)}),this.runInternalCommand(t),this.addToUndoAndClearRedo(t)},t.prototype.requestArrayItems=function(e){this.runner.post({kind:"post",message:JSON.stringify(e)})},t.prototype.runInternalCommand=function(e){var t=this.internalCommands[e.kind];return t?(t.call(this,e),void this.trigger("runCommand")):void console.warn("Could not find the command: "+e.kind)},t.prototype.redo=function(){var e=this.get("redoStack");if(0===e.length)return console.warn("Nothing to redo!");var t=e.pop();this.get("undoStack").push(t),this.runInternalCommand(t)},t.prototype.undo=function(){var e=this.get("undoStack");if(0!==e.length){var t=e.pop(),n=this.invertCommand(t);this.get("redoStack").push(t),this.runInternalCommand(n)}},t.prototype.invertCommand=function(e){var t=this.commandInversions[e.kind];return t?t.call(this,e):{}},t.prototype.run=function(){if(!this.runAllowed||this.get("isCustomNode"))return void(this.runRejected=!0);if(this.runRejected=!1,0!==this.nodes.length){this.trigger("showProgress");var e=this.nodes.filter(function(e){return e.isOutputNode()&&e.type.outputs.length>0}).map(function(e){return e.id});this.runner.run(e,this)}},t.prototype.startProxyConnection=function(e,t,n,r){return this.proxyConnection.isProxy=!0,this.proxyConnection.isConnectionFromOutPort=r,r?(this.proxyConnection.startNodeId=e,this.proxyConnection.startPortIndex=t):(this.proxyConnection.endNodeId=e,this.proxyConnection.endPortIndex=t),this.proxyConnection.proxyPosition=n,this.proxyConnection.hidden=!1,this.draggingProxy=!0,this.trigger("startProxyDrag"),this},t.prototype.nodePortSelected=function(e,t,n,r,i,o){this.draggingProxy?this.proxyConnection.isConnectionFromOutPort&&!i?this.completeProxyConnection(this.proxyConnection.startNodeId,this.proxyConnection.startPortIndex,t,n):!this.proxyConnection.isConnectionFromOutPort&&i?this.completeProxyConnection(t,n,this.proxyConnection.endNodeId,this.proxyConnection.endPortIndex):this.trigger("endProxyDrag"):o||(void 0===e||i?this.startProxyConnection(t,n,r,i):(this.startProxyConnection(e.startNodeId.toString(),e.startPortIndex,r,!0),this.removeConnection(e)))},t.prototype.completeProxyConnection=function(e,t,n,r){return this.draggingProxy=!1,this.trigger("endProxyDrag"),this.connectNodes(e,t,n,r),this},t.prototype.endProxyConnection=function(){return this.proxyConnection.set("hidden",!0),this.draggingProxy=!1,this},t.prototype.nodePortSnapUpdate=function(e,t){e&&this.draggingProxy?(this.isPortSnapping=!0,this.proxyConnection.set("proxyPosition",t)):this.isPortSnapping=!1},t.prototype.SearchForNodeById=function(e){var t=Object.create(null);return this.nodes.toArray().forEach(function(e){t[d.removeDashes(e.id)]=e.id}),this.nodes.get(t[d.removeDashes(e)])},t.prototype.updateNodeValues=function(e){for(var t=e.result.length,n=!1,r=0;r<t;r++){var i=e.result[r],o=this.SearchForNodeById(i.nodeId);if(o)if(o.updateValue(i),i.containsGeometryData)if(e.isGeometrySent){var s=!o.get("visible");s||(this.trigger("requestGeometry"),n=!0),o.set("needGeomUpdate",s)}else o.get("visible")?(this.runner.post({kind:"post",message:JSON.stringify(new p(e.result[r].nodeId))}),this.trigger("requestGeometry"),n=!0,o.set("needGeomUpdate",!1)):o.set("needGeomUpdate",!0);else this.trigger("clearNodeGeometry",{id:o.get("_id")}),o.set("needGeomUpdate",!0)}return n},t.prototype.appendArrayItems=function(e){var t=this.SearchForNodeById(e.nodeId);t&&t.appendArrayItems(e)},t.prototype.updateCodeBlockNode=function(e){var t=this.SearchForNodeById(e.nodeId);t&&t.updateData&&t.updateData(e)},t.prototype.updateFormulaNode=function(e){var t=this.SearchForNodeById(e.nodeId);t&&t.updateData&&t.updateData({data:e.data,formulaString:e.script})},t.prototype.removeNodeById=function(e){e&&(this.nodes.each(function(t){var n=t.get("_id")===e;t.set("selected",n)}),this.removeSelected())},t.prototype.sync=function(e,t,n){return this.disableSync||this.trigger("sync-workspace:event",{method:e,model:t,options:n}),null},t}(n.Model));return y});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Workspaces",["require","exports","backbone","Workspace"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return r},enumerable:!0,configurable:!0}),t}(n.Collection);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("FloodSearchElements",["require","exports","backbone","SearchElement","FLOOD"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return r},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e,t){t&&(this.app=t.app)},t.prototype.addCustomNode=function(e){if(this.app){var t=this.findWhere({functionId:e.functionId});t&&this.remove(t),this.add(new r({name:e.functionName,functionName:e.functionName,creationName:e.guid,displayName:e.functionName,category:e.category,isCustomNode:!0,functionId:e.functionId,app:this.app,numInputs:e.inputs.length,numOutputs:e.outputs.length,searchTags:e.searchTags,description:e.description}))}},t.prototype.fetch=function(e){this.models.length=0;for(var t in i.NodeTypes)this.models.push(new r({name:t,creationName:t,app:this.app}));return null},t}(n.Collection);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("LibraryItemsListMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(){return e.call(this,"GetLibraryItemsMessage")||this}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SearchElements",["require","exports","FloodSearchElements","LibraryItemsListMessage"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){n.prototype.initialize.call(this,e,t)},t.prototype.fetch=function(e){return this.app&&this.app.runner&&this.app.runner.post({kind:"post",message:JSON.stringify(new r)}),null},t}(n);return i}),n("settings",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.getEnv=function(){var e=/localhost/.test(window.location.href)||/dev/.test(window.location.href);if(e)return"dev"},e.storageUrl="",e.connectionLostRetriesCount=2,e.timeoutBetweenReconnection=1e4,e.constantTimeOut=1e3,e.oxygenUrl="/auth/oxygen",e}();return n}),n("BaseStorage",["require","exports","staticHelpers"],function(e,t,n){"use strict";var r=function(){function e(){this.session={__v:0,_id:"540429880879db500f0f2be8",isFirstExperience:!1,name:"Empty session",workspaces:[]}}return e.createPromise=function(e){var t=$.Deferred();return e&&t.resolve(e),t.promise()},e.prototype.createNewWorkspace=function(){var t=$.extend({},e.workspace,{_id:n.guid()});return this.session.workspaces.push(t),e.createPromise(t)},e.prototype.createNewNodeWorkspace=function(){var t=$.extend({},e.workspace,{_id:n.guid(),guid:n.guid(),isCustomNode:!0});return this.session.workspaces.push(t),e.createPromise(t)},e.prototype.fetchComputeToken=function(t){return e.createPromise({token:"BaseStorageToken",email:"DefaultEmail"})},e.prototype.loadWorkspace=function(t){return e.createPromise($.extend({},e.workspace,{_id:n.guid()}))},e.prototype.fetchLogin=function(){return e.createPromise({email:"default",syncDisabled:!0})},e.prototype.logout=function(){return e.createPromise()},e.prototype.fetchWorkspaces=function(){var t=$.extend({},e.workspace,{_id:n.guid()});return this.session.workspaces.push(t),e.createPromise($.extend({},this.session))},e.prototype.fetchWorkspaceElements=function(){var t=[];return this.session.workspaces.map(function(e){t.push({_id:e._id,guid:e.guid,name:e.name,isCustomNode:e.isCustomNode,isPublic:!1,lastSaved:(new Date).toISOString(),isAltered:!1,maintainers:[]})}),e.createPromise(t)},e.prototype.syncWorkspace=function(e,t,n){return this.session.workspaces.map(function(e){e._id===t.get("_id")&&(e.name=t.get("name"))}),!0},e.prototype.postWorkspace=function(t){var r=$.extend({},t,{_id:n.guid()});return this.session.workspaces.push(r),e.createPromise(r)},e.workspace={name:"Untitled",_id:"00000000-0000-0000-0000-000000000000",guid:"00000000-0000-0000-0000-000000000000",nodes:new Array,connections:new Array,isCustomNode:!1},e}();return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Storage",["require","exports","backbone","BaseStorage"],function(e,t,n,r){"use strict";var i=function(e){function t(t){var n=e.call(this)||this;return n.baseUrl=void 0===t?"":t.baseUrl,$.ajaxSetup({xhrFields:{withCredentials:!0}}),r.apply(n,arguments),n}return o(t,e),t.prototype.createUrl=function(e){return this.baseUrl+e},t.prototype.createNewWorkspace=function(){return $.get(this.createUrl.call(this,"/nws"))},t.prototype.createNewNodeWorkspace=function(){return $.get(this.createUrl.call(this,"/nws"))},t.prototype.loadWorkspace=function(e){return $.get(this.createUrl.call(this,"/ws/"+e))},t.prototype.fetchLogin=function(){return $.get(this.createUrl.call(this,"/email"))},t.prototype.fetchComputeToken=function(){return $.get(this.createUrl.call(this,"/computeToken?timestamp="+(new Date).getTime()))},t.prototype.fetchProfile=function(){return $.get(this.createUrl.call(this,"/profile"))},t.prototype.logout=function(){return $.get(this.createUrl.call(this,"/logout"))},t.prototype.fetchWorkspaces=function(){return $.get(this.createUrl.call(this,"/mys"))},t.prototype.fetchWorkspaceElements=function(){return $.get(this.createUrl.call(this,"/ws"))},t.prototype.updateWorkspace=function(e){return $.ajax({url:this.createUrl.call(this,"/ws/"+e.get("_id")),type:"PUT",data:{name:e.get("name"),description:e.get("description"),camera:e.get("camera"),isCustomizer:e.get("isCustomizer")}})},t.prototype.deleteWorkspace=function(e){return $.ajax({url:this.createUrl.call(this,"/ws/"+e),type:"DELETE"})},t.prototype.syncWorkspace=function(e,t,r){return n.sync(e,t,r)},t.prototype.getEditorAuthorization=function(e){return $.get(this.createUrl.call(this,"/getEditorAuthorization/"+e))},t.prototype.postWorkspace=function(e){var t=[];return t.push(e),$.ajax({url:this.createUrl.call(this,"/avpws"),type:"POST",contentType:"application/json",data:JSON.stringify({workspaces:t})})},t}(r);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("WorkspaceElement",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"idAttribute",{get:function(){return"_id"},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{name:"Unnamed Workspace",guid:"00000000-0000-0000-0000-000000000000",isPublic:!1,isCustomNode:!1,lastSaved:Date.now(),workspaceDependencyIds:[],description:""}},t.prototype.initialize=function(e,t){},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("WorkspaceElements",["require","exports","backbone","WorkspaceElement"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){this.model=r,this.app=t.app},t.prototype.fetch=function(e){return this.app.context.fetchWorkspaceElements().done(function(e){this.models.length=0,e.forEach(function(e){var t=new r({_id:e._id,guid:e.guid,name:e.name,isPublic:e.isPublic,lastSaved:e.lastSaved,isAltered:e.isAltered,maintainers:e.maintainers,isCustomNode:e.isCustomNode,workspaceDependencyIds:e.workspaceDependencyIds,description:e.description,isCustomizer:e.isCustomizer});this.add(t)}.bind(this));var t=this.app.storageBrowser||this.app;t.trigger("workspaces-fetched")}.bind(this)),null},t}(n.Collection);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("StorageBrowser",["require","exports","backbone","WorkspaceElements"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{workspaces:null}},t.prototype.initialize=function(e,t){this.app=e.app,this.set("workspaces",new r(null,{app:this.app}))},t.prototype.fetch=function(e){return this.get("workspaces").fetch()},t.prototype.refresh=function(){this.get("workspaces").reset(),this.get("workspaces").fetch()},t}(n.Model);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("LogMessage",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"logDate",{get:function(){return this.get("logDate")},set:function(e){this.set("logDate",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentType",{get:function(){return this.get("componentType")},set:function(e){this.set("componentType",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.get("name")},set:function(e){this.set("name",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cId",{get:function(){return this.get("cId")},set:function(e){this.set("cId",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.get("message")},set:function(e){this.set("message",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elapsedTime",{get:function(){return this.get("elapsedTime")},set:function(e){this.set("elapsedTime",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this.get("startTime")},set:function(e){this.set("startTime",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this.get("endTime")},set:function(e){this.set("endTime",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentDate",{get:function(){var e=new Date;return e.getDate()+"/"+e.getMonth()+"1/"+e.getFullYear().toString().substr(2)},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){return e&&(this.logDate=this.currentDate,this.componentType=e.componentType,this.name=e.name,this.cId=e.cId,this.message=e.message,this.startTime=e.startTime,this.endTime=e.endTime,this.elapsedTime=e.elapsedTime),this},t}(n.Model);return r}),n("LogHelper",["require","exports","LogMessage"],function(e,t,n){"use strict";var r="Workspace",i="Node",o=function(){function e(){}return e.getCurrentTimeStamp=function(){return"undefined"!=typeof window&&window.performance?performance.now():Date.now()},e.workSpaceLogger=function(e,t){var i=new n({componentType:r,name:e.name,id:e.cId,message:e.message,startTime:parseFloat(e.startTime).toFixed(2),endTime:parseFloat(e.endTime).toFixed(2),elapsedTime:parseFloat(e.elapsedTime).toFixed(2)});t&&t.buildLog(i)},e.nodeLogger=function(e,t){var r=new n({componentType:i,name:e.name,id:e.cId,message:e.message,startTime:parseFloat(e.startTime).toFixed(2),endTime:parseFloat(e.endTime).toFixed(2),elapsedTime:parseFloat(e.elapsedTime).toFixed(2)});t&&t.buildLog(r)},e.calculateNodeExecutionTime=function(e,t,r,o,s,a){var l=new n({componentType:i,name:r,id:t,message:e,startTime:parseFloat(o).toFixed(2),endTime:parseFloat(s).toFixed(2),elapsedTime:parseFloat((s-o).toString()).toFixed(2)});a&&a.buildLog(l)},e.calculateGraphExecutionTime=function(e,t,r,o){var s=new n({componentType:i,name:e.name,id:e.id,message:"Graph Execution",startTime:parseFloat(t).toFixed(2),endTime:parseFloat(r).toFixed(2),elapsedTime:parseFloat((r-t).toString()).toFixed(2)});o&&o.buildLog(s)},e}();return o}),n("ComputationResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.result=e.nodes,this.isGeometrySent=e.isGeometrySent}return e}();return n}),n("ContentResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.message=e.message,this.status=e.status}return e}();return n}),n("LibraryItemsListResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.libraryItems=e.libraryItems}return e}();return n}),n("SavedFileResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.fileContent=e.fileContent.$value,this.fileName=e.fileName,this.message=e.statusMessage}return e}();return n}),n("NewWorkspaceResponse",["require","exports","staticHelpers"],function(e,t,n){"use strict";var r=function(){function e(e){this.guid=e.workspaceId,this.name=e.workspaceName,this.nodes=e.nodes.map(n.mapNode),e.notes&&(this.notes=e.notes.map(this.removeType)),e.groups&&(this.groups=e.groups.map(this.removeType)),e.cameraData&&(this.camera=e.cameraData.map(this.removeType)),this.connections=e.connections.map(this.removeType),this.result=e.nodesResult||[]}return e.prototype.removeType=function(e){return delete e.$type,e},e}();return r}),n("GeometryDataResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.geometryData=e.geometryData}return e}();return n}),n("CodeBlockDataResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.workspaceGuid=e.workspaceGuid,this.nodeId=e.nodeId,this.data=e.data}return e}();return n}),n("UpdateProxyNodesResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.workspaceId=e.workspaceId,this.nodesIds=e.nodesIds,this.customNodeId=e.customNodeId}return e}();return n}),n("WorkspacePathResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.guid=e.guid,this.path=e.path}return e}();return n}),n("TimeoutResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.message="Timeout on running. Connection will not be restored. Please, try again later."}return e}();return n}),n("HasUnsavedChangesResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.guid=e.guid,this.hasUnsavedChanges=e.hasUnsavedChanges}return e}();return n}),n("ArrayItemsDataResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.nodeId=e.nodeId,this.items=e.items,this.indexFrom=e.indexFrom}return e}();return n}),n("UploadFileResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.message=e.statusMessage,this.status=e.status,this.invalidNodeNames=e.invalidNodeNames}return e}();return n}),n("FormulaResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.workspaceGuid=e.workspaceGuid,this.nodeId=e.nodeId,this.data=e.data,this.script=e.formulaString}return e}();return n}),n("NewConnectionResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.dynamoVersion=e.dynamoVersion,this.machineName=e.machineName}return e}();return n}),n("DownloadDependencyResponse",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.status=e.status,this.statusMessage=e.statusMessage}return e}();return n});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("AbstractRunner",["require","exports","backbone","underscore","ComputationResponse","ContentResponse","LibraryItemsListResponse","SavedFileResponse","NewWorkspaceResponse","GeometryDataResponse","CodeBlockDataResponse","UpdateProxyNodesResponse","WorkspacePathResponse","TimeoutResponse","HasUnsavedChangesResponse","ArrayItemsDataResponse","UploadFileResponse","FormulaResponse","NewConnectionResponse","DownloadDependencyResponse"],function(e,t,n,r,i,s,a,l,c,u,p,h,d,f,m,g,y,v,b,S){"use strict";var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.responseMap={ArrayItemsDataResponse:g,CodeBlockDataResponse:p,ComputationResponse:i,ContentResponse:s,DownloadDependencyResponse:S,FormulaResponse:v,GeometryDataResponse:u,HasUnsavedChangesResponse:m,LibraryItemsListResponse:a,NewConnectionResponse:b,NewWorkspaceResponse:c,SavedFileResponse:l,TimeoutResponse:f,UpdateProxyNodesResponse:h,UploadFileResponse:y,WorkspacePathResponse:d},t.responseEventMap={ArrayItemsDataResponse:"array-items-received:event",CodeBlockDataResponse:"code-block-node-updated:event",ComputationResponse:"computation-completed:event",DownloadDependencyResponse:"fileDependency-loaded:event",FormulaResponse:"formula-node-updated:event",GeometryDataResponse:"geometry-data-received:event",HasUnsavedChangesResponse:"ws-unsaved-changes-presence-received:event",LibraryItemsListResponse:"libraryItemsList-received:event",NewConnectionResponse:"new-connection:event",NewWorkspaceResponse:"creation-data-received:event",SavedFileResponse:"saved-file-received:event",TimeoutResponse:"run-timeout:event",UpdateProxyNodesResponse:"proxy-nodes-data-received:event",UploadFileResponse:"upload-response:event",WorkspacePathResponse:"ws-path-received:event"},t.averageRunTime=0,t.runQueued=!1,t.run=r.throttle(function(e,n){t.post({kind:"run",bottom_ids:e},n),t.RunningState={isRunning:!0,workspace:n}},120),t}return o(t,e),Object.defineProperty(t.prototype,"RunningState",{get:function(){return this.get("runningState")},set:function(e){this.set("runningState",e)},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{runningState:{isRunning:!1,workspace:null}}},t.prototype.initialize=function(e,t){this.workspaces=[],this.runCount=0,this.averageRunTime=0,this.runQueued=!1,this.worker=null},t.prototype.subscribeOnNodesConnectionsChanges=function(e){var t=this;this.listenTo(e.connections,"add",function(n){t.addConnection(n,e)}),this.listenTo(e.connections,"remove",function(n){t.removeConnection(n,e)}),this.listenTo(e.nodes,"add",function(n){t.addNode(n,e)}),this.listenTo(e.nodes,"remove",function(n){t.removeNode(n,e)}),this.listenTo(e.nodes,"addInPort",function(n){t.addInPort(n,e)}),this.listenTo(e.nodes,"removeInPort",function(n){t.removeInPort(n,e)}),this.listenTo(e.nodes,"setInPortCount",function(n){t.setInPortCount(n,e)})},t.prototype.addWorkspaceToRunner=function(e){this.workspaces.push(e),this.initializeAndSubscribeToWorkspaceEvents(e)},t.prototype.removeWorkspaceFromRunner=function(e){this.workspaces=r.filter(this.workspaces,function(t){return t.id!=e.id}),this.stopListening(e)},t.prototype.initializeAndSubscribeToWorkspaceEvents=function(e){this.InitWorkspace(e),console.log("setting up "+e.name+" : "+e.id+" for the runner"),this.subscribeOnNodesConnectionsChanges(e),e.subscribeOnNodesConnectionsChanges()},t.prototype.postMessage=function(e,t,n){void 0===n&&(n=!1),n||this.trigger("post",e)},t.prototype.post=function(e,t,n){t&&(e.workspace_id=t.id),this.postMessage(e,t,n)},t.prototype.InitWorkspace=function(e){var t=this;this.post({kind:"addWorkspace"},e);var n=e.toJSON();e.nodes.forEach(function(n){t.watchNodeEvents(n,e)}),n.kind="setWorkspaceContents",this.post(n,e)},t.prototype.ProcessResponse=function(e,t){this.trigger("processResponseEvent",e,t)},t.prototype.watchNodeEvents=function(e,t){var n=this;this.listenTo(e,"change:replication change:ignoreDefaults change:name\n            change:visible update-node change:isFrozen change:isPinned ",function(){n.updateNode(e,t,"updateNode")}),this.listenTo(e,"update-node-position",function(){n.updateNode(e,t,"updateNodePosition")}),this.listenTo(e,"update-slider",function(){n.updateNode(e,t,"updateSlider")})},t.prototype.updateNode=function(e,t,n){var r=e.serialize();e.hasChanged("replication")||(r.replication=void 0),e.hasChanged("ignoreDefaults")||(r.ignoreDefaults=void 0),e.hasChanged("name")||(r.name=void 0),e.hasChanged("visible")||(r.visible=void 0),e.hasChanged("isFrozen")||(r.isFrozen=void 0),r.kind=n,this.post(r,t)},t.prototype.addNode=function(e,t){var n=e.serialize();n.kind="addNode",this.watchNodeEvents(e,t),this.post(n,t)},t.prototype.removeNode=function(e,t){var n=e.serialize();n.kind="removeNode",this.post(n,t)},t.prototype.addInPort=function(e,t){var n={kind:"modelEvent",_id:e.id,eventName:"AddInPort",value:1};this.post(n,t)},t.prototype.removeInPort=function(e,t){var n={kind:"modelEvent",_id:e.id,eventName:"RemoveInPort",value:1};this.post(n,t)},t.prototype.setInPortCount=function(e,t){var n={kind:"modelEvent",_id:e.id,eventName:"SetInPortCount",value:e.get("value")};this.post(n,t)},t.prototype.addConnection=function(e,t){var n=e.toJSON();n.kind="addConnection",n.id=e.id,this.post(n,t)},t.prototype.removeConnection=function(e,t){if(!e.silentRemove){var n=e.toJSON();n.kind="removeConnection",n.id=e.endNodeId,n.portIndex=e.endPortIndex,n.startPortIndex=-1,this.post(n,t)}},t.prototype.reset=function(){var e=this;this.workspaces.forEach(function(t){e.InitWorkspace(t)})},t}(n.Model);return w});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("BaseApp",["require","exports","backbone","Workspace","Workspaces","SearchElements","staticHelpers","settings","Storage","StorageBrowser","LogHelper","LogMessage","AbstractRunner"],function(e,t,n,r,i,s,a,l,c,u,p,h,d){"use strict";var f=function(){function e(){}return e}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"idAttribute",{get:function(){return"_id"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return"/mys"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.get("name")},set:function(e){this.set("name",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentWorkspace",{get:function(){return this.get("currentWorkspace")},set:function(e){this.set("currentWorkspace",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workspaces",{get:function(){return this.get("workspaces")},set:function(e){this.set("workspaces",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFirstExperience",{get:function(){return this.get("isFirstExperience")},set:function(e){this.set("isFirstExperience",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showingLogger",{get:function(){return this.get("showingLogger")},set:function(e){this.set("showingLogger",e)},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{name:"DefaultSession",workspaces:new i,backgroundWorkspaces:new Array,currentWorkspace:"",showingBrowser:!1,showingSearch:!1,showingFeedback:!1,showingShare:!1,showingHelp:!1,isFirstExperience:!1,clipBoard:{}}},t.prototype.initialize=function(e,t){t=t||{},this.workspaceIdsAwaitingParse=new Array,this.fetchOptions=null,this._isSerializing=!1,this.newNodePosition=[0,0],this.lockContext=!1,l.storageUrl=t.storageUrl||l.storageUrl,this.baseUrl=l.storageUrl,e=e||{},this.context=e.storage||new c({baseUrl:l.storageUrl}),this.runner=e.runner||new d,this.listenTo(this,"change:currentWorkspace",function(){this.updateCurrentWorkspace(),this.trigger("hide-loading")}),this.updateCurrentWorkspace(),e.searchElements?this.searchElements=e.searchElements:(this.searchElements=new s(null,{app:this}),this.searchElements.reset(),this.searchElements.fetch()),this.storageBrowser=new u({app:this}),this.listenTo(this,"code-block-node-updated:event",this.updateCodeBlockNode),this.listenTo(this,"formula-node-updated:event",this.updateFormulaNode),this.listenTo(this,"array-items-received:event",this.processArrayItems),this.listenTo(this.storageBrowser,"loadWorkspaceDependency",this.loadWorkspaceDependency),this.listenTo(this.get("workspaces"),"sync-workspace:event",this.syncWorkspace),this.listenTo(this.get("workspaces"),"loadWorkspace",this.loadWorkspace),this.listenTo(this.get("workspaces"),"openWorkspace",this.openWorkspace),this.listenTo(this.get("workspaces"),"setClipboard",function(e){this.clipBoard=e}),this.listenTo(this.get("workspaces"),"pastFromClipboard",function(e){this.getLoadedWorkspace(e).pasteFromClipboard(this.clipBoard)}),this.listenTo(this.get("workspaces"),"setCurrentWorkspace",function(e){
this.set("currentWorkspace",e)}),this.listenTo(this.get("workspaces"),"showingSearch",this.changeSearchShowing),e.logger&&(this.logger=e.logger,this.listenTo(this.logger,"closeLoggerView",function(){this.showingLogger=!1}))},t.prototype.fetch=function(e){return n.Model.prototype.fetch.call(this,this.fetchOptions)},t.prototype.toJSON=function(){if(this._isSerializing)return this.id||this.cid;this._isSerializing=!0;var e=_.clone(this.attributes);_.each(e,function(t,n){_.isFunction(t.toJSON)&&(e[n]=t.toJSON())}),this._isSerializing=!1;var t=this.get("backgroundWorkspaces");return e.workspaces=e.workspaces.filter(function(e){return!_.contains(t,e._id)}),e},t.prototype.makeId=function(){return a.guid()},t.prototype.enableAutosave=function(){var e=_.debounce(function(){this.sync("update",this,{error:function(){console.log("sync error, arguments:"),console.log(arguments)}})},1e3);this.listenTo(this.get("workspaces"),"add remove",e),this.listenTo(this,"change:currentWorkspace change:isFirstExperience change:backgroundWorkspaces",e),this.listenTo(this,"debounceSync",e)},t.prototype.disableAutosave=function(){this.stopListening(this.get("workspaces"),"add remove"),this.stopListening(this,"change:currentWorkspace change:isFirstExperience change:backgroundWorkspaces")},t.prototype.clearWorkspaces=function(){var e=this.get("workspaces").slice();this.get("workspaces").remove(e),this.unset("currentWorkspace")},t.prototype.changeSearchShowing=function(e){this.set("showingSearch",e.show),this.newNodePosition=e.newNodePosition||[0,0]},t.prototype.getCurrentWorkspace=function(){return this.get("workspaces").get(this.get("currentWorkspace"))},t.prototype.getLoadedWorkspace=function(e){return this.get("workspaces").get(e)},t.prototype.updateCodeBlockNode=function(e){var t=e.workspaceGuid?{guid:e.workspaceGuid}:{isCustomNode:!1},n=this.get("workspaces").findWhere(t);n&&n.updateCodeBlockNode(e)},t.prototype.updateFormulaNode=function(e){var t=e.workspaceGuid?{guid:e.workspaceGuid}:{isCustomNode:!1},n=this.get("workspaces").findWhere(t);n&&n.updateFormulaNode(e)},t.prototype.processArrayItems=function(e){var t=this.get("workspaces").findWhere({isCustomNode:!1});t&&t.appendArrayItems(e)},t.prototype.newWorkspace=function(e,t){this.logger&&this.logger.resetLogger(),this.context.createNewWorkspace().done(function(n){t&&(n.notNotifyServer=!0,n.connections=t.connections,n.nodes=t.nodes,n.camera=t.camera,n.notes=t.notes,n.groups=t.groups),n.name="Untitled";var i=new r(n,{workspaces:this.get("workspaces"),searchElements:this.searchElements,socket:this.socket,storageBrowser:this.storageBrowser,baseUrl:this.baseUrl,immediatelySendGeometry:this.get("immediatelySendGeometry"),logger:this.logger,runner:this.runner});this.get("workspaces").add(i),this.set("currentWorkspace",i.get("_id")),e&&e(i)}.bind(this)).fail(function(){this.trigger("show-errors","failed to get new workspace"),console.error("failed to get new workspace")}.bind(this))},t.prototype.newNodeWorkspace=function(e,t,n){this.context.createNewNodeWorkspace().done(function(i){i.isCustomNode=!0,i.guid=this.makeId(),i.name=t&&t.name||"",i.customNodeDescription=t&&t.description||"",i.customNodeCategory=t&&t.category||"";var o={workspaces:this.get("workspaces"),searchElements:this.searchElements,socket:this.socket,storageBrowser:this.storageBrowser,baseUrl:this.baseUrl,immediatelySendGeometry:this.get("immediatelySendGeometry"),logger:this.logger,runner:this.runner};n&&(i.notNotifyServer=!0,i.connections=n.connections,i.nodes=n.nodes,i.name=n.name,i.guid=n.guid,i.camera=n.camera,i.notes=n.notes,i.groups=n.groups);var s=new r(i,o);this.get("workspaces").add(s),this.set("currentWorkspace",s.get("_id")),e&&e(s)}.bind(this)).fail(function(){this.trigger("show-errors","failed to get new workspace"),console.error("failed to get new workspace")}.bind(this))},t.prototype.openDynWorkspace=function(e,t,n){this.logger&&this.logger.resetLogger(),this.context.postWorkspace(e).done(function(e){if(e.workspaceId)this.openWorkspace(e.workspaceId,t);else{var n={workspaces:this.get("workspaces"),searchElements:this.searchElements,storageBrowser:this.storageBrowser,baseUrl:this.baseUrl,immediatelySendGeometry:this.get("immediatelySendGeometry"),logger:this.logger,runner:this.runner},i=new r(e,n);this.get("workspaces").add(i),this.set("currentWorkspace",i.get("_id")),t&&t(i)}}.bind(this)).fail(function(){this.trigger("show-errors","failed to get new workspace"),console.error("failed to get new workspace")}.bind(this))},t.prototype.loadWorkspaceDependency=function(e){_.contains(this.workspaceIdsAwaitingParse,e)||(this.setWorkspaceToBackground(e),this.loadWorkspace(e))},t.prototype.loadWorkspace=function(e,t,n,i){var o=this;this.logger&&this.logger.resetLogger();var s=p.getCurrentTimeStamp();p.graphRunStartTime=s,this.context.loadWorkspace(e).done(function(a){var l=o.workspaces,c=l.get(e);if(!c){if(i&&(a.notNotifyServer=!0,a.connections=i.connections,a.nodes=i.nodes,a.camera=i.camera,a.notes=i.notes,a.groups=i.groups),!a.isCustomNode){o.trigger("replace-old-home");var u=l.where({isCustomNode:!1});u.length&&(l.remove(u[0]),u[0].dispose())}c=new r(a,{workspaces:o.get("workspaces"),searchElements:o.searchElements,socket:o.socket,storageBrowser:o.storageBrowser,baseUrl:o.baseUrl,immediatelySendGeometry:o.get("immediatelySendGeometry"),logger:o.logger,runner:o.runner}),l.add(c),n&&o.set("currentWorkspace",c.get("_id")),t&&t(c);var d=p.getCurrentTimeStamp();p.workSpaceLogger(new h({name:c.get("name"),cId:c.get("_id"),message:"LoadWorkspace",startTime:s,endTime:d,elapsedTime:(d-s).toString()}),o.logger)}}).fail(function(){o.trigger("show-errors","failed to get workspace with id: "+e),console.error("failed to get workspace with id: "+e)})},t.prototype.isBackgroundWorkspace=function(e){return this.get("backgroundWorkspaces").indexOf(e)!=-1},t.prototype.setWorkspaceToBackground=function(e){if(!this.isBackgroundWorkspace(e)){var t=this.get("backgroundWorkspaces").slice(0);t.push(e),this.set("backgroundWorkspaces",t)}},t.prototype.removeWorkspaceFromBackground=function(e){if(_.contains(this.get("backgroundWorkspaces"),e)){var t=this.get("backgroundWorkspaces").slice(0);t.remove(t.indexOf(e)),this.set("backgroundWorkspaces",t)}},t.prototype.openWorkspace=function(e,t,n){this.removeWorkspaceFromBackground(e);var r=this.get("workspaces").get(e);r&&this.set("currentWorkspace",e),this.loadWorkspace(e,function(e){this.set("currentWorkspace",e.get("_id")),t&&t(e)}.bind(this),null,n)},t.prototype.updateCurrentWorkspace=function(){if(0!==this.get("workspaces").length){if(this.get("workspaces").each(function(e){e.set("current",!1)}),null===this.get("currentWorkspace")||!this.get("workspaces").get(this.get("currentWorkspace"))){var e=this.get("workspaces").at(0);this.set("currentWorkspace",e.get("_id"))}this.getCurrentWorkspace().set("current",!0)}},t.prototype.syncWorkspace=function(e){this.context.syncWorkspace(e.method,e.model,e.options)},t.prototype.getCurrentWorkspaceCamera=function(){return this.getCurrentWorkspace()?_.find(this.getCurrentWorkspace().get("camera"),function(e){return"Background Preview"===e.name}):null},t.prototype.saveWorkspaceCamera=function(e,t,n,r){var i=this.getCurrentWorkspace(),o=new f;o.eyeX=e[0],o.eyeY=e[1],o.eyeZ=e[2],o.lookX=t[0],o.lookY=t[1],o.lookZ=t[2],o.upX=n[0],o.upY=n[1],o.upZ=n[2],o.name=r.name||"Background Preview",i.set("camera",o),this.lockContext||(this.context.updateWorkspace(i).done(function(){this.lockContext=!1}.bind(this)),this.lockContext=!0)},t}(n.Model);return m});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("RecordableCommand",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"rc"}},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DeleteModelCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"dm",modelGuid:"00000000-0000-0000-0000-000000000000"}},t.prototype.initialize=function(e,t){this.set("modelGuid",t._id)},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CreateNodeCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"cn",nodeId:"00000000-0000-0000-0000-000000000000",nodeName:"",x:0,y:0,defaultPosition:!1,transformCoordinates:!1}},t.prototype.initialize=function(e,t){this.set("nodeId",t._id),this.set("nodeName",t.creationName),this.set("x",t.position[0]),this.set("y",t.position[1])},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CreateProxyNodeCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"cnp",nodeId:"00000000-0000-0000-0000-000000000000",nodeName:"",x:0,y:0,defaultPosition:!1,transformCoordinates:!1,nickName:"",inputs:0,outputs:0}},t.prototype.initialize=function(e,t){this.set("nodeId",t._id),this.set("nodeName",t.creationName),this.set("x",t.position[0]),this.set("y",t.position[1]),this.set("nickName",t.extra.functionName),this.set("inputs",t.extra.numInputs),this.set("outputs",t.extra.numOutputs)},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("MakeConnectionCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r,i="00000000-0000-0000-0000-000000000000";!function(e){e[e.Begin=0]="Begin",e[e.End=1]="End",e[e.Cancel=2]="Cancel"}(r||(r={}));var s;!function(e){e[e.start=0]="start",e[e.end=1]="end"}(s||(s={}));var a;!function(e){e[e.INPUT=0]="INPUT",e[e.OUTPUT=1]="OUTPUT"}(a||(a={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"mc",nodeId:null,portIndex:0,portType:0,mode:r[r.Begin]}},t.prototype.initialize=function(e,t){this.set("nodeId",t.nodeId),this.set("portIndex",t.portIndex),this.set("portType",t.portType),this.set("mode",t.mode)},t.getInstance=function(e,n){var o;if(n.startPortIndex==-1){if("start"===e)return new t({},{nodeId:i,portIndex:-1,portType:a[a.INPUT],mode:r[r.Cancel]});o=r[r.Begin]}else o=e===s[s.start]?r[r.Begin]:r[r.End];return new t({},{nodeId:n[e+"NodeId"],portIndex:n[e+"PortIndex"],portType:e===s[s.start]?a[a.OUTPUT]:a[a.INPUT],mode:o})},t}(n),c=function(){function e(e,t){return t.startPortIndex==-1?[l.getInstance(s[s.end],t),l.getInstance(s[s.start],t)]:[l.getInstance(s[s.start],t),l.getInstance(s[s.end],t)]}return e}();return c});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("RunCancelCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"rcn",cancelRun:!1,showErrors:!1}},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ModelEventCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"me",modelGuid:"00000000-0000-0000-0000-000000000000",eventName:"",value:1}},t.prototype.initialize=function(e,t){this.set("modelGuid",t._id),this.set("eventName",t.eventName),this.set("value",t.value)},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CreateCustomNodeCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"ccn",nodeId:"00000000-0000-0000-0000-000000000000",name:"",category:"Builtin Functions",description:"",makeCurrent:!1}},t.prototype.initialize=function(e,t){this.set("nodeId",t.guid),this.set("name",t.name),this.set("description",t.description),this.set("category",t.category)},t}(n);return r}),n("commandsMap",["require","exports","DeleteModelCommand","CreateNodeCommand","CreateProxyNodeCommand","MakeConnectionCommand","RunCancelCommand","ModelEventCommand","CreateCustomNodeCommand"],function(e,t,n,r,i,o,s,a,l){"use strict";var c=function(){function e(){}return e.commands={addNode:r,addProxyNode:i,removeNode:n,removeConnection:o,addConnection:o,run:s,addWorkspace:l,modelEvent:a},e}();return c});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("RecordableCommandsMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t,n,r){var i=e.call(this,"RunCommandsMessage")||this;return i.Commands=t||[],i.WorkspaceGuid=n,i.sendGeometryImmediately=!!r,i}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("UpdateModelValueCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r=function(){function e(e,t,n){this.modelGuid=e,this.name=t,this.value=n}return e}(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.searchTypeMapForNode=function(e){var n,r=Object.getOwnPropertyNames(t.typeToPropertyNameMap).filter(function(t){return t.indexOf(e)>-1}).map(function(e){return t.typeToPropertyNameMap[e]});return n=t.typeToPropertyNameMap.hasOwnProperty(e)||r.length>0?t.typeToPropertyNameMap[e]||r[0]:null},t.prototype.defaults=function(){return{$type:"umv",modelGuid:"00000000-0000-0000-0000-000000000000",name:"",value:null}},t.prototype.initialize=function(e,t){this.set("modelGuid",t.modelGuid),this.set("name",t.name),this.set("value",t.value)},t.syncProperties=function(e,n){var r=[];for(var i in n.extra)if(!n.lastValue||n.lastValue[i]!==n.extra[i])if(this.searchTypeMapForNode(n.typeName)&&this.searchTypeMapForNode(n.typeName).param===i){var o=this.searchTypeMapForNode(n.typeName).value;o&&r.push(t.getInstance(n._id,o,n.extra[i]))}else"value"===i&&r.push(t.getInstance(n._id,"Value",n.extra[i]));if((e.full||n.replication)&&r.push(t.getInstance(n._id,"ArgumentLacing",t.getReplicationType(n.replication))),(e.full||n.ignoreDefaults)&&r.push(t.getInstance(n._id,"UsingDefaultValue",n.ignoreDefaults.join(";"))),n.name&&r.push(t.getInstance(n._id,"Name",n.name)),void 0!==n.visible&&r.push(t.getInstance(n._id,"IsVisible",n.visible)),void 0!==n.isFrozen&&r.push(t.getInstance(n._id,"IsFrozen",n.isFrozen)),void 0!==n.isPinned&&r.push(t.getInstance(n._id,"PreviewPinned",n.isPinned)),void 0!==n.nodePortData&&n.nodePortData.length>0)for(var s=0;s<n.nodePortData.length;s++){var a=n.nodePortData[s],l=a.index+":"+a.useLevels;r.push(t.getInstance(n._id,"UseLevels",l));var c=a.index+":"+a.shouldKeepListStructure;r.push(t.getInstance(n._id,"KeepListStructure",c));var u=a.index+":"+a.level;r.push(t.getInstance(n._id,"ChangeLevel",u))}return r},t.getInstance=function(e,n,i){return new t({},new r(e,n,i))},t.getReplicationType=function(e){return t.replicationTypes[e]||t.replicationTypes.applyLongest},t.typeToPropertyNameMap={Input:{param:"name",value:"InputSymbol"},"Dynamo.Graph.Nodes.CustomNodes.Symbol, DynamoCore":{param:"name",value:"InputSymbol"},Output:{param:"name",value:"Symbol"},"Dynamo.Graph.Nodes.CustomNodes.Output, DynamoCore":{param:"name",value:"Symbol"},"Code Block":{param:"code",value:"Code"},"Dynamo.Graph.Nodes.CodeBlockNodeModel, DynamoCore":{param:"code",value:"Code"},"Python Script":{param:"script",value:"ScriptContent"},"PythonNodeModels.PythonNode, PythonNodeModels":{param:"script",value:"ScriptContent"},Formula:{param:"script",value:"FormulaString"},"CoreNodeModels.Formula, CoreNodeModels":{param:"script",value:"FormulaString"},"Convert Between Units":{param:"metricValues",value:"Values"},"CoreNodeModels.DynamoConvert, CoreNodeModels":{param:"metricValues",value:"Values"},Show:{param:"value",value:void 0},Watch:{param:"value",value:void 0},"CoreNodeModels.Watch, CoreNodeModels":{param:"value",value:void 0},"Watch 3D":{param:"value",value:void 0},"Watch3DNodeModels.Watch3D, Watch3DNodeModels":{param:"value",value:void 0}},t.replicationTypes={applyShortest:"Shortest",applyLongest:"Longest",applyCartesian:"CrossProduct",applyDisabled:"Disabled",applyAuto:"Auto"},t}(n);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CreateNoteCommand",["require","exports","RecordableCommand"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{$type:"cnt",nodeId:"00000000-0000-0000-0000-000000000000",noteText:"",x:0,y:0,defaultPosition:!1}},t.prototype.initialize=function(e,t){this.set("nodeId",t.nodeId),this.set("noteText",t.noteText),this.set("x",t.x),this.set("y",t.y)},t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DownloadDependencyMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t,n,r,i){var o=e.call(this,"DownloadDependencyMessage")||this;return o.fileName=t,o.workspaceId=n,o.nodeIds=r,o.url=i,o}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("HeartbeatMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(){return e.call(this,"HeartbeatMessage")||this}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SocketConnection",["require","exports","backbone","settings","HeartbeatMessage"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e,t){return this.url=t.url,this.token=t.token,this.email=t.email,this.retryCount=r.connectionLostRetriesCount,this.connectionEstablished=!1,this.socket||this.createSocket(t),this.messageStack=[],this.ping=null,this.sendTimer=null,this.timeoutChecker=null,this.listenTo(this,"recreateSocket",function(e){this.createSocket(e,!0)}.bind(this)),this},t.prototype.createSocket=function(e,t){var n;n=new WebSocket(e.url+"?email="+encodeURIComponent(e.email)+"&token="+encodeURIComponent(e.token)),this.socket=this.setHandlers(n,t)},t.prototype.setHandlers=function(e,n){this.ping=setInterval(function(){1==this.socket.readyState?this.socket.send(JSON.stringify(new i)):this.socket.readyState>=2&&(clearInterval(this.ping),this.ping=null)}.bind(this),t.settings.heartBeatTimeout);var o=setTimeout(function(){if(1!==this.socket.readyState){var e={$type:"overloaded:event",data:r.timeoutBetweenReconnection};throw this.trigger("processMessage",e),this.socket.onopen=null,this.socket.onclose=null,clearInterval(this.sendTimer),clearTimeout(this.timeoutChecker),this.messageStack.length=0,this.socket.close(),new Error("Timeout on socket connection establishment")}}.bind(this),t.settings.openTimeout);return e.onopen=function(){if(clearTimeout(o),console.log("Connection established with "+this.url),this.retryCount=r.connectionLostRetriesCount,this.connectionEstablished=!0,n){var e={$type:"resend-wss-data:event",data:r.timeoutBetweenReconnection};this.trigger("processMessage",e)}}.bind(this),e.onclose=function(e){if(e.wasClean)console.log("Connection closed");else{console.log("Connection failure"),this.connectionEstablished&&(this.messageStack.length=0,n=!0,this.connectionEstablished=!1);var t={$type:"connection-lost:event",data:r.timeoutBetweenReconnection};this.trigger("processMessage",t),clearTimeout(o),setTimeout(function(){if(this.retryCount--)this.trigger("createSocket");else{var e={$type:"connection-failed:event",data:r.timeoutBetweenReconnection};this.trigger("processMessage",e)}}.bind(this),r.timeoutBetweenReconnection)}console.log("Code: "+e.code+" Reason: "+e.reason)}.bind(this),e.onmessage=function(t){var n=JSON.parse(t.data);2==n.status?(console.log("Service Unavailable: "+n.message),e.close()):1==n.status?console.log("Internal Server Error: "+n.message):this.trigger("processMessage",n)}.bind(this),e.onerror=function(e){console.log("Socket error: "+e.type)},e},t.prototype.send=function(e){this.timeoutChecker&&clearTimeout(this.timeoutChecker),1===this.socket.readyState?this.socket.send(e):(this.sendLater(e),console.log("Sending. Socket connection not established yet")),this.timeoutChecker=setTimeout(function(){var e={$type:"timeout-fail:event",data:r.timeoutBetweenReconnection};this.trigger("processMessage",e),this.socket.close(),clearTimeout(this.timeoutChecker)}.bind(this),t.settings.inactivityTimeout)},t.prototype.sendLater=function(e){this.messageStack.length>t.settings.maxMessageStack&&this.messageStack.pop(),this.messageStack.push(e),window.clearInterval(this.sendTimer),this.sendTimer=window.setInterval(function(){if(1===this.socket.readyState){for(;this.messageStack.length;)this.socket.send(this.messageStack.shift());window.clearInterval(this.sendTimer)}}.bind(this),t.settings.pingTimeout)},t.settings={maxMessageStack:100,pingTimeout:1e3,heartBeatTimeout:3e4,openTimeout:8e3,inactivityTimeout:3e5},t}(n.Model);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Runner",["require","exports","AbstractRunner","commandsMap","RecordableCommandsMessage","CreateNodeCommand","CreateProxyNodeCommand","MakeConnectionCommand","UpdateModelValueCommand","ModelEventCommand","CreateNoteCommand","DownloadDependencyMessage","LogHelper","SocketConnection"],function(e,t,n,r,i,s,a,l,c,u,p,h,d,f){"use strict";var m=function(){function e(){}return e.prototype.getCommand=function(e){switch(e){case"addNode":return this.addNode;case"updateNode":return this.updateNode;case"removeNode":return this.removeNode;case"addConnection":return this.addConnection;case"removeConnection":return this.removeConnection;case"setWorkspaceContents":return this.setWorkspaceContents;case"run":return this.run;case"addWorkspace":return this.addWorkspace;case"modelEvent":return this.modelEvent;case"instantiateCommand":return this.instantiateCommand;case"createMessage ":return this.createMessage}},e.prototype.getVariableInputCommands=function(e){var t=[];return e.extra&&e.extra.varInputs&&t.push(new u({},{_id:e._id,eventName:"SetInPortCount",value:e.extra.varInputs.length})),t},e.prototype.addNode=function(e,t){var n=[this.instantiateCommand(e)];return n=n.concat(this.getVariableInputCommands(e)),n=n.concat(c.syncProperties({full:!0},e)),this.createMessage(n,t)},e.prototype.updateNode=function(e,t){var n=c.syncProperties({full:!1},e);if(n.length)return this.createMessage(n,t)},e.prototype.removeNode=function(e,t){return this.createMessage(this.instantiateCommand(e),t)},e.prototype.addConnection=function(e,t){return this.createMessage(this.instantiateCommand(e),t)},e.prototype.removeConnection=function(e,t){return this.createMessage(this.instantiateCommand(e),t)},e.prototype.setWorkspaceContents=function(e,t){for(var n=new Array,r=0;r<e.nodes.length;r++)e.nodes[r].extra.isProxy?n.push(new a({},e.nodes[r])):(n.push(new s({},e.nodes[r])),n=n.concat(this.getVariableInputCommands(e.nodes[r]))),n=n.concat(c.syncProperties({full:!0},e.nodes[r]));for(var r=0,i=e.connections.length;r<i;r++)n=n.concat(new l({},e.connections[r]));for(var r=0;r<e.notes.length;r++)n.push(new p({},e.notes[r]));var o=new Array;return n.length&&o.push(this.createMessage(n,t)),_.each(t.get("fileDependencies"),function(e){o.push(JSON.stringify(new h(e.original_path,void 0,e.nodes,e.url)))}),o},e.prototype.run=function(e,t){return this.createMessage(this.instantiateCommand(e),t)},e.prototype.addWorkspace=function(e,t){if(t.isCustomNode===!0)return e.guid=t.guid,e.name=t.name,e.description=t.customNodeDescription,e.category=t.customNodeCategory,this.createMessage(this.instantiateCommand(e),t)},e.prototype.modelEvent=function(e,t){return this.createMessage(this.instantiateCommand(e),t)},e.prototype.instantiateCommand=function(e){return new r.commands[e.kind]({},e)},e.prototype.createMessage=function(e,t){return e instanceof Array||(e=[e]),JSON.stringify(new i(e,t.guid,t.immediatelySendGeometry))},e}(),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.connectionEventMap={"resend-wss-data:event":"resend-wss-data:event","connection-lost:event":"connection-lost:event","connection-failed:event":"connection-failed:event","timeout-fail:event":"timeout-fail:event","overloaded:event":"overloaded:event"},t}return o(t,e),t.prototype.initialize=function(t,n){this.socket=this.createSocket(n),this.commands=new m,this.listenTo(this.socket,"processMessage",this.handleMessage),this.listenTo(this,"createSocket",this.recreateSocket),this.listenTo(this.socket,"createSocket",this.recreateSocket),e.prototype.initialize.call(this,t,n)},t.prototype.recreateSocket=function(){$.get("/computeToken?timestamp="+(new Date).getTime(),function(e){!e.token,this.socket&&this.socket.trigger("recreateSocket",{url:e.url,token:e.token,email:e.email})}.bind(this))},t.prototype.createSocket=function(e){return new f({},{url:e.url,token:e.token,email:e.email})},t.prototype.handleMessage=function(e){if(this.responseMap.hasOwnProperty(e.$type)){var t=new this.responseMap[e.$type](e);if("ComputationResponse"==e.$type&&t.result.map(function(e){var t=e.nodeId;this.getNodeDetails(t)}.bind(this)),"GeometryDataResponse"==e.$type){var n=t.geometryData.nodeId;this.getNodeDetails(n)}this.responseEventMap.hasOwnProperty(e.$type)&&this.ProcessResponse(this.responseEventMap[e.$type],t)}else this.connectionEventMap.hasOwnProperty(e.$type)&&this.trigger(this.connectionEventMap[e.$type],e.data)},t.prototype.postMessage=function(t,n,r){var i=this;if(void 0===r&&(r=!1),"post"==t.kind&&t.message&&this.socket.send(t.message),t.kind in this.commands){"run"==t.kind&&(d.computationStartTime=d.getCurrentTimeStamp(),0==d.graphRunStartTime&&(d.graphRunStartTime=d.computationStartTime));var o=this.commands.getCommand(t.kind).call(this.commands,t,n);o&&(o instanceof Array?_.each(o,function(e){return i.socket.send(e)}):this.socket.send(o))}e.prototype.postMessage.call(this,t,n,r)},t.prototype.reset=function(){e.prototype.reset.call(this)},t.prototype.initWorkspace=function(t){var n=this;return t.notNotifyServer?(t.notNotifyServer=!1,void t.nodes.forEach(function(e){n.watchNodeEvents(e,t)})):void e.prototype.InitWorkspace.call(this,t)},t.prototype.getNodeDetails=function(e){var t;return t},t}(n);return g});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("GraphModel",["require","exports","backbone","SearchElement","SaveUploader","ClearWorkspaceMessage","BaseApp","Runner"],function(e,t,n,r,i,s,a,l){"use strict";var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.libraryLoaded=!1,t}return o(t,e),t.prototype.initialize=function(t,n){var r=this;t=t||{},t.params&&(t=t.params),n=n||{},this.resentIds=new Array,this.listenTo(this,"libraryItemsList-received:event",this.mapLibraryItems),this.saveUploader=new i({app:this}),this.listenTo(this.saveUploader,"request-workspace-browser-refresh",this.refreshWorkspaceBrowser),this.listenTo(this.get("workspaces"),"saveFile",function(){this.saveUploader.saveFile()}),this.listenTo(this.workspaces,"nodeSelected",function(e){r.trigger("nodeSelected",e)}),this.listenTo(this.workspaces,"nodeVisible",function(e){r.trigger("nodeVisible",e)}),this.listenTo(this.workspaces,"nodeRemoved",function(e){r.trigger("nodeRemoved",e)}),this.listenTo(this.workspaces,"changeWorkspace",function(e){r.trigger("changeWorkspace",e)}),this.listenTo(this.workspaces,"clearNodeGeometry",function(e){
r.trigger("clearNodeGeometry",e)}),this.listenTo(this.workspaces,"exportSTL",function(e){r.trigger("exportSTL",e)}),this.listenTo(this,"computation-completed:event",this.updateNodes),this.listenTo(this,"resend-wss-data:event",this.resendWssData),t.runner=t.runner||new l({},{args:t}),this.listenTo(t.runner,"processResponseEvent",function(e,t){this.trigger(e,t)}.bind(this)),e.prototype.initialize.call(this,t,n)},t.prototype.updateNodes=function(e){var t=!1;this.get("workspaces").forEach(function(n){n.updateNodeValues(e)&&(t=!0)}),t||this.get("workspaces").trigger("hideProgress")},t.prototype.fetch=function(e){return null},t.prototype.clearWorkspaces=function(){this.runner.post({kind:"post",message:JSON.stringify(new s(!1))}),a.prototype.clearWorkspaces.call(this)},t.prototype.refreshWorkspaceBrowser=function(){this.storageBrowser&&this.storageBrowser.refresh()},t.prototype.registerCallbackOnLibraryLoaded=function(e){this.libraryLoadedCallback=e,this.libraryLoaded&&(e(),this.libraryLoadedCallback=null)},t.prototype.mapLibraryItems=function(e){this.searchElements.models=e.libraryItems.map(function(e){return new r({name:e.name,creationName:e.creationName,displayName:e.displayName,category:e.category,searchTags:e.keywords,searchWeights:e.keywordWeights,args:e.arguments,description:e.description,inPorts:e.parameters,outPorts:e.returnKeys,app:this,extra:e.extra,concreteType:e.concreteType})}).concat(this.searchElements.models),this.searchElements.trigger("add"),this.libraryLoadedCallback&&(this.libraryLoadedCallback(),this.libraryLoadedCallback=null),this.libraryLoaded=!0},t.prototype.resendWssData=function(){var e=this.workspaces;this.resentIds=[],e.each(function(e){this.resendWs(e)}.bind(this))},t.prototype.resendWs=function(e){if(!_.contains(this.resentIds,e.id)){for(var t=e.workspaceDependencyIds,n=0;n<t.length;n++)this.resendWs(this.workspaces.get(t[n]));this.resentIds.push(e.id),e.runner.InitWorkspace(e)}},t.prototype.sync=function(e,t,r){if("read"==e){var i=$.Deferred();return $.get(this.url).done(function(e){var t=[],n=location.protocol+"//"+location.host;t.push($.get(n+"/workspace/"+this.getCurrentWorkspace()+"/file_dependencies")),$.when.apply($,t).done(function(){1==t.length?e.fileDependencies=arguments[0]:e.fileDependencies=_.flatten(_.pluck(Array.prototype.slice.call(arguments),"0")),e.fileDependencies.map(function(e){e.url=n+"/file_dependency/"+e._id})}).always(function(){i.resolve(e),r&&r.success&&r.success(e)})}).fail(function(){i.reject(arguments),r&&r.error&&r.error(arguments)}),i}return n.sync(e,t,r)},t}(a);return c});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ControllerApp",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventsTriggerMap={onGeometryResponseReceivedEvent:"geometry-data-received",OnNodeGeometryUpdatedEvent:"geometryUpdated",onCameraChangeRequestEvent:"setCamera",onNodeRemovedChangeEvent:"nodeRemoved",onNodeVisibilityChangeEvent:"nodeVisible",onNodeSelectionChangeEvent:"nodeSelected",onCurrentWorkspaceChangeEvent:"changeWorkspace",onManagerOpenWorkspaceEvent:"openWorkspaceByIDRequest",onManagerNewWorkspaceEvent:"newWorkspaceRequest",onManagerOpenDynWorkspaceEvent:"openDynWorkspaceRequest",onManagerSaveCurrentWorkspaceEvent:"saveCurrentWorkspaceRequest"},t}return o(t,e),Object.defineProperty(t.prototype,"EventsMap",{get:function(){return this.eventsTriggerMap},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){var t=this;return this.on("addListeners",function(e){t.addListeners(e)}),this.externalComponents=[],this},t.prototype.addListeners=function(e){var t=$(e);t.on("raiseEvent",function(e,t){t&&this.eventsTriggerMap.hasOwnProperty(t.type)&&this.triggerEvents(this.eventsTriggerMap[t.type],t.detail),this.triggerExternalEvents(t.type,t.detail)}.bind(this))},t.prototype.removeListeners=function(e){},t.prototype.triggerEvents=function(e,t){this.trigger("publishEvent",e,t);var n=new jQuery.Event(e);this.externalComponents.forEach(function(e){$(e).trigger(n,t)})},t.prototype.triggerExternalEvents=function(e,t){this.trigger("publishExternalEvent",e,t)},t.prototype.addEventListeners=function(e){this.trigger("addListeners",e),this.externalComponents.push(e)},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("WorkspaceTabView",["require","exports","backbone","underscore"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"div"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"workspace-tab"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#workspace-tab-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.listenTo(this.model,"change:tabName",this.render),this.listenTo(this.model,"change:current",this.render),this.$input=null,this.editButtonShown=!1},t.prototype.events=function(){return{click:"click","click .remove-button":"remove",mouseover:"showEditButton",mouseout:"hideEditButton","click .edit-button":"startEdit","blur .workspace-name":"endEdit","touchstart .edit-button":"startEdit",touchstart:"toggleShowingEditButton"}},t.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.model.get("current")===!0?this.$el.addClass("current-workspace"):this.$el.removeClass("current-workspace"),this.$input=this.$(".workspace-name"),this.refreshWorkspaceNameTooltip(),this},t.prototype.refreshWorkspaceNameTooltip=function(){this.$(".workspace-name").parent().tooltip("destroy"),this.$(".workspace-name").parent().tooltip({title:this.model.get("name"),delay:500,placement:"top",trigger:"hover"}).data("bs.tooltip").tip().addClass("workspaceNameTooltip")},t.prototype.toggleShowingEditButton=function(){this.editButtonShown?(this.editButtonShown=!1,this.hideEditButton()):(this.editButtonShown=!0,this.showEditButton())},t.prototype.showEditButton=function(){this.$(".edit-button").css("visibility","visible")},t.prototype.hideEditButton=function(){this.$(".edit-button").css("visibility","hidden")},t.prototype.startEdit=function(e){this.$input.prop("disabled",!1),this.$input.focus().select(),this.$input.css("pointer-events","auto"),this.$(".workspace-name").parent().tooltip("destroy"),e.stopPropagation()},t.prototype.endEdit=function(){this.hideEditButton(),this.$input.prop("disabled",!0),this.$input.css("pointer-events","none");var e=this.$input.val();this.model.set("name",e),this.model.set("tabName",e),this.refreshWorkspaceNameTooltip()},t.prototype.click=function(e){this.model.trigger("setCurrentWorkspace",this.model.get("_id"))},t.prototype.remove=function(e){return this.model.get("isCustomNode")?this.model.get("askForUnsavedChanges")?this.model.workspaces.trigger("closing-request",this.model):this.model.workspaces.trigger("hide",this.model):(this.model.workspaces.trigger("workspaceRemove",this.model),$("#new-home-workspace").click()),e&&e.stopPropagation(),this},t}(n.View);return i}),n("DynBaseNodeConverter",["require","exports","underscore","staticHelpers"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e[e.color=0]="color",e[e.boolean=1]="boolean",e[e.date=2]="date",e[e.selection=3]="selection",e[e.string=4]="string",e[e.number=5]="number"}(i=t.DynInputType||(t.DynInputType={}));var o=function(){function e(){}return e.prototype.convertReplicationToReachType=function(e){var t={Shortest:"applyShortest",Longest:"applyLongest",CrossProduct:"applyCartesian",Disabled:"applyDisabled",Auto:"applyAuto"};return t[e]},e.prototype.convertReplicationToDynType=function(e){var t={applyShortest:"Shortest",applyLongest:"Longest",applyCartesian:"CrossProduct",applyDisabled:"Disabled",applyAuto:"Auto"};return t[e]},e.prototype.getTypeNameFromFunctionSignature=function(e){return null!=e?e:null},e.prototype.Convert=function(e,t){var n=this.baseConversion(e);return n=this.SetExtra(n,e,t)},e.prototype.ConvertToDyn=function(e){var t=this.convertToDynBaseConversion(e),n=this.convertToDynViewConversion(e);return t=this.appendNodeTypeData(t,e),{nodeModel:t,nodeView:n}},e.prototype.ConvertsType=function(e){return"FunctionNode"==e.NodeType},e.prototype.SetExtra=function(e,t,r){return r&&n.find(r.map(function(e){return e.Id}),function(e){return e==t.Id})?e.extra.lock=!1:e.extra.lock=!0,e},e.prototype.baseConversion=function(e){return{_id:e.Id,creationName:e.FunctionSignature,description:e.Description,replication:this.convertReplicationToReachType(e.Replication),ignoreDefaults:e.Inputs.map(function(e){return!!e.UsingDefaultValue&&!e.UsingDefaultValue}),nodePortData:e.Inputs.map(function(e,t){return{index:t,level:e.Level,useLevels:e.UseLevels,shouldKeepListStructure:e.KeepListStructure}}),DynMetaData:{inputs:e.Inputs,outputs:e.Outputs,concreteType:e.ConcreteType,nodeType:e.NodeType,variableInputPorts:e.VariableInputPorts},displayName:"NA",position:[0,0],isGeometryVisible:!0,isFrozen:!1,isPinned:!1,isCustomNode:!1,name:"NA",typeName:this.getTypeNameFromFunctionSignature(e.FunctionSignature),selected:!1,visible:!0,extra:{}}},e.prototype.convertToDynViewConversion=function(e){return{Id:r.removeDashes(e.id||e._id),Name:e.name,ShowGeometry:e.visible,X:e.position[0],Y:e.position[1],IsUpstreamVisible:!0}},e.prototype.convertToDynBaseConversion=function(e){return{ConcreteType:e.type.concreteType,Description:e.description,Id:r.removeDashes(e.id||e._id),Replication:this.convertReplicationToDynType(e.replication),Inputs:e.type.inputs.map(function(t){var n={level:2,shouldKeepListStructure:!1,useLevels:!1};return e.nodePortData&&e.nodePortData.length>0&&(n=e.nodePortData.filter(function(e){return e.index==t.parentIndex})[0]),{Level:n.level,KeepListStructure:n.shouldKeepListStructure,UseLevels:n.useLevels,Id:r.removeDashes(e.id+"_Input"+t.parentIndex),Name:"⇒"==t.name?"":t.name,Description:t.toolTip||""}}),Outputs:e.type.outputs.map(function(t){return{Level:2,KeepListStructure:!1,UseLevels:!1,Id:r.removeDashes(e.id+"_Output"+t.parentIndex),Name:"⇒"==t.name?"":t.name,Description:t.toolTip||""}})}},e.prototype.ConvertsAVPType=function(e){return"Dynamo.Graph.Nodes.ZeroTouch.DSFunction, DynamoCore"==e.type.concreteType},e.prototype.appendNodeTypeData=function(e,t){return e.FunctionSignature=t.creationName,e.NodeType="FunctionNode",e},e}();t.DynBaseNodeConverter=o});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynBooleanNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"BooleanInputNode"==e.NodeType},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.value=n.InputValue,t},t.prototype.ConvertsAVPType=function(e){return"Boolean"==e.typeName||"CoreNodeModels.Input.BoolSelector, CoreNodeModels"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.NodeType="BooleanInputNode",e.InputValue=t.extra.value,e},t}(n.DynBaseNodeConverter);t.DynBooleanNodeConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynCodeBlockNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"CodeBlockNode"==e.NodeType},t.prototype.VerifyPortDescriptions=function(e){for(var t=e.Outputs.map(function(e){return e.Description}),n="t6BBA4B28C5E54CF89F300D510499A00E_",r="temp6BBA4B28C5E54CF89F300D510499A11E_",i=0;i<t.length;i++)if(t[i].slice(0,n.length)===n){var o=t[i].split("_");t[i]=r+o[1]}return t},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.code=n.Code,t.extra.inputs=n.Inputs.map(function(e){return e.Name}),t.extra.outputs=this.VerifyPortDescriptions(n),t.extra.lineIndices=[],t},t.prototype.ConvertsAVPType=function(e){return"Code Block"==e.typeName||"Dynamo.Graph.Nodes.CodeBlockNodeModel, DynamoCore"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.NodeType="CodeBlockNode",e.Code=t.extra.code,e},t}(n.DynBaseNodeConverter);t.DynCodeBlockNodeConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynDoubleInputSliderConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"FloatRangeInputNode"==e.NodeType||"FloatInputNode"==e.NodeType||"IntegerRangeInputNode"==e.NodeType||"IntegerInputNode"==e.NodeType||"NumberInputNode"==e.NodeType},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.value=n.InputValue,t.extra.step=null!=n.StepValue?n.StepValue:void 0,t.extra.min=null!=n.MinimumValue?n.MinimumValue:void 0,t.extra.max=null!=n.MaximumValue?n.MaximumValue:void 0,t},t.prototype.ConvertsAVPType=function(e){return"Number Slider"==e.creationName||"CoreNodeModels.Input.DoubleSlider, CoreNodeModels"==e.type.concreteType||"Integer Slider"==e.creationName||"CoreNodeModels.Input.IntegerSlider, CoreNodeModels"==e.type.concreteType||"Number"==e.creationName||"CoreNodeModels.Input.DoubleInput, CoreNodeModels"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){e.NodeType="NumberInputNode",e.InputValue=t.extra.value,e.MinimumValue=t.extra.min,e.MaximumValue=t.extra.max,e.StepValue=t.extra.step;var n=t.typeName;switch(n){case"Number Slider":e.NumberType="Double";break;case"Integer Slider":e.NumberType="Integer";break;default:e.NumberType="Double"}return e},t}(n.DynBaseNodeConverter);t.DynDoubleInputSliderConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynDSVarArgFunctionConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return e.ConcreteType.indexOf("Dynamo.Graph.Nodes.ZeroTouch.DSVarArgFunction")!==-1},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.varInputs=n.Inputs.map(function(e){return{name:e.Name,type:e.Description}}),t},t.prototype.ConvertsAVPType=function(e){return"Dynamo.Graph.Nodes.ZeroTouch.DSVarArgFunction, DynamoCore"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.NodeType="FunctionNode",e.FunctionSignature=t.creationName,e},t}(n.DynBaseNodeConverter);t.DynDSVarArgFunctionConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynExtensionNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"ExtensionNode"==e.NodeType},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),n.VariableInputPorts&&(t.extra.varInputs=n.Inputs.map(function(e){return{name:e.Name,type:e.Description}})),n.InputValue&&(t.extra.inputValue=n.InputValue),n.HintPath&&(t.extra.hintPath=n.HintPath),t},t.prototype.ConvertsAVPType=function(e){return!0},t.prototype.appendNodeTypeData=function(e,t){e.NodeType="ExtensionNode";for(var n in t.extra)t.extra.hasOwnProperty(n)&&"varInputs"!=n&&(e[this.capitalizeFirstLetter(n)]=t.extra[n]);return t.extra.varInputs&&(e.VariableInputPorts=!0),e},t.prototype.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t}(n.DynBaseNodeConverter);t.DynExtensionNodeConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynFormulaNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"FormulaNode"==e.NodeType},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.script=n.Formula,t.extra.inputs=n.Inputs.map(function(e){return e.Name}),t.extra.outputs=n.Outputs.map(function(e){return e.Description}),t},t.prototype.ConvertsAVPType=function(e){return"Formula"==e.typeName||"CoreNodeModels.Formula, CoreNodeModels"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.Formula=t.extra.script,e.NodeType="FormulaNode",e},t}(n.DynBaseNodeConverter);t.DynFormulaNodeConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynPythonNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"PythonScriptNode"==e.NodeType},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.script=n.Code,t},t.prototype.ConvertsAVPType=function(e){return"Python Script"==e.typeName||"PythonNodeModels.PythonNode, PythonNodeModels"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.Code=t.extra.script,e.NodeType="PythonScriptNode",e.VariableInputPorts=!0,e},t}(n.DynBaseNodeConverter);t.DynPythonNodeConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynStringInputNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"StringInputNode"==e.NodeType},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.value=n.InputValue,t},t.prototype.ConvertsAVPType=function(e){return"String"==e.typeName||"CoreNodeModels.Input.StringInput, CoreNodeModels"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.NodeType="StringInputNode",e.InputValue=t.extra.value,e},t}(n.DynBaseNodeConverter);t.DynStringInputNodeConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynUnitConverterNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"ConvertBetweenUnitsNode"==e.NodeType},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.selectedMetric=n.MeasurementType,t.extra.selectedConvertFrom=n.FromConversion,t.extra.selectedConvertTo=n.ToConversion,t},t.prototype.ConvertsAVPType=function(e){return"Convert Between Units"==e.typeName||"CoreNodeModels.DynamoConvert, CoreNodeModels"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.NodeType="ConvertBetweenUnitsNode",e.MeasurementType=t.extra.selectedMetric,e.FromConversion=t.extra.selectedConvertFrom,e.ToConversion=t.extra.selectedConvertTo,e},t}(n.DynBaseNodeConverter);t.DynUnitConverterNodeConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynWatch3DNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"ExtensionNode"===e.NodeType&&"Watch3DNodeModels.Watch3D, Watch3DNodeModels"===e.ConcreteType},t.prototype.SetExtra=function(t,n,r){return t=e.prototype.SetExtra.call(this,t,n,r),t.extra.value=n.Camera,t.extra.wasExecuted=n.WasExecuted,t.extra.watchHeight=n.WatchHeight,t.extra.watchWidth=n.WatchWidth,t},t.prototype.ConvertsAVPType=function(e){return"Watch 3D"==e.typeName||"Watch3DNodeModels.Watch3D, Watch3DNodeModels"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.NodeType="ExtensionNode",e.WasExecuted=t.extra.wasExecuted,e.WatchHeight=t.extra.watchHeight,e.WatchWidth=t.extra.watchWidth,e.Camera=t.extra.value,e},t}(n.DynBaseNodeConverter);t.DynWatch3DNodeConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynWatchNodeConverter",["require","exports","./DynBaseNodeConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.ConvertsType=function(e){return"ExtensionNode"===e.NodeType&&"CoreNodeModels.Watch, CoreNodeModels"===e.ConcreteType},t.prototype.ConvertsAVPType=function(e){return"Watch"==e.typeName||"CoreNodeModels.Watch, CoreNodeModels"==e.type.concreteType},t.prototype.appendNodeTypeData=function(e,t){return e.NodeType="ExtensionNode",e},t}(n.DynBaseNodeConverter);t.DynWatchNodeConverter=r}),n("DynBaseNodeViewConverter",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.Convert=function(e,t,n){return e.name=n.Name,e.visible=n.ShowGeometry,e.isGeometryVisible=n.ShowGeometry,e.displayName=n.Name,e.position=[n.X,n.Y],e},e.prototype.ConvertsType=function(e){return"FunctionNode"==e.NodeType},e}();t.DynBaseNodeViewConverter=n});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynBooleanNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName="Boolean",i.typeName="Boolean",i},t.prototype.ConvertsType=function(e){return"BooleanInputNode"==e.NodeType},t}(n.DynBaseNodeViewConverter);t.DynBooleanNodeViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynCodeBlockNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName=r.Name,i.typeName="Code Block",i},t.prototype.ConvertsType=function(e){return"CodeBlockNode"==e.NodeType},t}(n.DynBaseNodeViewConverter);t.DynCodeBlockNodeViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynDoubleInputSliderViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r),o="";switch(n.ConcreteType){case"CoreNodeModels.Input.DoubleSlider, CoreNodeModels":o="Number Slider";break;case"CoreNodeModels.Input.IntegerSlider, CoreNodeModels":o="Integer Slider";break;default:o="Number"}return i.creationName=r.Name,i.typeName=o,i},t.prototype.ConvertsType=function(e){return"FloatRangeInputNode"==e.NodeType||"FloatInputNode"==e.NodeType||"IntegerRangeInputNode"==e.NodeType||"IntegerInputNode"==e.NodeType||"NumberInputNode"==e.NodeType},t}(n.DynBaseNodeViewConverter);t.DynDoubleInputSliderViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynDSVarArgFunctionViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i},t.prototype.ConvertsType=function(e){return e.ConcreteType.indexOf("Dynamo.Graph.Nodes.ZeroTouch.DSVarArgFunction")!==-1},t}(n.DynBaseNodeViewConverter);t.DynDSVarArgFunctionViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynExtensionNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName=n.ConcreteType,i.typeName=n.ConcreteType,i},t.prototype.ConvertsType=function(e){return"ExtensionNode"==e.NodeType},t}(n.DynBaseNodeViewConverter);t.DynExtensionNodeViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynFormulaNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName="Formula",i.typeName="Formula",i},t.prototype.ConvertsType=function(e){return"FormulaNode"==e.NodeType},t}(n.DynBaseNodeViewConverter);t.DynFormulaNodeViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynPythonNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName="Python Script",i.typeName="Python Script",i},t.prototype.ConvertsType=function(e){return"PythonScriptNode"==e.NodeType},t}(n.DynBaseNodeViewConverter);t.DynPythonNodeViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynStringInputNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){
function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName="String",i.typeName="String",i},t.prototype.ConvertsType=function(e){return"StringInputNode"==e.NodeType},t}(n.DynBaseNodeViewConverter);t.DynStringInputNodeViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynUnitConverterNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName="Convert Between Units",i.typeName="Convert Between Units",i},t.prototype.ConvertsType=function(e){return"ConvertBetweenUnitsNode"==e.NodeType},t}(n.DynBaseNodeViewConverter);t.DynUnitConverterNodeViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynWatch3DNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName="Watch 3D",i.typeName="Watch 3D",i},t.prototype.ConvertsType=function(e){return"ExtensionNode"===e.NodeType&&"Watch3DNodeModels.Watch3D, Watch3DNodeModels"===e.ConcreteType},t}(n.DynBaseNodeViewConverter);t.DynWatch3DNodeViewConverter=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynWatchNodeViewConverter",["require","exports","./DynBaseNodeViewConverter"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Convert=function(t,n,r){var i=e.prototype.Convert.call(this,t,n,r);return i.creationName="Watch",i.typeName="Watch",i},t.prototype.ConvertsType=function(e){return"ExtensionNode"===e.NodeType&&"CoreNodeModels.Watch, CoreNodeModels"===e.ConcreteType},t}(n.DynBaseNodeViewConverter);t.DynWatchNodeViewConverter=r}),n("DynWorkspaceConversion",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.textBlockHeight=0,this.initialHeight=0,this.initialTop=0,this.fontSize=0,this.background="",this.models=[],this.text="",this.groupId="",this.left=0,this.top=0,this.width=0,this.height=0}return e.prototype.ConvertAnnotations=function(e){return e?(this.textBlockHeight=e.TextblockHeight,this.initialHeight=e.InitialHeight,this.text=e.Title,this.background=e.Background,this.initialTop=e.InitialTop,this.left=e.Left,this.top=e.Top,this.width=e.Width,this.height=e.Height,this.groupId=e.Id,this.models=e.Nodes,this.fontSize=e.FontSize,this):null},e}();t.AVPGroup=n;var r=function(){function e(){}return e.prototype.ConvertNotes=function(e){return e?(this.x=e.X,this.y=e.Y,this.noteText=e.Text,this.nodeId=e.Id,this):null},e}();t.AVPNotes=r;var i=function(){function e(){this.startPortIndex=-1,this.endPortIndex=-1,this.isProxy=!1,this.isConnectionFromOutPort=!1,this.proxyPosition=[0,0],this.hidden=!1,this.isFrozen=!1}return e.prototype.ConvertConnector=function(e,t){if(!e||!t||0==t.length)return null;this._id=e.Id,this.idAttribute=this._id;for(var n=0,r=t;n<r.length;n++){var i=r[n],o=_.indexOf(_.pluck(i.Outputs,"Id"),e.Start);o>-1&&(this.startNodeId=i.Id,this.startPortIndex=o),o=_.indexOf(_.pluck(i.Inputs,"Id"),e.End),o>-1&&(this.endNodeId=i.Id,this.endPortIndex=o)}return this},e}();t.AVPConnector=i;var o=function(){function e(){this.upZ=-17,this.upY=24,this.upX=50,this.lookZ=12,this.lookY=-13,this.lookX=-58,this.eyeZ=0,this.eyeY=1,this.eyeX=0,this.name="Background Preview"}return e.prototype.ConvertCamera=function(e){if(e){this.name=e.Name;var t=[Number(e.EyeX),Number(e.EyeY),Number(e.EyeZ)],n=[Number(e.LookX),Number(e.LookY),Number(e.LookZ)],r=[Number(e.UpX),Number(e.UpY),Number(e.UpZ)];if(this.verifyVector(n)&&this.verifyVector(r))return t&&3==t.length&&(this.eyeX=t[0],this.eyeY=t[1],this.eyeZ=t[2]),n&&3==n.length&&(this.lookX=n[0],this.lookY=n[1],this.lookZ=n[2]),r&&3==r.length&&(this.upX=r[0],this.upY=r[1],this.upZ=r[2]),this}},e.prototype.verifyVector=function(e){var t=Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2);return t>0},e}();t.AVPCamera=o}),n("DynWorkspaceConverter",["require","exports","underscore","DynBaseNodeConverter","DynBooleanNodeConverter","DynCodeBlockNodeConverter","DynDoubleInputSliderConverter","DynDSVarArgFunctionConverter","DynExtensionNodeConverter","DynFormulaNodeConverter","DynPythonNodeConverter","DynStringInputNodeConverter","DynUnitConverterNodeConverter","DynWatch3DNodeConverter","DynWatchNodeConverter","DynBaseNodeViewConverter","DynBooleanNodeViewConverter","DynCodeBlockNodeViewConverter","DynDoubleInputSliderViewConverter","DynDSVarArgFunctionViewConverter","DynExtensionNodeViewConverter","DynFormulaNodeViewConverter","DynPythonNodeViewConverter","DynStringInputNodeViewConverter","DynUnitConverterNodeViewConverter","DynWatch3DNodeViewConverter","DynWatchNodeViewConverter","DynWorkspaceConversion"],function(e,t,n,r,i,o,s,a,l,c,u,p,h,d,f,m,g,y,v,b,S,w,x,C,_,k,A,D){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var T=function(){function e(){this.nodeConverters=[new i.DynBooleanNodeConverter,new o.DynCodeBlockNodeConverter,new s.DynDoubleInputSliderConverter,new a.DynDSVarArgFunctionConverter,new r.DynBaseNodeConverter,new f.DynWatchNodeConverter,new d.DynWatch3DNodeConverter,new c.DynFormulaNodeConverter,new u.DynPythonNodeConverter,new p.DynStringInputNodeConverter,new h.DynUnitConverterNodeConverter,new l.DynExtensionNodeConverter],this.nodeViewConverters=[new g.DynBooleanNodeViewConverter,new y.DynCodeBlockNodeViewConverter,new v.DynDoubleInputSliderViewConverter,new b.DynDSVarArgFunctionViewConverter,new m.DynBaseNodeViewConverter,new A.DynWatchNodeViewConverter,new k.DynWatch3DNodeViewConverter,new w.DynFormulaNodeViewConverter,new x.DynPythonNodeViewConverter,new C.DynStringInputNodeViewConverter,new _.DynUnitConverterNodeViewConverter,new S.DynExtensionNodeViewConverter]}return e.prototype.CreateAVPWorkspace=function(e){var t={},n=this.CreateNodes(e.Nodes,e.View.NodeViews,e.Inputs),r=this.CreateConnections(e.Connectors,e.Nodes),i=this.CreateNotes(e.View.Notes),o=this.CreateGroups(e.View.Annotations),s=this.CreateCamera(e.View.Camera);return t.guid=e.Uuid,t.name=e.Name,t.nodes=n,t.connections=r,t.notes=i,t.groups=o,t.camera=s,t.offset=[e.View.X,e.View.Y],t.zoom=e.View.Zoom,t},e.prototype.CreateNodes=function(e,t,r){var i=this;return e.map(function(e){var o=n.find(t,function(t){return t.Id==e.Id});if(null==o)throw new Error("could not find a matching nodeview for"+e.Id+" "+e.ConcreteType);var s=n.find(i.nodeConverters,function(t){return 1==t.ConvertsType(e)}),a=n.find(i.nodeViewConverters,function(t){return 1==t.ConvertsType(e)});if(null==a)throw new Error("could not find a matching nodeviewConverter for"+e.Id+" "+e.ConcreteType);var l=s.Convert(e,r),c=a.Convert(l,e,o);return c})},e.prototype.CreateConnections=function(e,t){if(!e||0==e.length||!t||0==t.length)return[];for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],s=(new D.AVPConnector).ConvertConnector(o,t);s.startPortIndex!=-1?s.endPortIndex!=-1?n.push(s):console.log("cannot find node for this connector",o.End):console.log("cannot find node for this connector",o.Start)}return n},e.prototype.CreateNotes=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push((new D.AVPNotes).ConvertNotes(i))}return t},e.prototype.CreateGroups=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push((new D.AVPGroup).ConvertAnnotations(i))}return t},e.prototype.CreateCamera=function(e){return(new D.AVPCamera).ConvertCamera(e)},e}();t.DynWorkspaceConverter=T}),n("AVPWorkspaceConverter",["require","exports","underscore","DynBaseNodeConverter","DynBooleanNodeConverter","DynCodeBlockNodeConverter","DynDoubleInputSliderConverter","DynDSVarArgFunctionConverter","DynExtensionNodeConverter","DynFormulaNodeConverter","DynPythonNodeConverter","DynStringInputNodeConverter","DynUnitConverterNodeConverter","DynWatch3DNodeConverter","DynWatchNodeConverter","staticHelpers"],function(e,t,n,r,i,o,s,a,l,c,u,p,h,d,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g;!function(e){var t=function(){function e(){this.Left=0,this.Top=0,this.Width=0,this.Height=0,this.FontSize=36,this.InitialTop=0,this.InitialHeight=0,this.TextblockHeight=0,this.Background="#FFC1D676",this.Id="",this.Title=""}return e.prototype.ConvertAnnotations=function(e){return e?(this.TextblockHeight=e.textBlockHeight,this.InitialHeight=e.initialHeight,this.Title=e.text,this.Background=e.background,this.InitialTop=e.initialTop,this.Left=e.left,this.Top=e.top,this.Width=e.width,this.Height=e.height,this.Id=m.removeDashes(e.groupId),this.Nodes=e.models.map(function(e){return m.removeDashes(e)}),this.FontSize=e.fontSize,this):null},e}();e.DynGroup=t;var n=function(){function e(){this.X=0,this.Y=0}return e.prototype.ConvertNotes=function(e){return e?(this.X=e.x,this.Y=e.y,this.Text=e.noteText,this.Id=m.removeDashes(e.nodeId),this):null},e}();e.DynNote=n;var r=function(){function e(){this.Start=null,this.End=null,this.Id=null}return e.prototype.ConvertConnector=function(e,t){if(!e||!t||0==t.length)return null;this.Id=m.removeDashes(e.id||e._id);for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.Id==m.removeDashes(e.startNodeId)){var o=i.Outputs[e.startPortIndex];o&&(this.Start=m.removeDashes(o.Id));var s=t.filter(function(t){return t.Id==m.removeDashes(e.endNodeId)})[0],a=s.Inputs[e.endPortIndex];a&&s&&(this.End=m.removeDashes(a.Id))}}return this},e}();e.DYNConnector=r;var i=function(){function e(){this.Name="Background Preview",this.EyeX=-17,this.EyeY=24,this.EyeZ=50,this.LookX=12,this.LookY=-13,this.LookZ=58,this.UpX=0,this.UpY=1,this.UpZ=0}return e.prototype.ConvertCamera=function(e){var t;return t=e instanceof Array?e[0]:e,this.Name=t.name,this.EyeX=t.eyeX,this.EyeY=t.eyeY,this.EyeZ=t.eyeZ,this.UpX=t.upX,this.UpY=t.upY,this.UpZ=t.upZ,this.LookX=t.lookX,this.LookY=t.lookY,this.LookZ=t.lookZ,this},e}();e.DYNCamera=i}(g||(g={}));var y=function(){function e(){this.nodeConverters=[new r.DynBaseNodeConverter,new i.DynBooleanNodeConverter,new o.DynCodeBlockNodeConverter,new s.DynDoubleInputSliderConverter,new a.DynDSVarArgFunctionConverter,new f.DynWatchNodeConverter,new c.DynFormulaNodeConverter,new u.DynPythonNodeConverter,new p.DynStringInputNodeConverter,new h.DynUnitConverterNodeConverter,new d.DynWatch3DNodeConverter,new l.DynExtensionNodeConverter]}return e.prototype.CreateDYNWorkspace=function(e){var t={};t.View={};var n=this.CreateNodes(e.nodes),r=this.CreateInputs(e.nodes,n.map(function(e){return e.nodeModel})),i=this.CreateConnections(e.connections,n.map(function(e){return e.nodeModel})),o=this.CreateNotes(e.notes),s=this.CreateGroups(e.groups),a=this.CreateCamera(e.camera);return t.Uuid=e.guid,t.Name=e.name,t.Nodes=n.map(function(e){return e.nodeModel}),t.View.NodeViews=n.map(function(e){return e.nodeView}),t.Connectors=i,t.View.Notes=o,t.View.Annotations=s,t.View.Camera=a,t.IsCustomNode=!1,t.View.X=e.offset[0],t.View.Y=e.offset[1],t.View.Zoom=e.zoom,t.Description="",t.Dependencies=[],t.Bindings=[],t.ElementResolver={ResolutionMap:{}},t.Inputs=r,t},e.prototype.CreateInputs=function(e,t){var n=this,r=e.map(function(e,n){return{avpNode:e,dynNode:t[n]}}),i=r.filter(function(e){return 0==e.avpNode.extra.lock}).map(function(e){return{partialData:{Id:m.removeDashes(e.avpNode.id),Name:e.avpNode.displayName,Description:e.avpNode.description},nodePair:e}}),o=i.map(function(e){return n.addInputDataForType(e.nodePair.avpNode,e.nodePair.dynNode,e.partialData)});return o},e.prototype.addInputDataForType=function(e,t,n){var i=e.type.concreteType;switch(i){case"CoreNodeModels.Input.DoubleSlider, CoreNodeModels":case"Number Slider":case"CoreNodeModels.Input.IntegerSlider, CoreNodeModels":case"Integer Slider":case"CoreNodeModels.Input.DoubleInput, CoreNodeModels":case"Number":n.Type=r.DynInputType[r.DynInputType.number],n.Value=t.InputValue.toString(),n.MinimumValue=t.MinimumValue,n.MaximumValue=t.MaximumValue,n.StepValue=t.StepValue,n.NumberType=t.NumberType;break;case"CoreNodeModels.Input.BoolSelector, CoreNodeModels":case"Boolean":n.Type=r.DynInputType[r.DynInputType.boolean],n.Value=t.InputValue.toString();break;case"CoreNodeModels.Input.StringInput, CoreNodeModels":case"String":n.Type=r.DynInputType[r.DynInputType.string],n.Value=t.InputValue;break;case"CoreNodeModels.Input.DateTime, CoreNodeModels":n.Type=r.DynInputType[r.DynInputType.date],n.Value=t.InputValue;break;case"CoreNodeModels.Input.Directory, CoreNodeModels":case"CoreNodeModels.Input.Filename, CoreNodeModels":n.Type=r.DynInputType[r.DynInputType.string],n.Value=t.InputValue}return n},e.prototype.CreateNodes=function(e){var t=this;return e.map(function(e){var r=n.find(t.nodeConverters,function(t){return 1==t.ConvertsAVPType(e)});return r.ConvertToDyn(e)})},e.prototype.CreateConnections=function(e,t){if(!e||0==e.length||!t||0==t.length)return[];for(var n=[],r=0,i=e.models?e.models:e;r<i.length;r++){var o=i[r],s=(new g.DYNConnector).ConvertConnector(o,t);if(null==s.Start)throw console.log("cannot find node for this connector port",o.startNodeId),Error("cannot find node for this connector port"+o.startNodeId);if(null==s.End)throw console.log("cannot find node for this connector port",o.endNodeId),Error("cannot find node for this connector port"+o.endNodeId);n.push(s)}return n},e.prototype.CreateNotes=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push((new g.DynNote).ConvertNotes(i))}return t},e.prototype.CreateGroups=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push((new g.DynGroup).ConvertAnnotations(i))}return t},e.prototype.CreateCamera=function(e){return 0===Object.keys(e).length&&(e={name:"Background Preview",eyeX:-17,eyeY:24,eyeZ:50,upX:0,upY:1,upZ:0,lookX:12,lookY:-13,lookZ:-58}),(new g.DYNCamera).ConvertCamera(e)},e}();t.AVPWorkspaceConverter=y});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynamoApplication",["require","exports","DynWorkspaceConverter","AVPWorkspaceConverter"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=this;this.model=e,this.view=t,void 0!=this.view&&(this.el=this.view.$el),this.model.on("computation-completed:event",function(e){n.onComputationResponseReceived(e)}),this.model.on("geometry-data-received:event",function(e){n.onGeometryResponseReceived(e)}),this.model.workspaces.on("requestRun",function(e){n.onRunRequested(e)}),this.model.on("change:currentWorkspace",function(){n.getCurrentWorkspace()&&(n.model.getCurrentWorkspace().on("change:nodes",function(e){n.onNodeCollectionChanged(e)}),n.model.getCurrentWorkspace().on("change:connections",function(e){n.onConnectorChanged(e)}),n.model.getCurrentWorkspace().nodes.on("request-set-node-prop",function(e){n.onNodePropertyChange(e)}))}),this.model.on("nodeSelected",function(e){n.onNodeSelectionChanged(e)}),this.model.on("nodeVisible",function(e){n.onNodeVisibilityChanged(e)}),this.model.on("nodeRemoved",function(e){n.onNodeRemoved(e)}),this.model.on("changeWorkspace",function(e){n.onCurrentWorkspaceChanged(e)}),this.model.on("setCamera",function(e){n.onCameraChangedRequest(e)}),this.model.on("geometryUpdated",function(e){n.onNodeGeometryUpdated(e.data,e.visible,e.selected)}),this.model.runner.on("timeout-fail:event",function(e){n.onConnection({source:"inactivityTimeout",data:e})}),this.model.on("run-timeout:event",function(e){n.onConnection({source:"connectionClosed",data:e})}),this.model.runner.on("connection-lost:event",function(e){n.onConnection({source:"connectionLost",data:e})}),this.model.runner.on("connection-failed:event",function(e){n.onConnection({source:"connectionFailed",data:e})}),this.model.runner.on("tresend-wss-data:event",function(e){n.onConnection({source:"connectionRestored",data:e})}),this.model.runner.on("overloaded:event",function(e){n.onConnection({source:"connectionOverloaded",data:e})}),this.model.on("fileDependency-loaded:event",function(e){n.onFile({source:"fileDependencyLoaded",data:e})}),this.model.on("upload-response:event",function(e){n.onFile({source:"fileUploadFailed",data:e})}),this.model.on("show-errors",function(e){n.onErrorWarning({source:"error",data:e})}),this.model.on("requestGeometry",function(){n.getCurrentWorkspace()&&n.getCurrentWorkspace().GetCurrentGeometry()}),$(this).on("openWorkspaceByIDRequest",function(e,t){n.openWorkspaceByID(t.id)}),$(this).on("newWorkspaceRequest",function(e){n.clearWorkspaces(),n.newWorkspace()}),$(this).on("openDynWorkspaceRequest",function(e,t){n.clearWorkspaces(),n.openWorkspace(t.content)}),$(this).on("saveCurrentWorkspaceRequest",function(e){n.model.saveUploader.downloadFile({fileContent:n.saveWorkspace(n.getCurrentWorkspace())})})}return e.prototype.onNodeCollectionChanged=function(e){this.onNodeCollectionChangedEvent=jQuery.Event("onNodePropertyChangeEvent",{detail:e}),$(this).trigger("raiseEvent",this.onNodeCollectionChangedEvent)},e.prototype.onConnectorChanged=function(e){this.onConnectorChangedEvent=new jQuery.Event("onConnectorChangedEvent",{detail:e}),$(this).trigger("raiseEvent",this.onConnectorChangedEvent)},e.prototype.onRunRequested=function(e){this.onRunRequestedEvent=new jQuery.Event("onRunRequestedEvent",{detail:e}),$(this).trigger("raiseEvent",this.onRunRequestedEvent)},e.prototype.onComputationResponseReceived=function(e){this.onComputationResponseReceivedEvent=new jQuery.Event("onComputationResponseReceivedEvent",{detail:e}),$(this).trigger("raiseEvent",this.onComputationResponseReceivedEvent)},e.prototype.onGeometryResponseReceived=function(e){this.onGeometryResponseReceivedEvent=new jQuery.Event("onGeometryResponseReceivedEvent",{detail:e}),$(this).trigger("raiseEvent",this.onGeometryResponseReceivedEvent)},e.prototype.onNodePropertyChange=function(e){this.onNodePropertyChangeEvent=new jQuery.Event("onNodePropertyChangeEvent",{detail:e}),$(this).trigger("raiseEvent",this.onNodePropertyChangeEvent)},e.prototype.onNodeSelectionChanged=function(e){this.onNodeSelectionChangeEvent=new jQuery.Event("onNodeSelectionChangeEvent",{detail:e}),$(this).trigger("raiseEvent",this.onNodeSelectionChangeEvent)},e.prototype.onNodeVisibilityChanged=function(e){this.onNodeVisibilityChangeEvent=new jQuery.Event("onNodeVisibilityChangeEvent",{detail:e}),$(this).trigger("raiseEvent",this.onNodeVisibilityChangeEvent)},e.prototype.onNodeGeometryUpdated=function(e,t,n){this.OnNodeGeometryUpdatedEvent=new jQuery.Event("OnNodeGeometryUpdatedEvent",{detail:{data:e,visible:t,selected:n}}),$(this).trigger("raiseEvent",this.OnNodeGeometryUpdatedEvent)},e.prototype.onNodeRemoved=function(e){this.onNodeRemovedChangeEvent=new jQuery.Event("onNodeRemovedChangeEvent",{detail:e}),$(this).trigger("raiseEvent",this.onNodeRemovedChangeEvent)},e.prototype.onCurrentWorkspaceChanged=function(e){this.onCurrentWorkspaceChangeEvent=new jQuery.Event("onCurrentWorkspaceChangeEvent",{detail:e}),$(this).trigger("raiseEvent",this.onCurrentWorkspaceChangeEvent)},e.prototype.onCameraChangedRequest=function(e){this.onCameraChangeRequestEvent=new jQuery.Event("onCameraChangeRequestEvent",{detail:e}),$(this).trigger("raiseEvent",this.onCameraChangeRequestEvent)},e.prototype.onConnection=function(e){this.onConnectionEvent=new jQuery.Event("onConnectionEvent",{detail:e}),$(this).trigger("raiseEvent",this.onConnectionEvent)},e.prototype.onFile=function(e){this.onFileEvent=new jQuery.Event("onFileEvent",{detail:e}),$(this).trigger("raiseEvent",this.onFileEvent)},e.prototype.onErrorWarning=function(e){this.onErrorWarningEvent=new jQuery.Event("onErrorWarningEvent",{detail:e}),$(this).trigger("raiseEvent",this.onErrorWarningEvent)},e.prototype.clearWorkspaces=function(){return this.model.clearWorkspaces()},e.prototype.getCurrentWorkspace=function(){return this.model.getCurrentWorkspace()},e.prototype.openWorkspace=function(e,t){var r,i=this;try{r=(new n.DynWorkspaceConverter).CreateAVPWorkspace(e)}catch(e){return console.log("Error",e),void this.model.trigger("show-errors","Failed to open the file. Check the console for errors")}this.model.registerCallbackOnLibraryLoaded(function(){i.model.openDynWorkspace(r,t)})},e.prototype.saveWorkspace=function(e){var t;try{t=(new r.AVPWorkspaceConverter).CreateDYNWorkspace(e)}catch(e){return console.log("Error",e),void this.model.trigger("show-errors","Failed to save the file. Check the console for errors")}return t},e.prototype.openWorkspaceByID=function(e,t,n){var r=this;this.model.registerCallbackOnLibraryLoaded(function(){r.model.openWorkspace(e,t)})},e.prototype.newWorkspace=function(e,t){var n=this;this.model.registerCallbackOnLibraryLoaded(function(){n.model.newWorkspace(e)})},e.prototype.updateNodeGeometry=function(e){this.onGeometryResponseReceived(e)},e.prototype.dispose=function(){this.view instanceof Backbone.View&&this.view.trigger("dispose")},e}();t.DynamoApplication=i;var s=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),t.prototype.ready=function(){this.model.trigger("requestGeometry")},t}(i);t.DynamoEditorApplication=s;var a=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),t.prototype.ready=function(){this.model.trigger("requestGeometry")},t}(i);t.DynamoCustomizerApplication=a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("PanelSubView",["require","exports","backbone","underscore","AVP","DynamoApplication"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#subview-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){var t=this;return this.domId="#panelsubview-"+e.index.toString(),this.app=e.panelArgs.app,this.parent=e.parent,jQuery("<div/>",{id:this.domId.toString().slice(1),Class:"panelsubview"}).appendTo(this.parent.domId),this.listenTo(this,"layoutUpdate",function(){$(t.currentComponent).trigger("layoutUpdate")}),this},t.prototype.render=function(){$(this.domId).html(this.template()),this.$el=$(this.domId);var e=this;return this.$("#component-options").on("change",function(){var t,n,r=$(this).val();switch(r){case"GraphEditor":n=i.componentTypes.GraphEditor;break;case"Customizer":n=i.componentTypes.Customizer;break;case"GeometryView":n=i.componentTypes.GeometryViewer}t=e.createComponent(n),e.currentComponent=t,e.parent.trigger("addListeners",t),t.ready&&t.ready()}),this.listenTo(this,"update",function(e,t){var n=["newWorkspaceRequest","openWorkspaceByIDRequest","changeWorkspace","openDynWorkspaceRequest","saveCurrentWorkspaceRequest"];if(n.indexOf(e)>-1){if("#panelsubview-0"===this.domId){var r=this.parent.panelSubViews,i=r.filter(function(e){return e.currentComponent instanceof s.DynamoApplication==!0});if(!("undefined"!=typeof i&&i.length>0))throw new Error("A DynamoApplication component must be present to trigger the requested event");$(i[0].currentComponent).trigger(e,t)}}else $(this.currentComponent).trigger(e,t)}.bind(this)),this},t.prototype.createComponent=function(e){this.clearPanel();var t;return t=i.createComponent({type:e,selector:this.domId+" #subview-container",model:this.app}),this.listenTo(t.model.workspaces,"add",this.parent.addWorkspaceTab.bind(this.parent)),t},t.prototype.clearPanel=function(){this.currentComponent.dispose&&this.currentComponent.dispose(),this.$("#subview-container").empty()},t.prototype.switchTo=function(e){return this.$("#component-options").val(e).change(),this},t.prototype.disableSwitcher=function(){return this.$("#component-options")[0].setAttribute("disabled","true"),this},t.prototype.adjustToWidth=function(e){var t=this;return this.$el.css("width",e),setTimeout(function(){t.trigger("layoutUpdate")},200),this},t.prototype.adjustToHeight=function(e){var t=this;return this.$el.css("height",e),setTimeout(function(){t.trigger("layoutUpdate")},200),this},t.prototype.position=function(e){var t=this;switch(e){case"left":this.$el.css({left:"0px",flex:"0 0 auto"});break;case"right":this.$el.css({right:"0px",flex:"1 1 auto"});break;case"top":this.$el.css("top","0px");break;case"bottom":this.$el.css("bottom","0px")}return setTimeout(function(){t.trigger("layoutUpdate")},200),this},t}(n.View);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("PanelView",["require","exports","backbone","underscore","WorkspaceTabView","PanelSubView","AVP"],function(e,t,n,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#panel-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){return this.domId="#panel-"+e.index.toString(),this.panelViewOptions=e,this.workspaceTabViews={},this.panelSubViewIndex=0,this.panelSubViews=new Array,this.listenTo(this,"publishEvent",function(e,t){for(var n=0;n<this.panelSubViews.length;n++)this.panelSubViews[n].trigger("update",e,t)}),this},t.prototype.render=function(){return $(this.domId).html(this.template()),this.$el=$(this.domId),this.$workspace_tabs=this.$("#workspace-tabs"),this},t.prototype.updateResizablePanels=function(){var e=this;this.panelSubViews.length>1&&this.panelSubViews[this.panelSubViewIndex-2].$el.resizable({handles:"e",minWidth:150,resize:function(){setTimeout(function(){e.panelSubViews.forEach(function(e){e.trigger("layoutUpdate")})},50)}})},t.prototype.adjustToWidth=function(e){return this.$el.css("width",e),this},t.prototype.addWorkspaceTab=function(e){if(void 0==this.workspaceTabViews[e.get("_id")]){var t=new i({model:e});this.workspaceTabViews[e.get("_id")]=t,t.render(),this.$workspace_tabs.empty(),this.$workspace_tabs.prepend(t.$el)}},t.prototype.createPanelSubView=function(){var e=new s({parent:this,index:this.panelSubViewIndex,panelArgs:this.panelViewOptions});return this.panelSubViews.push(e),this.panelSubViewIndex++,e},t.prototype.insertComponent=function(e,t){var n=this,r=this.createPanelSubView();r.render();var i=a.createComponent({type:e,selector:r.domId+" #subview-container",model:t}),o="component";return o="number"==typeof e?a.componentTypes[e]:e,r.$el.find("#component-options").append($("<option>",{selected:!0,disabled:!0,hidden:!0,text:o})),r.currentComponent=i,this.trigger("addListeners",i),i.ready&&i.ready(),i.model&&i.model.workspaces&&r.listenTo(i.model.workspaces,"add",function(e){n.addWorkspaceTab(e)}),this.updateResizablePanels(),r},t}(n.View);t.PanelView=l});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ControllerView",["require","exports","backbone","underscore","PanelView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#components-template").html())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentsContainer",{get:function(){return".components-container"},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{}},t.prototype.initialize=function(e,n){var r=e.attributes.params;if(this.model=e.attributes.model,this.parentDivId=r.selector,this.layout=r.defaultLayout||t.Layout.Single,this.panelViews=new Array,this.panelIndex=0,this.graphModel=r.model,!this.graphModel)throw new Error("To build a controller you must pass in a GraphModel");this.listenTo(this.model,"publishEvent",function(e,t){for(var n=0;n<this.panelViews.length;n++)this.panelViews[n].trigger("publishEvent",e,t)}),this.listenTo(this.model,"publishExternalEvent",function(e,t){var n=new jQuery.Event(e,{detail:t});$(this).trigger(n)})},t.prototype.render=function(){return $(this.parentDivId).html(this.template()),this.$el=$(this.parentDivId),this.renderLayout(),this},t.prototype.renderLayout=function(e){switch(this.layout=this.layout||e,this.layout){case t.Layout.DoubleVertical:this.renderDoubleVertical();break;case t.Layout.DoubleHorizontal:throw new Error("not implemented");case t.Layout.Single:this.renderSingle();break;default:this.renderSingle()}return this},t.prototype.addListeners=function(e){this.listenTo(e,"addListeners",function(e){this.model.trigger("addListeners",e)})},t.prototype.renderSingle=function(){jQuery("<div/>",{id:"panel-"+this.panelIndex.toString(),Class:"panel"}).appendTo(this.componentsContainer);var e=new i.PanelView({index:this.panelIndex,app:this.graphModel});return this.addListeners(e),e.render(),this.panelViews.push(e),this.panelIndex++,e},t.prototype.renderDoubleVertical=function(){this.renderSingle().adjustToWidth("90%"),this.renderSingle().adjustToWidth("10%")},t.prototype.insertComponent=function(e){var t=this.panelViews[0],n=t.insertComponent(e,this.graphModel);return n},t.Layout={Single:1,DoubleVertical:2,DoubleHorizontal:3},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ConnectionView",["require","exports","backbone","underscore"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#connection-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.model=e.model,this.workspaceView=e.attributes.workspaceView;var t=this.model.startNode,n=this.model.endNode;t&&(this.listenTo(t,"change:ignoreDefaults",this.render),
this.listenTo(t,"connection",this.redrawIfNeed),this.listenTo(t,"disconnection",this.redrawIfNeed),this.listenTo(t,"change:selected",this.updateColor),this.listenTo(n,"change:selected",this.updateColor)),this.startId=null,this.endId=null,this.curveInit=!1},t.prototype.redrawIfNeed=function(e,t){t||this.updateColor()},t.prototype.delegateEvents=function(){n.View.prototype.delegateEvents.apply(this,arguments),this.model.isProxy||(this.startId=this.model.get("startNodeId"),this.endId=this.model.get("endNodeId"),this.model.endNode&&this.listenTo(this.model.endNode,"change:position",this.render),this.model.startNode&&this.listenTo(this.model.startNode,"change:position",this.render)),this.listenTo(this.model,"change:hidden",this.render),this.listenTo(this.model,"change:proxyPosition",this.render),this.listenTo(this.model,"change:isFrozen",this.render)},t.prototype.render=function(){return this.makeCurveOnce(),this.updateControlPoints().updateHidden().updateColor().updateFreezeView().updateProxyView()},t.prototype.updateFreezeView=function(){var e="frozen-connector";return this.model.get("isFrozen")?this.el.classList.add(e):this.model.get("isFrozen")||this.el.classList.remove(e),this},t.prototype.updateProxyView=function(){var e="proxy-connector";return this.model.isProxy&&this.el.classList.add(e),this},t.prototype.updateControlPoints=function(){return this.el.setAttribute("d",this.template(this.getControlPoints())),this},t.prototype.updateHidden=function(){return this.model.get("hidden")?this.el.setAttribute("class","connection collapsed"):this.el.setAttribute("class","connection"),this},t.prototype.updateColor=function(){var e=this.model.startNode,t=this.model.endNode;return e?(1==e.selected||1==t.selected?(this.el.classList.add("connector-selected"),this.el.parentElement&&this.el.parentElement.appendChild(this.el)):this.el.classList.remove("connector-selected"),this):this},t.prototype.makeCurveOnce=function(){if(!this.curveInit){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("class","connection"),this.el=e,this.$el=$(e),this.curveInit=!0}return this.el},t.prototype.getControlPoints=function(){var e,t,n=this.workspaceView.nodeViews,i=this.model.get("startNodeId"),o=this.model.get("endNodeId"),s=this.model.get("startPortIndex"),a=this.model.get("endPortIndex");this.model.isProxy?r.isEmpty(n)?(e=this.model.get("proxyPosition"),t=this.model.get("proxyPosition")):this.model.isConnectionFromOutPort?(e=n[i].getPortPosition(s,!0),t=this.model.get("proxyPosition")):(e=this.model.get("proxyPosition"),t=n[o].getPortPosition(a,!1)):(e=n[i].getPortPosition(s,!0),t=n[o].getPortPosition(a,!1));var l=.65*Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(e[1]-t[1],2));return{aX:e[0],aY:e[1],bX:e[0]+l,bY:e[1],dX:t[0],dY:t[1],cX:t[0]-l,cY:t[1]}},t.prototype.dispose=function(){return this.undelegateEvents(),n.View.prototype.remove.call(this),this},t}(n.View);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("MarqueeView",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e){this.model=e.model,this.workspace=e.attributes.workspace,this.workspaceView=e.attributes.workspaceView,this.listenTo(this.model,"change",this.render),this.curveInit=!1},t.prototype.render=function(){return this.makeElementOnce(),this.updateCorners().updateHidden().updateColor().updateStroke()},t.prototype.updateHidden=function(){return this.model.get("hidden")?this.el.setAttribute("class","marquee collapsed"):this.el.setAttribute("class","marquee"),this},t.prototype.updateColor=function(){return this},t.prototype.makeElementOnce=function(){if(!this.curveInit){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("class","marquee"),this.updateCorners(),this.updateStroke(),this.el=e,this.$el=$(e),this.curveInit=!0}return this.el},t.prototype.updateCorners=function(){return this.el.setAttribute("x",this.model.get("x")),this.el.setAttribute("y",this.model.get("y")),this.el.setAttribute("width",this.model.get("width")),this.el.setAttribute("height",this.model.get("height")),this},t.prototype.updateStroke=function(){var e=1/this.workspaceView.zoom;return this.el.setAttribute("stroke-dasharray",4*e+","+4*e),this.el.setAttribute("stroke",2*e),this},t}(n.View);return r}),!function(e,t,r,i){"use strict";function o(e,t,n){return setTimeout(u(e,n),t)}function s(e,t,n){return!!Array.isArray(e)&&(a(e,n[t],n),!0)}function a(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function l(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=e.console&&(e.console.warn||e.console.log);return o&&o.call(e.console,i,r),t.apply(this,arguments)}}function c(e,t,n){var r,i=t.prototype;r=e.prototype=Object.create(i),r.constructor=e,r._super=i,n&&he(r,n)}function u(e,t){return function(){return e.apply(t,arguments)}}function p(e,t){return typeof e==me?e.apply(t?t[0]||i:i,t):e}function h(e,t){return e===i?t:e}function d(e,t,n){a(y(t),function(t){e.addEventListener(t,n,!1)})}function f(e,t,n){a(y(t),function(t){e.removeEventListener(t,n,!1)})}function m(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function y(e){return e.trim().split(/\s+/g)}function v(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function b(e){return Array.prototype.slice.call(e,0)}function S(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];v(i,s)<0&&r.push(e[o]),i[o]=s,o++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function w(e,t){for(var n,r,o=t[0].toUpperCase()+t.slice(1),s=0;s<de.length;){if(n=de[s],r=n?n+o:t,r in e)return r;s++}return i}function x(){return we++}function C(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function _(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){p(e.options.enable,[e])&&n.handler(t)},this.init()}function k(e){var t,n=e.options.inputClass;return new(t=n?n:_e?B:ke?z:Ce?W:G)(e,A)}function A(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&Ee&&r-i===0,s=t&(Oe|Ie)&&r-i===0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,D(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function D(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=M(t)),i>1&&!n.firstMultiple?n.firstMultiple=M(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,l=t.center=E(r);t.timeStamp=ve(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=V(a,l),t.distance=I(a,l),T(n,t),t.offsetDirection=O(t.deltaX,t.deltaY);var c=N(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=ye(c.x)>ye(c.y)?c.x:c.y,t.scale=s?R(s.pointers,r):1,t.rotation=s?L(s.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,P(n,t);var u=e.element;m(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function T(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==Ee&&o.eventType!==Oe||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function P(e,t){var n,r,o,s,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(t.eventType!=Ie&&(l>Me||a.velocity===i)){var c=t.deltaX-a.deltaX,u=t.deltaY-a.deltaY,p=N(l,c,u);r=p.x,o=p.y,n=ye(p.x)>ye(p.y)?p.x:p.y,s=O(c,u),e.lastInterval=t}else n=a.velocity,r=a.velocityX,o=a.velocityY,s=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=s}function M(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ge(e.pointers[n].clientX),clientY:ge(e.pointers[n].clientY)},n++;return{timeStamp:ve(),pointers:t,center:E(t),deltaX:e.deltaX,deltaY:e.deltaY}}function E(e){var t=e.length;if(1===t)return{x:ge(e[0].clientX),y:ge(e[0].clientY)};for(var n=0,r=0,i=0;t>i;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:ge(n/t),y:ge(r/t)}}function N(e,t,n){return{x:t/e||0,y:n/e||0}}function O(e,t){return e===t?Ve:ye(e)>=ye(t)?0>e?Le:Re:0>t?Ge:Be}function I(e,t,n){n||(n=Ue);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function V(e,t,n){n||(n=Ue);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function L(e,t){return V(t[1],t[0],We)+V(e[1],e[0],We)}function R(e,t){return I(t[0],t[1],We)/I(e[0],e[1],We)}function G(){this.evEl=qe,this.evWin=$e,this.pressed=!1,_.apply(this,arguments)}function B(){this.evEl=Je,this.evWin=Ke,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function F(){this.evTarget=Ze,this.evWin=et,this.started=!1,_.apply(this,arguments)}function j(e,t){var n=b(e.touches),r=b(e.changedTouches);return t&(Oe|Ie)&&(n=S(n.concat(r),"identifier",!0)),[n,r]}function z(){this.evTarget=nt,this.targetIds={},_.apply(this,arguments)}function U(e,t){var n=b(e.touches),r=this.targetIds;if(t&(Ee|Ne)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=b(e.changedTouches),a=[],l=this.target;if(o=n.filter(function(e){return m(e.target,l)}),t===Ee)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),t&(Oe|Ie)&&delete r[s[i].identifier],i++;return a.length?[S(o.concat(a),"identifier",!0),a]:void 0}function W(){_.apply(this,arguments);var e=u(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new G(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function H(e,t){e&Ee?(this.primaryTouch=t.changedPointers[0].identifier,q.call(this,t)):e&(Oe|Ie)&&q.call(this,t)}function q(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)};setTimeout(i,rt)}}function $(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),s=Math.abs(n-i.y);if(it>=o&&it>=s)return!0}return!1}function X(e,t){this.manager=e,this.set(t)}function Y(e){if(g(e,ut))return ut;var t=g(e,pt),n=g(e,ht);return t&&n?ut:t||n?t?pt:ht:g(e,ct)?ct:lt}function J(){if(!st)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){t[r]=!n||e.CSS.supports("touch-action",r)}),t}function K(e){this.options=he({},this.defaults,e||{}),this.id=x(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=ft,this.simultaneous={},this.requireFail=[]}function Q(e){return e&bt?"cancel":e&yt?"end":e&gt?"move":e&mt?"start":""}function Z(e){return e==Be?"down":e==Ge?"up":e==Le?"left":e==Re?"right":""}function ee(e,t){var n=t.manager;return n?n.get(e):e}function te(){K.apply(this,arguments)}function ne(){te.apply(this,arguments),this.pX=null,this.pY=null}function re(){te.apply(this,arguments)}function ie(){K.apply(this,arguments),this._timer=null,this._input=null}function oe(){te.apply(this,arguments)}function se(){te.apply(this,arguments)}function ae(){K.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function le(e,t){return t=t||{},t.recognizers=h(t.recognizers,le.defaults.preset),new ce(e,t)}function ce(e,t){this.options=he({},le.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=k(this),this.touchAction=new X(this,this.options.touchAction),ue(this,!0),a(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ue(e,t){var n=e.element;if(n.style){var r;a(e.options.cssProps,function(i,o){r=w(n.style,o),t?(e.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function pe(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var he,de=["","webkit","Moz","MS","ms","o"],fe=t.createElement("div"),me="function",ge=Math.round,ye=Math.abs,ve=Date.now;he="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}:Object.assign;var be=l(function(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;)(!n||n&&e[r[o]]===i)&&(e[r[o]]=t[r[o]]),o++;return e},"extend","Use `assign`."),Se=l(function(e,t){return be(e,t,!0)},"merge","Use `assign`."),we=1,xe=/mobile|tablet|ip(ad|hone|od)|android/i,Ce="ontouchstart"in e,_e=w(e,"PointerEvent")!==i,ke=Ce&&xe.test(navigator.userAgent),Ae="touch",De="pen",Te="mouse",Pe="kinect",Me=25,Ee=1,Ne=2,Oe=4,Ie=8,Ve=1,Le=2,Re=4,Ge=8,Be=16,Fe=Le|Re,je=Ge|Be,ze=Fe|je,Ue=["x","y"],We=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(C(this.element),this.evWin,this.domHandler)}};var He={mousedown:Ee,mousemove:Ne,mouseup:Oe},qe="mousedown",$e="mousemove mouseup";c(G,_,{handler:function(e){var t=He[e.type];t&Ee&&0===e.button&&(this.pressed=!0),t&Ne&&1!==e.which&&(t=Oe),this.pressed&&(t&Oe&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Te,srcEvent:e}))}});var Xe={pointerdown:Ee,pointermove:Ne,pointerup:Oe,pointercancel:Ie,pointerout:Ie},Ye={2:Ae,3:De,4:Te,5:Pe},Je="pointerdown",Ke="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Je="MSPointerDown",Ke="MSPointerMove MSPointerUp MSPointerCancel"),c(B,_,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=Xe[r],o=Ye[e.pointerType]||e.pointerType,s=o==Ae,a=v(t,e.pointerId,"pointerId");i&Ee&&(0===e.button||s)?0>a&&(t.push(e),a=t.length-1):i&(Oe|Ie)&&(n=!0),0>a||(t[a]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var Qe={touchstart:Ee,touchmove:Ne,touchend:Oe,touchcancel:Ie},Ze="touchstart",et="touchstart touchmove touchend touchcancel";c(F,_,{handler:function(e){var t=Qe[e.type];if(t===Ee&&(this.started=!0),this.started){var n=j.call(this,e,t);t&(Oe|Ie)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ae,srcEvent:e})}}});var tt={touchstart:Ee,touchmove:Ne,touchend:Oe,touchcancel:Ie},nt="touchstart touchmove touchend touchcancel";c(z,_,{handler:function(e){var t=tt[e.type],n=U.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ae,srcEvent:e})}});var rt=2500,it=25;c(W,_,{handler:function(e,t,n){var r=n.pointerType==Ae,i=n.pointerType==Te;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)H.call(this,t,n);else if(i&&$.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ot=w(fe.style,"touchAction"),st=ot!==i,at="compute",lt="auto",ct="manipulation",ut="none",pt="pan-x",ht="pan-y",dt=J();X.prototype={set:function(e){e==at&&(e=this.compute()),st&&this.manager.element.style&&dt[e]&&(this.manager.element.style[ot]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return a(this.manager.recognizers,function(t){p(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Y(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,i=g(r,ut)&&!dt[ut],o=g(r,ht)&&!dt[ht],s=g(r,pt)&&!dt[pt];if(i){var a=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(a&&l&&c)return}return s&&o?void 0:i||o&&n&Fe||s&&n&je?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ft=1,mt=2,gt=4,yt=8,vt=yt,bt=16,St=32;K.prototype={defaults:{},set:function(e){return he(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(s(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ee(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return s(e,"dropRecognizeWith",this)?this:(e=ee(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(s(e,"requireFailure",this))return this;var t=this.requireFail;return e=ee(e,this),-1===v(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(s(e,"dropRequireFailure",this))return this;e=ee(e,this);var t=v(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;yt>r&&t(n.options.event+Q(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=yt&&t(n.options.event+Q(r))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=St)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(St|ft)))return!1;e++}return!0},recognize:function(e){var t=he({},e);return p(this.options.enable,[this,t])?(this.state&(vt|bt|St)&&(this.state=ft),this.state=this.process(t),void(this.state&(mt|gt|yt|bt)&&this.tryEmit(t))):(this.reset(),void(this.state=St))},process:function(e){},getTouchAction:function(){},reset:function(){}},c(te,K,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(mt|gt),i=this.attrTest(e);return r&&(n&Ie||!i)?t|bt:r||i?n&Oe?t|yt:t&mt?t|gt:mt:St}}),c(ne,te,{defaults:{event:"pan",threshold:10,pointers:1,direction:ze},getTouchAction:function(){var e=this.options.direction,t=[];return e&Fe&&t.push(ht),e&je&&t.push(pt),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,s=e.deltaY;return i&t.direction||(t.direction&Fe?(i=0===o?Ve:0>o?Le:Re,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===s?Ve:0>s?Ge:Be,n=s!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return te.prototype.attrTest.call(this,e)&&(this.state&mt||!(this.state&mt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Z(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),c(re,te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&mt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),c(ie,K,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[lt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(Oe|Ie)&&!i)this.reset();else if(e.eventType&Ee)this.reset(),this._timer=o(function(){this.state=vt,this.tryEmit()},t.time,this);else if(e.eventType&Oe)return vt;return St},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===vt&&(e&&e.eventType&Oe?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ve(),this.manager.emit(this.options.event,this._input)))}}),c(oe,te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&mt)}}),c(se,te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Fe|je,pointers:1},getTouchAction:function(){return ne.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Fe|je)?t=e.overallVelocity:n&Fe?t=e.overallVelocityX:n&je&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ye(t)>this.options.velocity&&e.eventType&Oe},emit:function(e){var t=Z(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),c(ae,K,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ct]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&Ee&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=Oe)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||I(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&s?this.count+=1:this.count=1,this._input=e;var l=this.count%t.taps;if(0===l)return this.hasRequireFailures()?(this._timer=o(function(){this.state=vt,this.tryEmit()},t.interval,this),mt):vt}return St},failTimeout:function(){return this._timer=o(function(){this.state=St},this.options.interval,this),St},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==vt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),le.VERSION="2.0.7",le.defaults={domEvents:!1,touchAction:at,enable:!0,inputTarget:null,inputClass:null,preset:[[oe,{enable:!1}],[re,{enable:!1},["rotate"]],[se,{direction:Fe}],[ne,{direction:Fe},["swipe"]],[ae],[ae,{event:"doubletap",taps:2},["tap"]],[ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var wt=1,xt=2;ce.prototype={set:function(e){return he(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?xt:wt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&vt)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],t.stopped===xt||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(mt|gt|yt)&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof K)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(s(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(s(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=v(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==i&&t!==i){var n=this.handlers;return a(y(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==i){var n=this.handlers;return a(y(e),function(e){t?n[e]&&n[e].splice(v(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&pe(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&ue(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},he(le,{INPUT_START:Ee,INPUT_MOVE:Ne,INPUT_END:Oe,INPUT_CANCEL:Ie,STATE_POSSIBLE:ft,STATE_BEGAN:mt,STATE_CHANGED:gt,STATE_ENDED:yt,STATE_RECOGNIZED:vt,STATE_CANCELLED:bt,STATE_FAILED:St,DIRECTION_NONE:Ve,DIRECTION_LEFT:Le,DIRECTION_RIGHT:Re,DIRECTION_UP:Ge,DIRECTION_DOWN:Be,DIRECTION_HORIZONTAL:Fe,DIRECTION_VERTICAL:je,DIRECTION_ALL:ze,Manager:ce,Input:_,TouchAction:X,TouchInput:z,MouseInput:G,PointerEventInput:B,TouchMouseInput:W,SingleTouchInput:F,Recognizer:K,AttrRecognizer:te,Tap:ae,Pan:ne,Swipe:se,Pinch:re,Rotate:oe,Press:ie,on:d,off:f,each:a,merge:Se,extend:be,assign:he,inherit:c,bindFn:u,prefixed:w});var Ct="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};Ct.Hammer=le,"function"==typeof n&&n.amd?n("Hammer",[],function(){return le}):"undefined"!=typeof module&&module.exports?module.exports=le:e[r]=le}(window,document,"Hammer"),function(e){"function"==typeof n&&n.amd?n("../data",["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])}})}),function(e){"function"==typeof n&&n.amd?n("../safe-blur",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}}),function(e){"function"==typeof n&&n.amd?n("../scroll-parent",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return(!r||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)}}),function(e){"function"==typeof n&&n.amd?n("draggable",["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),r=e(t.target);r.closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top);
},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,o=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0],void(r&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(i=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-s.grid[1]:i+s.grid[1]:i,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,o=this;o.positionAbs=r.positionAbs,o.helperProportions=r.helperProportions,o.offset.click=r.offset.click,o._intersectsWith(o.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(i=!1),i})),i?(o.isOver||(o.isOver=1,r._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=r.offset.click.top,o.offset.click.left=r.offset.click.left,o.offset.parent.left-=r.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=r.offset.parent.top-o.offset.parent.top,r._trigger("toSortable",t),r.dropped=o.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,o.fromOutside=r),o.currentItem&&(o._mouseDrag(t),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),o=r.options;i.css("cursor")&&(o._cursor=i.css("cursor")),i.css("cursor",o.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),o=r.options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,o=!1,s=r.scrollParentNotHidden[0],a=r.document[0];s!==a&&"HTML"!==s.tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+s.offsetHeight-t.pageY<i.scrollSensitivity?s.scrollTop=o=s.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(s.scrollTop=o=s.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+s.offsetWidth-t.pageX<i.scrollSensitivity?s.scrollLeft=o=s.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(s.scrollLeft=o=s.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(a).scrollTop()<i.scrollSensitivity?o=e(a).scrollTop(e(a).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<i.scrollSensitivity&&(o=e(a).scrollTop(e(a).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(a).scrollLeft()<i.scrollSensitivity?o=e(a).scrollLeft(e(a).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<i.scrollSensitivity&&(o=e(a).scrollLeft(e(a).scrollLeft()+i.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,o,s,a,l,c,u,p,h,d,f=r.options,m=f.snapTolerance,g=n.offset.left,y=g+r.helperProportions.width,v=n.offset.top,b=v+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--)l=r.snapElements[h].left-r.margins.left,c=l+r.snapElements[h].width,u=r.snapElements[h].top-r.margins.top,p=u+r.snapElements[h].height,y<l-m||g>c+m||b<u-m||v>p+m||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)?(r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(u-b)<=m,o=Math.abs(p-v)<=m,s=Math.abs(l-y)<=m,a=Math.abs(c-g)<=m,i&&(n.position.top=r._convertPositionTo("relative",{top:u-r.helperProportions.height,left:0}).top),o&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top),s&&(n.position.left=r._convertPositionTo("relative",{top:0,left:l-r.helperProportions.width}).left),a&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left)),d=i||o||s||a,"outer"!==f.snapMode&&(i=Math.abs(u-v)<=m,o=Math.abs(p-b)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-y)<=m,i&&(n.position.top=r._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top),s&&(n.position.left=r._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||o||s||a||d)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||o||s||a||d)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,o=r.options,s=e.makeArray(e(o.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});s.length&&(i=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),o=r.options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}}),e.ui.draggable});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("WorkspaceView",["require","exports","backbone","underscore","ConnectionView","MarqueeView","NodeFactory","Hammer","LogHelper","LogMessage","draggable"],function(e,t,n,r,i,s,a,l,c,u){"use strict";var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"div"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"workspace_container row"},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"touchstart .workspace_back":"deselectAll","mousedown .workspace_back":"deselectAllAndStartWorkspaceDrag","dblclick .workspace_back":"renderCodeBlockNode",mousewheel:"mousewheelMove",DOMMouseScroll:"mousewheelMove",MozMousePixelScroll:"mousewheelMove"}},t.prototype.initialize=function(e){this.nodeViews={},this.connectionViews={},this.$workspace=$("<div/>",{class:"workspace"}),this.$workspace_back=$("<div/>",{class:"workspace_back"}),this.$workspace_canvas=$('<svg class="workspace_canvas" xmlns="http://www.w3.org/2000/svg" version="1.1" />'),this.$el.append(this.$workspace),this.$workspace.append(this.$workspace_back),this.$workspace.append(this.$workspace_canvas),this.hammerSetupDone=!1,this.panStart=[0,0],this.$runnerStatus=void 0,this.proxyConnectionView=null,this.runnerTemplate=r.template($("#workspace-runner-status-template").html()),this.scrollStart=null,this.isMouseWheel=!1,this.clientX=null,this.clientY=null,this.zoomFactor=1,this.panMode=!1,this.cachedZoom=this.model.zoom,this.zoom=this.model.zoom,this.offset=this.model.offset,this.listenTo(this.model,"change:connections",function(){this.cleanup().renderConnections()}),this.listenTo(this.model,"change:isRunning",this.renderRunnerStatus),this.listenTo(this.model,"change:nodes renderNodes",function(){this.model.renderAllowed&&this.cleanup().renderNodes()}),this.listenTo(this.model,"request-render",function(){this.cleanup().renderNodes().updateConnections()}),this.listenTo(this.model,"startProxyDrag",this.startProxyDrag),this.listenTo(this.model,"endProxyDrag",this.endProxyDrag),this.renderProxyConnection(),this.renderMarquee(),this.renderRunnerStatus(),this.listenTo(this,"togglePanMode",function(){this.togglePanMode(!this.panMode)}.bind(this)),this.listenTo(this,"change:zoom",this.updateZoom),this.listenTo(this,"change:offset",this.updateOffset)},t.prototype.render=function(){return this.cleanup().renderNodes().renderConnections().renderRunnerStatus().updateZoom().updateOffset().setupHammer()},t.prototype.inWorkspaceCoordinates=function(e,t){var n=this.$workspace.offset();return[1/this.zoom*(e-n.left),1/this.zoom*(t-n.top)]},t.prototype.setupHammer=function(){function e(){return"ontouchstart"in window||"onmsgesturechange"in window}if(this.hammerSetupDone)return this;if(this.hammerSetupDone=!0,e()){this.$workspace_back.on("touchmove",function(e){e.preventDefault()});var t=new l.Manager(this.$workspace_back.get(0));t.add(new l.Pan({direction:l.DIRECTION_ALL,pointers:1})),this.listenTo(t,"panstart",function(e){this.model.marquee.setStartCorner(this.inWorkspaceCoordinates(e.center.x,e.center.y))}),this.listenTo(t,"pan",function(e){this.model.marquee.set("hidden",!1),this.model.marquee.setEndCorner(this.inWorkspaceCoordinates(e.center.x,e.center.y)),this.doMarqueeSelect()}),this.listenTo(t,"panend",function(){this.model.marquee.set("hidden",!0)});var n=new l.Manager(this.el);return n.add(new l.Pan({direction:l.DIRECTION_ALL,pointers:3})),this.listenTo(n,"panstart",function(){this.scrollStart=[this.$el.scrollLeft(),this.$el.scrollTop()]}),this.listenTo(n,"pan",function(e){this.offset=[this.scrollStart[0]-e.deltaX,this.scrollStart[1]-e.deltaY],this.trigger("change:offset")}),this.listenTo(n,"panend",function(){this.zoomDisabled=!0,setTimeout(function(){this.zoomDisabled=!1}.bind(this),200)}),n.add(new l.Pinch({threshold:.1})),this.listenTo(n,"pinchstart",function(e){this.zoomStart=this.zoom}),this.listenTo(n,"pinch",function(e){if(!this.zoomDisabled){var t=this.zoomStart*e.scale;t<.25&&(t=.25),t>1.2&&(t=1.2),this.zoom=t,this.trigger("change:zoom")}}),n.add(new l.Tap({taps:2})),this.listenTo(n,"tap",function(e){this.showNodeSearch({clientX:e.center.x,clientY:e.center.y})}),this}},t.prototype.mousewheelMove=function(e){if(this.isMouseWheel=!0,!this.$el[0])return!1;var t=this.$el[0].getBoundingClientRect();this.clientX=e.clientX-t.left,this.clientY=e.clientY-t.top;var n=0;return void 0!==e.originalEvent.wheelDelta?n=e.originalEvent.wheelDelta:void 0!==e.originalEvent.detail&&(n=-e.originalEvent.detail),n>0?this.zoom<2&&(this.zoom=Math.min(2,this.zoom+5e-4*n)):this.zoom>.25&&(this.zoom=Math.max(.25,this.zoom+5e-4*n)),this.trigger("change:zoom"),this.isMouseWheel=!1,!1},t.prototype.startWorkspaceDrag=function(e){this.deselectAll(),e.ctrlKey||2===e.which||this.panMode?this.startWorkspacePan(e):this.startMarqueeDrag(e)},t.prototype.togglePanMode=function(e){this.panMode=e,this.$workspace[0].style.cursor="default",this.panMode&&(this.$workspace[0].style.cursor="move")},t.prototype.startWorkspacePan=function(e){e.preventDefault(),this.panStart=[e.pageX,e.pageY],this.scrollStart=[this.$el.scrollLeft(),this.$el.scrollTop()],this.$workspace.bind("mousemove",$.proxy(this.workspacePan,this)),this.$workspace.bind("mouseup",$.proxy(this.endWorkspacePan,this))},t.prototype.endWorkspacePan=function(e){this.offset=[this.$el.scrollLeft(),this.$el.scrollTop()],this.trigger("change:offset"),this.$workspace.unbind("mousemove",this.workspacePan),this.$workspace.unbind("mouseup",this.endWorkspacePan)},t.prototype.workspacePan=function(e){this.$el.scrollLeft(this.scrollStart[0]+this.panStart[0]-e.pageX),this.$el.scrollTop(this.scrollStart[1]+this.panStart[1]-e.pageY)},t.prototype.startMarqueeDrag=function(e){this.model.marquee.setStartCorner(this.inWorkspaceCoordinates(e.pageX,e.pageY)),this.$workspace.bind("mousemove",$.proxy(this.marqueeDrag,this)),this.$workspace.bind("mouseup",$.proxy(this.endMarqueeDrag,this))},t.prototype.endMarqueeDrag=function(e){this.model.marquee.set("hidden",!0),this.$workspace.unbind("mousemove",this.marqueeDrag),this.$workspace.unbind("mouseup",this.endMarqueeDrag)},t.prototype.marqueeDrag=function(e){this.model.marquee.set("hidden",!1),this.model.marquee.setEndCorner(this.inWorkspaceCoordinates(e.pageX,e.pageY)),this.doMarqueeSelect()},t.prototype.doMarqueeSelect=function(){var e=this.model.marquee.get("x"),t=this.model.marquee.get("y"),n=this.model.marquee.get("x")+this.model.marquee.get("width"),r=this.model.marquee.get("y")+this.model.marquee.get("height"),i=function(i){var s=o.nodeViews[i],a=s.$el.width(),l=s.$el.height(),c=s.model.get("position"),u=c[0],p=c[1],h=[[u,p],[u+a,p],[u+a,p+l],[u,p+l]],d=!1;h.forEach(function(i){var o=i[0],s=i[1];o<n&&o>e&&s>t&&s<r&&(d=!0)}),d&&!s.model.get("selected")?s.model.set("selected",!0):!d&&s.model.get("selected")&&s.model.set("selected",!1)},o=this;for(var s in this.nodeViews)i(s)},t.prototype.getCenter=function(){var e=this.$el.width(),t=this.$el.height(),n=this.$el.scrollTop(),r=this.$el.scrollLeft(),i=1/this.zoom;return[i*(r+e/2),i*(n+t/2)]},t.prototype.updateZoom=function(){if(this.zoom<0)return this.zoom=.25,this;this.zoomFactor=this.zoom/(this.cachedZoom?this.cachedZoom:this.zoom),this.cachedZoom=this.zoom,this.$workspace.css("transform","scale("+this.zoom+")"),this.$workspace.css("transform-origin","0 0");var e;return e=this.isMouseWheel?this.getNewScroll(this.clientX,this.clientY):this.getNewScroll(),this.offset=e,this.trigger("change:offset"),this},t.prototype.zoomIn=function(){var e=this.zoom+.2;this.zoom=e>2?2:e,this.trigger("change:zoom")},t.prototype.zoomOut=function(){var e=this.zoom-.2;this.zoom=e<.2?.2:e,this.trigger("change:zoom")},t.prototype.getNewScroll=function(e,t){var n,r=this.zoomFactor,i=this.offset[0],o=this.offset[1];if(e&&t)n=[e,t];else{var s=this.$el.width(),a=this.$el.height();n=[s/2,a/2]}var l=r*(i+n[0])-n[0],c=r*(o+n[1])-n[1];return l<0&&(l=0),c<0&&(c=0),[l,c]},t.prototype.boundingBox=function(){var e=[];for(var t in this.nodeViews)e.push(this.nodeViews[t]);return e.reduce(function(e,t){var n=t.model.get("position"),r=t.$el.width(),i=t.$el.height();return[Math.min(n[0],e[0]),Math.max(n[0]+r,e[1]),Math.min(n[1],e[2]),Math.max(n[1]+i,e[3])]},[Number.MAX_VALUE,0,Number.MAX_VALUE,0])},t.prototype.zoomAll=function(){var e=this.boundingBox(),t=20*(1/this.zoom);e=[e[0]-t,e[1]+t,e[2]-t,e[3]+t];var n=this.$el.width(),r=this.$el.height(),i=e[1]-e[0],o=e[3]-e[2],s=n/i,a=r/o,l=Math.min(s,a);l=Math.min(1,l),this.zoom=l,this.trigger("change:zoom"),this.offset=[l*e[0],l*e[2]],this.trigger("change:offset")},t.prototype.updateOffset=function(){return this.$el.scrollLeft(this.offset[0]),this.$el.scrollTop(this.offset[1]),this},t.prototype.renderRunnerStatus=function(){return this},t.prototype.renderCodeBlockNode=function(e){if(!e.ctrlKey&&!this.panMode){var t=1/this.zoom;if(!this.$el[0])return;var n=this.$el[0].getBoundingClientRect(),r=t*(e.clientX-n.left+this.$el.scrollLeft()),i=t*(e.clientY-n.top+this.$el.scrollTop());this.model.addNodeByNameAndPosition("Code Block",[r,i])}},t.prototype.showNodeSearch=function(e){if(!e.ctrlKey){var t=1/this.zoom,n=t*(this.$el.width()/2+this.$el.scrollLeft()+200),r=t*(this.$el.height()/2+this.$el.scrollTop());this.model.trigger("showingSearch",{show:!0,newNodePosition:[n,r]})}},t.prototype.startProxyDrag=function(e){this.$workspace.bind("mousemove",$.proxy(this.proxyDrag,this)),this.$workspace.bind("touchmove",$.proxy(this.proxyTouchDrag,this)),this.$workspace.bind("touchend",$.proxy(this.endProxyDrag,this)),this.$workspace.bind("mousedown",$.proxy(this.endProxyDrag,this)),this.$workspace.addClass("proxy-drag")},t.prototype.endProxyDrag=function(e){this.$workspace.unbind("touchmove",this.proxyTouchDrag),this.$workspace.unbind("mousemove",this.proxyDrag),this.$workspace.unbind("touchend",this.endProxyDrag),this.$workspace.unbind("mousedown",this.endProxyDrag),this.$workspace.removeClass("proxy-drag"),this.model.endProxyConnection()},t.prototype.proxyTouchDrag=function(e){this.model.proxyConnection.set("proxyPosition",this.inWorkspaceCoordinates(e.originalEvent.touches[0].pageX,e.originalEvent.touches[0].pageY)),e.preventDefault()},t.prototype.proxyDrag=function(e){this.model.isPortSnapping||this.model.proxyConnection.set("proxyPosition",this.inWorkspaceCoordinates(e.pageX,e.pageY))},t.prototype.renderProxyConnection=function(){this.proxyConnectionView=new i({model:this.model.proxyConnection,attributes:{workspaceView:this,workspace:this.model,isProxy:!0}}),this.proxyConnectionView.render(),this.$workspace_canvas.prepend(this.proxyConnectionView.el)},t.prototype.renderMarquee=function(){var e=new s({model:this.model.marquee,attributes:{workspaceView:this,workspace:this.model}});e.render(),this.$workspace_canvas.prepend(e.el)},t.prototype.cleanup=function(){return this.clearDeadNodes(),this.clearDeadConnections(),this},t.prototype.renderNodes=function(){var e=this;return this.model.get("nodes").each(function(t){var n=c.getCurrentTimeStamp(),r=e.nodeViews[t.get("_id")];if(void 0===r){var i=a.map.Base.nodeViewConstructor,o=a.searchForNodeTypeInMap(t.typeName);null!=o&&(i=o.nodeViewConstructor),r=new i({model:t,workspaceView:e,workspace:e.model}),e.watchNodeViewEvents(r),e.nodeViews[r.model.get("_id")]=r,e.$workspace.children(".workspace_back").before(r.$el),e.makeDraggable(r),r.render(),r.delegateEvents(),e.$workspace_canvas.append(r.portGroup);var s=c.getCurrentTimeStamp();c.nodeLogger(new u({name:t.name,cId:t.id,message:"renderNodes",startTime:n,endTime:s,elapsedTime:(s-n).toString()}),e.model.logger)}}),this.model.needsFit&&(this.zoomAll(),this.model.needsFit=!1),this},t.prototype.watchNodeViewEvents=function(e){this.listenTo(e,"update-connections",function(){this.cleanup().updateConnections()}),this.listenTo(e,"request-open-definition",function(e){e&&this.model.trigger("openWorkspace",e)})},t.prototype.makeDraggable=function(e){e.initPos=[],e.$el.draggable({drag:function(t,n){var r=1/this.zoom;n.position.left=r*n.position.left,n.position.top=r*n.position.top;var i=[n.position.left-e.initPos[0],n.position.top-e.initPos[1]];this.model.get("nodes").moveSelected(i)}.bind(this),start:function(){e.model.get("selected")||this.model.get("nodes").deselectAll(),e.model.set("selected",!0),this.model.get("nodes").startDragging();var t=(1/this.zoom,e.model.get("position"));e.initPos=[t[0],t[1]]}.bind(this),stop:function(){var e=this.model.get("nodes").getDraggingResult();this.model.multipleSetNodeProperty(e)}.bind(this)}),e.setCodeblockDraggableOption&&e.setCodeblockDraggableOption(),e.$el.css("position","absolute")},t.prototype.keydownHandler=function(e){if((!e.originalEvent.srcElement||"INPUT"!==e.originalEvent.srcElement.nodeName&&"CODE"!==e.originalEvent.srcElement.nodeName)&&"INPUT"!==e.target.nodeName&&"CODE"!==e.target.nodeName)switch(e.keyCode){case 8:return this.model.removeSelected(),e.preventDefault();case 46:return this.model.removeSelected(),e.preventDefault();case 61:case 187:return this.zoomIn(),e.preventDefault();case 189:case 173:return this.zoomOut(),e.preventDefault();case 67:return this.model.copy(),e.preventDefault();case 86:return this.model.paste(),e.preventDefault();case 88:return this.model.copy(),this.model.removeSelected(),e.preventDefault();case 89:return this.model.redo(),e.preventDefault();case 90:return this.model.undo(),e.preventDefault();case 27:return this.endProxyDrag(e),this.togglePanMode(!1),e.preventDefault()}},t.prototype.renderConnections=function(){var e=this;return this.model.get("connections").forEach(function(t){var n=e.connectionViews[t.get("_id")];void 0===e.connectionViews[t.get("_id")]&&(n=new i({model:t,attributes:{workspaceView:e}})),n.delegateEvents(),n.el.parentNode||(n.render(),e.$workspace_canvas.prepend(n.el),e.connectionViews[n.model.get("_id")]=n)}),this},t.prototype.updateConnections=function(){this.model.get("connections").forEach(function(e){this.connectionViews[e.get("_id")].render()}.bind(this))},t.prototype.clearDeadNodes=function(){for(var e in this.nodeViews)void 0===this.model.SearchForNodeById(e)&&(this.nodeViews[e].remove(),this.stopListening(this.nodeViews[e]),delete this.nodeViews[e])},t.prototype.clearDeadConnections=function(){for(var e in this.connectionViews)void 0===this.model.get("connections").get(e)&&(this.connectionViews[e].remove(),delete this.connectionViews[e])},t.prototype.onRemove=function(){},t.prototype.deselectAll=function(){this.model.get("nodes").deselectAll()},t.prototype.deselectAllAndStartWorkspaceDrag=function(e){this.deselectAll(),this.panMode?this.startWorkspaceDrag(e):3==e.button||3==e.which?this.showNodeSearch(e):this.startWorkspaceDrag(e)},t.prototype.dispose=function(){for(var e in this.nodeViews)this.nodeViews[e].dispose();for(var t in this.connectionViews)this.connectionViews[t].remove(),delete this.connectionViews[t];this.proxyConnectionView.dispose(),this.undelegateEvents(),n.View.prototype.remove.call(this)},t}(n.View);return p});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Search",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{}},t.prototype.initialize=function(e,t){},t}(n.Model);return r}),n("imagesMap",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.images={"Code Block":"dist/images/nodes/Small/Dynamo.Nodes.CodeBlockNodeModel.Small.png",Input:"dist/images/nodes/Small/Input.Small.png",Output:"dist/images/nodes/Small/Dynamo.Nodes.Output.Small.png","Date Time":"dist/images/nodes/Small/CoreNodeModels.Input.DateTime.Small.png",String:"dist/images/nodes/Small/String.Small.png",Number:"dist/images/nodes/Small/CoreNodeModels.Input.DoubleInput.Small.png","Number Slider":"dist/images/nodes/Small/CoreNodeModels.Input.DoubleSlider.Small.png","File Path":"dist/images/nodes/Small/FilePath.Small.png",Boolean:"dist/images/nodes/Small/CoreNodeModels.Input.BoolSelector.Small.png","Integer Slider":"dist/images/nodes/Small/CoreNodeModels.Input.IntegerSlider.Small.png","Convert Between Units":"dist/images/nodes/Small/CoreNodeModels.DynamoConvert.Small.png","Number From Feet and Inches":"dist/images/nodes/Small/UnitsUI.LengthFromString.Small.png","Unit Types":"dist/images/nodes/Small/UnitsUI.UnitTypes.Small.png","Color Range":"dist/images/nodes/Small/CoreNodeModels.ColorRange.Small.png","DSCore.Color.Red":"dist/images/nodes/Small/DSCore.Color.Red.Small.png","DSCore.Color.Green":"dist/images/nodes/Small/DSCore.Color.Green.Small.png","DSCore.Color.Blue":"dist/images/nodes/Small/DSCore.Color.Blue.Small.png","DSCore.Color.Alpha":"dist/images/nodes/Small/DSCore.Color.Alpha.Small.png","DSCore.Color.ByARGB@int,int,int,int":"dist/images/nodes/Small/DSCore.Color.ByARGB.Small.png","DSCore.Color.Brightness@DSCore.Color":"dist/images/nodes/Small/DSCore.Color.Brightness.Small.png","DSCore.Color.Saturation@DSCore.Color":"dist/images/nodes/Small/DSCore.Color.Saturation.Small.png","DSCore.Color.Hue@DSCore.Color":"dist/images/nodes/Small/DSCore.Color.Hue.Small.png","DSCore.Color.Components@DSCore.Color":"dist/images/nodes/Small/DSCore.Color.Components.Small.png","DSCore.Color.Add@DSCore.Color,DSCore.Color":"dist/images/nodes/Small/DSCore.Color.Add.Small.png","DSCore.Color.Multiply@DSCore.Color,double":"dist/images/nodes/Small/DSCore.Color.Multiply.Small.png","DSCore.Color.Divide@DSCore.Color,double":"dist/images/nodes/Small/DSCore.Color.Divide.Small.png","List.Create":"dist/images/nodes/Small/CoreNodeModels.CreateList.Small.png",Range:"dist/images/nodes/Small/CoreNodeModels.Range.Small.png",Sequence:"dist/images/nodes/Small/CoreNodeModels.Sequence.Small.png","List.Map":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.Map.Small.png","List.Combine":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.Combine.Small.png","List.LaceShortest":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.LaceShortest.Small.png","List.LaceLongest":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.LaceLongest.Small.png","List.CartesianProduct":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.CartesianProduct.Small.png","List.Reduce":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.Reduce.Small.png","List.Scan":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.ScanList.Small.png","List.Filter":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.Filter.Small.png",ReplaceByCondition:"dist/images/nodes/Small/CoreNodeModels.HigherOrder.Replace.Small.png","DSCore.List.Empty":"dist/images/nodes/Small/DSCore.List.Empty.Small.png","DSCore.List.UniqueItems@var[]..[]":"dist/images/nodes/Small/DSCore.List.UniqueItems.Small.png","DSCore.List.ContainsItem@var[]..[],var":"dist/images/nodes/Small/DSCore.List.ContainsItem.Small.png","DSCore.List.Reverse@var[]..[]":"dist/images/nodes/Small/DSCore.List.Reverse.Small.png","DSCore.List.Sublists@var[]..[],var[]..[],int":"dist/images/nodes/Small/DSCore.List.Sublists.Small.png",
"DSCore.List.Sort@var[]":"dist/images/nodes/Small/DSCore.List.Sort.Small.png","DSCore.List.MinimumItem@var[]":"dist/images/nodes/Small/DSCore.List.MinimumItem.Small.png","DSCore.List.MaximumItem@var[]":"dist/images/nodes/Small/DSCore.List.MaximumItem.Small.png","DSCore.List.FilterByBoolMask@var[]..[],var[]..[]":"dist/images/nodes/Small/DSCore.List.FilterByBoolMask.Small.png","DSCore.List.Deconstruct@var[]..[]":"dist/images/nodes/Small/DSCore.List.Deconstruct.Small.png","DSCore.List.SortByKey@var[]..[],var[]..[]":"dist/images/nodes/Small/DSCore.List.SortByKey.Small.png","DSCore.List.GroupByKey@var[]..[],var[]..[]":"dist/images/nodes/Small/DSCore.List.GroupByKey.Small.png","DSCore.List.AddItemToFront@var[]..[],var[]..[]":"dist/images/nodes/Small/DSCore.List.AddItemToFront.Small.png","DSCore.List.AddItemToEnd@var[]..[],var[]..[]":"dist/images/nodes/Small/DSCore.List.AddItemToEnd.Small.png","DSCore.List.TakeItems@var[]..[],int":"dist/images/nodes/Small/DSCore.List.TakeItems.Small.png","DSCore.List.DropItems@var[]..[],int":"dist/images/nodes/Small/DSCore.List.DropItems.Small.png","DSCore.List.ShiftIndices@var[]..[],int":"dist/images/nodes/Small/DSCore.List.ShiftIndices.Small.png","DSCore.List.GetItemAtIndex@var[]..[],int":"dist/images/nodes/Small/DSCore.List.GetItemAtIndex.Small.png","DSCore.List.ReplaceItemAtIndex@var[]..[],int,var[]..[]":"dist/images/nodes/Small/DSCore.List.ReplaceItemAtIndex.Small.png","DSCore.List.Slice@var[]..[],int,int,int":"dist/images/nodes/Small/DSCore.List.Slice.Small.png","DSCore.List.RemoveItemAtIndex@var[]..[],int[]":"dist/images/nodes/Small/DSCore.List.RemoveItemAtIndex.Small.png","DSCore.List.DropEveryNthItem@var[]..[],int,int":"dist/images/nodes/Small/DSCore.List.DropEveryNthItem.Small.png","DSCore.List.TakeEveryNthItem@var[]..[],int,int":"dist/images/nodes/Small/DSCore.List.TakeEveryNthItem.Small.png","DSCore.List.IsEmpty@var[]..[]":"dist/images/nodes/Small/DSCore.List.IsEmpty.Small.png","DSCore.List.Count@var[]..[]":"dist/images/nodes/Small/DSCore.List.Count.Small.png","DSCore.List.Join@var[]..[]":"dist/images/nodes/Small/DSCore.List.Join.Small.png","DSCore.List.FirstItem@var[]..[]":"dist/images/nodes/Small/DSCore.List.FirstItem.Small.png","DSCore.List.RestOfItems@var[]..[]":"dist/images/nodes/Small/DSCore.List.RestOfItems.Small.png","DSCore.List.Chop@var[]..[],int[]":"dist/images/nodes/Small/DSCore.List.Chop.Small.png","DSCore.List.DiagonalRight@var[]..[],int":"dist/images/nodes/Small/DSCore.List.DiagonalRight.Small.png","DSCore.List.DiagonalLeft@var[]..[],int":"dist/images/nodes/Small/DSCore.List.DiagonalLeft.Small.png","DSCore.List.Transpose@var[]..[]":"dist/images/nodes/Small/DSCore.List.Transpose.Small.png","DSCore.List.Clean@var[]..[],bool":"dist/images/nodes/Small/DSCore.List.Clean.Small.png","DSCore.List.OfRepeatedItem@var[]..[],int":"dist/images/nodes/Small/DSCore.List.OfRepeatedItem.Small.png","DSCore.List.Cycle@var[]..[],int":"dist/images/nodes/Small/DSCore.List.Cycle.Small.png","DSCore.List.LastItem@var[]..[]":"dist/images/nodes/Small/DSCore.List.LastItem.Small.png","DSCore.List.Shuffle@var[]..[]":"dist/images/nodes/Small/DSCore.List.Shuffle.Small.png","DSCore.List.Permutations@var[]..[],int":"dist/images/nodes/Small/DSCore.List.Permutations.Small.png","DSCore.List.Combinations@var[]..[],int,bool":"dist/images/nodes/Small/DSCore.List.Combinations.Small.png","DSCore.List.FirstIndexOf@var[]..[],var":"dist/images/nodes/Small/DSCore.List.FirstIndexOf.Small.png","DSCore.List.AllIndicesOf@var[]..[],var":"dist/images/nodes/Small/DSCore.List.AllIndicesOf.Small.png","DSCore.List.Flatten@var[]..[],int":"dist/images/nodes/Small/DSCore.List.Flatten.Small.png",Formula:"dist/images/nodes/Small/Formula.Small.png",Watch:"dist/images/nodes/Small/CoreNodeModels.Watch.Small.png","Watch 3D":"dist/images/nodes/Small/Dynamo.Nodes.Watch3D.Small.png","String from Object":"dist/images/nodes/Small/CoreNodeModels.FromObject.Small.png","String from Array":"dist/images/nodes/Small/CoreNodeModels.FromArray.Small.png","DSCore.String.ToNumber@string":"dist/images/nodes/Small/DSCore.String.ToNumber.Small.png","DSCore.String.Concat@string[]":"dist/images/nodes/Small/DSCore.String.Concat.Small.png","DSCore.String.Length@string":"dist/images/nodes/Small/DSCore.String.Length.Small.png","DSCore.String.Split@string,string[]":"dist/images/nodes/Small/DSCore.String.Split.Small.png","DSCore.String.Join@string,string[]":"dist/images/nodes/Small/DSCore.String.Join.Small.png","DSCore.String.ToUpper@string":"dist/images/nodes/Small/DSCore.String.ToUpper.Small.png","DSCore.String.ToLower@string":"dist/images/nodes/Small/DSCore.String.ToLower.Small.png","DSCore.String.ChangeCase@string,bool":"dist/images/nodes/Small/DSCore.String.ChangeCase.Small.png","DSCore.String.Substring@string,int,int":"dist/images/nodes/Small/DSCore.String.Substring.Small.png","DSCore.String.Contains@string,string,bool":"dist/images/nodes/Small/DSCore.String.Contains.Small.png","DSCore.String.CountOccurrences@string,string,bool":"dist/images/nodes/Small/DSCore.String.CountOccurrences.Small.png","DSCore.String.Replace@string,string,string":"dist/images/nodes/Small/DSCore.String.Replace.Small.png","DSCore.String.EndsWith@string,string,bool":"dist/images/nodes/Small/DSCore.String.EndsWith.Small.png","DSCore.String.StartsWith@string,string,bool":"dist/images/nodes/Small/DSCore.String.StartsWith.Small.png","DSCore.String.TrimWhitespace@string":"dist/images/nodes/Small/DSCore.String.TrimWhitespace.Small.png","DSCore.String.TrimLeadingWhitespace@string":"dist/images/nodes/Small/DSCore.String.TrimLeadingWhitespace.Small.png","DSCore.String.TrimTrailingWhitespace@string":"dist/images/nodes/Small/DSCore.String.TrimTrailingWhitespace.Small.png","DSCore.String.IndexOf@string,string,bool":"dist/images/nodes/Small/DSCore.String.IndexOf.Small.png","DSCore.String.LastIndexOf@string,string,bool":"dist/images/nodes/Small/DSCore.String.LastIndexOf.Small.png","DSCore.String.PadLeft@string,int,string":"dist/images/nodes/Small/DSCore.String.PadLeft.Small.png","DSCore.String.PadRight@string,int,string":"dist/images/nodes/Small/DSCore.String.PadRight.Small.png","DSCore.String.Center@string,int,string":"dist/images/nodes/Small/DSCore.String.Center.Small.png","DSCore.String.Insert@string,int,string":"dist/images/nodes/Small/DSCore.String.Insert.Small.png","DSCore.String.Remove@string,int,int":"dist/images/nodes/Small/DSCore.String.Remove.Small.png",And:"dist/images/nodes/Small/CoreNodeModels.Logic.And.Small.png",Or:"dist/images/nodes/Small/CoreNodeModels.Logic.Or.Small.png",If:"dist/images/nodes/Small/CoreNodeModels.Logic.If.Small.png",ScopeIf:"dist/images/nodes/Small/CoreNodeModels.Logic.ScopedIf.Small.png","DSCore.Logic.Xor@bool,bool":"dist/images/nodes/Small/DSCore.Logic.Xor.Small.png","Function.Apply":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.ApplyFunction.Small.png","Function.Compose":"dist/images/nodes/Small/CoreNodeModels.HigherOrder.ComposeFunctions.Small.png","DSCore.DateTime.MinValue":"dist/images/nodes/Small/DSCore.DateTime.MinValue.Small.png","DSCore.DateTime.MaxValue":"dist/images/nodes/Small/DSCore.DateTime.MaxValue.Small.png","DSCore.DateTime.Now":"dist/images/nodes/Small/DSCore.DateTime.Now.Small.png","DSCore.DateTime.Today":"dist/images/nodes/Small/DSCore.DateTime.Today.Small.png","DSCore.DateTime.ByDate@int,int,int":"dist/images/nodes/Small/DSCore.DateTime.ByDate.Small.png","DSCore.DateTime.ByDateAndTime@int,int,int,int,int,int,int":"dist/images/nodes/Small/DSCore.DateTime.ByDateAndTime.Small.png","DSCore.DateTime.SubtractTimeSpan@var,var":"dist/images/nodes/Small/DSCore.DateTime.SubtractTimeSpan.Small.png","DSCore.DateTime.AddTimeSpan@var,var":"dist/images/nodes/Small/DSCore.DateTime.AddTimeSpan.Small.png","DSCore.DateTime.DaysInMonth@int,int":"dist/images/nodes/Small/DSCore.DateTime.DaysInMonth.Small.png","DSCore.DateTime.IsDaylightSavingsTime@var":"dist/images/nodes/Small/DSCore.DateTime.IsDayLightSavingsTime.Small.png","DSCore.DateTime.IsLeapYear@int":"dist/images/nodes/Small/DSCore.DateTime.IsLeapYear.Small.png","DSCore.DateTime.FromString@string":"dist/images/nodes/Small/DSCore.DateTime.FromString.Small.png","DSCore.DateTime.Date@var":"dist/images/nodes/Small/DSCore.DateTime.Date.Small.png","DSCore.DateTime.Components@var":"dist/images/nodes/Small/DSCore.DateTime.Components.Small.png","DSCore.DateTime.DayOfWeek@var":"dist/images/nodes/Small/DSCore.DateTime.DayOfWeek.Small.png","DSCore.DateTime.DayOfYear@var":"dist/images/nodes/Small/DSCore.DateTime.DayOfYear.Small.png","DSCore.DateTime.TimeOfDay@var":"dist/images/nodes/Small/DSCore.DateTime.TimeOfDay.Small.png","DSCore.DayOfWeek.Sunday":"dist/images/nodes/Small/DSCore.DayOfWeek.Sunday.Small.png","DSCore.DayOfWeek.Monday":"dist/images/nodes/Small/DSCore.DayOfWeek.Monday.Small.png","DSCore.DayOfWeek.Tuesday":"dist/images/nodes/Small/DSCore.DayOfWeek.Tuesday.Small.png","DSCore.DayOfWeek.Wednesday":"dist/images/nodes/Small/DSCore.DayOfWeek.Wednesday.Small.png","DSCore.DayOfWeek.Thursday":"dist/images/nodes/Small/DSCore.DayOfWeek.Thursday.Small.png","DSCore.DayOfWeek.Friday":"dist/images/nodes/Small/DSCore.DayOfWeek.Friday.Small.png","DSCore.DayOfWeek.Saturday":"dist/images/nodes/Small/DSCore.DayOfWeek.Saturday.Small.png","DSCore.TimeSpan.ByDateDifference@var,var":"dist/images/nodes/Small/DSCore.TimeSpan.ByDateDifference.Small.png","DSCore.TimeSpan.Zero":"dist/images/nodes/Small/DSCore.TimeSpan.Zero.Small.png","DSCore.TimeSpan.MaxValue":"dist/images/nodes/Small/DSCore.TimeSpan.MaxValue.Small.png","DSCore.TimeSpan.MinValue":"dist/images/nodes/Small/DSCore.TimeSpan.MinValue.Small.png","DSCore.TimeSpan.Create@double,double,double,double,double":"dist/images/nodes/Small/DSCore.TimeSpan.Create.Small.png","DSCore.TimeSpan.Scale@var,double":"dist/images/nodes/Small/DSCore.TimeSpan.Scale.Small.png","DSCore.TimeSpan.Negate@var":"dist/images/nodes/Small/DSCore.TimeSpan.Negate.Small.png","DSCore.TimeSpan.Add@var,var":"dist/images/nodes/Small/DSCore.TimeSpan.Add.Small.png","DSCore.TimeSpan.Subtract@var,var":"dist/images/nodes/Small/DSCore.TimeSpan.Subtract.Small.png","DSCore.TimeSpan.FromString@string":"dist/images/nodes/Small/DSCore.TimeSpan.FromString.Small.png","DSCore.TimeSpan.Components@var":"dist/images/nodes/Small/DSCore.TimeSpan.Components.Small.png","DSCore.TimeSpan.TotalDays@var":"dist/images/nodes/Small/DSCore.TimeSpan.TotalDays.Small.png","DSCore.TimeSpan.TotalHours@var":"dist/images/nodes/Small/DSCore.TimeSpan.TotalHours.Small.png","DSCore.TimeSpan.TotalMinutes@var":"dist/images/nodes/Small/DSCore.TimeSpan.TotalMinutes.Small.png","DSCore.TimeSpan.TotalSeconds@var":"dist/images/nodes/Small/DSCore.TimeSpan.TotalSeconds.Small.png","DSCore.TimeSpan.TotalMilliseconds@var":"dist/images/nodes/Small/DSCore.TimeSpan.TotalMilliSeconds.Small.png","DSCore.Formula.Evaluate@string,string[],var[]":"dist/images/nodes/Small/DSCore.Formula.Evaluate.Small.png","DSCore.Math.Random@int":"dist/images/nodes/Small/DSCore.Math.Random.int.Small.png","DSCore.Math.Random@double,double":"dist/images/nodes/Small/DSCore.Math.Random.double-double.Small.png","DSCore.Math.RandomList@int":"dist/images/nodes/Small/DSCore.Math.RandomList.Small.png","DSCore.Math.PiTimes2":"dist/images/nodes/Small/DSCore.Math.PiTimes2.Small.png","DSCore.Math.Average@double[]":"dist/images/nodes/Small/DSCore.Math.Average.Small.png","DSCore.Math.RemapRange@double[],double,double":"dist/images/nodes/Small/DSCore.Math.RemapRange.Small.png","DSCore.Math.PI":"dist/images/nodes/Small/DSCore.Math.PI.Small.png","DSCore.Math.E":"dist/images/nodes/Small/DSCore.Math.E.Small.png","DSCore.Math.GoldenRatio":"dist/images/nodes/Small/DSCore.Math.GoldenRatio.Small.png","DSCore.Math.RadiansToDegrees@double":"dist/images/nodes/Small/DSCore.Math.RadiansToDegrees.Small.png","DSCore.Math.DegreesToRadians@double":"dist/images/nodes/Small/DSCore.Math.DegreesToRadians.Small.png","DSCore.Math.Abs@double":"dist/images/nodes/Small/DSCore.Math.Abs.double.Small.png","DSCore.Math.Abs@int":"dist/images/nodes/Small/DSCore.Math.Abs.int.Small.png","DSCore.Math.Acos@double":"dist/images/nodes/Small/DSCore.Math.Acos.Small.png","DSCore.Math.Asin@double":"dist/images/nodes/Small/DSCore.Math.Asin.Small.png","DSCore.Math.Atan@double":"dist/images/nodes/Small/DSCore.Math.Atan.Small.png","DSCore.Math.Atan2@double,double":"dist/images/nodes/Small/DSCore.Math.Atan2.Small.png","DSCore.Math.Ceiling@double":"dist/images/nodes/Small/DSCore.Math.Ceiling.Small.png","DSCore.Math.Cos@double":"dist/images/nodes/Small/DSCore.Math.Cos.Small.png","DSCore.Math.Cosh@double":"dist/images/nodes/Small/DSCore.Math.Cosh.Small.png","DSCore.Math.DivRem@int,int":"dist/images/nodes/Small/DSCore.Math.DivRem.Small.png","DSCore.Math.Exp@double":"dist/images/nodes/Small/DSCore.Math.Exp.Small.png","DSCore.Math.Floor@double":"dist/images/nodes/Small/DSCore.Math.Floor.Small.png","DSCore.Math.Log@double":"dist/images/nodes/Small/DSCore.Math.Log.double.Small.png","DSCore.Math.Log@double,double":"dist/images/nodes/Small/DSCore.Math.Log.double-double.Small.png","DSCore.Math.Log10@double":"dist/images/nodes/Small/DSCore.Math.Log10.Small.png","DSCore.Math.Max@double,double":"dist/images/nodes/Small/DSCore.Math.Max.double-double.Small.png","DSCore.Math.Max@int,int":"dist/images/nodes/Small/DSCore.Math.Max.int-int.Small.png","DSCore.Math.Min@double,double":"dist/images/nodes/Small/DSCore.Math.Min.double-double.Small.png","DSCore.Math.Min@int,int":"dist/images/nodes/Small/DSCore.Math.Min.int-int.Small.png","DSCore.Math.Pow@double,double":"dist/images/nodes/Small/DSCore.Math.Pow.Small.png","DSCore.Math.Rand":"dist/images/nodes/Small/DSCore.Math.Rand.Small.png","DSCore.Math.Round@double":"dist/images/nodes/Small/DSCore.Math.Round.double.Small.png","DSCore.Math.Round@double,int":"dist/images/nodes/Small/DSCore.Math.Round.double-int.Small.png","DSCore.Math.Sign@double":"dist/images/nodes/Small/DSCore.Math.Sign.double.Small.png","DSCore.Math.Sign@int":"dist/images/nodes/Small/DSCore.Math.Sign.int.Small.png","DSCore.Math.Sin@double":"dist/images/nodes/Small/DSCore.Math.Sin.Small.png","DSCore.Math.Sinh@double":"dist/images/nodes/Small/DSCore.Math.Sinh.Small.png","DSCore.Math.Sqrt@double":"dist/images/nodes/Small/DSCore.Math.Sqrt.Small.png","DSCore.Math.Tan@double":"dist/images/nodes/Small/DSCore.Math.Tan.Small.png","DSCore.Math.Tanh@double":"dist/images/nodes/Small/DSCore.Math.Tanh.Small.png","DSCore.Math.Sum@double[]":"dist/images/nodes/Small/DSCore.Math.Sum.Small.png","DSCore.Math.Factorial@int":"dist/images/nodes/Small/DSCore.Math.Factorial.Small.png","DSCore.Object.IsNull@var":"dist/images/nodes/Small/DSCore.Object.IsNull.Small.png","DSCore.Object.Identity@var":"dist/images/nodes/Small/DSCore.Object.Identity.Small.png","DSCore.Object.Type@var":"dist/images/nodes/Small/DSCore.Object.Type.Small.png","DSCore.Thread.Pause@var,int":"dist/images/nodes/Small/DSCore.Thread.Pause.Small.png","DynamoUnits.Location.Name":"dist/images/nodes/Small/DynamoUnits.Location.Name.Small.png","DynamoUnits.Location.Latitude":"dist/images/nodes/Small/DynamoUnits.Location.Latitude.Small.png","DynamoUnits.Location.Longitude":"dist/images/nodes/Small/DynamoUnits.Location.Longitude.Small.png","DynamoUnits.Location.ByLatitudeAndLongitude@double,double,string":"dist/images/nodes/Small/DynamoUnits.Location.ByLatitudeAndLongitude.Small.png","Count@var[]..[]":"dist/images/nodes/Small/Count.Small.png","Rank@var[]..[]":"dist/images/nodes/Small/Rank.Small.png","Flatten@var[]..[]":"dist/images/nodes/Small/Flatten.Small.png","SetIntersection@var[],var[]":"dist/images/nodes/Small/SetIntersection.Small.png","SetUnion@var[],var[]":"dist/images/nodes/Small/SetUnion.Small.png","SetDifference@var[],var[]":"dist/images/nodes/Small/SetDifference.Small.png","CountTrue@var[]..[]":"dist/images/nodes/Small/CountTrue.Small.png","CountFalse@var[]..[]":"dist/images/nodes/Small/CountFalse.Small.png","AllFalse@var[]..[]":"dist/images/nodes/Small/AllFalse.Small.png","AllTrue@var[]..[]":"dist/images/nodes/Small/AllTrue.Small.png","IsHomogeneous@var[]..[]":"dist/images/nodes/Small/IsHomogeneous.Small.png","RemoveIfNot@var[]..[],string":"dist/images/nodes/Small/RemoveIfNot.Small.png","Equals@var,var":"dist/images/nodes/Small/Equals.var-var.Small.png","Contains@var[]..[],var[]..[]":"dist/images/nodes/Small/Contains.varN-varN.Small.png","IndexOf@var[]..[],var[]..[]":"dist/images/nodes/Small/IndexOf.varN-varN.Small.png","Insert@var[]..[],var,int":"dist/images/nodes/Small/Insert.varN-var-int.Small.png","Insert@var[]..[],var[]..[],int":"dist/images/nodes/Small/Insert.varN-varN-int.Small.png","SortIndexByValue@double[]":"dist/images/nodes/Small/SortIndexByValue.double1.Small.png","SortIndexByValue@double[],bool":"dist/images/nodes/Small/SortIndexByValue.double1-bool.Small.png","Reorder@var[],var[]":"dist/images/nodes/Small/Reorder.Small.png","IsUniformDepth@var[]..[]":"dist/images/nodes/Small/IsUniformDepth.Small.png","IsRectangular@var[]..[]":"dist/images/nodes/Small/IsRectangular.Small.png","NormalizeDepth@var[]..[]":"dist/images/nodes/Small/NormalizeDepth.varN.Small.png","NormalizeDepth@var[]..[],var":"dist/images/nodes/Small/NormalizeDepth.varN-var.Small.png","Map@double,double,double":"dist/images/nodes/Small/Map.Small.png","MapTo@double,double,double,double,double":"dist/images/nodes/Small/MapTo.Small.png","ImportFromCSV@string":"dist/images/nodes/Small/ImportFromCSV.string.Small.png","ImportFromCSV@string,bool":"dist/images/nodes/Small/ImportFromCSV.string-bool.Small.png","GetKeys@var[]..[]":"dist/images/nodes/Small/GetKeys.Small.png","GetValues@var[]..[]":"dist/images/nodes/Small/GetValues.Small.png","RemoveKey@var[]..[],var":"dist/images/nodes/Small/RemoveKey.Small.png","ContainsKey@var[]..[],var":"dist/images/nodes/Small/ContainsKey.Small.png","MinimumItemByKey@var[]..[],Function":"dist/images/nodes/Small/MinimumItemByKey.Small.png","MaximumItemByKey@var[]..[],Function":"dist/images/nodes/Small/MaximumItemByKey.Small.png","SortByFunction@var[]..[],Function":"dist/images/nodes/Small/SortByFunction.Small.png","GroupByFunction@var[]..[],Function":"dist/images/nodes/Small/GroupByFunction.Small.png","TrueForAll@var[]..[],Function":"dist/images/nodes/Small/TrueForAll.Small.png","TrueForAny@var[]..[],Function":"dist/images/nodes/Small/TrueForAny.Small.png","LoopWhile@var[]..[],Function,Function":"dist/images/nodes/Small/LoopWhile.Small.png","NewtonRootFind1DNoDeriv@Function,double,int":"dist/images/nodes/Small/NewtonRootFind1DNoDeriv.Small.png","NewtonRootFind1DWithDeriv@Function,Function,double,int":"dist/images/nodes/Small/NewtonRootFind1DWithDeriv.Small.png","+@var[]..[],var[]..[]":"dist/images/nodes/Small/add.Small.png","-@var[]..[],var[]..[]":"dist/images/nodes/Small/sub.Small.png","*@var[]..[],var[]..[]":"dist/images/nodes/Small/mul.Small.png","/@var[]..[],var[]..[]":"dist/images/nodes/Small/div.Small.png","==@var[]..[],var[]..[]":"dist/images/nodes/Small/eq.Small.png",">=@var[]..[],var[]..[]":"dist/images/nodes/Small/ge.Small.png",">@var[]..[],var[]..[]":"dist/images/nodes/Small/gt.Small.png","%@var[]..[],var[]..[]":"dist/images/nodes/Small/mod.Small.png","<=@var[]..[],var[]..[]":"dist/images/nodes/Small/le.Small.png","<@var[]..[],var[]..[]":"dist/images/nodes/Small/lt.Small.png","&&@var[]..[],var[]..[]":"dist/images/nodes/Small/and.Small.png","||@var[]..[],var[]..[]":"dist/images/nodes/Small/or.Small.png","!=@var[]..[],var[]..[]":"dist/images/nodes/Small/nq.Small.png","Not@var[]..[]":"dist/images/nodes/Small/Not.Small.png","Autodesk.DesignScript.Geometry.Arc.ByThreePoints@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByThreePoints.Small.png","Autodesk.DesignScript.Geometry.Arc.ByCenterPointRadiusAngle@Autodesk.DesignScript.Geometry.Point,double,double,double,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByCenterPointRadiusAngle.Small.png","Autodesk.DesignScript.Geometry.Arc.ByCenterPointStartPointSweepAngle@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,double,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByCenterPointStartPointSweepAngle.Small.png","Autodesk.DesignScript.Geometry.Arc.ByCenterPointStartPointEndPoint@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByCenterPointStartPointEndPoint.Small.png","Autodesk.DesignScript.Geometry.Arc.ByFillet@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByFillet.Small.png","Autodesk.DesignScript.Geometry.Arc.ByFilletTangentToCurve@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByFilletTangentToCurve.Small.png","Autodesk.DesignScript.Geometry.Arc.ByBestFitThroughPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByBestFitThroughPoints.Small.png","Autodesk.DesignScript.Geometry.Arc.ByStartEndAndTangencies@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByStartEndAndTangencies.Small.png","Autodesk.DesignScript.Geometry.Arc.ByStartPointEndPointStartTangent@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.ByStartPointEndPointStartTangent.Small.png","Autodesk.DesignScript.Geometry.Arc.CenterPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.CenterPoint.Small.png","Autodesk.DesignScript.Geometry.Arc.Radius":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.Radius.Small.png","Autodesk.DesignScript.Geometry.Arc.StartAngle":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.StartAngle.Small.png","Autodesk.DesignScript.Geometry.Arc.SweepAngle":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Arc.SweepAngle.Small.png","Autodesk.DesignScript.Geometry.Curve.ByParameterLineOnSurface@Autodesk.DesignScript.Geometry.Surface,Autodesk.DesignScript.Geometry.UV,Autodesk.DesignScript.Geometry.UV":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ByParameterLineOnSurface.Small.png","Autodesk.DesignScript.Geometry.Curve.ByBlendBetweenCurves@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve,bool,bool,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ByBlendBetweenCurves.Small.png","Autodesk.DesignScript.Geometry.Curve.ByIsoCurveOnSurface@Autodesk.DesignScript.Geometry.Surface,int,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ByIsoCurveOnSurface.Small.png","Autodesk.DesignScript.Geometry.Curve.Length":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Length.Small.png","Autodesk.DesignScript.Geometry.Curve.IsPlanar":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.IsPlanar.Small.png","Autodesk.DesignScript.Geometry.Curve.IsClosed":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.IsClosed.Small.png","Autodesk.DesignScript.Geometry.Curve.StartPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.StartPoint.Small.png","Autodesk.DesignScript.Geometry.Curve.EndPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.EndPoint.Small.png","Autodesk.DesignScript.Geometry.Curve.Normal":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Normal.Small.png","Autodesk.DesignScript.Geometry.Curve.PointAtParameter@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.PointAtParameter.Small.png","Autodesk.DesignScript.Geometry.Curve.TangentAtParameter@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.TangentAtParameter.Small.png","Autodesk.DesignScript.Geometry.Curve.NormalAtParameter@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.NormalAtParameter.Small.png","Autodesk.DesignScript.Geometry.Curve.CoordinateSystemAtParameter@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.CoordinateSystemAtParameter.Small.png","Autodesk.DesignScript.Geometry.Curve.HorizontalFrameAtParameter@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.HorizontalFrameAtParameter.Small.png","Autodesk.DesignScript.Geometry.Curve.PlaneAtParameter@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.PlaneAtParameter.Small.png","Autodesk.DesignScript.Geometry.Curve.StartParameter":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.StartParameter.Small.png","Autodesk.DesignScript.Geometry.Curve.EndParameter":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.EndParameter.Small.png","Autodesk.DesignScript.Geometry.Curve.ParameterAtPoint@Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ParameterAtPoint.Small.png","Autodesk.DesignScript.Geometry.Curve.Reverse":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Reverse.Small.png","Autodesk.DesignScript.Geometry.Curve.Offset@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Offset.Small.png","Autodesk.DesignScript.Geometry.Curve.PullOntoPlane@Autodesk.DesignScript.Geometry.Plane":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.PullOntoPlane.Small.png","Autodesk.DesignScript.Geometry.Curve.PullOntoSurface@Autodesk.DesignScript.Geometry.Surface":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.PullOntoSurface.Small.png","Autodesk.DesignScript.Geometry.Curve.Join@Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Join.Curve.Small.png","Autodesk.DesignScript.Geometry.Curve.Extrude@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Extrude.double.Small.png","Autodesk.DesignScript.Geometry.Curve.Extrude@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Extrude.Vector.Small.png","Autodesk.DesignScript.Geometry.Curve.Extrude@Autodesk.DesignScript.Geometry.Vector,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Extrude.Vector-double.Small.png","Autodesk.DesignScript.Geometry.Curve.ExtrudeAsSolid@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ExtrudeAsSolid.double.Small.png","Autodesk.DesignScript.Geometry.Curve.ExtrudeAsSolid@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ExtrudeAsSolid.Vector.Small.png","Autodesk.DesignScript.Geometry.Curve.ExtrudeAsSolid@Autodesk.DesignScript.Geometry.Vector,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ExtrudeAsSolid.Vector-double.Small.png","Autodesk.DesignScript.Geometry.Curve.Extend@double,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Extend.Small.png","Autodesk.DesignScript.Geometry.Curve.ExtendStart@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ExtendStart.Small.png","Autodesk.DesignScript.Geometry.Curve.ExtendEnd@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ExtendEnd.Small.png","Autodesk.DesignScript.Geometry.Curve.ApproximateWithArcAndLineSegments":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ApproximateWithArcAndLineSegments.Small.png","Autodesk.DesignScript.Geometry.Curve.ToNurbsCurve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.ToNurbsCurve.Small.png","Autodesk.DesignScript.Geometry.Curve.Patch":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Patch.Small.png","Autodesk.DesignScript.Geometry.Curve.Project@Autodesk.DesignScript.Geometry.Geometry,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Project.Small.png","Autodesk.DesignScript.Geometry.Curve.SweepAsSurface@Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.SweepAsSurface.Small.png","Autodesk.DesignScript.Geometry.Curve.SweepAsSolid@Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.SweepAsSolid.Small.png","Autodesk.DesignScript.Geometry.Curve.Simplify@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Curve.Simplify.Small.png","Autodesk.DesignScript.Geometry.Geometry.Translate@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Translate.double-double-double.Small.png","Autodesk.DesignScript.Geometry.Geometry.Translate@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Translate.Vector.Small.png","Autodesk.DesignScript.Geometry.Geometry.Translate@Autodesk.DesignScript.Geometry.Vector,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Translate.Vector-double.Small.png","Autodesk.DesignScript.Geometry.Geometry.Transform@Autodesk.DesignScript.Geometry.CoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Transform.CoordinateSystem.Small.png","Autodesk.DesignScript.Geometry.Geometry.Transform@Autodesk.DesignScript.Geometry.CoordinateSystem,Autodesk.DesignScript.Geometry.CoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Transform.CoordinateSystem-CoordinateSystem.Small.png","Autodesk.DesignScript.Geometry.Geometry.Rotate@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Rotate.Point-Vector-double.Small.png","Autodesk.DesignScript.Geometry.Geometry.Rotate@Autodesk.DesignScript.Geometry.Plane,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Rotate.Plane-double.Small.png","Autodesk.DesignScript.Geometry.Geometry.Mirror@Autodesk.DesignScript.Geometry.Plane":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Mirror.Small.png","Autodesk.DesignScript.Geometry.Geometry.Scale@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Scale.double.Small.png","Autodesk.DesignScript.Geometry.Geometry.Scale@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Scale.double-double-double.Small.png","Autodesk.DesignScript.Geometry.Geometry.Scale@Autodesk.DesignScript.Geometry.Plane,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Scale.Plane-double-double-double.Small.png","Autodesk.DesignScript.Geometry.Geometry.Scale@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Scale.Point-Point-Point.Small.png","Autodesk.DesignScript.Geometry.Geometry.Scale1D@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Scale1D.Small.png","Autodesk.DesignScript.Geometry.Geometry.Scale2D@Autodesk.DesignScript.Geometry.Plane,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Scale2D.Small.png","Autodesk.DesignScript.Geometry.Geometry.DistanceTo@Autodesk.DesignScript.Geometry.Geometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.DistanceTo.Small.png","Autodesk.DesignScript.Geometry.Geometry.ClosestPointTo@Autodesk.DesignScript.Geometry.Geometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.ClosestPointTo.Small.png","Autodesk.DesignScript.Geometry.Geometry.DoesIntersect@Autodesk.DesignScript.Geometry.Geometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.DoesIntersect.Small.png",
"Autodesk.DesignScript.Geometry.Geometry.Intersect@Autodesk.DesignScript.Geometry.Geometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Intersect.Small.png","Autodesk.DesignScript.Geometry.Geometry.IntersectAll@Autodesk.DesignScript.Geometry.Geometry[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.IntersectAll.Small.png","Autodesk.DesignScript.Geometry.Geometry.Split@Autodesk.DesignScript.Geometry.Geometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Split.Small.png","Autodesk.DesignScript.Geometry.Geometry.Trim@Autodesk.DesignScript.Geometry.Geometry,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Trim.Small.png","Autodesk.DesignScript.Geometry.Geometry.Explode":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.Explode.Small.png","Autodesk.DesignScript.Geometry.Geometry.IsAlmostEqualTo@Autodesk.DesignScript.Geometry.Geometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.IsAlmostEqualTo.Small.png","Autodesk.DesignScript.Geometry.Geometry.BoundingBox":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.BoundingBox.Small.png","Autodesk.DesignScript.Geometry.Geometry.ImportFromSAT@var":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.ImportFromSAT.var.Small.png","Autodesk.DesignScript.Geometry.Geometry.ImportFromSAT@string":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.ImportFromSAT.string.Small.png","Autodesk.DesignScript.Geometry.Geometry.SerializeAsSAB":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.SerializeAsSAB.Small.png","Autodesk.DesignScript.Geometry.Geometry.SerializeAsSAB@Autodesk.DesignScript.Geometry.Geometry[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.SerializeAsSAB.Geometry1.Small.png","Autodesk.DesignScript.Geometry.Geometry.DeserializeFromSAB@int[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.DeserializeFromSAB.Small.png","Autodesk.DesignScript.Geometry.Geometry.ContextCoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Geometry.ContextCoordinateSystem.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.ByGeometry@Autodesk.DesignScript.Geometry.Geometry[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.ByGeometry.Geometry.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.ByCorners@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.ByCorners.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.MinPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.MinPoint.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.MaxPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.MaxPoint.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.Intersection@Autodesk.DesignScript.Geometry.BoundingBox":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.Intersection.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.Intersects@Autodesk.DesignScript.Geometry.BoundingBox":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.Intersects.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.IsEmpty":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.IsEmpty.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.Contains@Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.Contains.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.ToCuboid":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.ToCuboid.Small.png","Autodesk.DesignScript.Geometry.BoundingBox.ToPolySurface":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.BoundingBox.ToPolySurface.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Identity":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Identity.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ByMatrix@double[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ByMatrix.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ByOrigin@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ByOrigin.double-double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ByOrigin@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ByOrigin.double-double-double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ByOrigin@Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ByOrigin.Point.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ByPlane@Autodesk.DesignScript.Geometry.Plane":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ByPlane.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ByOriginVectors@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ByOriginVectors.Point-Vector-Vector.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ByOriginVectors@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ByOriginVectors.Point-Vector-Vector-Vector.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ByCylindricalCoordinates@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ByCylindricalCoordinates.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.BySphericalCoordinates@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.BySphericalCoordinates.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.IsSingular":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.IsSingular.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.IsScaledOrtho":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.IsScaledOrtho.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.IsUniscaledOrtho":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.IsUniscaledOrtho.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Determinant":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Determinant.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Origin":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Origin.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.XAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.XAxis.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.YAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.YAxis.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ZAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ZAxis.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.XScaleFactor":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.XScaleFactor.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.YScaleFactor":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.YScaleFactor.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ZScaleFactor":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ZScaleFactor.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.XYPlane":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.XYPlane.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.YZPlane":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.YZPlane.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ZXPlane":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ZXPlane.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Inverse":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Inverse.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Mirror@Autodesk.DesignScript.Geometry.Plane":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Mirror.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.PostMultiplyBy@Autodesk.DesignScript.Geometry.CoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.PostMultiplyBy.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.PreMultiplyBy@Autodesk.DesignScript.Geometry.CoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.PreMultiplyBy.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.ScaleFactor":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.ScaleFactor.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.IsEqualTo@Autodesk.DesignScript.Geometry.CoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.IsEqualTo.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Translate@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Translate.double-double-double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Translate@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Translate.Vector.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Translate@Autodesk.DesignScript.Geometry.Vector,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Translate.Vector-double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Transform@Autodesk.DesignScript.Geometry.CoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Transform.CoordinateSystem.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Transform@Autodesk.DesignScript.Geometry.CoordinateSystem,Autodesk.DesignScript.Geometry.CoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Transform.CoordinateSystem-CoordinateSystem.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Rotate@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Rotate.Point-Vector-double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Rotate@Autodesk.DesignScript.Geometry.Plane,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Rotate.Plane-double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Scale@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Scale.double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Scale@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Scale.double-double-double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Scale@Autodesk.DesignScript.Geometry.Plane,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Scale.Plane-double-double-double.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Scale@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Scale.Point-Point-Point.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Scale1D@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Scale1D.Small.png","Autodesk.DesignScript.Geometry.CoordinateSystem.Scale2D@Autodesk.DesignScript.Geometry.Plane,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.CoordinateSystem.Scale2D.Small.png","Autodesk.DesignScript.Geometry.Vector.ByCoordinates@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.ByCoordinates.double-double-double.Small.png","Autodesk.DesignScript.Geometry.Vector.ByCoordinates@double,double,double,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.ByCoordinates.double-double-double-bool.Small.png","Autodesk.DesignScript.Geometry.Vector.ByTwoPoints@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.ByTwoPoints.Small.png","Autodesk.DesignScript.Geometry.Vector.XAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.XAxis.Small.png","Autodesk.DesignScript.Geometry.Vector.YAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.YAxis.Small.png","Autodesk.DesignScript.Geometry.Vector.ZAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.ZAxis.Small.png","Autodesk.DesignScript.Geometry.Vector.X":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.X.Small.png","Autodesk.DesignScript.Geometry.Vector.Y":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Y.Small.png","Autodesk.DesignScript.Geometry.Vector.Z":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Z.Small.png","Autodesk.DesignScript.Geometry.Vector.Length":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Length.Small.png","Autodesk.DesignScript.Geometry.Vector.AsPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.AsPoint.Small.png","Autodesk.DesignScript.Geometry.Vector.Reverse":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Reverse.Small.png","Autodesk.DesignScript.Geometry.Vector.Add@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Add.Small.png","Autodesk.DesignScript.Geometry.Vector.Subtract@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Subtract.Small.png","Autodesk.DesignScript.Geometry.Vector.Cross@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Cross.Small.png","Autodesk.DesignScript.Geometry.Vector.Dot@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Dot.Small.png","Autodesk.DesignScript.Geometry.Vector.Normalized":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Normalized.Small.png","Autodesk.DesignScript.Geometry.Vector.IsParallel@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.IsParallel.Small.png","Autodesk.DesignScript.Geometry.Vector.IsAlmostEqualTo@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.IsAlmostEqualTo.Small.png","Autodesk.DesignScript.Geometry.Vector.Transform@Autodesk.DesignScript.Geometry.CoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Transform.Small.png","Autodesk.DesignScript.Geometry.Vector.Rotate@Autodesk.DesignScript.Geometry.Vector,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Rotate.Vector-double.Small.png","Autodesk.DesignScript.Geometry.Vector.Rotate@Autodesk.DesignScript.Geometry.Plane,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Rotate.Plane-double.Small.png","Autodesk.DesignScript.Geometry.Vector.Scale@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Scale.double.Small.png","Autodesk.DesignScript.Geometry.Vector.Scale@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.Scale.double-double-double.Small.png","Autodesk.DesignScript.Geometry.Vector.AngleWithVector@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vector.AngleWithVector.Small.png","Autodesk.DesignScript.Geometry.Point.ByCoordinates@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.ByCoordinates.double-double.Small.png","Autodesk.DesignScript.Geometry.Point.ByCoordinates@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.ByCoordinates.double-double-double.Small.png","Autodesk.DesignScript.Geometry.Point.Origin":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.Origin.Small.png","Autodesk.DesignScript.Geometry.Point.ByCartesianCoordinates@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.ByCartesianCoordinates.Small.png","Autodesk.DesignScript.Geometry.Point.ByCylindricalCoordinates@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.ByCylindricalCoordinates.Small.png","Autodesk.DesignScript.Geometry.Point.BySphericalCoordinates@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.BySphericalCoordinates.Small.png","Autodesk.DesignScript.Geometry.Point.PruneDuplicates@Autodesk.DesignScript.Geometry.Point[],double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.PruneDuplicates.Small.png","Autodesk.DesignScript.Geometry.Point.X":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.X.Small.png","Autodesk.DesignScript.Geometry.Point.Y":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.Y.Small.png","Autodesk.DesignScript.Geometry.Point.Z":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.Z.Small.png","Autodesk.DesignScript.Geometry.Point.AsVector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.AsVector.Small.png","Autodesk.DesignScript.Geometry.Point.Add@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.Add.Small.png","Autodesk.DesignScript.Geometry.Point.Subtract@Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.Subtract.Small.png","Autodesk.DesignScript.Geometry.Point.Project@Autodesk.DesignScript.Geometry.Geometry,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Point.Project.Small.png","Autodesk.DesignScript.Geometry.Plane.ByOriginNormal@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.ByOriginNormal.Small.png","Autodesk.DesignScript.Geometry.Plane.ByOriginNormalXAxis@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.ByOriginNormalXAxis.Small.png","Autodesk.DesignScript.Geometry.Plane.ByOriginXAxisYAxis@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.ByOriginXAxisYAxis.Small.png","Autodesk.DesignScript.Geometry.Plane.ByBestFitThroughPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.ByBestFitThroughPoints.Small.png","Autodesk.DesignScript.Geometry.Plane.ByLineAndPoint@Autodesk.DesignScript.Geometry.Line,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.ByLineAndPoint.Small.png","Autodesk.DesignScript.Geometry.Plane.ByThreePoints@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.ByThreePoints.Small.png","Autodesk.DesignScript.Geometry.Plane.XY":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.XY.Small.png","Autodesk.DesignScript.Geometry.Plane.XZ":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.XZ.Small.png","Autodesk.DesignScript.Geometry.Plane.YZ":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.YZ.Small.png","Autodesk.DesignScript.Geometry.Plane.Origin":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.Origin.Small.png","Autodesk.DesignScript.Geometry.Plane.Normal":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.Normal.Small.png","Autodesk.DesignScript.Geometry.Plane.XAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.XAxis.Small.png","Autodesk.DesignScript.Geometry.Plane.YAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.YAxis.Small.png","Autodesk.DesignScript.Geometry.Plane.ToCoordinateSystem":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.ToCoordinateSystem.Small.png","Autodesk.DesignScript.Geometry.Plane.Offset@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Plane.Offset.Small.png","Autodesk.DesignScript.Geometry.Surface.ByLoft@Autodesk.DesignScript.Geometry.Curve[],Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ByLoft.Curve1-Curve1.Small.png","Autodesk.DesignScript.Geometry.Surface.ByLoft@Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ByLoft.Curve1.Small.png","Autodesk.DesignScript.Geometry.Surface.ByRuledLoft@Autodesk.DesignScript.Geometry.Line[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ByRuledLoft.Small.png","Autodesk.DesignScript.Geometry.Surface.BySweep@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.BySweep.Small.png","Autodesk.DesignScript.Geometry.Surface.ByPerimeterPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ByPerimeterPoints.Small.png","Autodesk.DesignScript.Geometry.Surface.BySweep2Rails@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.BySweep2rails.Small.png","Autodesk.DesignScript.Geometry.Surface.ByRevolve@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ByRevolve.Small.png","Autodesk.DesignScript.Geometry.Surface.ByPatch@Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ByPatch.Small.png","Autodesk.DesignScript.Geometry.Surface.Area":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.Area.Small.png","Autodesk.DesignScript.Geometry.Surface.Perimeter":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.Perimeter.Small.png","Autodesk.DesignScript.Geometry.Surface.ClosedInU":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ClosedInU.Small.png","Autodesk.DesignScript.Geometry.Surface.ClosedInV":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ClosedInV.Small.png","Autodesk.DesignScript.Geometry.Surface.Closed":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.Closed.Small.png","Autodesk.DesignScript.Geometry.Surface.SubtractFrom@Autodesk.DesignScript.Geometry.Solid":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.SubtractFrom.Small.png","Autodesk.DesignScript.Geometry.Surface.UVParameterAtPoint@Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.UVParameterAtPoint.Small.png","Autodesk.DesignScript.Geometry.Surface.TrimWithEdgeLoops@Autodesk.DesignScript.Geometry.PolyCurve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.TrimWithEdgeLoops.Small.png","Autodesk.DesignScript.Geometry.Surface.NormalAtPoint@Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.NormalAtPoint.Small.png","Autodesk.DesignScript.Geometry.Surface.ToNurbsSurface":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ToNurbsSurface.Small.png","Autodesk.DesignScript.Geometry.Surface.ApproximateWithTolerance@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ApproximateWithTolerance.Small.png","Autodesk.DesignScript.Geometry.Surface.Thicken@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.Thicken.double.Small.png","Autodesk.DesignScript.Geometry.Surface.Thicken@double,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.Thicken.double-bool.Small.png","Autodesk.DesignScript.Geometry.Surface.Offset@double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.Offset.Small.png","Autodesk.DesignScript.Geometry.Surface.CurvatureAtParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.CurvatureAtParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.CoordinateSystemAtParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.CoordinateSystemAtParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.TangentAtUParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.TangentAtUParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.TangentAtVParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.TangentAtVParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.NormalAtParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.NormalAtParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.DerivativesAtParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.DerivativesAtParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.GaussianCurvatureAtParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.GaussianCurvatureAtParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.PrincipalCurvaturesAtParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.PrincipalCurvaturesAtParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.PrincipalDirectionsAtParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.PrincipalDirectionsAtParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.PointAtParameter@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.PointAtParameter.Small.png","Autodesk.DesignScript.Geometry.Surface.PerimeterCurves":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.PerimeterCurves.Small.png","Autodesk.DesignScript.Geometry.Surface.GetIsoline@int,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.GetIsoline.Small.png","Autodesk.DesignScript.Geometry.Surface.FlipNormalDirection":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.FlipNormalDirection.Small.png","Autodesk.DesignScript.Geometry.Surface.Join@Autodesk.DesignScript.Geometry.Surface[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.Join.Surface.Small.png","Autodesk.DesignScript.Geometry.Surface.ProjectInputOnto@Autodesk.DesignScript.Geometry.Geometry,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Surface.ProjectInputOnto.Small.png","Autodesk.DesignScript.Geometry.UV.ByCoordinates@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.UV.ByCoordinates.Small.png","Autodesk.DesignScript.Geometry.UV.U":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.UV.U.Small.png","Autodesk.DesignScript.Geometry.UV.V":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.UV.V.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.ByJoinedCurves@Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.ByJoinedCurves.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.ByPoints@Autodesk.DesignScript.Geometry.Point[],bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.ByPoints.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.ByThickeningCurve@Autodesk.DesignScript.Geometry.Curve,double,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.ByThickeningCurve.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.NumberOfCurves":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.NumberOfCurves.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.Curves":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.Curves.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.CurveAtIndex@int,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.CurveAtIndex.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.BasePlane":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.BasePlane.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.ExtendWithEllipse@double,double,double,double,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.ExtendWithEllipse.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.ExtendWithArc@double,double,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.ExtendWithArc.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.CloseWithLine":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.CloseWithLine.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.CloseWithLineAndTangentArcs@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.CloseWithLineAndTangentArcs.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.Offset@double,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.Offset.Small.png","Autodesk.DesignScript.Geometry.PolyCurve.Fillet@double,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolyCurve.Fillet.Small.png","Autodesk.DesignScript.Geometry.Solid.ByJoinedSurfaces@Autodesk.DesignScript.Geometry.Surface[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.ByJoinedSurfaces.Small.png","Autodesk.DesignScript.Geometry.Solid.ByLoft@Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.ByLoft.Curve1.Small.png","Autodesk.DesignScript.Geometry.Solid.ByLoft@Autodesk.DesignScript.Geometry.Curve[],Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.ByLoft.Curve1-Curve1.Small.png","Autodesk.DesignScript.Geometry.Solid.BySweep@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.BySweep.Small.png","Autodesk.DesignScript.Geometry.Solid.BySweep2Rails@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.BySweep2Rails.Small.png","Autodesk.DesignScript.Geometry.Solid.ByRevolve@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.ByRevolve.Small.png","Autodesk.DesignScript.Geometry.Solid.ByUnion@Autodesk.DesignScript.Geometry.Solid[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.ByUnion.Small.png","Autodesk.DesignScript.Geometry.Solid.Area":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.Area.Small.png","Autodesk.DesignScript.Geometry.Solid.Volume":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.Volume.Small.png","Autodesk.DesignScript.Geometry.Solid.Centroid":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.Centroid.Small.png","Autodesk.DesignScript.Geometry.Solid.Union@Autodesk.DesignScript.Geometry.Solid":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.Union.Small.png",
"Autodesk.DesignScript.Geometry.Solid.Difference@Autodesk.DesignScript.Geometry.Solid":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.Difference.Small.png","Autodesk.DesignScript.Geometry.Solid.DifferenceAll@Autodesk.DesignScript.Geometry.Solid[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.DifferenceAll.Small.png","Autodesk.DesignScript.Geometry.Solid.ThinShell@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.ThinShell.Small.png","Autodesk.DesignScript.Geometry.Solid.ProjectInputOnto@Autodesk.DesignScript.Geometry.Geometry,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.ProjectInputOnto.Small.png","Autodesk.DesignScript.Geometry.Solid.Fillet@Autodesk.DesignScript.Geometry.Edge[],double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.Fillet.Small.png","Autodesk.DesignScript.Geometry.Solid.Chamfer@Autodesk.DesignScript.Geometry.Edge[],double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Solid.Chamfer.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ByControlPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ByControlPoints.Point1.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ByControlPoints@Autodesk.DesignScript.Geometry.Point[],int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ByControlPoints.Point1-int.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ByControlPoints@Autodesk.DesignScript.Geometry.Point[],int,bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ByControlPoints.Point1-int-bool.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ByControlPointsWeightsKnots@Autodesk.DesignScript.Geometry.Point[],double[],double[],int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ByControlPointsWeightsKnots.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ByPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ByPoints.Point1.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ByPoints@Autodesk.DesignScript.Geometry.Point[],bool":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ByPoints.Point1-bool.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ByPoints@Autodesk.DesignScript.Geometry.Point[],int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ByPoints.Point1-int.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ByPointsTangents@Autodesk.DesignScript.Geometry.Point[],Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ByPointsTangents.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.Degree":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.Degree.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.IsPeriodic":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.IsPeriodic.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.IsRational":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.IsRational.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.ControlPoints":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.ControlPoints.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.Knots":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.Knots.Small.png","Autodesk.DesignScript.Geometry.NurbsCurve.Weights":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsCurve.Weights.Small.png","Autodesk.DesignScript.Geometry.Cuboid.ByLengths@double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cuboid.ByLengths.double-double-double.Small.png","Autodesk.DesignScript.Geometry.Cuboid.ByLengths@Autodesk.DesignScript.Geometry.Point,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cuboid.ByLengths.Point-double-double-double.Small.png","Autodesk.DesignScript.Geometry.Cuboid.ByLengths@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cuboid.ByLengths.CoordinateSystem-double-double-double.Small.png","Autodesk.DesignScript.Geometry.Cuboid.ByCorners@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cuboid.ByCorners.Small.png","Autodesk.DesignScript.Geometry.Cuboid.Length":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cuboid.Length.Small.png","Autodesk.DesignScript.Geometry.Cuboid.Width":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cuboid.Width.Small.png","Autodesk.DesignScript.Geometry.Cuboid.Height":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cuboid.Height.Small.png","Autodesk.DesignScript.Geometry.PolySurface.ByLoft@Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.ByLoft.Curve1.Small.png","Autodesk.DesignScript.Geometry.PolySurface.ByLoft@Autodesk.DesignScript.Geometry.Curve[],Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.ByLoft.Curve1-Curve.Small.png","Autodesk.DesignScript.Geometry.PolySurface.ByLoftGuides@Autodesk.DesignScript.Geometry.Curve[],Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.ByLoftGuides.Small.png","Autodesk.DesignScript.Geometry.PolySurface.ByJoinedSurfaces@Autodesk.DesignScript.Geometry.Surface[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.ByJoinedSurfaces.Small.png","Autodesk.DesignScript.Geometry.PolySurface.BySolid@Autodesk.DesignScript.Geometry.Solid":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.BySolid.Small.png","Autodesk.DesignScript.Geometry.PolySurface.BySweep@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.BySweep.Curve-Curve.Small.png","Autodesk.DesignScript.Geometry.PolySurface.BySweep@Autodesk.DesignScript.Geometry.Curve,Autodesk.DesignScript.Geometry.Curve":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.BySweep.Curve-Curve.Small.png","Autodesk.DesignScript.Geometry.PolySurface.Surfaces":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.Surfaces.Small.png","Autodesk.DesignScript.Geometry.PolySurface.LocateSurfacesByPoint@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.LocateSurfacesByPoint.Small.png","Autodesk.DesignScript.Geometry.PolySurface.LocateSurfacesByLine@Autodesk.DesignScript.Geometry.Line":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.LocateSurfacesByLine.Small.png","Autodesk.DesignScript.Geometry.PolySurface.UnconnectedBoundaries":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.UnconnectedBoundaries.Small.png","Autodesk.DesignScript.Geometry.PolySurface.ExtractSolids":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.ExtractSolids.Small.png","Autodesk.DesignScript.Geometry.PolySurface.SurfaceCount":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.SurfaceCount.Small.png","Autodesk.DesignScript.Geometry.PolySurface.EdgeCount":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.EdgeCount.Small.png","Autodesk.DesignScript.Geometry.PolySurface.VertexCount":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.VertexCount.Small.png","Autodesk.DesignScript.Geometry.PolySurface.Fillet@Autodesk.DesignScript.Geometry.Edge[],double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.Fillet.Small.png","Autodesk.DesignScript.Geometry.PolySurface.Chamfer@Autodesk.DesignScript.Geometry.Edge[],double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.PolySurface.Chamfer.Small.png","Autodesk.DesignScript.Geometry.Circle.ByCenterPointRadius@Autodesk.DesignScript.Geometry.Point,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Circle.ByCenterPointRadius.Small.png","Autodesk.DesignScript.Geometry.Circle.ByCenterPointRadiusNormal@Autodesk.DesignScript.Geometry.Point,double,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Circle.ByCenterPointRadiusNormal.Small.png","Autodesk.DesignScript.Geometry.Circle.ByPlaneRadius@Autodesk.DesignScript.Geometry.Plane,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Circle.ByPlaneRadius.Small.png","Autodesk.DesignScript.Geometry.Circle.ByThreePoints@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Circle.ByThreePoints.Small.png","Autodesk.DesignScript.Geometry.Circle.ByBestFitThroughPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Circle.ByBestFitThroughPoints.Small.png","Autodesk.DesignScript.Geometry.Circle.CenterPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Circle.CenterPoint.Small.png","Autodesk.DesignScript.Geometry.Circle.Radius":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Circle.Radius.Small.png","Autodesk.DesignScript.Geometry.Edge.CurveGeometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Edge.CurveGeometry.Small.png","Autodesk.DesignScript.Geometry.Edge.AdjacentFaces":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Edge.AdjacentFaces.Small.png","Autodesk.DesignScript.Geometry.Edge.StartVertex":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Edge.StartVertex.Small.png","Autodesk.DesignScript.Geometry.Edge.EndVertex":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Edge.EndVertex.Small.png","Autodesk.DesignScript.Geometry.Vertex.PointGeometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vertex.PointGeometry.Small.png","Autodesk.DesignScript.Geometry.Vertex.AdjacentEdges":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vertex.AdjacentEdges.Small.png","Autodesk.DesignScript.Geometry.Vertex.AdjacentFaces":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Vertex.AdjacentFaces.Small.png","Autodesk.DesignScript.Geometry.Cone.ByPointsRadius@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.ByPointsRadius.Small.png","Autodesk.DesignScript.Geometry.Cone.ByPointsRadii@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.ByPointsRadii.Small.png","Autodesk.DesignScript.Geometry.Cone.ByCoordinateSystemHeightRadius@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.ByCoordinateSystemHeightRadius.Small.png","Autodesk.DesignScript.Geometry.Cone.ByCoordinateSystemHeightRadii@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.ByCoordinateSystemHeightRadii.Small.png","Autodesk.DesignScript.Geometry.Cone.StartPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.StartPoint.Small.png","Autodesk.DesignScript.Geometry.Cone.EndPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.EndPoint.Small.png","Autodesk.DesignScript.Geometry.Cone.RadiusRatio":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.RadiusRatio.Small.png","Autodesk.DesignScript.Geometry.Cone.StartRadius":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.StartRadius.Small.png","Autodesk.DesignScript.Geometry.Cone.EndRadius":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.EndRadius.Small.png","Autodesk.DesignScript.Geometry.Cone.Height":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cone.Height.Small.png","Autodesk.DesignScript.Geometry.Topology.Vertices":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Topology.Vertices.Small.png","Autodesk.DesignScript.Geometry.Topology.Edges":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Topology.Edges.Small.png","Autodesk.DesignScript.Geometry.Topology.Faces":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Topology.Faces.Small.png","Autodesk.DesignScript.Geometry.Face.Edges":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Face.Edges.Small.png","Autodesk.DesignScript.Geometry.Face.Vertices":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Face.Vertices.Small.png","Autodesk.DesignScript.Geometry.Face.SurfaceGeometry":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Face.SurfaceGeometry.Small.png","Autodesk.DesignScript.Geometry.Cylinder.ByRadiusHeight@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cylinder.ByRadiusHeight.Small.png","Autodesk.DesignScript.Geometry.Cylinder.ByPointsRadius@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cylinder.ByPointsRadius.Small.png","Autodesk.DesignScript.Geometry.Cylinder.Radius":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Cylinder.Radius.Small.png","Autodesk.DesignScript.Geometry.Ellipse.ByOriginRadii@Autodesk.DesignScript.Geometry.Point,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Ellipse.ByOriginRadii.Small.png","Autodesk.DesignScript.Geometry.Ellipse.ByOriginVectors@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Vector":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Ellipse.ByOriginVectors.Small.png","Autodesk.DesignScript.Geometry.Ellipse.ByCoordinateSystemRadii@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Ellipse.ByCoordinateSystemRadii.Small.png","Autodesk.DesignScript.Geometry.Ellipse.ByPlaneRadii@Autodesk.DesignScript.Geometry.Plane,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Ellipse.ByPlaneRadii.Small.png","Autodesk.DesignScript.Geometry.Ellipse.CenterPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Ellipse.CenterPoint.Small.png","Autodesk.DesignScript.Geometry.Ellipse.MajorAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Ellipse.MajorAxis.Small.png","Autodesk.DesignScript.Geometry.Ellipse.MinorAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Ellipse.MinorAxis.Small.png","Autodesk.DesignScript.Geometry.EllipseArc.ByPlaneRadiiAngles@Autodesk.DesignScript.Geometry.Plane,double,double,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.EllipseArc.ByPlaneRadiiAngles.Small.png","Autodesk.DesignScript.Geometry.EllipseArc.CenterPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.EllipseArc.CenterPoint.Small.png","Autodesk.DesignScript.Geometry.EllipseArc.MajorAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.EllipseArc.MajorAxis.Small.png","Autodesk.DesignScript.Geometry.EllipseArc.MinorAxis":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.EllipseArc.MinorAxis.Small.png","Autodesk.DesignScript.Geometry.EllipseArc.StartAngle":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.EllipseArc.StartAngle.Small.png","Autodesk.DesignScript.Geometry.EllipseArc.SweepAngle":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.EllipseArc.SweepAngle.Small.png","Autodesk.DesignScript.Geometry.Helix.ByAxis@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,Autodesk.DesignScript.Geometry.Point,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Helix.ByAxis.Small.png","Autodesk.DesignScript.Geometry.Helix.Angle":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Helix.Angle.Small.png","Autodesk.DesignScript.Geometry.Helix.Pitch":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Helix.Pitch.Small.png","Autodesk.DesignScript.Geometry.Helix.Radius":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Helix.Radius.Small.png","Autodesk.DesignScript.Geometry.Helix.AxisDirection":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Helix.AxisDirection.Small.png","Autodesk.DesignScript.Geometry.Helix.AxisPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Helix.AxisPoint.Small.png","Autodesk.DesignScript.Geometry.IndexGroup.ByIndices@int,int,int,int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.IndexGroup.ByIndices.int-int-int-int.Small.png","Autodesk.DesignScript.Geometry.IndexGroup.ByIndices@int,int,int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.IndexGroup.ByIndices.int-int-int.Small.png","Autodesk.DesignScript.Geometry.IndexGroup.Count":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.IndexGroup.Count.Small.png","Autodesk.DesignScript.Geometry.IndexGroup.A":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.IndexGroup.A.Small.png","Autodesk.DesignScript.Geometry.IndexGroup.B":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.IndexGroup.B.Small.png","Autodesk.DesignScript.Geometry.IndexGroup.C":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.IndexGroup.C.Small.png","Autodesk.DesignScript.Geometry.IndexGroup.D":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.IndexGroup.D.Small.png","Autodesk.DesignScript.Geometry.Line.ByStartPointEndPoint@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Line.ByStartPointEndPoint.Small.png","Autodesk.DesignScript.Geometry.Line.ByBestFitThroughPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Line.ByBestFitThroughPoints.Small.png","Autodesk.DesignScript.Geometry.Line.ByTangency@Autodesk.DesignScript.Geometry.Curve,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Line.ByTangency.Small.png","Autodesk.DesignScript.Geometry.Line.ByStartPointDirectionLength@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Vector,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Line.ByStartPointDirectionLength.Small.png","Autodesk.DesignScript.Geometry.Line.Direction":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Line.Direction.Small.png","Autodesk.DesignScript.Geometry.Mesh.ByPointsFaceIndices@Autodesk.DesignScript.Geometry.Point[],Autodesk.DesignScript.Geometry.IndexGroup[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Mesh.ByPointsFaceIndices.Small.png","Autodesk.DesignScript.Geometry.Mesh.FaceIndices":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Mesh.FaceIndices.Small.png","Autodesk.DesignScript.Geometry.Mesh.VertexNormals":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Mesh.VertexNormals.Small.png","Autodesk.DesignScript.Geometry.Mesh.VertexPositions":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Mesh.VertexPositions.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.ByPoints@Autodesk.DesignScript.Geometry.Point[][],int,int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.ByPoints.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.ByPointsTangents@Autodesk.DesignScript.Geometry.Point[][],Autodesk.DesignScript.Geometry.Vector[],Autodesk.DesignScript.Geometry.Vector[],Autodesk.DesignScript.Geometry.Vector[],Autodesk.DesignScript.Geometry.Vector[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.ByPointsTangents.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.ByPointsTangentsKnotsDerivatives@Autodesk.DesignScript.Geometry.Point[][],Autodesk.DesignScript.Geometry.Vector[],Autodesk.DesignScript.Geometry.Vector[],Autodesk.DesignScript.Geometry.Vector[],Autodesk.DesignScript.Geometry.Vector[],double[],double[],Autodesk.DesignScript.Geometry.Vector[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.ByPointsTangentsKnotsDerivatives.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.ByControlPoints@Autodesk.DesignScript.Geometry.Point[][],int,int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.ByControlPoints.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.ByControlPointsWeightsKnots@Autodesk.DesignScript.Geometry.Point[][],double[][],double[],double[],int,int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.ByControlPointsWeightsKnots.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.DegreeU":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.DegreeU.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.DegreeV":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.DegreeV.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.NumControlPointsU":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.NumControlPointsU.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.NumControlPointsV":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.NumControlPointsV.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.IsPeriodicInU":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.IsPeriodicInU.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.IsPeriodicInV":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.IsPeriodicInV.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.IsRational":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.IsRational.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.ControlPoints":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.ControlPoints.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.Weights":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.Weights.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.UKnots":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.UKnots.Small.png","Autodesk.DesignScript.Geometry.NurbsSurface.VKnots":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.NurbsSurface.VKnots.Small.png","Autodesk.DesignScript.Geometry.Polygon.ByPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Polygon.ByPoints.Small.png","Autodesk.DesignScript.Geometry.Polygon.RegularPolygon@Autodesk.DesignScript.Geometry.Circle,int":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Polygon.RegularPolygon.Small.png","Autodesk.DesignScript.Geometry.Polygon.Points":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Polygon.Points.Small.png","Autodesk.DesignScript.Geometry.Polygon.PlaneDeviation":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Polygon.PlaneDeviation.Small.png","Autodesk.DesignScript.Geometry.Polygon.Corners":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Polygon.Corners.Small.png","Autodesk.DesignScript.Geometry.Polygon.Center":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Polygon.Center.Small.png","Autodesk.DesignScript.Geometry.Polygon.SelfIntersections":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Polygon.SelfIntersections.Small.png","Autodesk.DesignScript.Geometry.Polygon.ContainmentTest@Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Polygon.ContainmentTest.Small.png","Autodesk.DesignScript.Geometry.Rectangle.ByCornerPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Rectangle.ByCornerPoints.Point1.Small.png","Autodesk.DesignScript.Geometry.Rectangle.ByCornerPoints@Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point,Autodesk.DesignScript.Geometry.Point":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Rectangle.ByCornerPoints.Point-Point-Point-Point.Small.png","Autodesk.DesignScript.Geometry.Rectangle.ByWidthLength@double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Rectangle.ByWidthLength.double-double.Small.png","Autodesk.DesignScript.Geometry.Rectangle.ByWidthLength@Autodesk.DesignScript.Geometry.Plane,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Rectangle.ByWidthLength.Plane-double-double.Small.png","Autodesk.DesignScript.Geometry.Rectangle.ByWidthLength@Autodesk.DesignScript.Geometry.CoordinateSystem,double,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Rectangle.ByWidthLength.CoordinateSystem-double-double.Small.png","Autodesk.DesignScript.Geometry.Rectangle.Width":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Rectangle.Width.Small.png","Autodesk.DesignScript.Geometry.Rectangle.Height":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Rectangle.Height.Small.png","Autodesk.DesignScript.Geometry.Sphere.ByCenterPointRadius@Autodesk.DesignScript.Geometry.Point,double":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Sphere.ByCenterPointRadius.Small.png","Autodesk.DesignScript.Geometry.Sphere.ByFourPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Sphere.ByFourPoints.Small.png","Autodesk.DesignScript.Geometry.Sphere.ByBestFit@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Sphere.ByBestFit.Small.png","Autodesk.DesignScript.Geometry.Sphere.CenterPoint":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Sphere.CenterPoint.Small.png","Autodesk.DesignScript.Geometry.Sphere.Radius":"dist/images/nodes/Small/Autodesk.DesignScript.Geometry.Sphere.Radius.Small.png","Tessellation.ConvexHull.ByPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Tessellation.ConvexHull.ByPoints.Small.png","Tessellation.Delaunay.ByParametersOnSurface@Autodesk.DesignScript.Geometry.UV[],Autodesk.DesignScript.Geometry.Surface":"dist/images/nodes/Small/Tessellation.Delaunay.ByParametersOnSurface.Small.png","Tessellation.Delaunay.ByPoints@Autodesk.DesignScript.Geometry.Point[]":"dist/images/nodes/Small/Tessellation.Delaunay.ByPoints.Small.png","Tessellation.Voronoi.ByParametersOnSurface@Autodesk.DesignScript.Geometry.UV[],Autodesk.DesignScript.Geometry.Surface":"dist/images/nodes/Small/Tessellation.Voronoi.ByParametersOnSurface.Small.png","Display.Display.ByGeometryColor@Autodesk.DesignScript.Geometry.Geometry,DSCore.Color":"dist/images/nodes/Small/DSCore.Display.ByGeometryColor.Small.png"},e}();return n});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SearchElementView",["require","exports","backbone","underscore","imagesMap","staticHelpers"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedClassName="search-element-selected",t}return o(t,e),t.iterateAncestors=function(e,t){for(;e;)t.call(this,e),e=e.parent},Object.defineProperty(t.prototype,"tagName",{get:function(){return"li"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"search-element"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#search-element-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{click:"clickHandler"}},t.prototype.initialize=function(e){this.searchView=e.attributes.searchView,this.parent=e.attributes.parent,this.model.get("creationName")||(this.model.set("creationName",this.model.get("name")),this.model.set("displayName",this.model.get("name"))),this.imageSource="dist/images/logo_square.png";var t=i.images[this.model.CreationName];void 0!=t&&(this.imageSource=t),this.listenTo(this.model,"change:selected",this.updateSelectedStateCSS)},t.prototype.render=function(){this.$el.html(this.template(this.model));var e=this.$el.find(".search-element-image");if(window&&window.location&&void 0!==window.location.href){var t=s.getSourceScriptPath();if(t){var n=s.getFilePath(t,"dist");if(n){var r=n+this.imageSource;this.imageSource=r}}}return e.attr("src",this.imageSource),this.generateTooltipContent(),this},t.prototype.updateSelectedStateCSS=function(){this.model.get("selected")?(this.$el.addClass(this.selectedClassName),console.log("STILL ALIVE")):this.$el.removeClass(this.selectedClassName)},t.prototype.generateTooltipContent=function(){var e=this;this.$el.tooltip("destroy");var t=r.template($("#search-element-tooltip-template").html()),n=this.model.InPorts.map(function(e){return/\S/.test(e.name)?e.name+" :":""}),i=this.model.InPorts.map(function(e){return e.type}),o=this.model.OutPorts.map(function(e){return/\S/.test(e.name)?e.name+" :":""}),s=this.model.OutPorts.map(function(e){return e.type});n=n.map(function(e,t){var n=i[t];return/\S/.test(e)||/\S/.test(n)?e:"⇒"}),o=o.map(function(e,t){var n=s[t];return/\S/.test(e)||/\S/.test(n)?e:"⇒"}),n=n.length>0?n:["none"],o=o.length>0?o:["none"];var a=t({description:this.model.Description,inputNames:n,inputValues:i,outputNames:o,outputValues:s,imageSource:this.imageSource}),l=this.$el.tooltip({title:a,trigger:"manual",placement:"right",html:!0});l.on("mouseenter",function(){var t=e.$el;t.tooltip("show"),$(".tooltip").on("mouseleave",function(){t.tooltip("hide")})}),l.on("mouseleave",function(){var t=e.$el;setTimeout(function(){$(".tooltip:hover").length||t.tooltip("hide")},0)})},t.prototype.clickHandler=function(e){return this.searchView.trigger("add-element",this.model),e.preventDefault(),!1},t.prototype.hide=function(){this.$el.hide()},t.prototype.show=function(){this.$el.show()},t.prototype.showWithAncestors=function(){t.iterateAncestors.call(this,this.parent,function(e){e.show()}),this.$el.show()},t}(n.View);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SearchCategoryView",["require","exports","backbone","underscore","SearchElementView"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.hideWithChildren=function(e){if(e.$el.hide(),e.children)for(var n=e.children.length,r=0;r<n;r++){var i=e.children[r];i instanceof t&&t.hideWithChildren(i)}},Object.defineProperty(t.prototype,"tagName",{get:function(){return"li"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"search-element category"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#search-category-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{click:"toggle"}},t.prototype.initialize=function(e){this.expanded=!1,this.searchElements=e.attributes.searchElements,this.parent=e.attributes.parent,this.searchView=e.attributes.searchView,this.children=null},t.prototype.render=function(){var e;return this.children=[],this.$el.html(this.template(this.model)),e=this.$el.find("ul").eq(0),e.hide(),r.each(this.model.descendants,function(n,r){var i=new t({model:n,attributes:{parent:this,searchElements:this.searchElements,searchView:this.searchView}});this.children.push(i),e.append(i.render().$el)}.bind(this)),r.each(this.model.elements,function(t){var n=new i({model:t,attributes:{parent:this,searchElements:this.searchElements,searchView:this.searchView}});this.searchElements.push(n),this.children.push(n),e.append(n.render().$el)}.bind(this)),this},
t.prototype.toggle=function(e,t,n){"boolean"==typeof t?this.expanded=t:this.expanded=!this.expanded,this.expanded?(this.$el.addClass("expanded"),this.$el.find("ul").eq(0).show()):(this.$el.removeClass("expanded"),this.$el.find("ul").eq(0).hide()),e&&e.preventDefault();var r,i;if(n){i=this.children.length;for(var o=0;o<i;o++)r=this.children[o],r.children&&r.toggle(e,t,!0)}return!1},t.prototype.show=function(e){if(this.$el.show(),this.$el.addClass("expanded"),this.$el.find("ul").eq(0).show(),this.expanded=!0,e)for(var n=this.children.length,r=0;r<n;r++){var i=this.children[r];i instanceof t&&i.show(!0)}},t.prototype.hide=function(){t.hideWithChildren(this)},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CategorySearchView",["require","exports","backbone","underscore","SearchElementView","SearchCategoryView"],function(e,t,n,r,i,s){"use strict";var a;!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(a||(a={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"ul"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"list search-list"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template("")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SelectedElementIndex",{get:function(){return this.selectedElementIndex},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.app=e.attributes.app,this.searchView=e.attributes.searchView,this.searchElements=[],this.tagList=[],this.rootElements=[],this.searchResults=null,this.searchResultCategory=null,this.parent=null},t.prototype.render=function(){var e,t=this.model.getNamespaces(this.app.searchElements.models),n=t.descendants;this.rootElements=[];var o={name:"Search Results",descendants:{},elements:[]};if(this.searchResultCategory=new s({model:o,attributes:{searchElements:this.searchElements,searchView:this.searchView}}),this.$el.append(this.searchResultCategory.render().$el),$.isEmptyObject(n))r.each(t.elements,function(t){e=new i({model:t,attributes:{searchElements:this.searchElements,searchView:this.searchView}}),this.searchElements.push(e),this.rootElements.push(e),this.$el.append(e.render().$el)}.bind(this));else{for(var a in n)e=new s({model:n[a],attributes:{searchElements:this.searchElements,searchView:this.searchView}}),this.rootElements.push(e),this.$el.append(e.render().$el);r.each(t.elements,function(t){e=new i({model:t,attributes:{searchElements:this.searchElements,searchView:this.searchView}}),this.searchElements.push(e),this.rootElements.push(e),this.$el.append(e.render().$el)}.bind(this))}return this.rendersearchResults(),this},t.prototype.findElementsBySearchTags=function(e){var t=this;if(e){e=e.trim(),e=e.toLowerCase();var n,r=e.split(/\s+/),i=[],o=this.model.deconstructSearchElement(this.searchElements.map(function(e){return e.model})),s=this.model.convertSearchElementDictToTagDict(o);if(n={},void 0===s||null===s)return i;var a=Object.keys(s).map(function(e){return{tag:e,pair:s[e]}}).filter(function(e){return t.model.MatchWithQueryString(e.tag,r)});if(void 0===a||null===a||a.length<1)return i;a.forEach(function(r){return t.model.ComputeOrderedSearchResults(e,r.tag,r.pair,n)});var l=Object.keys(n).map(function(e){return n[e]});l.sort(function(e,t){return e.weight===t.weight?e.position-t.position:t.weight-e.weight}),l.length>this.model.maxNumberResults&&(l=l.slice(0,this.model.maxNumberResults));for(var c=0;c<l.length;c++)i.push(this.searchElements[l[c].position]);return i}},t.prototype.expandElements=function(e){return this.detach(),this.searchResults=null,e?(this.searchResults=this.findElementsBySearchTags(e),this.hideElements()):this.showAndCollapseElements(),this.rendersearchResults(),this.attach(),this},t.prototype.rendersearchResults=function(){this.searchResults?(this.searchResultCategory.children.forEach(function(e){e.remove()}),this.searchResultCategory.$el.show(),this.searchResultCategory.model.elements=this.searchResults.map(function(e){return e.model}),this.searchResultCategory.render().toggle(null,!0)):this.searchResultCategory.$el.hide()},t.prototype.hideElements=function(){for(var e=0,t=this.rootElements.length;e<t;e++)this.rootElements[e].hide()},t.prototype.showAndCollapseElements=function(){for(var e,t=0,n=this.rootElements.length;t<n;t++)e=this.rootElements[t],e.show(!0),e.children&&e.toggle(null,!1,!0)},t.prototype.detach=function(){this.parent=this.$el.parent(),this.$el.detach()},t.prototype.attach=function(){this.parent.append(this.$el)},t.prototype.resetSelection=function(){this.selectedElementIndex=-1},t.prototype.moveSelection=function(e){var t=this.searchResultCategory.children;(null==this.selectedElementIndex||this.selectedElementIndex>t.length-1||this.selectedElementIndex<0)&&this.resetSelection();var n=this.selectedElementIndex;t[n]&&(t[n].model.selected=!1),e==a.DOWN?(n=this.selectedElementIndex+1,n>t.length-1&&(n=0)):e==a.UP&&(n=this.selectedElementIndex-1,n<0&&(n=t.length-1)),this.$el.scrollTop(t[n].$el.position().top-t[0].$el.position().top),t[n].model.selected=!0,this.selectedElementIndex=n},t.direction=a,t}(n.View);return l});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CategorySearch",["require","exports","backbone"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxNumberResults=100,t}return o(t,e),t.prototype.deconstructSearchElement=function(e){var t={};return e.forEach(function(e,n){t[e.cid]={tags:_.object(e.get("searchTags"),e.get("searchWeights")),position:n,searchElement:e}}),t},t.prototype.convertSearchElementDictToTagDict=function(e){var t=_.flatten(Object.keys(e).map(function(t){var n=e[t].tags,r=e[t].searchElement,i=e[t].position;return Object.keys(n).map(function(e){return{tag:e,weight:n[e],searchElement:r,position:i}})})),n=_.groupBy(t,"tag"),r={};return Object.keys(n).forEach(function(e){r[e]=_.zip(n[e].map(function(e){return e.searchElement}),n[e].map(function(e){return e.weight}),n[e].map(function(e){return e.position}))}),r},t.prototype.ComputeOrderedSearchResults=function(e,t,n,r){var i=e.length/t.length;n.forEach(function(e){var t=e[0],n=i*e[1],o=e[2];r.hasOwnProperty(t.cid)?r[t.cid].weight<n&&(r[t.cid]={searchElement:r[t.cid].searchElement,weight:n,position:r[t.cid].position}):r[t.cid]={searchElement:t,weight:n,position:o}})},t.prototype.MatchWithQueryString=function(e,t){for(var n=0,r=0,i=0;i<t.length;i++){for(var o=t[i],s=o.length;s>=1;s--){var a=o.substr(0,s);if(e.indexOf(a)!=-1){n+=a.length;break}}r+=o.length}return n/r>.8},t.prototype.getNamespaces=function(e){for(var t,n,r,i={descendants:{},elements:new Array},o=e.length,s=0;s<o;s++)if(e[s].get("category")){if(n=e[s].get("category").split("."),i.descendants.hasOwnProperty(n[0]))for(t=i.descendants[n.shift()];n.length;)r=n.shift(),t=t.descendants.hasOwnProperty(r)?t.descendants[r]:t.descendants[r]={name:r,descendants:{},elements:[]};else this.createCategoriesInRoot(n,i);this.putElementInNamespace(e[s],i)}else i.elements.push(e[s]);return i},t.prototype.createCategoriesInRoot=function(e,t){var n,r=e.shift();for(n=t.descendants[r]={name:r,descendants:{},elements:[]};e.length;)r=e.shift(),n=n.descendants[r]={name:r,descendants:{},elements:[]}},t.prototype.putElementInNamespace=function(e,t){for(var n,r=e.get("category").split(".");r.length;){if(n=r.shift(),!t.descendants[n])throw new Error("Category not found");t=t.descendants[n]}t.elements.push(e)},t}(n.Model);t.CategorySearch=r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SearchView",["require","exports","backbone","underscore","CategorySearchView","CategorySearch"],function(e,t,n,r,i,s){"use strict";var a=s.CategorySearch,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"div"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"search-container row"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#search-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.app=e.attributes.app,this.appView=e.attributes.appView,this.listenTo(this,"add-element",this.elementClick),this.disabledMenus=e.attributes.disabledMenus,this.listenTo(this.app.searchElements,"add remove",this.render),this.categorySearchView=null},t.prototype.events=function(){return{"keyup .library-search-input":"searchKeyup"}},t.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.disabledMenus.undoRedo&&this.$("#undo-redo-menu").hide(),this.disabledMenus.manageMenu&&this.$("#manage-menu").hide(),this.disabledMenus.saveMenu&&this.$("#save-menu").hide(),this.$input=this.$(".library-search-input"),this.categorySearchView=new i({model:new a,attributes:{app:this.app,searchView:this}}),this.$el.append(this.categorySearchView.render().$el),this},t.prototype.addNode=function(e){var t=[];t[0]=this.app.newNodePosition[0]+50*Math.random(),t[1]=this.app.newNodePosition[1]+50*Math.random(),this.app.getCurrentWorkspace().addNodeByNameAndPosition(e.get("creationName"),t)},t.prototype.elementClick=function(e){var t=this.app.getCurrentWorkspace(),n=e.get("creationName");this.$input.focus(),(t.get("isCustomNode")||"Input"!==n&&"Output"!==n)&&this.addNode(e)},t.prototype.searchKeyup=function(e){if(38===e.keyCode)return void this.categorySearchView.moveSelection(i.direction.UP);if(40===e.keyCode)return void this.categorySearchView.moveSelection(i.direction.DOWN);{if(13!==e.keyCode)return 27===e.keyCode?(this.app.trigger("hide-search"),this.$input.val(""),void this.categorySearchView.expandElements("")):void r.debounce(function(){var e=this.$input.val();this.categorySearchView.expandElements(e),this.categorySearchView.resetSelection()}.bind(this),1e3)();if(this.categorySearchView.searchResults&&this.categorySearchView.searchResults.length>0){var t=this.categorySearchView.SelectedElementIndex==-1?0:this.categorySearchView.SelectedElementIndex,n=this.categorySearchView.searchResults[t];n&&this.elementClick(n.model)}}},t}(n.View);return l});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("WorkspaceControlsView",["require","exports","backbone","underscore","CategorySearchView","CategorySearch"],function(e,t,n,r,i,s){"use strict";var a=s.CategorySearch,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"div"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"workspace-search"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#workspace-search-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.app=e.attributes.app,this.appView=e.attributes.appView,this.listenTo(this,"add-element",this.elementClick),this.listenTo(this.app.searchElements,"add remove",this.render),this.$input=null,this.$list=null,this.mouseUp=!1,this.categorySearchView=null},t.prototype.events=function(){return{"keyup .library-search-input":"searchKeyup","focus .library-search-input":"focus","mousedown .library-search-input":"searchInputMouseDown","mouseup .library-search-input":"searchInputMouseUp","click #delete-button":"deleteClick","click #undo-button":"undoClick","click #redo-button":"redoClick","click #copy-button":"copyClick","click #paste-button":"pasteClick","click #export-button":"exportClick"}},t.prototype.render=function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.$input=this.$(".library-search-input"),this.categorySearchView=new i({model:new a,attributes:{app:this.app,searchView:this}}),this.$list=this.$el.find(".search-list-container").append(this.categorySearchView.render().$el),$(document).on("click",function(t){t.target!=e.$input[0]&&e.$list.hide()}),this.$el.find("#undo-button").tooltip({title:"Undo"}),this.$el.find("#redo-button").tooltip({title:"Redo"}),this.$el.find("#copy-button").tooltip({title:"Copy"}),this.$el.find("#paste-button").tooltip({title:"Paste"}),this.$el.find("#delete-button").tooltip({title:"Delete"}),this.$el.find("#export-button").tooltip({title:"Export as STL"}),$("#help-button").tooltip({title:"Help",placement:"left"}),$("#feedback-button").tooltip({title:"Feedback",placement:"left"}),$("#share-button").tooltip({title:"Share",placement:"left"}),this},t.prototype.focus=function(e){this.$list.show(),this.$(".library-search-input").select()},t.prototype.searchInputMouseDown=function(){this.$(".library-search-input").is(":focus")?this.mouseUp=!0:this.mouseUp=!1},t.prototype.searchInputMouseUp=function(){return this.mouseUp},t.prototype.deleteClick=function(){this.app.getCurrentWorkspace().removeSelected()},t.prototype.copyClick=function(){this.app.getCurrentWorkspace().copy()},t.prototype.pasteClick=function(){this.app.getCurrentWorkspace().paste()},t.prototype.undoClick=function(){this.app.getCurrentWorkspace().undo()},t.prototype.redoClick=function(){this.app.getCurrentWorkspace().redo()},t.prototype.exportClick=function(e){this.app.getCurrentWorkspace().exportSTL()},t.prototype.elementClick=function(e){var t=this.app.getCurrentWorkspace(),n=e.get("creationName");this.$input.focus(),(t.get("isCustomNode")||"Input"!==n&&"Output"!==n)&&this.addNode(e)},t.prototype.addNode=function(e){var t=this.appView.getCurrentWorkspaceCenter(),n=[];n[0]=t[0]+50*Math.random(),n[1]=t[1]+50*Math.random(),this.app.getCurrentWorkspace().addNodeByNameAndPosition(e.get("creationName"),n)},t.prototype.hideSearch=function(){this.$list.hide()},t.prototype.searchKeyup=function(e){if(38===e.keyCode)return void this.categorySearchView.moveSelection(i.direction.UP);if(40===e.keyCode)return void this.categorySearchView.moveSelection(i.direction.DOWN);{if(13!==e.keyCode)return 27===e.keyCode?(this.$input.val(""),void this.categorySearchView.expandElements("")):void r.debounce(function(){var e=this.$input.val();this.categorySearchView.expandElements(e),this.categorySearchView.resetSelection()}.bind(this),1e3)();if(this.categorySearchView.searchResults&&this.categorySearchView.searchResults.length>0){var t=this.categorySearchView.SelectedElementIndex==-1?0:this.categorySearchView.SelectedElementIndex,n=this.categorySearchView.searchResults[t];n&&this.elementClick(n.model)}}},t}(n.View);return l});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("HelpView",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#help"},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click .exit-help":"hide","click .enter-help-section":"clickEnterHelpSection","click .exit-all-help":"hide","click .exit-help-section":"clickExitHelpSection"}},t.prototype.initialize=function(e){this.app=e.attributes.app},t.prototype.render=function(){var e=_.template($("#help-section-template").html());return this.$el.empty(),this.model.get("sections").forEach(function(t){var n=$("#"+t.targetId);if(n.length){var r=n.offset(),i=n.height(),o=n.width();t.offset[0]<0&&(o=-10),t.offset[1]<0&&(i=-10,o-=10),t.elementPosition=[r.left+o,r.top+i],this.$el.append(e(t))}}.bind(this)),this},t.prototype.getHelpSection=function(e){var t=$(e.target),n=t.attr("data-target-id");return this.$el.find(".help-section[data-target-id='"+n+"']")},t.prototype.clickEnterHelpSection=function(e){var t=this.getHelpSection(e),n=$(e.target);t.fadeIn(),n.fadeOut()},t.prototype.clickExitHelpSection=function(e){var t=this.getHelpSection(e);t.fadeOut()},t.prototype.hide=function(){this.app.set("showingHelp",!1)},t}(n.View);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Help",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{sections:[{title:"Node Library",targetId:"bottom-search",offset:[5,-110],text:"This is one place where you can add new nodes.  You can also double click on the workspace to add nodes."},{title:"Workspace Browser",targetId:"workspace-browser-button",offset:[-170,0],text:"You can find all of your past work in the Workspace Browser"},{title:"Export STL",targetId:"export-button",offset:[20,-110],text:"Export all visible geometry to STL for 3D printing"}]}},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("FeedbackView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#feedback"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#feedback-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #exit-feedback":"clickExit","submit #submit-feedback":"clickSend","click #submit-feedback":"clickSend",click:"clickExit","click .modal-box":"stopPropagation"}},t.prototype.initialize=function(e){this.app=e.attributes.app,this.listenTo(this.model,"change:failure",this.fail),this.listenTo(this.model,"success",this.success)},t.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.subject=this.$el.find("#feedback-subject"),this.message=this.$el.find("#feedback-message"),this.failureView=this.$el.find("#feedback-failure-message"),this.successView=this.$el.find("#feedback-success-message"),this.sendingView=this.$el.find("#feedback-sending-message"),this},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.fail=function(){if(this.sendingView.hide(),this.failureView){if(!this.model.get("failure"))return void this.failureView.hide();this.failureView.html(this.model.get("failureMessage")),this.failureView.show()}},t.prototype.success=function(){this.sendingView.hide(),this.successView.show(),setTimeout(function(){this.app.set("showingFeedback",!1),this.subject.val(""),this.message.val(""),this.successView.fadeOut()}.bind(this),800)},t.prototype.clickExit=function(e){this.app.set("showingFeedback",!1)},t.prototype.clickSend=function(e){e.preventDefault(),this.sendingView.show(),this.model.send({subject:this.subject.val(),message:this.message.val()})},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Feedback",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{showing:!1,failure:!1,failureMessage:"Unidentified error"}},t.prototype.send=function(e){return e.subject?void $.post("/feedback",e,function(e){return e.length&&e.length>0?(this.set("failureMessage",e[0].message),this.set("failure",!0)):(this.set("failure",!1),void this.trigger("success"))}.bind(this)):(this.set("failureMessage","Please supply a subject for your feedback!"),void this.set("failure",!0))},t}(n.Model);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ShareView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#share"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#share-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #exit-share":"clickExit",click:"clickExit","click .modal-box":"stopPropagation","click .is-customizer-checkbox":"checkboxChanged"}},t.prototype.initialize=function(e){this.app=e.attributes.app},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.render=function(){var e=this.app.getCurrentWorkspace();return this.$el.html(this.template({name:e.get("name"),isCustomizer:e.get("isCustomizer"),url:e.getCustomizerUrl()})),e.isCustomizer||r.defer(function(){this.$el.find(".customizer-url").focus().select()}.bind(this)),this.updatePublicPrivate(),this},t.prototype.updatePublicPrivate=function(){this.app.getCurrentWorkspace().get("isCustomizer")?(this.$el.find(".is-customizer-checkbox").removeClass("fa-toggle-off"),this.$el.find(".is-customizer-checkbox").addClass("fa-toggle-on"),this.$el.find(".public").show(),this.$el.find(".private").hide()):(this.$el.find(".is-customizer-checkbox").removeClass("fa-toggle-on"),this.$el.find(".is-customizer-checkbox").addClass("fa-toggle-off"),this.$el.find(".public").hide(),this.$el.find(".private").show())},t.prototype.checkboxChanged=function(){var e=this.app.getCurrentWorkspace();e.set("isCustomizer",!e.get("isCustomizer")),this.updatePublicPrivate()},t.prototype.clickExit=function(e){this.app.set("showingShare",!1)},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Share",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.defaults=function(){return{isProjectWorkspace:!1}},t.prototype.initialize=function(e,t){this.app=e.app},t}(n.Model);return r}),function(){"use strict";function e(t,n){function i(e,t){return function(){return e.apply(t,arguments)}}var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,l=0,c=s.length;l<c;l++)a[s[l]]=i(a[s[l]],a);r&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,r){var i=Node.prototype.removeEventListener;"click"===e?i.call(t,e,n.hijacked||n,r):i.call(t,e,n,r)},t.addEventListener=function(e,n,r){var i=Node.prototype.addEventListener;"click"===e?i.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(t,e,n,r)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,r=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!r;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return r&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,n,a,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(c=e.changedTouches[0],u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=u.tagName.toLowerCase(),"label"===a){if(t=this.findControl(u)){if(this.focus(u),r)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-n>100||i&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),i&&"select"===a||(this.targetElement=null,e.preventDefault()),!1);return!(!i||o||(l=u.fastClickScrollParent,!l||l.fastClickLastScrollTop===l.scrollTop))||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;r&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,n,i,o;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!r)return!0;if(t=document.querySelector("meta[name=viewport]")){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof n&&"object"==typeof n.amd&&n.amd?n("fastclick",[],function(){
return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}();var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("LoggerView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#logger"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#logger-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.logger=e.attributes.logger,this.workspaceName=e.attributes.workspaceName},t.prototype.events=function(){return{"click #exit-logger":"clickExit",click:"clickExit","click .modal-box":"stopPropagation","click #logSaveAs":"saveLog"}},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.render=function(){if(this.logger.getLogMessages()){this.$el.html(this.template({messages:this.logger.getLogMessages()})),i("#lastExecutionTime").text(this.logger.getLastExecutionTime());var e=this.logger.getAverageExeuctionTime();i("#avgExecutionTime").text(isNaN(e)?0:parseFloat(e.toString()).toFixed(2))}return this},t.prototype.findAverage=function(e){return e.reduce(function(e,t){return parseFloat(e)+parseFloat(t)})/e.length},t.prototype.saveLog=function(){this.logger.writeLog({workspaceName:this.workspaceName})},t.prototype.clickExit=function(e){this.logger.trigger("closeLoggerView")},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("GraphView",["require","exports","backbone","jquery","WorkspaceView","Search","SearchView","WorkspaceControlsView","HelpView","Help","FeedbackView","Feedback","ShareView","Share","fastclick","LoggerView","settings","LogHelper"],function(e,t,n,r,i,s,a,l,c,u,p,h,d,f,m,g,y,v){"use strict";var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#app"},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click .workspaces_curtain":"endSearch","click #help-button":"toggleHelp","click #settings-button":"showSettings","click #feedback-button":"toggleFeedback","click #share-button":"toggleShare","click #logger-button":"toggleLogger","click #zoomin-button":"zoominClick","click #zoomout-button":"zoomoutClick","click #zoomreset-button":"zoomresetClick","click #pan-button":"panButtonClick","click #new-home-workspace":"newHomeClick","click #add-node-workspace":"newNodeWorkspace","click #login-button":"logout"}},t.prototype.initialize=function(e){var t=this;if(this.showingHelp=!1,this.showingSettings=!1,this.showingSearch=!1,this.showingLogin=!1,this.currentWorkspaceView=null,this.currentWorkspaceId=null,this.workspaceViews={},this.options=e||{},"undefined"!=typeof m){new m(document.body)}this.disabledMenus=this.options.disabledMenus||{},this.listenTo(this.model,"ws-data-loaded",this.zoomresetClick),this.listenTo(this.model,"change:showingFeedback",this.viewFeedback),this.listenTo(this.model,"change:showingSearch",this.showSearch),this.listenTo(this.model,"change:showingShare",this.viewShare),this.listenTo(this.model,"change:showingHelp",this.viewHelp),this.listenTo(this.model,"hide-search",this.hideSearch),this.listenTo(this.model,"change:showingLogger",this.viewLogger),this.listenToOnce(this.model,"change:isFirstExperience",this.showHelpOnFirstExperience),this.pendingRequestsCount=0,this.listenTo(this.model.get("workspaces"),"requestGeometry",function(){0===this.pendingRequestsCount&&this.showProgress(),this.pendingRequestsCount++}.bind(this)),this.listenTo(this.model,"geometry-data-received:event",function(){this.pendingRequestsCount--,0===this.pendingRequestsCount&&this.hideProgress()}.bind(this)),void 0!==r(document)&&(r(document).off("keydown"),r(document).on("keydown",r.proxy(this.keydownHandler,this)),r(document).bind("contextmenu",function(e){return!1})),this.listenTo(this.model,"change:currentWorkspace",this.setCamera.bind(this)),this.listenTo(this.model,"change:currentWorkspace",this.render.bind(this)),this.listenTo(this.model,"geometry-data-received:event",this.updateNodeGeometry),this.listenTo(this.model.get("workspaces"),"workspaceRemove",this.removeNodes),this.listenTo(this,"dispose",function(){t.dispose()}),this.listenTo(this.model.get("workspaces"),"showProgress",this.showProgress),this.listenTo(this.model.get("workspaces"),"hideProgress",this.hideProgress),this.listenTo(this.model,"hide-loading",function(){r("#login").hide();var e=this.model.get("workspaces").get(this.model.get("currentWorkspace"));e&&0!=e.get("nodes").length&&this.showProgress()}),this.listenTo(this.model.runner,"resend-wss-data:event",function(){this.model.trigger("resend-wss-data:event")}.bind(this))},t.prototype.toggleAddWorkspaceSelect=function(){r("#add-workspace-select-element").toggle()},t.prototype.showHelpOnFirstExperience=function(){setTimeout(function(){this.model.get("isFirstExperience")?this.model.set("showingHelp",!0):this.model.set("showingHelp",!1)}.bind(this),800)},t.prototype.keydownHandler=function(e){var t=46===e.keyCode||8===e.keyCode||27===e.keyCode;if(e.metaKey||e.ctrlKey||t){var n=["INPUT","CODE","TEXTAREA"],r=e.originalEvent.srcElement;r&&n.indexOf(r.nodeName)>-1||n.indexOf(e.target.nodeName)>-1||this.currentWorkspaceView&&this.currentWorkspaceView.keydownHandler(e)}},t.prototype.endSearch=function(){this.model.set("showingSearch",!1)},t.prototype.hideSearch=function(){this.model&&(this.model.set("showingSearch",!1),this.workspaceControlsView&&this.workspaceControlsView.hideSearch())},t.prototype.viewHelp=function(){this.helpView||(this.helpView=new c({model:new u,attributes:{app:this.model}})),this.model.get("showingHelp")===!0?(this.helpView.render(),this.helpView.$el.fadeIn()):this.helpView.$el.fadeOut()},t.prototype.viewFeedback=function(){this.feedbackView||(this.feedbackView=new p({model:new h,attributes:{app:this.model}}),this.feedbackView.render()),this.model.get("showingFeedback")===!0?this.feedbackView.$el.fadeIn():this.feedbackView.$el.fadeOut()},t.prototype.viewShare=function(){this.shareView||(this.shareView=new d({model:new f({app:this.model}),attributes:{app:this.model}})),this.model.get("showingShare")===!0?(this.shareView.render(),this.shareView.$el.fadeIn()):this.shareView.$el.fadeOut()},t.prototype.toggleHelp=function(){this.model.set("showingHelp",!this.model.get("showingHelp"))},t.prototype.toggleFeedback=function(){this.model.set("showingFeedback",!this.model.get("showingFeedback"))},t.prototype.toggleShare=function(){this.model.set("showingShare",!this.model.get("showingShare"))},t.prototype.showHelp=function(){this.model.set("showingHelp",!0)},t.prototype.hideHelp=function(){this.model.set("showingHelp",!1)},t.prototype.showFeedback=function(){this.model.set("showingFeedback",!0)},t.prototype.hideFeedback=function(){this.model.set("showingFeedback",!1)},t.prototype.showLogin=function(){this.model.set("showingLogin",!0)},t.prototype.showSettings=function(){},t.prototype.showSearch=function(){var e=this;this.model.get("showingSearch")===!0?(this.$el.find(".workspaces_curtain").css("display","block"),void 0===this.searchView?(this.searchView=new a({model:new s,attributes:{app:this.model,appView:this,disabledMenus:this.disabledMenus}}),this.searchView.render(),this.$el.find("#workspaces").prepend(this.searchView.$el)):this.$el.find(this.searchView.$el).css("display","block"),r(".workspace_container").addClass("blur"),setTimeout(function(){e.searchView.$el.find(".library-search-input").focus().select()})):(r(".workspace_container").removeClass("blur"),this.$el.find(".workspaces_curtain").css("display","none"),void 0!=this.searchView&&this.searchView.$el.css("display","none"))},t.prototype.zoomresetClick=function(){this.currentWorkspaceView.zoomAll()},t.prototype.zoominClick=function(){this.currentWorkspaceView.zoomIn()},t.prototype.zoomoutClick=function(){this.currentWorkspaceView.zoomOut()},t.prototype.panButtonClick=function(){this.currentWorkspaceView.trigger("togglePanMode")},t.prototype.getCurrentWorkspaceCenter=function(){var e=this.currentWorkspaceView.$el.width(),t=this.currentWorkspaceView.$el.height(),n=this.currentWorkspaceView.$el.scrollTop(),r=this.currentWorkspaceView.$el.scrollLeft(),i=1/this.currentWorkspaceView.zoom;return[i*(r+e/2),i*(n+t/2)]},t.prototype.getWorkspaceView=function(e){if(e){var t,n=e.get("_id");return this.workspaceViewIsInstantiated(n)?t=this.workspaceViews[n]:(t=new i({model:e}),this.workspaceViews[n]=t),t}},t.prototype.workspaceViewIsInstantiated=function(e){return void 0!=this.workspaceViews[e]},t.prototype.hideWorkspace=function(e){void 0!=e&&e.$el.hide()},t.prototype.showWorkspace=function(e){this.model.removeWorkspaceFromBackground(e.model.id),r.contains(document.documentElement,e.$el[0])||this.$el.children("#workspaces").append(this.currentWorkspaceView.$el),e.$el.show()},t.prototype.toggleLogger=function(){this.model.showingLogger=!this.model.showingLogger},t.prototype.viewLogger=function(){this.loggerView||(this.loggerView=new g({attributes:{logger:this.model.logger,workspaceName:this.model.get("workspaces").get(this.model.get("currentWorkspace")).name}})),this.model.showingLogger===!0?(this.loggerView.render(),this.loggerView.$el.fadeIn()):this.loggerView.$el.fadeOut()},t.prototype.render=function(){var e=this.$el.find("#app"),t=(this.model,this.model.get("workspaces"));if(t&&t.length>0){var n=this.model.get("currentWorkspace"),i=void 0;i=n?t.get(n):t.first(),this.workspaceControlsView||(this.workspaceControlsView=new l({model:new s,attributes:{app:this.model,appView:this}}),e.find("#workspaces").prepend(this.workspaceControlsView.$el),this.workspaceControlsView.render()),this.model.currentWorkspace&&i&&(this.hideWorkspace(this.currentWorkspaceView),this.currentWorkspaceView=this.getWorkspaceView(i),this.model.removeWorkspaceFromBackground(this.currentWorkspaceView.model.id),r.contains(document.documentElement,this.currentWorkspaceView.$el[0])||e.children("#workspaces").append(this.currentWorkspaceView.$el),this.currentWorkspaceView.$el.show(),this.currentWorkspaceView.render(),this.currentWorkspaceId=n),this.showSearch(),"dev"!=y.getEnv()&&r("#logger-button").hide(),e.find(r('[data-toggle="tooltip"]')).tooltip()}return this},t.prototype.getCurrentWorkspace=function(){return this.model.get("workspaces").get(this.model.get("currentWorkspace"))},t.prototype.showProgress=function(){this.$el.find(".busy-indicator").show()},t.prototype.hideProgress=function(){this.$el.find(".busy-indicator").hide()},t.prototype.updateNodeGeometry=function(e){var t=(e.geometryData.nodeId,!1),n=!1,r=this.model.getCurrentWorkspace();if(r){var i=r.SearchForNodeById(e.geometryData.nodeId);if(!i)return;t=i.get("visible"),n=i.get("selected")}if(this.model.trigger("geometryUpdated",{data:e,visible:t,selected:n}),0==this.pendingRequestsCount){var o=v.getCurrentTimeStamp();v.calculateGraphExecutionTime(r,v.graphRunStartTime,o,this.model.get("logger")),v.graphRunStartTime=0}},t.prototype.removeNodes=function(e){var t=this;e.nodes.forEach(function(e){t.model.trigger("nodeRemoved",e.id)})},t.prototype.setCamera=function(){var e=this.model.getCurrentWorkspaceCamera();e&&this.model.trigger("setCamera",e)},t.prototype.dispose=function(){this.currentWorkspaceView.dispose(),this.stopListening(),this.undelegateEvents()},t}(n.View);return b});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("SaveUploaderView",["require","exports","backbone"],function(e,t,n){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#save-upload"},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #saveas-file-button":"saveFile","change #openfile":"loadSelectedFile"}},t.prototype.initialize=function(e){this.configViewElements()},t.prototype.configViewElements=function(){this.$el.addClass("no-save-button"),this.$el.find("#savefile").hide(),this.$el.find("#saveas-file-button div").removeClass("over-hidden-file-input")},t.prototype.clearHomeWorkspace=function(){this.model.clearHomeWorkspace()},t.prototype.saveFile=function(){this.model.saveFile()},t.prototype.loadSelectedFile=function(e){var t=e.target.files;t&&1===t.length&&(this.model.app.socket.send(t[0]),e.target.value=null)},t}(n.View);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CameraDataMessage",["require","exports","BaseMessage"],function(e,t,n){"use strict";var r=function(e){function t(t,n){var r=e.call(this,"CameraDataMessage")||this;return r.workspaceGuid=t,r.cameraData=n,r}return o(t,e),t}(n);return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("DynamoGraphView",["require","exports","underscore","jquery","GraphView","SaveUploaderView","CameraDataMessage"],function(e,t,n,r,i,s,a){"use strict";var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.events=function(){var e=i.prototype.events.apply(this);return e=n.extend(e,{"click #save-button":"saveClick"})},t.prototype.initialize=function(e){i.prototype.initialize.call(this,e),this.saveUploaderView=new s({model:this.model.saveUploader,attributes:{appView:this}}),this.listenTo(this.model,"send-camera-info",this.sendCameraData),r("#login").hide()},t.prototype.sendCameraData=function(e){var t=this.model.getCurrentWorkspace().get("camera");if(t){var n=new a(e,t);this.model.socket.send(JSON.stringify(n))}},t.prototype.saveClick=function(){this.model.sync("update",this.model)},t.prototype.newHomeClick=function(){this.saveUploaderView.clearHomeWorkspace()},t}(i);return l});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CustomizerErrorsView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#customizer-errors-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.listenTo(this.model,"errorListChanged",this.render)},t.prototype.render=function(){this.$content=this.$el.find("#customizer-errors");var e=this.model.nodeErrorMap,t="",n=0;for(var r in e)e.hasOwnProperty(r)&&(t+="<p>"+e[r]+"</p>",n++);return this.$content.html(this.template({errors:t,errCount:n})),this},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CustomizerDescriptionView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#description-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.listenTo(this.model,"change",this.render)},t.prototype.render=function(){return this.$content=this.$el.find("#customizer-description-container"),void 0!=this.model.maintainers&&this.$content.html(this.template(this.model.toJSON())),this},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CustomizerWorkspaceView",["require","exports","backbone","underscore","jquery","CustomizerErrorsView","CustomizerDescriptionView","NodeFactory"],function(e,t,n,r,i,s,a,l){"use strict";var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#workspace-template").html())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"el",{get:function(){return"#customizer-workspace"},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.hasWidgets=!1,this.visible=!0,this.widgetViews=[]},t.prototype.buildWidget=function(e){if(!e.get("extra")||!e.get("extra").lock){var t=l.searchForNodeTypeInMap(e.typeName);if(t&&t.nodeWidgetConstructor){var n=t.nodeWidgetConstructor,r=new n({model:e});this.widgetViews.push(r),this.$content.append(r.render().$el),this.hasWidgets=!0}}},t.prototype.render=function(){this.disposeWidgets();return this.customizerDescriptionView=new a({model:this.model}),this.customizerDescriptionView.setElement(this.$el).render(),this.customizerErrorsView=new s({model:this.model}),this.customizerErrorsView.setElement(this.$el).render(),this.$content=this.$el.find("#customizer-workspace-content"),this.setElement(this.$content),this.$content.empty(),this.model.get("nodes").each(this.buildWidget.bind(this)),this},t.prototype.disposeWidgets=function(){for(var e in this.widgetViews)this.widgetViews[e].dispose();return!0},t.prototype.dispose=function(){this.disposeWidgets(),this.undelegateEvents(),n.View.prototype.remove.call(this)},t}(n.View);return c});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CustomizerAppView",["require","exports","backbone","jquery","CustomizerWorkspaceView","CameraDataMessage"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#customizer-app"},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #renderer_canvas":"escapeInputs"}},t.prototype.initialize=function(e){var t=this;return this.listenTo(this.model,"hide-loading",function(){r("#login").hide(),r(".login-container .long-wait").hide()}),setTimeout(function(){r(".login-container .long-wait").show()},3e3),this.listenTo(this.model,"change:currentWorkspace",this.setCamera),this.listenTo(this.model,"change:currentWorkspace",this.render.bind(this)),this.listenTo(this.model,"send-camera-info",this.sendCameraData),this.listenTo(this.model.runner,"resend-wss-data:event",function(){this.model.trigger("resend-wss-data:event")}.bind(this)),this.listenTo(this,"dispose",function(){t.dispose()}),this},t.prototype.sendCameraData=function(e){var t=this.model.getCurrentWorkspace().camera;if(t){var n=new s(e,t);this.model.runner.post({kind:"post",message:JSON.stringify(n)})}},t.prototype.setCamera=function(){this.model.getCurrentWorkspaceCamera()},t.prototype.render=function(){if(this.model.get("workspaces").length>0){this.listenTo(this.model,"geometry-data-received:event",this.updateNodeGeometry);var e=this.model.getCurrentWorkspace();this.customizerWorkspaceView=new i({model:e}),this.customizerWorkspaceView.setElement(this.$el).render(),this.listenTo(e,"updateCustomizer",this.updateWidgets),r('[data-toggle="tooltip"]').tooltip()}return this},t.prototype.escapeInputs=function(e){e.target===e.currentTarget&&r(":focus").blur()},t.prototype.updateNodeGeometry=function(e){var t=(e.geometryData.nodeId,!1),n=!1,r=this.model.getCurrentWorkspace();if(r){var i=r.SearchForNodeById(e.geometryData.nodeId);if(!i)return;t=i.visible,n=i.selected}this.model.trigger("geometryUpdated",{data:e,visible:t,selected:n})},t.prototype.updateWidgets=function(e){this.customizerWorkspaceView.setElement(this.$el).render()},t.prototype.dispose=function(){this.customizerWorkspaceView.dispose(),this.stopListening(),this.undelegateEvents()},t}(n.View);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ManagerApp",["require","exports","backbone","WorkspaceElements","Storage"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"workspaces",{get:function(){return this.get("workspaces")},set:function(e){this.set("workspaces",e)},enumerable:!0,configurable:!0}),t.prototype.defaults=function(){return{workspaces:null}},t.prototype.initialize=function(e,t){this.context=e.storage||new i({baseUrl:""}),this.workspaces=new r(null,{app:this})},t.prototype.fetch=function(e){return this.get("workspaces").fetch()},t.prototype.refresh=function(){this.get("workspaces").reset(),this.get("workspaces").fetch()},t}(n.Model);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ManageWorkspaceView",["require","exports","backbone","underscore","jquery","staticHelpers"],function(e,t,n,r,i,s){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return"tr"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"record-class"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#workspace-record-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #edit-button":"editClicked","click #delete-button":"deleteClicked","click #share-button":"shareClicked","click #open-workspace-button":"openWorkspaceClicked",mouseenter:"hoverOn",mouseleave:"hoverOff"}},t.prototype.initialize=function(e){this.app=e.attributes.app},t.prototype.render=function(){var e=this.model.toJSON(),t=this.model.get("lastSaved");return"string"==typeof t?e.prettyDate=s.getPrettyDate(new Date(t)):e.prettyDate="Unknown",this.$el.html(this.template(e)),this},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.hoverOn=function(){this.trigger("hover-record",this)},t.prototype.hoverOff=function(){this.trigger("unhover-record",this)},t.prototype.editClicked=function(){this.trigger("edit-clicked",this.model)},t.prototype.deleteClicked=function(){this.trigger("delete-clicked",this.model)},t.prototype.shareClicked=function(){this.trigger("share-clicked",this.model)},t.prototype.openWorkspaceClicked=function(){this.trigger("open-workspace-clicked",this.model)},t}(n.View);return a});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ShareCustomizerView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#share-customizer"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#share-customizer-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #manager-exit-share":"clickExit",click:"clickExit","click #wrapper-customizer-share":"stopPropagation"}},t.prototype.initialize=function(e){this.id=e.attributes.id},t.prototype.render=function(){return this.$el.html(this.template({url:this.getCustomizerUrl(this.id)})),this},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.getCustomizerUrl=function(e){var t=document.URL.match(/:\/\/(.[^\/]+)/)[1];return t+"/share/"+e},t.prototype.clickExit=function(){this.$el.fadeOut()},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("EditWorkspaceDetailsView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#workspace-edit"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#editor-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{click:"clickExit","click #editor-box":"stopPropagation","click #save-workspace":"clickSave","click #exit":"clickExit"}},t.prototype.initialize=function(e){this.content=e.attributes.content},t.prototype.render=function(){return this.$el.html(this.template(this.content.toJSON())),this.copyable=this.$el.find("#workspace-copyable"),this.name=this.$el.find("#workspace-name"),this.description=this.$el.find("#workspace-description"),this.failureView=this.$el.find("#manager-failure-message"),this},t.prototype.setContent=function(e){this.content=e},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.clickSave=function(e){var t=this.copyable.is(":checked"),n=this.name.val(),r=this.description.val();return n?(this.failureView.hide(),this.content.set("isCustomizer",t),this.content.set("name",n),this.content.set("description",r),this.trigger("request-update-workspace",this.content),void this.$el.fadeOut()):(this.failureView.html("Name may not be empty"),void this.failureView.show())},t.prototype.clickExit=function(){this.$el.fadeOut()},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("WorkspaceDeleteView",["require","exports","backbone","underscore","jquery"],function(e,t,n,r,i){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#delete-workspace"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#delete-template").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #cancel-delete-button":"clickExit",click:"clickExit","click #wrapper-delete":"stopPropagation","click #confirm-delete-button":"triggerConfirmDelete"}},t.prototype.initialize=function(e){this.app=e.attributes.app,this.model=e.model},t.prototype.render=function(){return this.$el.html(this.template()),this},t.prototype.triggerConfirmDelete=function(e){this.app.trigger("confirm-delete",this.model),e.stopPropagation()},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.clickExit=function(e){this.app.trigger("cancel-delete")},t}(n.View);return s});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ManagerView",["require","exports","backbone","underscore","jquery","ManageWorkspaceView","ShareCustomizerView","EditWorkspaceDetailsView","WorkspaceDeleteView","perfectscrollbar"],function(e,t,n,r,i,s,a,l,c,u){"use strict";var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return"#manager-popup"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return r.template(i("#manager-main-template").html())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageTemplate",{get:function(){return r.template(i("#record-images").html())},enumerable:!0,configurable:!0}),t.prototype.events=function(){return{"click #header-name":"sortByName","click #header-date":"sortByDate","click #header-description":"sortByDescription","click #exit-manager":"clickExit"}},t.prototype.initialize=function(e){this.listenTo(this.model,"call-render",this.render),this.listenTo(this.model,"workspaces-fetched",this.renderWorkspaceElements),this.listenTo(this.model,"change:showingShare",this.share),this.listenTo(this.model.get("workspaces"),"sort",this.renderWorkspaceElements),this.sortedByName=!1,this.sortedByDescription=!1,this.sortedByDate=!0,this.listenTo(this.model,"cancel-delete",this.cancelDelete)},t.prototype.render=function(){this.$el.html(this.template(this.model.toJSON())),this.workspaceRecords=this.$el.find("#workspace-table-records");var e=this;return i("#manager-search").on("input",function(t){var n=i(this).val().toLowerCase();e.model.workspaces.where({isCustomNode:!1}).forEach(function(e){e.get("name").toLowerCase().indexOf(n)!==-1?e.set("hidden",!1):e.set("hidden",!0)}),e.renderWorkspaceElements()}),this.model.fetch(),this},t.prototype.renderWorkspaceElements=function(){var e=this,t=this.$el.find("#manager-table-container");this.workspaceRecords.empty(),this.unselect();var n=this.model.get("workspaces").where({isCustomNode:!1});return 0===n.length?void i("#empty-workspaces").show():(n.forEach(function(t){if(!t.get("hidden")){var n=new s({model:t,attributes:{app:e.model}});e.listenTo(n,"hover-record",e.recordButtonsShow),
e.listenTo(n,"unhover-record",e.recordButtonsHide),e.listenTo(n,"unselect-all",e.unselect),n.render(),e.workspaceRecords.append(n.$el)}}),u.destroy(t[0]),void u.initialize(t[0],{maxScrollbarLength:160,minScrollbarLength:90}))},t.prototype.unselect=function(){this.model.workspaces.forEach(function(e){e.set("selected",!1)})},t.prototype.recordButtonsShow=function(e){e.$el.find(".ws-date-edited").find("#workspace-record-controls").html(this.imageTemplate(e.model.toJSON())),this.listenTo(e,"edit-clicked",this.edit),this.listenTo(e,"delete-clicked",this.viewDelete),this.listenTo(e,"share-clicked",this.share),this.listenTo(e,"open-workspace-clicked",this.openWorkspace)},t.prototype.recordButtonsHide=function(e){e.$el.find(".ws-date-edited").find("#workspace-record-controls").html(""),this.stopListening(e,"edit-clicked"),this.stopListening(e,"delete-clicked"),this.stopListening(e,"share-clicked"),this.stopListening(e,"open-workspace-clicked",this.openWorkspace)},t.prototype.edit=function(e){this.editor?this.editor.setContent(e):(this.editor=new l({attributes:{content:e}}),this.listenTo(this.editor,"request-update-workspace",this.updateWorkspace)),this.editor.render(),this.editor.$el.fadeIn()},t.prototype.updateWorkspace=function(e){this.model.context.updateWorkspace(e),this.renderWorkspaceElements()},t.prototype.viewDelete=function(e){this.deleteView=new c({attributes:{app:this.model},model:e}),this.deleteView.render(),this.deleteView.$el.fadeIn(),this.listenToOnce(this.model,"confirm-delete",this.delete)},t.prototype.delete=function(e){this.model.context.deleteWorkspace(e.get("_id")),this.model.get("workspaces").remove(e),this.deleteView.$el.fadeOut(),this.deleteView.undelegateEvents(),this.deleteView=null,this.renderWorkspaceElements()},t.prototype.share=function(e){this.shareView=new a({attributes:{id:e.get("_id")}}),this.shareView.render(),this.shareView.$el.fadeIn()},t.prototype.cancelDelete=function(){this.stopListening(this.model,"confirm-delete"),this.deleteView.$el.fadeOut()},t.prototype.toggleShare=function(){this.model.set("showingShare",!this.model.get("showingShare"))},t.prototype.comparator=function(e,t){return function(n,r){var i=n.get(e),o=r.get(e);return i>o?t:i<o?-t:0}},t.prototype.sortByName=function(){this.sortedByName?(this.model.get("workspaces").comparator=this.comparator("name",-1),this.sortedByName=!1,i("#sort-arrow-name").html('<i class="fa fa-sort-desc"></i>')):(this.model.get("workspaces").comparator=this.comparator("name",1),i("#sort-arrow-name").html('<i class="fa fa-sort-asc"></i>'),this.sortedByName=!0),this.model.get("workspaces").sort(),i("#sort-arrow-date").html('<i class="fa fa-unsorted"></i>'),i("#sort-arrow-desc").html('<i class="fa fa-unsorted"></i>')},t.prototype.sortByDate=function(){this.sortedByDate?(this.model.get("workspaces").comparator=this.comparator("lastSaved",1),this.sortedByDate=!1,i("#sort-arrow-date").html('<i class="fa fa-sort-desc"></i>')):(this.model.get("workspaces").comparator=this.comparator("lastSaved",-1),this.sortedByDate=!0,i("#sort-arrow-date").html('<i class="fa fa-sort-asc"></i>')),this.model.get("workspaces").sort(),i("#sort-arrow-desc").html('<i class="fa fa-unsorted"></i>'),i("#sort-arrow-name").html('<i class="fa fa-unsorted"></i>')},t.prototype.sortByDescription=function(){this.sortedByDescription?(this.model.get("workspaces").comparator=this.comparator("description",1),this.sortedByDescription=!1,i("#sort-arrow-desc").html('<i class="fa fa-sort-desc"></i>')):(this.model.get("workspaces").comparator=this.comparator("description",-1),this.sortedByDescription=!0,i("#sort-arrow-desc").html('<i class="fa fa-sort-asc"></i>')),this.model.get("workspaces").sort(),i("#sort-arrow-desc").html('<i class="fa fa-unsorted"></i>'),i("#sort-arrow-name").html('<i class="fa fa-unsorted"></i>')},t.prototype.openWorkspace=function(e){this.model.trigger("openWorkspace",{id:e.get("_id")})},t.prototype.showCustomizer=function(e){window.location.href="/share/"+e.get("_id")},t.prototype.clickExit=function(){this.model.trigger("exitManager")},t.prototype.stopPropagation=function(e){e.stopPropagation()},t}(n.View);return p}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof n&&n.amd)n("swaggerClient",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.SwaggerClient=e()}}(function(){var e;return function e(n,r,i){function o(a,l){if(!r[a]){if(!n[a]){var c="function"==typeof t&&t;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[a]={exports:{}};n[a][0].call(p.exports,function(e){var t=n[a][1][e];return o(t?t:e)},p,p.exports,e,n,r,i)}return r[a].exports}for(var s="function"==typeof t&&t,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";var r=e("./lib/auth"),i=e("./lib/helpers"),o=e("./lib/client"),s=function(e,t){return i.log('This is deprecated, use "new SwaggerClient" instead.'),new o(e,t)};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;r>n;n++)if(this[n]===e)return n;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),t.exports=o,o.ApiKeyAuthorization=r.ApiKeyAuthorization,o.PasswordAuthorization=r.PasswordAuthorization,o.CookieAuthorization=r.CookieAuthorization,o.SwaggerApi=s,o.SwaggerClient=s,o.SchemaMarkup=e("./lib/schema-markup")},{"./lib/auth":2,"./lib/client":3,"./lib/helpers":4,"./lib/schema-markup":7}],2:[function(e,t,n){"use strict";var r=e("./helpers"),i=e("btoa"),o=e("cookiejar").CookieJar,s={each:e("lodash-compat/collection/each"),includes:e("lodash-compat/collection/includes"),isObject:e("lodash-compat/lang/isObject"),isArray:e("lodash-compat/lang/isArray")},a=t.exports.SwaggerAuthorizations=function(e){this.authz=e||{}};a.prototype.add=function(e,t){if(s.isObject(e))for(var n in e)this.authz[n]=e[n];else"string"==typeof e&&(this.authz[e]=t);return t},a.prototype.remove=function(e){return delete this.authz[e]},a.prototype.apply=function(e,t){var n=!0,r=!t,i=[],o=e.clientAuthorizations||this.authz;return s.each(t,function(e,t){"string"==typeof t&&i.push(t),s.each(e,function(e,t){i.push(t)})}),s.each(o,function(t,o){if(r||s.includes(i,o)){var a=t.apply(e);n=n&&!!a}}),n};var l=t.exports.ApiKeyAuthorization=function(e,t,n){this.name=e,this.value=t,this.type=n};l.prototype.apply=function(e){if("query"===this.type){var t;if(e.url.indexOf("?")>0){t=e.url.substring(e.url.indexOf("?")+1);var n=t.split("&");if(n&&n.length>0)for(var r=0;r<n.length;r++){var i=n[r].split("=");if(i&&i.length>0&&i[0]===this.name)return!1}}return e.url.indexOf("?")>0?e.url=e.url+"&"+this.name+"="+this.value:e.url=e.url+"?"+this.name+"="+this.value,!0}return"header"===this.type?("undefined"==typeof e.headers[this.name]&&(e.headers[this.name]=this.value),!0):void 0};var c=t.exports.CookieAuthorization=function(e){this.cookie=e};c.prototype.apply=function(e){return e.cookieJar=e.cookieJar||new o,e.cookieJar.setCookie(this.cookie),!0};var u=t.exports.PasswordAuthorization=function(e,t){3===arguments.length&&(r.log("PasswordAuthorization: the 'name' argument has been removed, pass only username and password"),e=arguments[1],t=arguments[2]),this.username=e,this.password=t};u.prototype.apply=function(e){return"undefined"==typeof e.headers.Authorization&&(e.headers.Authorization="Basic "+i(this.username+":"+this.password)),!0}},{"./helpers":4,btoa:13,cookiejar:18,"lodash-compat/collection/each":52,"lodash-compat/collection/includes":55,"lodash-compat/lang/isArray":140,"lodash-compat/lang/isObject":144}],3:[function(e,t,n){"use strict";var r={bind:e("lodash-compat/function/bind"),cloneDeep:e("lodash-compat/lang/cloneDeep"),find:e("lodash-compat/collection/find"),forEach:e("lodash-compat/collection/forEach"),indexOf:e("lodash-compat/array/indexOf"),isArray:e("lodash-compat/lang/isArray"),isObject:e("lodash-compat/lang/isObject"),isFunction:e("lodash-compat/lang/isFunction"),isPlainObject:e("lodash-compat/lang/isPlainObject"),isUndefined:e("lodash-compat/lang/isUndefined")},i=e("./auth"),o=e("./helpers"),s=e("./types/model"),a=e("./types/operation"),l=e("./types/operationGroup"),c=e("./resolver"),u=e("./http"),p=e("./spec-converter"),h=e("q"),d=["apis","authorizationScheme","authorizations","basePath","build","buildFrom1_1Spec","buildFrom1_2Spec","buildFromSpec","clientAuthorizations","convertInfo","debug","defaultErrorCallback","defaultSuccessCallback","enableCookies","fail","failure","finish","help","host","idFromOp","info","initialize","isBuilt","isValid","modelPropertyMacro","models","modelsArray","options","parameterMacro","parseUri","progress","resourceCount","sampleModels","selfReflect","setConsolidatedModels","spec","supportedSubmitMethods","swaggerRequestHeaders","tagFromLabel","title","url","useJQuery","jqueryAjaxCache"],f=["apis","asCurl","description","externalDocs","help","label","name","operation","operations","operationsArray","path","tag"],m=["delete","get","head","options","patch","post","put"],g=t.exports=function(e,t){return this.authorizations=null,this.authorizationScheme=null,this.basePath=null,this.debug=!1,this.enableCookies=!1,this.info=null,this.isBuilt=!1,this.isValid=!1,this.modelsArray=[],this.resourceCount=0,this.url=null,this.useJQuery=!1,this.jqueryAjaxCache=!1,this.swaggerObject={},this.deferredClient=void 0,this.clientAuthorizations=new i.SwaggerAuthorizations,"undefined"!=typeof e?this.initialize(e,t):this};g.prototype.initialize=function(e,t){return this.models={},this.sampleModels={},"string"==typeof e?this.url=e:r.isObject(e)&&(t=e,this.url=t.url),this.url&&-1===this.url.indexOf("http:")&&-1===this.url.indexOf("https:")&&"undefined"!=typeof window&&"undefined"!=typeof window.location&&(this.url=window.location.origin+this.url),t=t||{},this.clientAuthorizations.add(t.authorizations),this.swaggerRequestHeaders=t.swaggerRequestHeaders||"application/json;charset=utf-8,*/*",this.defaultSuccessCallback=t.defaultSuccessCallback||null,this.defaultErrorCallback=t.defaultErrorCallback||null,this.modelPropertyMacro=t.modelPropertyMacro||null,this.connectionAgent=t.connectionAgent||null,this.parameterMacro=t.parameterMacro||null,this.usePromise=t.usePromise||null,this.timeout=t.timeout||null,this.fetchSpecTimeout="undefined"!=typeof t.fetchSpecTimeout?t.fetchSpecTimeout:t.timeout||null,this.usePromise&&(this.deferredClient=h.defer()),"function"==typeof t.success&&(this.success=t.success),t.useJQuery&&(this.useJQuery=t.useJQuery),t.jqueryAjaxCache&&(this.jqueryAjaxCache=t.jqueryAjaxCache),t.enableCookies&&(this.enableCookies=t.enableCookies),this.options=t||{},this.options.timeout=this.timeout,this.options.fetchSpecTimeout=this.fetchSpecTimeout,this.supportedSubmitMethods=t.supportedSubmitMethods||[],this.failure=t.failure||function(e){throw e},this.progress=t.progress||function(){},this.spec=r.cloneDeep(t.spec),t.scheme&&(this.scheme=t.scheme),this.usePromise||"function"==typeof t.success?(this.ready=!0,this.build()):void 0},g.prototype.build=function(e){if(this.isBuilt)return this;var t=this;this.spec?this.progress("fetching resource list; Please wait."):this.progress("fetching resource list: "+this.url+"; Please wait.");var n={useJQuery:this.useJQuery,jqueryAjaxCache:this.jqueryAjaxCache,connectionAgent:this.connectionAgent,enableCookies:this.enableCookies,url:this.url,method:"get",headers:{accept:this.swaggerRequestHeaders},on:{error:function(e){return t&&t.url&&"http"!==t.url.substring(0,4)?t.fail("Please specify the protocol for "+t.url):!e.errObj||"ECONNABORTED"!==e.errObj.code&&-1===e.errObj.message.indexOf("timeout")?0===e.status?t.fail("Can't read from server.  It may not have the appropriate access-control-origin settings."):404===e.status?t.fail("Can't read swagger JSON from "+t.url):t.fail(e.status+" : "+e.statusText+" "+t.url):t.fail("Request timed out after "+t.fetchSpecTimeout+"ms")},response:function(e){var n=e.obj;if(!n)return t.fail("failed to parse JSON/YAML response");if(t.swaggerVersion=n.swaggerVersion,t.swaggerObject=n,n.swagger&&2===parseInt(n.swagger))t.swaggerVersion=n.swagger,(new c).resolve(n,t.url,t.buildFromSpec,t),t.isValid=!0;else{var r=new p;t.oldSwaggerObject=t.swaggerObject,r.setDocumentationLocation(t.url),r.convert(n,t.clientAuthorizations,t.options,function(e){t.swaggerObject=e,(new c).resolve(e,t.url,t.buildFromSpec,t),t.isValid=!0})}}}};if(this.fetchSpecTimeout&&(n.timeout=this.fetchSpecTimeout),this.spec&&"object"==typeof this.spec)t.swaggerObject=this.spec,setTimeout(function(){(new c).resolve(t.spec,t.url,t.buildFromSpec,t)},10);else{if(this.clientAuthorizations.apply(n),e)return n;(new u).execute(n,this.options)}return this.usePromise?this.deferredClient.promise:this},g.prototype.buildFromSpec=function(e){if(this.isBuilt)return this;this.apis={},this.apisArray=[],this.basePath=e.basePath||"",this.consumes=e.consumes,this.host=e.host||"",this.info=e.info||{},this.produces=e.produces,this.schemes=e.schemes||[],this.securityDefinitions=r.cloneDeep(e.securityDefinitions),this.security=e.security,this.title=e.title||"";var t,n,i,c,u={},p=this;if(e.externalDocs&&(this.externalDocs=e.externalDocs),this.authSchemes=this.securityDefinitions,this.securityDefinitions)for(t in this.securityDefinitions){var h=this.securityDefinitions[t];h.vendorExtensions={};for(var g in h)if(o.extractExtensions(g,h),"scopes"===g){var y=h[g];if("object"==typeof y){y.vendorExtensions={};for(var v in y)o.extractExtensions(v,y),0===v.indexOf("x-")&&delete y[v]}}}if(Array.isArray(e.tags))for(u={},n=0;n<e.tags.length;n++){var b=r.cloneDeep(e.tags[n]);u[b.name]=b;for(c in b){if("externalDocs"===c&&"object"==typeof b[c])for(var S in b[c])o.extractExtensions(S,b[c]);o.extractExtensions(c,b)}}if("string"==typeof this.url){if(i=this.parseUri(this.url),"undefined"==typeof this.scheme&&"undefined"==typeof this.schemes||0===this.schemes.length)"undefined"!=typeof i&&"undefined"!=typeof i.scheme&&(this.scheme=i.scheme),"undefined"!=typeof window&&"undefined"!=typeof window.location?this.scheme=window.location.protocol.replace(":",""):this.scheme=i.scheme||"http";else if("undefined"!=typeof window&&"undefined"!=typeof window.location&&0===window.location.protocol.indexOf("chrome-extension"))this.scheme=i.scheme;else if("undefined"==typeof this.scheme)if("undefined"!=typeof window&&"undefined"!=typeof window.location){var w=window.location.protocol.replace(":","");"https"===w&&-1===this.schemes.indexOf(w)?(o.log("Cannot call a http server from https inside a browser!"),this.scheme="http"):-1!==this.schemes.indexOf(w)?this.scheme=w:-1!==this.schemes.indexOf("https")?this.scheme="https":this.scheme="http"}else this.scheme=this.schemes[0]||i.scheme;"undefined"!=typeof this.host&&""!==this.host||(this.host=i.host,i.port&&(this.host=this.host+":"+i.port))}else"undefined"==typeof this.schemes||0===this.schemes.length?this.scheme="http":"undefined"==typeof this.scheme&&(this.scheme=this.schemes[0]);this.definitions=e.definitions;for(t in this.definitions){var x=new s(t,this.definitions[t],this.models,this.modelPropertyMacro);x&&(this.models[t]=x)}p.apis.help=r.bind(p.help,p),r.forEach(e.paths,function(e,t){r.isPlainObject(e)&&r.forEach(m,function(n){var i=e[n];if(!r.isUndefined(i)){if(!r.isPlainObject(i))return void o.log("The '"+n+"' operation for '"+t+"' path is not an Operation Object");var s=i.tags;!r.isUndefined(s)&&r.isArray(s)&&0!==s.length||(s=i.tags=["default"]);var h=p.idFromOp(t,n,i),m=new a(p,i.scheme,h,n,t,i,p.definitions,p.models,p.clientAuthorizations);m.connectionAgent=p.connectionAgent,m.vendorExtensions={};for(c in i)o.extractExtensions(c,m,i[c]);if(m.externalDocs=i.externalDocs,m.externalDocs){m.externalDocs=r.cloneDeep(m.externalDocs),m.externalDocs.vendorExtensions={};for(c in m.externalDocs)o.extractExtensions(c,m.externalDocs)}r.forEach(s,function(e){var t=r.indexOf(d,e)>-1?"_"+e:e,n=r.indexOf(f,e)>-1?"_"+e:e,i=p[t];if(t!==e&&o.log("The '"+e+"' tag conflicts with a SwaggerClient function/property name.  Use 'client."+t+"' or 'client.apis."+e+"' instead of 'client."+e+"'."),n!==e&&o.log("The '"+e+"' tag conflicts with a SwaggerClient operation function/property name.  Use 'client.apis."+n+"' instead of 'client.apis."+e+"'."),r.indexOf(f,h)>-1&&(o.log("The '"+h+"' operationId conflicts with a SwaggerClient operation function/property name.  Use 'client.apis."+n+"._"+h+"' instead of 'client.apis."+n+"."+h+"'."),h="_"+h,m.nickname=h),r.isUndefined(i)){i=p[t]=p.apis[n]={},i.operations={},i.label=n,i.apis={};var s=u[e];r.isUndefined(s)||(i.description=s.description,i.externalDocs=s.externalDocs,i.vendorExtensions=s.vendorExtensions),p[t].help=r.bind(p.help,i),p.apisArray.push(new l(e,i.description,i.externalDocs,m))}h=p.makeUniqueOperationId(h,p.apis[n]),r.isFunction(i.help)||(i.help=r.bind(p.help,i)),p.apis[n][h]=i[h]=r.bind(m.execute,m),p.apis[n][h].help=i[h].help=r.bind(m.help,m),p.apis[n][h].asCurl=i[h].asCurl=r.bind(m.asCurl,m),i.apis[h]=i.operations[h]=m;var a=r.find(p.apisArray,function(t){return t.tag===e});a&&a.operationsArray.push(m)})}})});var C=[];return r.forEach(Object.keys(u),function(e){var t;for(t in p.apisArray){var n=p.apisArray[t];n&&e===n.name&&(C.push(n),p.apisArray[t]=null)}}),r.forEach(p.apisArray,function(e){e&&C.push(e)}),p.apisArray=C,r.forEach(e.definitions,function(e,t){e.id=t.toLowerCase(),e.name=t,p.modelsArray.push(e)}),this.isBuilt=!0,this.usePromise?(this.isValid=!0,this.isBuilt=!0,this.deferredClient.resolve(this),this.deferredClient.promise):(this.success&&this.success(),this)},g.prototype.makeUniqueOperationId=function(e,t){for(var n=0,i=e;;){var o=!1;if(r.forEach(t.operations,function(e){e.nickname===i&&(o=!0)}),!o)return i;i=e+"_"+n,n++}return e},g.prototype.parseUri=function(e){var t=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,n=t.exec(e);return{scheme:n[4]?n[4].replace(":",""):void 0,host:n[11],port:n[12],path:n[15]}},g.prototype.help=function(e){var t="";return this instanceof g?r.forEach(this.apis,function(e,n){r.isPlainObject(e)&&(t+="operations for the '"+n+"' tag\n",r.forEach(e.operations,function(e,n){t+="  * "+n+": "+e.summary+"\n"}))}):(this instanceof l||r.isPlainObject(this))&&(t+="operations for the '"+this.label+"' tag\n",r.forEach(this.apis,function(e,n){t+="  * "+n+": "+e.summary+"\n"})),e?t:(o.log(t),t)},g.prototype.tagFromLabel=function(e){return e},g.prototype.idFromOp=function(e,t,n){n&&n.operationId||(n=n||{},n.operationId=t+"_"+e);var r=n.operationId.replace(/[\s!@#$%^&*()_+=\[{\]};:<>|.\/?,\\'""-]/g,"_")||e.substring(1)+"_"+t;return r=r.replace(/((_){2,})/g,"_"),r=r.replace(/^(_)*/g,""),r=r.replace(/([_])*$/g,"")},g.prototype.setHost=function(e){this.host=e,this.apis&&r.forEach(this.apis,function(t){t.operations&&r.forEach(t.operations,function(t){t.host=e})})},g.prototype.setBasePath=function(e){this.basePath=e,this.apis&&r.forEach(this.apis,function(t){t.operations&&r.forEach(t.operations,function(t){t.basePath=e})})},g.prototype.setSchemes=function(e){this.schemes=e,e&&e.length>0&&this.apis&&r.forEach(this.apis,function(t){t.operations&&r.forEach(t.operations,function(t){t.scheme=e[0]})})},g.prototype.fail=function(e){return this.usePromise?(this.deferredClient.reject(e),this.deferredClient.promise):void(this.failure?this.failure(e):this.failure(e))}},{"./auth":2,"./helpers":4,"./http":5,"./resolver":6,"./spec-converter":8,"./types/model":9,"./types/operation":10,"./types/operationGroup":11,"lodash-compat/array/indexOf":49,"lodash-compat/collection/find":53,"lodash-compat/collection/forEach":54,"lodash-compat/function/bind":58,"lodash-compat/lang/cloneDeep":138,"lodash-compat/lang/isArray":140,"lodash-compat/lang/isFunction":142,"lodash-compat/lang/isObject":144,"lodash-compat/lang/isPlainObject":145,"lodash-compat/lang/isUndefined":148,q:157}],4:[function(e,t,n){(function(n){"use strict";var r={isPlainObject:e("lodash-compat/lang/isPlainObject"),indexOf:e("lodash-compat/array/indexOf")};t.exports.__bind=function(e,t){return function(){return e.apply(t,arguments)}};var i=t.exports.log=function(){console&&"test"!==n.env.NODE_ENV&&console.log(Array.prototype.slice.call(arguments)[0])};t.exports.fail=function(e){i(e)},t.exports.optionHtml=function(e,t){return'<tr><td class="optionName">'+e+":</td><td>"+t+"</td></tr>"};var o=t.exports.resolveSchema=function(e){return r.isPlainObject(e.schema)&&(e=o(e.schema)),e};t.exports.simpleRef=function(e){return"undefined"==typeof e?null:0===e.indexOf("#/definitions/")?e.substring("#/definitions/".length):e},t.exports.extractExtensions=function(e,t,n){e&&t&&"string"==typeof e&&0===e.indexOf("x-")&&(t.vendorExtensions=t.vendorExtensions||{},n?t.vendorExtensions[e]=n:t.vendorExtensions[e]=t[e])}}).call(this,e("_process"))},{_process:12,"lodash-compat/array/indexOf":49,"lodash-compat/lang/isPlainObject":145}],5:[function(e,t,n){(function(n){"use strict";var r=e("./helpers"),i=e("superagent"),o=e("js-yaml"),s={isObject:e("lodash-compat/lang/isObject"),keys:e("lodash-compat/object/keys")},a=function(){this.type="JQueryHttpClient"},l=function(){this.type="SuperagentHttpClient"},c=t.exports=function(){};c.prototype.execute=function(e,t){var n;n=t&&t.client?t.client:new l(t),n.opts=t||{},t&&t.requestAgent&&(i=t.requestAgent);var r=!1;if("undefined"!=typeof window&&"undefined"!=typeof window.jQuery&&(r=!0),"options"===e.method.toLowerCase()&&"SuperagentHttpClient"===n.type&&(log("forcing jQuery as OPTIONS are not supported by SuperAgent"),e.useJQuery=!0),this.isInternetExplorer()&&(e.useJQuery===!1||!r))throw new Error("Unsupported configuration! JQuery is required but not available");(e&&e.useJQuery===!0||this.isInternetExplorer()&&r)&&(n=new a(t));var o=e.on.response,c=e.on.error,u=function(e){return t&&t.requestInterceptor&&(e=t.requestInterceptor.apply(e)),e},p=function(n){return t&&t.responseInterceptor&&(n=t.responseInterceptor.apply(n,[e])),o(n)},h=function(n){t&&t.responseInterceptor&&(n=t.responseInterceptor.apply(n,[e])),c(n)};return e.on.error=function(e){h(e)},e.on.response=function(e){e&&e.status>=400?h(e):p(e)},s.isObject(e)&&s.isObject(e.body)&&e.body.type&&"formData"===e.body.type&&t.useJQuery&&(e.contentType=!1,e.processData=!1,delete e.headers["Content-Type"]),e=u(e)||e,e.beforeSend?e.beforeSend(function(t){n.execute(t||e)}):n.execute(e),e.deferred?e.deferred.promise:e},c.prototype.isInternetExplorer=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase();if(-1!==t.indexOf("msie")){var n=parseInt(t.split("msie")[1]);8>=n&&(e=!0)}}return e},a.prototype.execute=function(e){var t=this.jQuery||"undefined"!=typeof window&&window.jQuery,n=e.on,i=e;if("undefined"==typeof t||t===!1)throw new Error("Unsupported configuration! JQuery is required but not available");return e.type=e.method,e.cache=e.jqueryAjaxCache,e.data=e.body,delete e.jqueryAjaxCache,delete e.useJQuery,delete e.body,e.complete=function(e){for(var t={},s=e.getAllResponseHeaders().split("\n"),a=0;a<s.length;a++){var l=s[a].trim();if(0!==l.length){var c=l.indexOf(":");if(-1!==c){var u=l.substring(0,c).trim(),p=l.substring(c+1).trim();t[u]=p}else t[l]=null}}var h={url:i.url,method:i.method,status:e.status,statusText:e.statusText,data:e.responseText,headers:t};try{var d=e.responseJSON||o.safeLoad(e.responseText);h.obj="string"==typeof d?{}:d}catch(e){r.log("unable to parse JSON/YAML content")}if(h.obj=h.obj||null,e.status>=200&&e.status<300)n.response(h);else{if(!(0===e.status||e.status>=400&&e.status<599))return n.response(h);n.error(h)}},t.support.cors=!0,t.ajax(e)},l.prototype.execute=function(e){var t=e.method.toLowerCase(),a=e.timeout;"delete"===t&&(t="del");var l=e.headers||{},c=i[t](e.url);e.connectionAgent&&c.agent(e.connectionAgent),a&&c.timeout(a),e.enableCookies&&c.withCredentials();var u=e.headers.Accept;if(this.binaryRequest(u)&&c.on("request",function(){this.xhr&&(this.xhr.responseType="blob")}),e.body)if(s.isObject(e.body)){var p=e.headers["Content-Type"]||"";if(0===p.indexOf("multipart/form-data"))if(delete l["Content-Type"],"[object FormData]"==={}.toString.apply(e.body))c.send(e.body);else{var h,d,f;for(h in e.body)if(d=e.body[h],Array.isArray(d))for(f in d)c.field(h,f);else c.field(h,d)}else s.isObject(e.body)&&(e.body=JSON.stringify(e.body),c.send(e.body))}else c.send(e.body);var m;for(m in l)c.set(m,l[m]);"function"==typeof c.buffer&&c.buffer(),c.end(function(t,i){i=i||{status:0,headers:{error:"no response from server"}};var a,l={url:e.url,method:e.method,headers:i.headers};if(!t&&i.error&&(t=i.error),t&&e.on&&e.on.error){if(l.errObj=t,l.status=i?i.status:500,l.statusText=i?i.text:t.message,i.headers&&i.headers["content-type"]&&i.headers["content-type"].indexOf("application/json")>=0)try{l.obj=JSON.parse(l.statusText)}catch(e){l.obj=null}a=e.on.error}else if(i&&e.on&&e.on.response){var c;if(i.body&&s.keys(i.body).length>0)c=i.body;else try{c=o.safeLoad(i.text),c="string"==typeof c?null:c}catch(e){r.log("cannot parse JSON/YAML content")}"function"==typeof n&&n.isBuffer(c)?l.data=c:l.obj="object"==typeof c?c:null,l.status=i.status,l.statusText=i.text,a=e.on.response}i.xhr&&i.xhr.response?l.data=i.xhr.response:l.data||(l.data=l.statusText),a&&a(l)})},l.prototype.binaryRequest=function(e){return!!e&&(/^image/i.test(e)||/^application\/pdf/.test(e)||/^application\/octet-stream/.test(e))}}).call(this,e("buffer").Buffer)},{"./helpers":4,buffer:14,"js-yaml":19,"lodash-compat/lang/isObject":144,"lodash-compat/object/keys":149,superagent:158}],6:[function(e,t,n){"use strict";function r(e){var t={},n=/[a-z]+:\/\//i.exec(e);n&&(t.proto=n[0].slice(0,-3),e=e.slice(t.proto.length+1)),"//"===e.slice(0,2)&&(t.domain=e.slice(2).split("/")[0],e=e.slice(2+t.domain.length));var r=e.split("#");return r[0].length&&(t.path=r[0]),r.length>1&&(t.fragment=r.slice(1).join("#")),t}function i(e){var t=e.path;return void 0===t&&(t=""),void 0!==e.fragment&&(t+="#"+e.fragment),void 0!==e.domain&&("/"===t.slice(0,1)&&(t=t.slice(1)),t="//"+e.domain+"/"+t,void 0!==e.proto&&(t=e.proto+":"+t)),t}function o(e,t){var n=r(t);if(void 0!==n.domain)return t;var o=r(e);if(void 0===n.path)o.fragment=n.fragment;else if("/"===n.path.slice(0,1))o.path=n.path,o.fragment=n.fragment;else{var s=void 0===o.path?[]:o.path.split("/"),a=n.path.split("/");for(s.length&&s.pop();".."===a[0]||"."===a[0];)".."===a[0]&&s.pop(),a.shift();o.path=s.concat(a).join("/"),o.fragment=n.fragment}return i(o)}var s=e("./http"),a={isObject:e("lodash-compat/lang/isObject"),cloneDeep:e("lodash-compat/lang/cloneDeep"),isArray:e("lodash-compat/lang/isArray"),isString:e("lodash-compat/lang/isString")},l=t.exports=function(){this.failedUrls=[],this.resolverCache={},this.pendingUrls={}};l.prototype.processAllOf=function(e,t,n,r,i,o){var s,a,l;n["x-resolved-from"]=["#/definitions/"+t];var c=n.allOf;for(c.sort(function(e,t){return e.$ref&&t.$ref?0:e.$ref?-1:1}),s=0;s<c.length;s++)l=c[s],a="/definitions/"+t+"/allOf",this.resolveInline(e,o,l,r,i,a)},l.prototype.resolve=function(e,t,n,r){this.spec=e;var i,o,l=t,c=n,u=r,p={};"function"==typeof t&&(l=null,c=t,u=n);var h,d=l;this.scope=u||this,this.iteration=this.iteration||0,this.scope.options&&this.scope.options.requestInterceptor&&(p.requestInterceptor=this.scope.options.requestInterceptor),this.scope.options&&this.scope.options.responseInterceptor&&(p.responseInterceptor=this.scope.options.responseInterceptor);var f,m,g,y,v,b,S,w=0,x={},C={},_=[];e.definitions=e.definitions||{};for(f in e.definitions){var k=e.definitions[f];if(k.$ref)this.resolveInline(l,e,k,_,C,k);else{for(y in k.properties)g=k.properties[y],a.isArray(g.allOf)?this.processAllOf(l,f,g,_,C,e):this.resolveTo(l,g,_,"/definitions");k.allOf&&this.processAllOf(l,f,k,_,C,e)}}e.parameters=e.parameters||{};for(f in e.parameters){if(v=e.parameters[f],"body"===v.in&&v.schema)if(a.isArray(v.schema.allOf)){h="inline_model";var A=h;for(b=!1,S=0;!b;){if("undefined"==typeof e.definitions[A]){b=!0;break}A=h+"_"+S,S++}e.definitions[A]={allOf:v.schema.allOf},delete v.schema.allOf,v.schema.$ref="#/definitions/"+A,this.processAllOf(l,A,e.definitions[A],_,C,e)}else this.resolveTo(l,v.schema,_,i);v.$ref&&this.resolveInline(l,e,v,_,C,v.$ref)}for(f in e.paths){var D,T,P;if(m=e.paths[f],"object"==typeof m){for(D in m)if("$ref"===D)i="/paths"+f,this.resolveInline(l,e,m,_,C,i);else{T=m[D];var M=m.parameters||[],E=T.parameters||[];M.forEach(function(e){E.unshift(e)}),"parameters"!==D&&a.isObject(T)&&(T.parameters=T.parameters||E);for(o in E){if(v=E[o],i="/paths"+f+"/"+D+"/parameters","body"===v.in&&v.schema)if(a.isArray(v.schema.allOf)){for(h="inline_model",f=h,b=!1,S=0;!b;){if("undefined"==typeof e.definitions[f]){b=!0;break}f=h+"_"+S,S++}e.definitions[f]={allOf:v.schema.allOf},delete v.schema.allOf,v.schema.$ref="#/definitions/"+f,this.processAllOf(l,f,e.definitions[f],_,C,e)}else this.resolveTo(l,v.schema,_,i);v.$ref&&this.resolveInline(l,e,v,_,C,v.$ref)}for(P in T.responses){var N=T.responses[P];if(i="/paths"+f+"/"+D+"/responses/"+P,a.isObject(N)&&(N.$ref&&this.resolveInline(l,e,N,_,C,i),N.schema)){var O=N;if(a.isArray(O.schema.allOf)){for(h="inline_model",f=h,b=!1,S=0;!b;){if("undefined"==typeof e.definitions[f]){b=!0;break}f=h+"_"+S,S++}e.definitions[f]={allOf:O.schema.allOf},delete O.schema.allOf,delete O.schema.type,O.schema.$ref="#/definitions/"+f,this.processAllOf(l,f,e.definitions[f],_,C,e)}else"array"===O.schema.type?O.schema.items&&O.schema.items.$ref&&this.resolveInline(l,e,O.schema.items,_,C,i):this.resolveTo(l,N.schema,_,i)}}}m.parameters=[]}}var I,V=0,L=[],R=_;for(o=0;o<R.length;o++){var G=R[o];if(l===G.root){if("ref"===G.resolveAs){var B,F=((G.root||"")+"/"+G.key).split("/"),j=[],z="";if(G.key.indexOf("../")>=0){for(var U=0;U<F.length;U++)".."===F[U]?j=j.slice(0,j.length-1):j.push(F[U]);for(B=0;B<j.length;B++)B>0&&(z+="/"),z+=j[B];G.root=z,L.push(G)}else if(I=G.key.split("#"),2===I.length){0!==I[0].indexOf("http:")&&0!==I[0].indexOf("https:")||(G.root=I[0]),i=I[1].split("/");var W,H=e;for(B=0;B<i.length;B++){var q=i[B];if(""!==q){if(H=H[q],"undefined"==typeof H){W=null;break}W=H}}null===W&&L.push(G)}}else if("inline"===G.resolveAs){if(G.key&&-1===G.key.indexOf("#")&&"/"!==G.key.charAt(0)){for(I=G.root.split("/"),i="",o=0;o<I.length-1;o++)i+=I[o]+"/";i+=G.key,G.root=i,G.location=""}L.push(G)}}else L.push(G)}V=L.length;for(var $={},X=0;X<L.length;X++)!function(e,t,n,r,i){if(e.root&&e.root!==l)if(-1===n.failedUrls.indexOf(e.root)){var o={useJQuery:!1,url:e.root,method:"get",headers:{accept:n.scope.swaggerRequestHeaders||"application/json"},on:{error:function(i){w+=1,console.log("failed url: "+o.url),n.failedUrls.push(o.url),r&&delete r[e.root],C[e.key]={root:e.root,location:e.location},w===V&&n.finish(t,d,_,x,C,c)},response:function(i){var o=i.obj;r&&delete r[e.root],n.resolverCache&&(n.resolverCache[e.root]=o),n.resolveItem(o,e.root,_,x,C,e),w+=1,w===V&&n.finish(t,d,_,x,C,c)}}};u&&u.fetchSpecTimeout&&(o.timeout=u.fetchSpecTimeout),u&&u.clientAuthorizations&&u.clientAuthorizations.apply(o),function e(){setTimeout(function(){if(r[o.url])e();else{var t=n.resolverCache[o.url];a.isObject(t)?o.on.response({obj:t}):(r[o.url]=!0,(new s).execute(o,p))}},0)}()}else w+=1,C[e.key]={root:e.root,location:e.location},w===V&&n.finish(t,d,_,x,C,c);else n.resolveItem(t,d,_,x,C,e),w+=1,w===V&&n.finish(t,l,_,x,C,c,!0)}(L[X],e,this,$,X);0===Object.keys(L).length&&this.finish(e,d,_,x,C,c)},l.prototype.resolveItem=function(e,t,n,r,i,o){var s=o.location,a=e,l=s.split("/");if(""!==s)for(var c=0;c<l.length;c++){var u=l[c];if(-1!==u.indexOf("~1")&&(u=l[c].replace(/~0/g,"~").replace(/~1/g,"/"),"/"!==u.charAt(0)&&(u="/"+u)),"undefined"==typeof a||null===a)break;if(""===u&&c===l.length-1&&l.length>1){a=null;break}u.length>0&&(a=a[u]);
}var p=o.key;l=o.key.split("/");var h=l[l.length-1];h.indexOf("#")>=0&&(h=h.split("#")[1]),null!==a&&"undefined"!=typeof a?r[p]={name:h,obj:a,key:o.key,root:o.root}:i[p]={root:o.root,location:o.location}},l.prototype.finish=function(e,t,n,r,i,o,s){var a,l;for(a in n){var c=n[a],u=c.key,p=r[u];if(p)if(e.definitions=e.definitions||{},"ref"===c.resolveAs){if(s!==!0)for(u in p.obj)l=this.retainRoot(u,p.obj[u],c.root),p.obj[u]=l;e.definitions[p.name]=p.obj,c.obj.$ref="#/definitions/"+p.name}else if("inline"===c.resolveAs){var h=c.obj;h["x-resolved-from"]=[c.key],delete h.$ref;for(u in p.obj)l=p.obj[u],s!==!0&&(l=this.retainRoot(u,p.obj[u],c.root)),h[u]=l}}var d=this.countUnresolvedRefs(e);0===d||this.iteration>5?(this.resolveAllOf(e.definitions),this.resolverCache=null,o.call(this.scope,e,i)):(this.iteration+=1,this.resolve(e,t,o,this.scope))},l.prototype.countUnresolvedRefs=function(e){var t,n=this.getRefs(e),r=[],i=[];for(t in n)0===t.indexOf("#")?r.push(t.substring(1)):i.push(t);for(t=0;t<r.length;t++)for(var o=r[t],s=o.split("/"),a=e,l=0;l<s.length;l++){var c=s[l];if(""!==c&&(a=a[c],"undefined"==typeof a)){i.push(o);break}}return i.length},l.prototype.getRefs=function(e,t){t=t||e;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if("$ref"===r&&"string"==typeof i)n[i]=null;else if(a.isObject(i)){var o=this.getRefs(i);for(var s in o)n[s]=null}}return n},l.prototype.retainRoot=function(e,t,n){if(a.isObject(t))for(var r in t){var i=t[r];"$ref"===r&&"string"==typeof i?t[r]=o(n,i):a.isObject(i)&&this.retainRoot(r,i,n)}else a.isString(t)&&"$ref"===e&&(t=o(n,t));return t},l.prototype.resolveInline=function(e,t,n,r,i,o){var s,a,l,c,u=n.$ref,p=n.$ref,h=!1;if(e=e||"",p){if(0===p.indexOf("../")){for(a=p.split("../"),l=e.split("/"),p="",s=0;s<a.length;s++)""===a[s]?l=l.slice(0,l.length-1):p+=a[s];for(e="",s=0;s<l.length-1;s++)s>0&&(e+="/"),e+=l[s];h=!0}if(p.indexOf("#")>=0)if(0===p.indexOf("/"))c=p.split("#"),a=e.split("//"),l=a[1].split("/"),e=a[0]+"//"+l[0]+c[0],o=c[1];else{if(c=p.split("#"),""!==c[0]){if(l=e.split("/"),l=l.slice(0,l.length-1),!h){e="";for(var d=0;d<l.length;d++)d>0&&(e+="/"),e+=l[d]}e+="/"+p.split("#")[0]}o=c[1]}if(0===p.indexOf("http:")||0===p.indexOf("https:"))p.indexOf("#")>=0?(e=p.split("#")[0],o=p.split("#")[1]):(e=p,o=""),r.push({obj:n,resolveAs:"inline",root:e,key:u,location:o});else if(0===p.indexOf("#"))o=p.split("#")[1],r.push({obj:n,resolveAs:"inline",root:e,key:u,location:o});else if(0===p.indexOf("/")&&-1===p.indexOf("#")){o=p;var f=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);f&&(e=f[0]+p.substring(1),o=""),r.push({obj:n,resolveAs:"inline",root:e,key:u,location:o})}else r.push({obj:n,resolveAs:"inline",root:e,key:u,location:o})}else"array"===n.type&&this.resolveTo(e,n.items,r,o)},l.prototype.resolveTo=function(e,t,n,r){var i,o,s=t.$ref,l=e;if("undefined"!=typeof s&&null!==s){if(s.indexOf("#")>=0){var c=s.split("#");if(c[0]&&0===s.indexOf("/"));else if(!c[0]||0!==c[0].indexOf("http:")&&0!==c[0].indexOf("https:")){if(c[0]&&c[0].length>0){for(i=e.split("/"),l="",o=0;o<i.length-1;o++)l+=i[o]+"/";l+=c[0]}}else l=c[0],s=c[1];r=c[1]}else if(0===s.indexOf("http:")||0===s.indexOf("https:"))l=s,r="";else{for(i=e.split("/"),l="",o=0;o<i.length-1;o++)l+=i[o]+"/";l+=s,r=""}n.push({obj:t,resolveAs:"ref",root:l,key:s,location:r})}else if("array"===t.type){var u=t.items;this.resolveTo(e,u,n,r)}else if(t&&(t.properties||t.additionalProperties)){var p=this.uniqueName("inline_model");t.title&&(p=this.uniqueName(t.title)),delete t.title,this.spec.definitions[p]=a.cloneDeep(t),t.$ref="#/definitions/"+p,delete t.type,delete t.properties}},l.prototype.uniqueName=function(e){for(var t=e,n=0;;){if(!a.isObject(this.spec.definitions[t]))return t;t=e+"_"+n,n++}},l.prototype.resolveAllOf=function(e,t,n){n=n||0,t=t||e;var r;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];if(null===o)throw new TypeError("Swagger 2.0 does not support null types ("+t+").  See https://github.com/swagger-api/swagger-spec/issues/229.");if("object"==typeof o&&this.resolveAllOf(e,o,n+1),o&&"undefined"!=typeof o.allOf){var s=o.allOf;if(a.isArray(s)){var l=a.cloneDeep(o);delete l.allOf,l["x-composed"]=!0,"undefined"!=typeof o["x-resolved-from"]&&(l["x-resolved-from"]=o["x-resolved-from"]);for(var c=0;c<s.length;c++){var u=s[c],p="self";"undefined"!=typeof u["x-resolved-from"]&&(p=u["x-resolved-from"][0]);for(var h in u)if(l.hasOwnProperty(h))if("properties"===h){var d=u[h];for(r in d){l.properties[r]=a.cloneDeep(d[r]);var f=d[r]["x-resolved-from"];"undefined"!=typeof f&&"self"!==f||(f=p),l.properties[r]["x-resolved-from"]=f}}else if("required"===h){for(var m=l.required.concat(u[h]),g=0;g<m.length;++g)for(var y=g+1;y<m.length;++y)m[g]===m[y]&&m.splice(y--,1);l.required=m}else"x-resolved-from"===h&&l["x-resolved-from"].push(p);else if(l[h]=a.cloneDeep(u[h]),"properties"===h)for(r in l[h])l[h][r]["x-resolved-from"]=p}t[i]=l}}}}},{"./http":5,"lodash-compat/lang/cloneDeep":138,"lodash-compat/lang/isArray":140,"lodash-compat/lang/isObject":144,"lodash-compat/lang/isString":146}],7:[function(e,t,n){"use strict";var r=e("./helpers"),i={isPlainObject:e("lodash-compat/lang/isPlainObject"),isUndefined:e("lodash-compat/lang/isUndefined"),isArray:e("lodash-compat/lang/isArray"),isObject:e("lodash-compat/lang/isObject"),isEmpty:e("lodash-compat/lang/isEmpty"),map:e("lodash-compat/collection/map"),indexOf:e("lodash-compat/array/indexOf"),cloneDeep:e("lodash-compat/lang/cloneDeep"),keys:e("lodash-compat/object/keys"),forEach:e("lodash-compat/collection/forEach")},o=t.exports.optionHtml=function(e,t){return'<tr><td class="optionName">'+e+":</td><td>"+t+"</td></tr>"};t.exports.typeFromJsonSchema=function(e,t){var n;return"integer"===e&&"int32"===t?n="integer":"integer"===e&&"int64"===t?n="long":"integer"===e&&"undefined"==typeof t?n="long":"string"===e&&"date-time"===t?n="date-time":"string"===e&&"date"===t?n="date":"number"===e&&"float"===t?n="float":"number"===e&&"double"===t?n="double":"number"===e&&"undefined"==typeof t?n="double":"boolean"===e?n="boolean":"string"===e&&(n="string"),n};var s=t.exports.getStringSignature=function(e,t){var n="";return"undefined"!=typeof e.$ref?n+=r.simpleRef(e.$ref):"undefined"==typeof e.type?n+="object":"array"===e.type?t?n+=s(e.items||e.$ref||{}):(n+="Array[",n+=s(e.items||e.$ref||{}),n+="]"):n+="integer"===e.type&&"int32"===e.format?"integer":"integer"===e.type&&"int64"===e.format?"long":"integer"===e.type&&"undefined"==typeof e.format?"long":"string"===e.type&&"date-time"===e.format?"date-time":"string"===e.type&&"date"===e.format?"date":"string"===e.type&&"undefined"==typeof e.format?"string":"number"===e.type&&"float"===e.format?"float":"number"===e.type&&"double"===e.format?"double":"number"===e.type&&"undefined"==typeof e.format?"double":"boolean"===e.type?"boolean":e.$ref?r.simpleRef(e.$ref):e.type,n},a=t.exports.schemaToJSON=function(e,t,n,o){e=r.resolveSchema(e),"function"!=typeof o&&(o=function(e){return(e||{}).default}),n=n||{};var s,l,c=e.type||"object",u=e.format;return i.isUndefined(e.example)?i.isUndefined(e.items)&&i.isArray(e.enum)&&(l=e.enum[0]):l=e.example,i.isUndefined(l)&&(e.$ref?(s=t[r.simpleRef(e.$ref)],i.isUndefined(s)||(i.isUndefined(n[s.name])?(n[s.name]=s,l=a(s.definition,t,n,o),delete n[s.name]):l="array"===s.type?[]:{})):i.isUndefined(e.default)?"string"===c?l="date-time"===u?(new Date).toISOString():"date"===u?(new Date).toISOString().split("T")[0]:"string":"integer"===c?l=0:"number"===c?l=0:"boolean"===c?l=!0:"object"===c?(l={},i.forEach(e.properties,function(e,r){var s=i.cloneDeep(e);s.default=o(e),l[r]=a(s,t,n,o)})):"array"===c&&(l=[],i.isArray(e.items)?i.forEach(e.items,function(e){l.push(a(e,t,n,o))}):i.isPlainObject(e.items)?l.push(a(e.items,t,n,o)):i.isUndefined(e.items)?l.push({}):r.log("Array type's 'items' property is not an array or an object, cannot process")):l=e.default),l};t.exports.schemaToHTML=function(e,t,n,s){function a(e,t,o){var s,a=t;return e.$ref?(a=e.title||r.simpleRef(e.$ref),s=n[a]):i.isUndefined(t)&&(a=e.title||"Inline Model "+ ++m,s={definition:e}),o!==!0&&(d[a]=i.isUndefined(s)?{}:s.definition),a}function l(e){var t='<span class="propType">',n=e.type||"object";return e.$ref?t+=a(e,r.simpleRef(e.$ref)):"object"===n?t+=i.isUndefined(e.properties)?"object":a(e):"array"===n?(t+="Array[",i.isArray(e.items)?t+=i.map(e.items,a).join(","):i.isPlainObject(e.items)?t+=i.isUndefined(e.items.$ref)?i.isUndefined(e.items.type)||-1!==i.indexOf(["array","object"],e.items.type)?a(e.items):e.items.type:a(e.items,r.simpleRef(e.items.$ref)):(r.log("Array type's 'items' schema is not an array or an object, cannot process"),t+="object"),t+="]"):t+=e.type,t+="</span>"}function c(e,t){var n="",r=e.type||"object",s="array"===r;switch(s&&(r=i.isPlainObject(e.items)&&!i.isUndefined(e.items.type)?e.items.type:"object"),i.isUndefined(e.default)||(n+=o("Default",e.default)),r){case"string":e.minLength&&(n+=o("Min. Length",e.minLength)),e.maxLength&&(n+=o("Max. Length",e.maxLength)),e.pattern&&(n+=o("Reg. Exp.",e.pattern));break;case"integer":case"number":e.minimum&&(n+=o("Min. Value",e.minimum)),e.exclusiveMinimum&&(n+=o("Exclusive Min.","true")),e.maximum&&(n+=o("Max. Value",e.maximum)),e.exclusiveMaximum&&(n+=o("Exclusive Max.","true")),e.multipleOf&&(n+=o("Multiple Of",e.multipleOf))}if(s&&(e.minItems&&(n+=o("Min. Items",e.minItems)),e.maxItems&&(n+=o("Max. Items",e.maxItems)),e.uniqueItems&&(n+=o("Unique Items","true")),e.collectionFormat&&(n+=o("Coll. Format",e.collectionFormat))),i.isUndefined(e.items)&&i.isArray(e.enum)){var a;a="number"===r||"integer"===r?e.enum.join(", "):'"'+e.enum.join('", "')+'"',n+=o("Enum",a)}return n.length>0&&(t='<span class="propWrap">'+t+'<table class="optionsWrapper"><tr><th colspan="2">'+r+"</th></tr>"+n+"</table></span>"),t}function u(e,t){var o=e.type||"object",u="array"===e.type,d=p+t+" "+(u?"[":"{")+h;if(t&&f.push(t),u)i.isArray(e.items)?d+="<div>"+i.map(e.items,function(e){var t=e.type||"object";return i.isUndefined(e.$ref)?i.indexOf(["array","object"],t)>-1?"object"===t&&i.isUndefined(e.properties)?"object":a(e):c(e,t):a(e,r.simpleRef(e.$ref))}).join(",</div><div>"):i.isPlainObject(e.items)?d+=i.isUndefined(e.items.$ref)?i.indexOf(["array","object"],e.items.type||"object")>-1?(i.isUndefined(e.items.type)||"object"===e.items.type)&&i.isUndefined(e.items.properties)?"<div>object</div>":"<div>"+a(e.items)+"</div>":"<div>"+c(e.items,e.items.type)+"</div>":"<div>"+a(e.items,r.simpleRef(e.items.$ref))+"</div>":(r.log("Array type's 'items' property is not an array or an object, cannot process"),d+="<div>object</div>");else if(e.$ref)d+="<div>"+a(e,t)+"</div>";else if("object"===o){if(i.isPlainObject(e.properties)){var m=i.map(e.properties,function(t,o){var a,u,p=i.indexOf(e.required,o)>=0,h=i.cloneDeep(t),d=p?"required":"",f='<span class="propName '+d+'">'+o+"</span> (";return h.default=s(h),h=r.resolveSchema(h),u=t.description||h.description,i.isUndefined(h.$ref)||(a=n[r.simpleRef(h.$ref)],i.isUndefined(a)||-1!==i.indexOf([void 0,"array","object"],a.definition.type)||(h=r.resolveSchema(a.definition))),f+=l(h),p||(f+=', <span class="propOptKey">optional</span>'),t.readOnly&&(f+=', <span class="propReadOnly">read only</span>'),f+=")",i.isUndefined(u)||(f+=': <span class="propDesc">'+u+"</span>"),h.enum&&(f+=' = <span class="propVals">[\''+h.enum.join("', '")+"']</span>"),"<div"+(t.readOnly?' class="readOnly"':"")+">"+c(h,f)}).join(",</div>");m&&(d+=m+"</div>")}}else d+="<div>"+c(e,o)+"</div>";return d+p+(u?"]":"}")+h}var p='<span class="strong">',h="</span>";if(i.isObject(arguments[0])&&(e=void 0,t=arguments[0],n=arguments[1],s=arguments[2]),n=n||{},t=r.resolveSchema(t),i.isEmpty(t))return p+"Empty"+h;if("string"==typeof t.$ref&&(e=r.simpleRef(t.$ref),t=n[e],"undefined"==typeof t))return p+e+" is not defined!"+h;"string"!=typeof e&&(e=t.title||"Inline Model"),t.definition&&(t=t.definition),"function"!=typeof s&&(s=function(e){return(e||{}).default});for(var d={},f=[],m=0,g=u(t,e);i.keys(d).length>0;)i.forEach(d,function(e,t){var n=i.indexOf(f,t)>-1;delete d[t],n||(f.push(t),g+="<br />"+u(e,t))});return g}},{"./helpers":4,"lodash-compat/array/indexOf":49,"lodash-compat/collection/forEach":54,"lodash-compat/collection/map":56,"lodash-compat/lang/cloneDeep":138,"lodash-compat/lang/isArray":140,"lodash-compat/lang/isEmpty":141,"lodash-compat/lang/isObject":144,"lodash-compat/lang/isPlainObject":145,"lodash-compat/lang/isUndefined":148,"lodash-compat/object/keys":149}],8:[function(e,t,n){"use strict";var r=e("./http"),i={isObject:e("lodash-compat/lang/isObject")},o=t.exports=function(){this.errors=[],this.warnings=[],this.modelMap={}};o.prototype.setDocumentationLocation=function(e){this.docLocation=e},o.prototype.convert=function(e,t,n,r){if(!e||!Array.isArray(e.apis))return this.finish(r,null);this.clientAuthorizations=t;var i={swagger:"2.0"};i.originalVersion=e.swaggerVersion,this.apiInfo(e,i),this.securityDefinitions(e,i),e.basePath&&this.setDocumentationLocation(e.basePath);var o,s=!1;for(o=0;o<e.apis.length;o++){var a=e.apis[o];Array.isArray(a.operations)&&(s=!0)}s?(this.declaration(e,i),this.finish(r,i)):this.resourceListing(e,i,n,r)},o.prototype.declaration=function(e,t){var n,r,o,s;if(e.apis){0===e.basePath.indexOf("http://")?(o=e.basePath.substring("http://".length),s=o.indexOf("/"),s>0?(t.host=o.substring(0,s),t.basePath=o.substring(s)):(t.host=o,t.basePath="/")):0===e.basePath.indexOf("https://")?(o=e.basePath.substring("https://".length),s=o.indexOf("/"),s>0?(t.host=o.substring(0,s),t.basePath=o.substring(s)):(t.host=o,t.basePath="/")):t.basePath=e.basePath;var a;if(e.authorizations&&(a=e.authorizations),e.consumes&&(t.consumes=e.consumes),e.produces&&(t.produces=e.produces),i.isObject(e))for(n in e.models){var l=e.models[n],c=l.id||n;this.modelMap[c]=n}for(r=0;r<e.apis.length;r++){var u=e.apis[r],p=u.path,h=u.operations;this.operations(p,e.resourcePath,h,a,t)}var d=e.models||{};this.models(d,t)}},o.prototype.models=function(e,t){if(i.isObject(e)){var n;t.definitions=t.definitions||{};for(n in e){var r,o=e[n],s=[],a={properties:{}};for(r in o.properties){var l=o.properties[r],c={};this.dataType(l,c),l.description&&(c.description=l.description),l.enum&&(c.enum=l.enum),"boolean"==typeof l.required&&l.required===!0&&s.push(r),"string"==typeof l.required&&"true"===l.required&&s.push(r),a.properties[r]=c}s.length>0?a.required=s:a.required=o.required,t.definitions[n]=a}}},o.prototype.extractTag=function(e){var t=e||"default";return 0!==t.indexOf("http:")&&0!==t.indexOf("https:")||(t=t.split(["/"]),t=t[t.length-1].substring()),t.endsWith(".json")&&(t=t.substring(0,t.length-".json".length)),t.replace("/","")},o.prototype.operations=function(e,t,n,r,i){if(Array.isArray(n)){var o;i.paths||(i.paths={});var s=i.paths[e]||{},a=this.extractTag(t);i.tags=i.tags||[];var l=!1;for(o=0;o<i.tags.length;o++){var c=i.tags[o];c.name===a&&(l=!0)}for(l||i.tags.push({name:a}),o=0;o<n.length;o++){var u=n[o],p=(u.method||u.httpMethod).toLowerCase(),h={tags:[a]},d=u.authorizations;if(d&&0===Object.keys(d).length&&(d=r),"undefined"!=typeof d){var f;for(var m in d){h.security=h.security||[];var g=d[m];if(g){var y=[];for(var v in g)y.push(g[v].scope);f={},f[m]=y,h.security.push(f)}else f={},f[m]=[],h.security.push(f)}}u.consumes?h.consumes=u.consumes:i.consumes&&(h.consumes=i.consumes),u.produces?h.produces=u.produces:i.produces&&(h.produces=i.produces),u.summary&&(h.summary=u.summary),u.notes&&(h.description=u.notes),u.nickname&&(h.operationId=u.nickname),u.deprecated&&(h.deprecated=u.deprecated),this.authorizations(d,i),this.parameters(h,u.parameters,i),this.responseMessages(h,u,i),s[p]=h}i.paths[e]=s}},o.prototype.responseMessages=function(e,t){if(i.isObject(t)){var n={};this.dataType(t,n),!n.schema&&n.type&&(n={schema:n}),e.responses=e.responses||{};var r=!1;if(Array.isArray(t.responseMessages)){var o,s=t.responseMessages;for(o=0;o<s.length;o++){var a=s[o],l={description:a.message};200===a.code&&(r=!0),a.responseModel&&(l.schema={$ref:"#/definitions/"+a.responseModel}),e.responses[""+a.code]=l}}r?e.responses.default=n:e.responses[200]=n}},o.prototype.authorizations=function(e){!i.isObject(e)},o.prototype.parameters=function(e,t){if(Array.isArray(t)){var n;for(n=0;n<t.length;n++){var r=t[n],i={};if(i.name=r.name,i.description=r.description,i.required=r.required,i.in=r.paramType,"body"===i.in&&(i.name="body"),"form"===i.in&&(i.in="formData"),r.enum&&(i.enum=r.enum),r.allowMultiple===!0||"true"===r.allowMultiple){var o={};if(this.dataType(r,o),i.type="array",i.items=o,r.allowableValues){var s=r.allowableValues;"LIST"===s.valueType&&(i.enum=s.values)}}else this.dataType(r,i);"undefined"!=typeof r.defaultValue&&(i.default=r.defaultValue),e.parameters=e.parameters||[],e.parameters.push(i)}}},o.prototype.dataType=function(e,t){if(i.isObject(e)){e.minimum&&(t.minimum=e.minimum),e.maximum&&(t.maximum=e.maximum),e.format&&(t.format=e.format),"undefined"!=typeof e.defaultValue&&(t.default=e.defaultValue);var n=this.toJsonSchema(e);n&&(t=t||{},n.type&&(t.type=n.type),n.format&&(t.format=n.format),n.$ref&&(t.schema={$ref:n.$ref}),n.items&&(t.items=n.items))}},o.prototype.toJsonSchema=function(e){if(!e)return"object";var t=e.type||e.dataType||e.responseClass||"",n=t.toLowerCase(),r=(e.format||"").toLowerCase();if(0===n.indexOf("list[")){var i=t.substring(5,t.length-1),o=this.toJsonSchema({type:i});return{type:"array",items:o}}if("int"===n||"integer"===n&&"int32"===r)return{type:"integer",format:"int32"};if("long"===n||"integer"===n&&"int64"===r)return{type:"integer",format:"int64"};if("integer"===n)return{type:"integer",format:"int64"};if("float"===n||"number"===n&&"float"===r)return{type:"number",format:"float"};if("double"===n||"number"===n&&"double"===r)return{type:"number",format:"double"};if("string"===n&&"date-time"===r||"date"===n)return{type:"string",format:"date-time"};if("string"===n)return{type:"string"};if("file"===n)return{type:"file"};if("boolean"===n)return{type:"boolean"};if("boolean"===n)return{type:"boolean"};if("array"===n||"list"===n){if(e.items){var s=this.toJsonSchema(e.items);return{type:"array",items:s}}return{type:"array",items:{type:"object"}}}return e.$ref?{$ref:this.modelMap[e.$ref]?"#/definitions/"+this.modelMap[e.$ref]:e.$ref}:"void"===n||""===n?{}:this.modelMap[e.type]?{$ref:"#/definitions/"+this.modelMap[e.type]}:{type:e.type}},o.prototype.resourceListing=function(e,t,n,i){var o,s=0,a=this,l=e.apis.length,c=t,u={};n&&n.requestInterceptor&&(u.requestInterceptor=n.requestInterceptor),n&&n.responseInterceptor&&(u.responseInterceptor=n.responseInterceptor);var p="application/json";for(n&&n.swaggerRequestHeaders&&(p=n.swaggerRequestHeaders),0===l&&this.finish(i,t),o=0;l>o;o++){var h=e.apis[o],d=h.path,f=this.getAbsolutePath(e.swaggerVersion,this.docLocation,d);h.description&&(t.tags=t.tags||[],t.tags.push({name:this.extractTag(h.path),description:h.description||""}));var m={url:f,headers:{accept:p},on:{},method:"get",timeout:n.timeout};m.on.response=function(e){s+=1;var t=e.obj;t&&a.declaration(t,c),s===l&&a.finish(i,c)},m.on.error=function(e){console.error(e),s+=1,s===l&&a.finish(i,c)},this.clientAuthorizations&&"function"==typeof this.clientAuthorizations.apply&&this.clientAuthorizations.apply(m),(new r).execute(m,u)}},o.prototype.getAbsolutePath=function(e,t,n){if("1.0"===e&&t.endsWith(".json")){var r=t.lastIndexOf("/");r>0&&(t=t.substring(0,r))}var i=t;return 0===n.indexOf("http:")||0===n.indexOf("https:")?i=n:(t.endsWith("/")&&(i=t.substring(0,t.length-1)),i+=n),i=i.replace("{format}","json")},o.prototype.securityDefinitions=function(e,t){if(e.authorizations){var n;for(n in e.authorizations){var r=!1,i={vendorExtensions:{}},o=e.authorizations[n];if("apiKey"===o.type)i.type="apiKey",i.in=o.passAs,i.name=o.keyname||n,r=!0;else if("basicAuth"===o.type)i.type="basicAuth",r=!0;else if("oauth2"===o.type){var s,a=o.scopes||[],l={};for(s in a){var c=a[s];l[c.scope]=c.description}if(i.type="oauth2",s>0&&(i.scopes=l),o.grantTypes){if(o.grantTypes.implicit){var u=o.grantTypes.implicit;i.flow="implicit",i.authorizationUrl=u.loginEndpoint,r=!0}if(o.grantTypes.authorization_code&&!i.flow){var p=o.grantTypes.authorization_code;i.flow="accessCode",i.authorizationUrl=p.tokenRequestEndpoint.url,i.tokenUrl=p.tokenEndpoint.url,r=!0}}}r&&(t.securityDefinitions=t.securityDefinitions||{},t.securityDefinitions[n]=i)}}},o.prototype.apiInfo=function(e,t){if(e.info){var n=e.info;t.info={},n.contact&&(t.info.contact={},t.info.contact.email=n.contact),n.description&&(t.info.description=n.description),n.title&&(t.info.title=n.title),n.termsOfServiceUrl&&(t.info.termsOfService=n.termsOfServiceUrl),(n.license||n.licenseUrl)&&(t.license={},n.license&&(t.license.name=n.license),n.licenseUrl&&(t.license.url=n.licenseUrl))}else this.warnings.push("missing info section")},o.prototype.finish=function(e,t){e(t)}},{"./http":5,"lodash-compat/lang/isObject":144}],9:[function(e,t,n){"use strict";var r=(e("../helpers").log,{isPlainObject:e("lodash-compat/lang/isPlainObject"),isString:e("lodash-compat/lang/isString")}),i=e("../schema-markup.js"),o=e("js-yaml"),s=t.exports=function(e,t,n,r){return this.definition=t||{},this.isArray="array"===t.type,this.models=n||{},this.name=e||t.title||"Inline Model",this.modelPropertyMacro=r||function(e){return e.default},this};s.prototype.createJSONSample=s.prototype.getSampleValue=function(e){return e=e||{},e[this.name]=this,this.examples&&r.isPlainObject(this.examples)&&this.examples["application/json"]?(this.definition.example=this.examples["application/json"],r.isString(this.definition.example)&&(this.definition.example=o.safeLoad(this.definition.example))):this.definition.example||(this.definition.example=this.examples),i.schemaToJSON(this.definition,this.models,e,this.modelPropertyMacro)},s.prototype.getMockSignature=function(){return i.schemaToHTML(this.name,this.definition,this.models,this.modelPropertyMacro)}},{"../helpers":4,"../schema-markup.js":7,"js-yaml":19,"lodash-compat/lang/isPlainObject":145,"lodash-compat/lang/isString":146}],10:[function(e,t,n){"use strict";function r(e,t){if(i.isEmpty(t))return e[0];for(var n=0,r=t.length;r>n;n++)if(e.indexOf(t[n])>-1)return t[n];return e[0]}var i={cloneDeep:e("lodash-compat/lang/cloneDeep"),isUndefined:e("lodash-compat/lang/isUndefined"),isEmpty:e("lodash-compat/lang/isEmpty"),isObject:e("lodash-compat/lang/isObject")},o=e("../helpers"),s=e("./model"),a=e("../http"),l=e("q"),c=t.exports=function(e,t,n,r,i,a,l,c,u){var p=[];e=e||{},a=a||{},e&&e.options&&(this.client=e.options.client||null,this.requestInterceptor=e.options.requestInterceptor||null,this.responseInterceptor=e.options.responseInterceptor||null,this.requestAgent=e.options.requestAgent),this.authorizations=a.security,this.basePath=e.basePath||"/",this.clientAuthorizations=u,this.consumes=a.consumes||e.consumes||["application/json"],this.produces=a.produces||e.produces||["application/json"],this.deprecated=a.deprecated,this.description=a.description,this.host=e.host,this.method=r||p.push("Operation "+n+" is missing method."),this.models=c||{},this.nickname=n||p.push("Operations must have a nickname."),this.operation=a,this.operations={},this.parameters=null!==a?a.parameters||[]:{},this.parent=e,this.path=i||p.push("Operation "+this.nickname+" is missing path."),this.responses=a.responses||{},this.scheme=t||e.scheme||"http",this.schemes=a.schemes||e.schemes,this.security=a.security||e.security,this.summary=a.summary||"",this.timeout=e.timeout,this.type=null,this.useJQuery=e.useJQuery,this.jqueryAjaxCache=e.jqueryAjaxCache,this.enableCookies=e.enableCookies;var h;if(this.host||("undefined"!=typeof window?this.host=window.location.host:this.host="localhost"),this.parameterMacro=e.parameterMacro||function(e,t){return t.default},this.inlineModels=[],"/"!==this.basePath&&"/"===this.basePath.slice(-1)&&(this.basePath=this.basePath.slice(0,-1)),"string"==typeof this.deprecated)switch(this.deprecated.toLowerCase()){case"true":case"yes":case"1":this.deprecated=!0;break;case"false":case"no":case"0":case null:this.deprecated=!1;break;default:this.deprecated=Boolean(this.deprecated)}var d,f;if(l)for(h in l)f=new s(h,l[h],this.models,e.modelPropertyMacro),f&&(this.models[h]=f);else l={};for(d=0;d<this.parameters.length;d++){var m,g=this.parameters[d];g.default=this.parameterMacro(this,g),"array"===g.type&&(g.isList=!0,g.allowMultiple=!0);var y=this.getType(g);y&&"boolean"===y.toString().toLowerCase()&&(g.allowableValues={},g.isList=!0,g.enum=[!0,!1]);for(h in g)o.extractExtensions(h,g);"undefined"!=typeof g["x-example"]&&(m=g["x-example"],g.default=m),g["x-examples"]&&(m=g["x-examples"].default,"undefined"!=typeof m&&(g.default=m));var v=g.enum||g.items&&g.items.enum;if("undefined"!=typeof v){var b;for(g.allowableValues={},g.allowableValues.values=[],g.allowableValues.descriptiveValues=[],b=0;b<v.length;b++){var S=v[b],w=S===g.default||S+""===g.default;g.allowableValues.values.push(S),g.allowableValues.descriptiveValues.push({value:S+"",isDefault:w})}}"array"===g.type&&(y=[y],"undefined"==typeof g.allowableValues&&(delete g.isList,delete g.allowMultiple)),g.modelSignature={type:y,definitions:this.models},g.signature=this.getModelSignature(y,this.models).toString(),g.sampleJSON=this.getModelSampleJSON(y,this.models),g.responseClassSignature=g.signature}var x,C,_,k=this.responses;k[200]?(_=k[200],C="200"):k[201]?(_=k[201],C="201"):k[202]?(_=k[202],C="202"):k[203]?(_=k[203],C="203"):k[204]?(_=k[204],C="204"):k[205]?(_=k[205],C="205"):k[206]?(_=k[206],C="206"):k.default&&(_=k.default,C="default");for(x in k)if(o.extractExtensions(x,k),"string"==typeof x&&-1===x.indexOf("x-")){var A=k[x];if("object"==typeof A&&"object"==typeof A.headers){var D=A.headers;for(var T in D){var P=D[T];if("object"==typeof P)for(var M in P)o.extractExtensions(M,P)}}}if(_)for(x in _)o.extractExtensions(x,_);if(_&&_.schema){var E,N=this.resolveModel(_.schema,l);delete k[C],N?(this.successResponse={},E=this.successResponse[C]=N):_.schema.type&&"object"!==_.schema.type&&"array"!==_.schema.type?(this.successResponse={},E=this.successResponse[C]=_.schema):(this.successResponse={},E=this.successResponse[C]=new s(void 0,_.schema||{},this.models,e.modelPropertyMacro)),E&&(E.vendorExtensions=_.vendorExtensions,_.description&&(E.description=_.description),_.examples&&(E.examples=_.examples),_.headers&&(E.headers=_.headers)),this.type=_}return p.length>0&&this.resource&&this.resource.api&&this.resource.api.fail&&this.resource.api.fail(p),this};c.prototype.isDefaultArrayItemValue=function(e,t){return t.default&&Array.isArray(t.default)?-1!==t.default.indexOf(e):e===t.default},c.prototype.getType=function(e){var t,n=e.type,r=e.format,i=!1;"integer"===n&&"int32"===r?t="integer":"integer"===n&&"int64"===r?t="long":"integer"===n?t="integer":"string"===n?t="date-time"===r?"date-time":"date"===r?"date":"string":"number"===n&&"float"===r?t="float":"number"===n&&"double"===r?t="double":"number"===n?t="double":"boolean"===n?t="boolean":"array"===n?(i=!0,e.items&&(t=this.getType(e.items))):"file"===n&&(t="file"),e.$ref&&(t=o.simpleRef(e.$ref));var s=e.schema;if(s){var a=s.$ref;return a?(a=o.simpleRef(a),i?[a]:a):"object"===s.type?this.addInlineModel(s):this.getType(s)}return i?[t]:t},c.prototype.addInlineModel=function(e){var t=this.inlineModels.length,n=this.resolveModel(e,{});return n?(this.inlineModels.push(n),"Inline Model "+t):null},c.prototype.getInlineModel=function(e){if(/^Inline Model \d+$/.test(e)){var t=parseInt(e.substr("Inline Model".length).trim(),10),n=this.inlineModels[t];return n}return null},c.prototype.resolveModel=function(e,t){if("undefined"!=typeof e.$ref){var n=e.$ref;if(0===n.indexOf("#/definitions/")&&(n=n.substring("#/definitions/".length)),t[n])return new s(n,t[n],this.models,this.parent.modelPropertyMacro)}else if(e&&"object"==typeof e&&("object"===e.type||i.isUndefined(e.type)))return new s(void 0,e,this.models,this.parent.modelPropertyMacro);return null},c.prototype.help=function(e){for(var t=this.nickname+": "+this.summary+"\n",n=0;n<this.parameters.length;n++){var r=this.parameters[n],i=r.signature;t+="\n  * "+r.name+" ("+i+"): "+r.description}return"undefined"==typeof e&&o.log(t),t},c.prototype.getModelSignature=function(e,t){var n,r;return e instanceof Array&&(r=!0,e=e[0]),"undefined"==typeof e?(e="undefined",n=!0):t[e]?(e=t[e],n=!1):this.getInlineModel(e)?(e=this.getInlineModel(e),n=!1):n=!0,n?r?"Array["+e+"]":e.toString():r?"Array["+e.getMockSignature()+"]":e.getMockSignature()},c.prototype.supportHeaderParams=function(){return!0},c.prototype.supportedSubmitMethods=function(){return this.parent.supportedSubmitMethods},c.prototype.getHeaderParams=function(e){for(var t=this.setContentTypes(e,{}),n={},r=0;r<this.parameters.length;r++){var i=this.parameters[r];"header"===i.in&&(n[i.name.toLowerCase()]=i)}for(var o in e){var s=n[o.toLowerCase()];if("undefined"!=typeof s){var a=e[o];Array.isArray(a)&&(a=a.toString()),t[s.name]=a}}return t},c.prototype.urlify=function(e,t){for(var n={},r=this.path.replace(/#.*/,""),i="",o=0;o<this.parameters.length;o++){var s=this.parameters[o];if("undefined"!=typeof e[s.name]){var a;if("string"===s.type&&"password"===s.format&&t&&(a=!0),"path"===s.in){var l=new RegExp("{"+s.name+"}","gi"),c=e[s.name];Array.isArray(c)?c=this.encodePathCollection(s.collectionFormat,s.name,c,a):"undefined"!=typeof s["x-escape"]&&s["x-escape"]!==!0||(c=this.encodePathParam(c,a)),r=r.replace(l,c)}else if("query"===s.in&&"undefined"!=typeof e[s.name])if(i+=""===i&&r.indexOf("?")<0?"?":"&","undefined"!=typeof s.collectionFormat){var u=e[s.name];i+=Array.isArray(u)?this.encodeQueryCollection(s.collectionFormat,s.name,u,a):this.encodeQueryKey(s.name)+"="+this.encodeQueryParam(e[s.name],a)}else i+=this.encodeQueryKey(s.name)+"="+this.encodeQueryParam(e[s.name],a);else"formData"===s.in&&(n[s.name]=e[s.name])}else if("query"===s.in&&"undefined"==typeof e[s.name]&&s.allowEmptyValue===!0)if(i+=""===i&&r.indexOf("?")<0?"?":"&","undefined"!=typeof s.collectionFormat||"array"===s.type){var u,p=s.collectionFormat||"multi";i+=Array.isArray(u)?this.encodeQueryCollection(p,s.name,u,a):this.encodeQueryCollection(p,s.name,[u],a)}else i+=this.encodeQueryKey(s.name)+"="+this.encodeQueryParam("",a)}var h=this.scheme+"://"+this.host;return"/"!==this.basePath&&(h+=this.basePath),h+r+i},c.prototype.getMissingParams=function(e){var t,n=[];for(t=0;t<this.parameters.length;t++){var r=this.parameters[t];r.required===!0&&"undefined"==typeof e[r.name]&&(n=r.name)}return n},c.prototype.getBody=function(e,t,n){for(var r,i,o,s,a,l={},c=!1,p=0;p<this.parameters.length;p++)if(i=this.parameters[p],"undefined"!=typeof t[i.name]){var h;"string"===i.type&&"password"===i.format&&(h="password"),"body"===i.in?o=t[i.name]:"formData"===i.in&&(l[i.name]={param:i,value:t[i.name],password:h},r=!0)}else"body"===i.in&&(c=!0);if(c&&"undefined"==typeof o){var d=e["Content-Type"];d&&0===d.indexOf("application/json")&&(o="{}")}var f=!1;if(e["Content-Type"]&&e["Content-Type"].indexOf("multipart/form-data")>=0&&(f=!0),r&&!f){var m="";for(s in l){i=l[s].param,a=l[s].value;var g;n&&n.maskPasswords&&(g=l[s].password),"undefined"!=typeof a&&(Array.isArray(a)?(""!==m&&(m+="&"),m+=this.encodeQueryCollection(i.collectionFormat,s,a,g)):(""!==m&&(m+="&"),m+=encodeURIComponent(s)+"="+u(encodeURIComponent(a),g)))}o=m}else if(f){var y;if("function"==typeof FormData){y=new FormData,y.type="formData";for(s in l)if(i=l[s].param,a=t[s],"undefined"!=typeof a)if("[object File]"==={}.toString.apply(a))y.append(s,a);else if("file"===a.type&&a.value)y.append(s,a.value);else if(Array.isArray(a))if("multi"===i.collectionFormat){y.delete(s);for(var v in a)y.append(s,a[v])}else y.append(s,this.encodeQueryCollection(i.collectionFormat,s,a).split("=").slice(1).join("="));else y.append(s,a);o=y}else{y={};for(s in l)if(a=t[s],Array.isArray(a)){var b,S=i.collectionFormat||"multi";if("ssv"===S)b=" ";else if("pipes"===S)b="|";else if("tsv"===S)b="\t";else{if("multi"===S){y[s]=a;break}b=","}var w;a.forEach(function(e){w?w+=b:w="",
w+=e}),y[s]=w}else y[s]=a;o=y}e["Content-Type"]="multipart/form-data"}return o},c.prototype.getModelSampleJSON=function(e,t){var n,r,o;if(t=t||{},n=e instanceof Array,o=n?e[0]:e,t[o]?r=t[o].createJSONSample():this.getInlineModel(o)&&(r=this.getInlineModel(o).createJSONSample()),r){if(r=n?[r]:r,"string"==typeof r)return r;if(i.isObject(r)){var s=r;if(r instanceof Array&&r.length>0&&(s=r[0]),s.nodeName&&"Node"==typeof s){var a=(new XMLSerializer).serializeToString(s);return this.formatXml(a)}return JSON.stringify(r,null,2)}return r}},c.prototype.do=function(e,t,n,r,i){return this.execute(e,t,n,r,i)},c.prototype.execute=function(e,t,n,r,s){var c,u,p,h,d=e||{},f={};i.isObject(t)&&(f=t,c=n,u=r),h="undefined"!=typeof f.timeout?f.timeout:this.timeout,this.client&&(f.client=this.client),this.requestAgent&&(f.requestAgent=this.requestAgent),!f.requestInterceptor&&this.requestInterceptor&&(f.requestInterceptor=this.requestInterceptor),!f.responseInterceptor&&this.responseInterceptor&&(f.responseInterceptor=this.responseInterceptor),"function"==typeof t&&(c=t,u=n),this.parent.usePromise?p=l.defer():(c=c||this.parent.defaultSuccessCallback||o.log,u=u||this.parent.defaultErrorCallback||o.log),"undefined"==typeof f.useJQuery&&(f.useJQuery=this.useJQuery),"undefined"==typeof f.jqueryAjaxCache&&(f.jqueryAjaxCache=this.jqueryAjaxCache),"undefined"==typeof f.enableCookies&&(f.enableCookies=this.enableCookies);var m=this.getMissingParams(d);if(m.length>0){var g="missing required params: "+m;return o.fail(g),this.parent.usePromise?(p.reject(g),p.promise):(u(g,s),{})}var y,v=this.getHeaderParams(d),b=this.setContentTypes(d,f),S={};for(y in v)S[y]=v[y];for(y in b)S[y]=b[y];var w=this.getBody(b,d,f),x=this.urlify(d,f.maskPasswords);if(x.indexOf(".{format}")>0&&S){var C=S.Accept||S.accept;C&&C.indexOf("json")>0?x=x.replace(".{format}",".json"):C&&C.indexOf("xml")>0&&(x=x.replace(".{format}",".xml"))}var _={url:x,method:this.method.toUpperCase(),body:w,enableCookies:f.enableCookies,useJQuery:f.useJQuery,jqueryAjaxCache:f.jqueryAjaxCache,deferred:p,headers:S,clientAuthorizations:f.clientAuthorizations,operation:this,connectionAgent:this.connectionAgent,on:{response:function(e){return p?(p.resolve(e),p.promise):c(e,s)},error:function(e){return p?(p.reject(e),p.promise):u(e,s)}}};return h&&(_.timeout=h),this.clientAuthorizations.apply(_,this.operation.security),f.mock===!0?(f.requestInterceptor&&f.requestInterceptor.apply(_),_):(new a).execute(_,f)},c.prototype.setContentTypes=function(e,t){var n,i,s=this.parameters,a=e.parameterContentType||r(this.consumes,["application/json","application/yaml"]),l=t.responseContentType||r(this.produces,["application/json","application/yaml"]),c=[],u=[],p={};for(i=0;i<s.length;i++){var h=s[i];if("formData"===h.in)"file"===h.type?c.push(h):u.push(h);else if("header"===h.in&&t){var d=h.name,f=t[h.name];"undefined"!=typeof t[h.name]&&(p[d]=f)}else"body"===h.in&&"undefined"!=typeof e[h.name]&&(n=e[h.name])}var m=n||c.length||u.length;if("post"===this.method||"put"===this.method||"patch"===this.method||("delete"===this.method||"get"===this.method)&&m){if(t.requestContentType&&(a=t.requestContentType),u.length>0){if(a=void 0,t.requestContentType)a=t.requestContentType;else if(c.length>0)a="multipart/form-data";else if(this.consumes&&this.consumes.length>0)for(var g in this.consumes){var y=this.consumes[g];0!==y.indexOf("application/x-www-form-urlencoded")&&0!==y.indexOf("multipart/form-data")||(a=y)}"undefined"==typeof a&&(a="application/x-www-form-urlencoded")}}else a=null;return a&&this.consumes&&-1===this.consumes.indexOf(a)&&o.log("server doesn't consume "+a+", try "+JSON.stringify(this.consumes)),this.matchesAccept(l)||o.log("server can't produce "+l),a&&""!==n||"application/x-www-form-urlencoded"===a?p["Content-Type"]=a:this.consumes&&this.consumes.length>0&&"application/x-www-form-urlencoded"===this.consumes[0]&&(p["Content-Type"]=this.consumes[0]),l&&(p.Accept=l),p},c.prototype.matchesAccept=function(e){return!e||!this.produces||(-1!==this.produces.indexOf(e)||-1!==this.produces.indexOf("*/*"))},c.prototype.asCurl=function(e,t){var n={mock:!0,maskPasswords:!0};if("object"==typeof t)for(var r in t)n[r]=t[r];var o=this.execute(e,n);this.clientAuthorizations.apply(o,this.operation.security);var s=[];if(s.push("-X "+this.method.toUpperCase()),"undefined"!=typeof o.headers){var a;for(a in o.headers){var l=o.headers[a];"string"==typeof l&&(l=l.replace(/\'/g,"\\u0027")),s.push("--header '"+a+": "+l+"'")}}var c=!1,p=!1,h=o.headers["Content-Type"];if(h&&0===h.indexOf("application/x-www-form-urlencoded")?c=!0:h&&0===h.indexOf("multipart/form-data")&&(c=!0,p=!0),o.body){var d;if(i.isObject(o.body)){if(p){p=!0;for(var f=0;f<this.parameters.length;f++){var m=this.parameters[f];if("formData"===m.in){d||(d="");var g;if(g="function"==typeof FormData&&o.body instanceof FormData?o.body.getAll(m.name):o.body[m.name])if("file"===m.type)g.name&&(d+="-F "+m.name+'=@"'+g.name+'" ');else if(Array.isArray(g))if("multi"===m.collectionFormat)for(var y in g)d+="-F "+this.encodeQueryKey(m.name)+"="+u(g[y],m.format)+" ";else d+="-F "+this.encodeQueryCollection(m.collectionFormat,m.name,u(g,m.format))+" ";else d+="-F "+this.encodeQueryKey(m.name)+"="+u(g,m.format)+" "}}}d||(d=JSON.stringify(o.body))}else d=o.body;d=d.replace(/\'/g,"%27").replace(/\n/g," \\ \n "),c||(d=d.replace(/&/g,"%26")),p?s.push(d):s.push("-d '"+d.replace(/@/g,"%40")+"'")}return"curl "+s.join(" ")+" '"+o.url+"'"},c.prototype.encodePathCollection=function(e,t,n,r){var i,o="",s="";for(s="ssv"===e?"%20":"tsv"===e?"%09":"pipes"===e?"|":",",i=0;i<n.length;i++)0===i?o=this.encodeQueryParam(n[i],r):o+=s+this.encodeQueryParam(n[i],r);return o},c.prototype.encodeQueryCollection=function(e,t,n,r){var i,o="";if(e=e||"default","default"===e||"multi"===e)for(i=0;i<n.length;i++)i>0&&(o+="&"),o+=this.encodeQueryKey(t)+"="+u(this.encodeQueryParam(n[i]),r);else{var s="";if("csv"===e)s=",";else if("ssv"===e)s="%20";else if("tsv"===e)s="%09";else if("pipes"===e)s="|";else if("brackets"===e)for(i=0;i<n.length;i++)0!==i&&(o+="&"),o+=this.encodeQueryKey(t)+"[]="+u(this.encodeQueryParam(n[i]),r);if(""!==s)for(i=0;i<n.length;i++)0===i?o=this.encodeQueryKey(t)+"="+this.encodeQueryParam(n[i]):o+=s+this.encodeQueryParam(n[i])}return o},c.prototype.encodeQueryKey=function(e){return encodeURIComponent(e).replace("%5B","[").replace("%5D","]").replace("%24","$")},c.prototype.encodeQueryParam=function(e,t){return t?"******":void 0!==e&&null!==e?encodeURIComponent(e):""},c.prototype.encodePathParam=function(e,t){return encodeURIComponent(e,t)};var u=function(e,t){return"string"==typeof t&&"password"===t?"******":e}},{"../helpers":4,"../http":5,"./model":9,"lodash-compat/lang/cloneDeep":138,"lodash-compat/lang/isEmpty":141,"lodash-compat/lang/isObject":144,"lodash-compat/lang/isUndefined":148,q:157}],11:[function(e,t,n){"use strict";var r=t.exports=function(e,t,n,r){this.description=t,this.externalDocs=n,this.name=e,this.operation=r,this.operationsArray=[],this.path=e,this.tag=e};r.prototype.sort=function(){}},{}],12:[function(e,t,n){function r(){if(!a){a=!0;for(var e,t=s.length;t;){e=s,s=[];for(var n=-1;++n<t;)e[n]();t=s.length}a=!1}}function i(){}var o=t.exports={},s=[],a=!1;o.nextTick=function(e){s.push(e),a||setTimeout(r,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],13:[function(e,t,n){(function(e){!function(){"use strict";function n(t){var n;return n=t instanceof e?t:new e(t.toString(),"binary"),n.toString("base64")}t.exports=n}()}).call(this,e("buffer").Buffer)},{buffer:14}],14:[function(e,t,n){function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e){return this instanceof i?(this.length=0,this.parent=void 0,"number"==typeof e?o(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):a(this,e)):arguments.length>1?new i(e,arguments[1]):new i(e)}function o(e,t){if(e=f(e,0>t?0:0|m(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function s(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|y(t,n);return e=f(e,r),e.write(t,n),e}function a(e,t){if(i.isBuffer(t))return l(e,t);if(Y(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return u(e,t);if(t instanceof ArrayBuffer)return p(e,t)}return t.length?h(e,t):d(e,t)}function l(e,t){var n=0|m(t.length);return e=f(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|m(t.length);e=f(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function u(e,t){var n=0|m(t.length);e=f(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(e,t){return i.TYPED_ARRAY_SUPPORT?(t.byteLength,e=i._augment(new Uint8Array(t))):e=u(e,new Uint8Array(t)),e}function h(e,t){var n=0|m(t.length);e=f(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){var n,r=0;"Buffer"===t.type&&Y(t.data)&&(n=t.data,r=0|m(n.length)),e=f(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function f(e,t){i.TYPED_ARRAY_SUPPORT?e=i._augment(new Uint8Array(t)):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=i.poolSize>>>1;return n&&(e.parent=J),e}function m(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e,t){if(!(this instanceof g))return new g(e,t);var n=new i(e,t);return delete n.parent,n}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if(t|=0,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return T(this,t,n);case"binary":return P(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function S(e,t,n,r){return q(z(t,e.length-n),e,n,r)}function w(e,t,n,r){return q(U(t),e,n,r)}function x(e,t,n,r){return w(e,t,n,r)}function C(e,t,n,r){return q(H(t),e,n,r)}function _(e,t,n,r){return q(W(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=i+a){var l,c,u,p;switch(a){case 1:128>o&&(s=o);break;case 2:l=e[i+1],128===(192&l)&&(p=(31&o)<<6|63&l,p>127&&(s=p));break;case 3:l=e[i+1],c=e[i+2],128===(192&l)&&128===(192&c)&&(p=(15&o)<<12|(63&l)<<6|63&c,p>2047&&(55296>p||p>57343)&&(s=p));break;case 4:l=e[i+1],c=e[i+2],u=e[i+3],128===(192&l)&&128===(192&c)&&128===(192&u)&&(p=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,p>65535&&1114112>p&&(s=p))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return D(r)}function D(e){var t=e.length;if(K>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=K));return n}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=j(e[o]);return i}function E(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,o,s){if(!i.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>o||s>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function I(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function V(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function R(e,t,n,r,i){return i||L(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,r,23,4),n+4}function G(e,t,n,r,i){return i||L(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,r,52,8),n+8}function B(e){if(e=F(e).replace(Z,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function j(e){return 16>e?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;r>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function H(e){return $.toByteArray(B(e))}function q(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var $=e("base64-js"),X=e("ieee754"),Y=e("is-array");n.Buffer=i,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,i.poolSize=8192;var J={};i.TYPED_ARRAY_SUPPORT=function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,s=Math.min(n,r);s>o&&e[o]===t[o];)++o;return o!==s&&(n=e[o],r=t[o]),r>n?-1:n>r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Y(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new i(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new i(t),o=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(r,o),o+=s.length}return r},i.byteLength=y,i.prototype.length=void 0,i.prototype.parent=void 0,i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):v.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:i.compare(this,e)},i.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(i.isBuffer(e))return n(this,e,t);if("number"==typeof e)return i.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return w(this,e,t,n);case"binary":return x(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;i.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(i.TYPED_ARRAY_SUPPORT)r=i._augment(this.subarray(e,t));else{var o=t-e;r=new i(o,void 0);for(var s=0;o>s;s++)r[s]=this[s+e]}return r.length&&(r.parent=this.parent||this),r},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},i.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),X.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),X.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),X.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),X.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):I(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):V(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):V(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=0,s=1,a=0>e?1:0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):I(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):V(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):V(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return G(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return G(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,s=r-n;if(this===e&&t>n&&r>t)for(o=s-1;o>=0;o--)e[o+t]=this[o+n];else if(1e3>s||!i.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)e[o+t]=this[o+n];else e._set(this.subarray(n,n+s),t);return s},i.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=z(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i.TYPED_ARRAY_SUPPORT)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=i.prototype;i._augment=function(e){return e.constructor=i,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var Z=/[^+\/0-9A-Za-z-_]/g},{"base64-js":15,ieee754:16,"is-array":17}],15:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===p?62:t===a||t===h?63:l>t?-1:l+10>t?t-l+26+26:u+26>t?t-u:c+26>t?t-c+26:void 0}function n(e){function n(e){c[p++]=e}var r,i,s,a,l,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=e.length;l="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0,c=new o(3*e.length/4-l),s=l>0?e.length-4:e.length;var p=0;for(r=0,i=0;s>r;r+=4,i+=3)a=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===l?(a=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&a)):1===l&&(a=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,s,a=e.length%3,l="";for(i=0,s=e.length-a;s>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],l+=n(o);switch(a){case 1:o=e[e.length-1],l+=t(o>>2),l+=t(o<<4&63),l+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],l+=t(o>>10),l+=t(o>>4&63),l+=t(o<<2&63),l+="="}return l}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0),p="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],16:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,p=n?i-1:0,h=n?-1:1,d=e[t+p];for(p+=h,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+e[t+p],p+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+p],p+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,p=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+p>=1?h/l:h*Math.pow(2,1-p),t*l>=2&&(s++,l/=2),s+p>=u?(a=0,s=u):s+p>=1?(a=(t*l-1)*Math.pow(2,i),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=f,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+d]=255&s,d+=f,s/=256,c-=8);e[n+d-f]|=128*m}},{}],17:[function(e,t,n){var r=Array.isArray,i=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],18:[function(e,t,n){!function(){"use strict";function e(t,n,r,i){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!i,this):new e(t,n,r,i)}function t(e,n,r){return e instanceof t?e:this instanceof t?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=n||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,n,r),this):new t(e,n,r)}function r(){var e,n,i;return this instanceof r?(e=Object.create(null),this.setCookie=function(r,o,s){var a,l;if(r=new t(r,o,s),a=r.expiration_date<=Date.now(),void 0!==e[r.name]){for(n=e[r.name],l=0;l<n.length;l+=1)if(i=n[l],i.collidesWith(r))return a?(n.splice(l,1),0===n.length&&delete e[r.name],!1):(n[l]=r,r);return!a&&(n.push(r),r)}return!a&&(e[r.name]=[r],e[r.name])},this.getCookie=function(t,r){var i,o;if(n=e[t])for(o=0;o<n.length;o+=1)if(i=n[o],i.expiration_date<=Date.now())0===n.length&&delete e[i.name];else if(i.matches(r))return i},this.getCookies=function(t){var n,r,i=[];for(n in e)r=this.getCookie(n,t),r&&i.push(r);return i.toString=function(){return i.join(":")},i.toValueString=function(){return i.map(function(e){return e.toValueString()}).join(";")},i},this):new r}n.CookieAccessInfo=e,n.Cookie=t,t.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},t.prototype.toValueString=function(){return this.name+"="+this.value};var i=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;t.prototype.parse=function(e,n,r){if(this instanceof t){var i,o=e.split(";").filter(function(e){return!!e}),s=o[0].match(/([^=]+)=([\s\S]*)/),a=s[1],l=s[2];for(this.name=a,this.value=l,i=1;i<o.length;i+=1)switch(s=o[i].match(/([^=]+)(?:=([\s\S]*))?/),a=s[1].trim().toLowerCase(),l=s[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=l?Number(Date.parse(l)):1/0;break;case"path":this.path=l?l.trim():"",this.explicit_path=!0;break;case"domain":this.domain=l?l.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=n),this}return(new t).parse(e,n,r)},t.prototype.matches=function(e){return!(this.noscript&&e.script||this.secure&&!e.secure)&&this.collidesWith(e)},t.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},n.CookieJar=r,r.prototype.setCookies=function(e,n,r){e=Array.isArray(e)?e:e.split(i);var o,s,a=[];for(e=e.map(function(e){return new t(e,n,r)}),o=0;o<e.length;o+=1)s=e[o],this.setCookie(s,n,r)&&a.push(s);return a}}()},{}],19:[function(e,t,n){"use strict";var r=e("./lib/js-yaml.js");t.exports=r},{"./lib/js-yaml.js":20}],20:[function(e,t,n){"use strict";function r(e){return function(){
throw new Error("Function "+e+" is deprecated and cannot be used.")}}var i=e("./js-yaml/loader"),o=e("./js-yaml/dumper");t.exports.Type=e("./js-yaml/type"),t.exports.Schema=e("./js-yaml/schema"),t.exports.FAILSAFE_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.JSON_SCHEMA=e("./js-yaml/schema/json"),t.exports.CORE_SCHEMA=e("./js-yaml/schema/core"),t.exports.DEFAULT_SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_FULL_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.load=i.load,t.exports.loadAll=i.loadAll,t.exports.safeLoad=i.safeLoad,t.exports.safeLoadAll=i.safeLoadAll,t.exports.dump=o.dump,t.exports.safeDump=o.safeDump,t.exports.YAMLException=e("./js-yaml/exception"),t.exports.MINIMAL_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.scan=r("scan"),t.exports.parse=r("parse"),t.exports.compose=r("compose"),t.exports.addConstructor=r("addConstructor")},{"./js-yaml/dumper":22,"./js-yaml/exception":23,"./js-yaml/loader":24,"./js-yaml/schema":26,"./js-yaml/schema/core":27,"./js-yaml/schema/default_full":28,"./js-yaml/schema/default_safe":29,"./js-yaml/schema/failsafe":30,"./js-yaml/schema/json":31,"./js-yaml/type":32}],21:[function(e,t,n){"use strict";function r(e){return"undefined"==typeof e||null===e}function i(e){return"object"==typeof e&&null!==e}function o(e){return Array.isArray(e)?e:r(e)?[]:[e]}function s(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;r>n;n+=1)i=o[n],e[i]=t[i];return e}function a(e,t){var n,r="";for(n=0;t>n;n+=1)r+=e;return r}function l(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}t.exports.isNothing=r,t.exports.isObject=i,t.exports.toArray=o,t.exports.repeat=a,t.exports.isNegativeZero=l,t.exports.extend=s},{}],22:[function(e,t,n){"use strict";function r(e,t){var n,r,i,o,s,a,l;if(null===t)return{};for(n={},r=Object.keys(t),i=0,o=r.length;o>i;i+=1)s=r[i],a=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap[s],l&&V.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function i(e){var t,n,r;if(t=e.toString(16).toUpperCase(),255>=e)n="x",r=2;else if(65535>=e)n="u",r=4;else{if(!(4294967295>=e))throw new E("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+M.repeat("0",r-t.length)+t}function o(e){this.schema=e.schema||N,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=M.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=r(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function s(e,t){for(var n,r=M.repeat(" ",t),i=0,o=-1,s="",a=e.length;a>i;)o=e.indexOf("\n",i),-1===o?(n=e.slice(i),i=a):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(s+=r),s+=n;return s}function a(e,t){return"\n"+M.repeat(" ",e.indent*t)}function l(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;r>n;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function c(e){return e===G||e===L}function u(e){return e>=32&&126>=e||e>=161&&55295>=e&&8232!==e&&8233!==e||e>=57344&&65533>=e&&65279!==e||e>=65536&&1114111>=e}function p(e){return u(e)&&65279!==e&&e!==q&&e!==Q&&e!==Z&&e!==te&&e!==re&&e!==X&&e!==j}function h(e){return u(e)&&65279!==e&&!c(e)&&e!==$&&e!==J&&e!==X&&e!==q&&e!==Q&&e!==Z&&e!==te&&e!==re&&e!==j&&e!==U&&e!==H&&e!==B&&e!==ne&&e!==Y&&e!==W&&e!==F&&e!==z&&e!==K&&e!==ee}function d(e,t,n,r,i){var o,s,a=!1,l=!1,d=-1!==r,f=-1,m=h(e.charCodeAt(0))&&!c(e.charCodeAt(e.length-1));if(t)for(o=0;o<e.length;o++){if(s=e.charCodeAt(o),!u(s))return ue;m=m&&p(s)}else{for(o=0;o<e.length;o++){if(s=e.charCodeAt(o),s===R)a=!0,d&&(l=l||o-f-1>r&&" "!==e[f+1],f=o);else if(!u(s))return ue;m=m&&p(s)}l=l||d&&o-f-1>r&&" "!==e[f+1]}return a||l?" "===e[0]&&n>9?ue:l?ce:le:m&&!i(e)?se:ae}function f(e,t,n,r){e.dump=function(){function i(t){return l(e,t)}if(0===t.length)return"''";if(!e.noCompatMode&&-1!==oe.indexOf(t))return"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),c=r||e.flowLevel>-1&&n>=e.flowLevel;switch(d(t,c,e.indent,a,i)){case se:return t;case ae:return"'"+t.replace(/'/g,"''")+"'";case le:return"|"+m(t,e.indent)+g(s(t,o));case ce:return">"+m(t,e.indent)+g(s(y(t,a),o));case ue:return'"'+b(t,a)+'"';default:throw new E("impossible error: invalid scalar style")}}()}function m(e,t){var n=" "===e[0]?String(t):"",r="\n"===e[e.length-1],i=r&&("\n"===e[e.length-2]||"\n"===e),o=i?"+":r?"":"-";return n+o+"\n"}function g(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function y(e,t){for(var n,r,i=/(\n+)([^\n]*)/g,o=function(){var n=e.indexOf("\n");return n=-1!==n?n:e.length,i.lastIndex=n,v(e.slice(0,n),t)}(),s="\n"===e[0]||" "===e[0];r=i.exec(e);){var a=r[1],l=r[2];n=" "===l[0],o+=a+(s||n||""===l?"":"\n")+v(l,t),s=n}return o}function v(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,s=0,a=0,l="";n=i.exec(e);)a=n.index,a-o>t&&(r=s>o?s:a,l+="\n"+e.slice(o,r),o=r+1),s=a;return l+="\n",l+=e.length-o>t&&s>o?e.slice(o,s)+"\n"+e.slice(s+1):e.slice(o),l.slice(1)}function b(e){for(var t,n,r="",o=0;o<e.length;o++)t=e.charCodeAt(o),n=ie[t],r+=!n&&u(t)?e[o]:n||i(t);return r}function S(e,t,n){var r,i,o="",s=e.tag;for(r=0,i=n.length;i>r;r+=1)k(e,t,n[r],!1,!1)&&(0!==r&&(o+=", "),o+=e.dump);e.tag=s,e.dump="["+o+"]"}function w(e,t,n,r){var i,o,s="",l=e.tag;for(i=0,o=n.length;o>i;i+=1)k(e,t+1,n[i],!0,!0)&&(r&&0===i||(s+=a(e,t)),s+="- "+e.dump);e.tag=l,e.dump=s||"[]"}function x(e,t,n){var r,i,o,s,a,l="",c=e.tag,u=Object.keys(n);for(r=0,i=u.length;i>r;r+=1)a="",0!==r&&(a+=", "),o=u[r],s=n[o],k(e,t,o,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+": ",k(e,t,s,!1,!1)&&(a+=e.dump,l+=a));e.tag=c,e.dump="{"+l+"}"}function C(e,t,n,r){var i,o,s,l,c,u,p="",h=e.tag,d=Object.keys(n);if(e.sortKeys===!0)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new E("sortKeys must be a boolean or a function");for(i=0,o=d.length;o>i;i+=1)u="",r&&0===i||(u+=a(e,t)),s=d[i],l=n[s],k(e,t+1,s,!0,!0,!0)&&(c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024,c&&(u+=e.dump&&R===e.dump.charCodeAt(0)?"?":"? "),u+=e.dump,c&&(u+=a(e,t)),k(e,t+1,l,!0,c)&&(u+=e.dump&&R===e.dump.charCodeAt(0)?":":": ",u+=e.dump,p+=u));e.tag=h,e.dump=p||"{}"}function _(e,t,n){var r,i,o,s,a,l;for(i=n?e.explicitTypes:e.implicitTypes,o=0,s=i.length;s>o;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||"object"==typeof t&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(e.tag=n?a.tag:"?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,"[object Function]"===I.call(a.represent))r=a.represent(t,l);else{if(!V.call(a.represent,l))throw new E("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');r=a.represent[l](t,l)}e.dump=r}return!0}return!1}function k(e,t,n,r,i,o){e.tag=null,e.dump=n,_(e,n,!1)||_(e,n,!0);var s=I.call(e.dump);r&&(r=e.flowLevel<0||e.flowLevel>t);var a,l,c="[object Object]"===s||"[object Array]"===s;if(c&&(a=e.duplicates.indexOf(n),l=-1!==a),(null!==e.tag&&"?"!==e.tag||l||2!==e.indent&&t>0)&&(i=!1),l&&e.usedDuplicates[a])e.dump="*ref_"+a;else{if(c&&l&&!e.usedDuplicates[a]&&(e.usedDuplicates[a]=!0),"[object Object]"===s)r&&0!==Object.keys(e.dump).length?(C(e,t,e.dump,i),l&&(e.dump="&ref_"+a+e.dump)):(x(e,t,e.dump),l&&(e.dump="&ref_"+a+" "+e.dump));else if("[object Array]"===s)r&&0!==e.dump.length?(w(e,t,e.dump,i),l&&(e.dump="&ref_"+a+e.dump)):(S(e,t,e.dump),l&&(e.dump="&ref_"+a+" "+e.dump));else{if("[object String]"!==s){if(e.skipInvalid)return!1;throw new E("unacceptable kind of an object to dump "+s)}"?"!==e.tag&&f(e,e.dump,t,o)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function A(e,t){var n,r,i=[],o=[];for(D(e,i,o),n=0,r=o.length;r>n;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function D(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(i=t.indexOf(e),-1!==i)-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;o>i;i+=1)D(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;o>i;i+=1)D(e[r[i]],t,n)}function T(e,t){t=t||{};var n=new o(t);return n.noRefs||A(e,n),k(n,0,e,!0,!0)?n.dump+"\n":""}function P(e,t){return T(e,M.extend({schema:O},t))}var M=e("./common"),E=e("./exception"),N=e("./schema/default_full"),O=e("./schema/default_safe"),I=Object.prototype.toString,V=Object.prototype.hasOwnProperty,L=9,R=10,G=32,B=33,F=34,j=35,z=37,U=38,W=39,H=42,q=44,$=45,X=58,Y=62,J=63,K=64,Q=91,Z=93,ee=96,te=123,ne=124,re=125,ie={};ie[0]="\\0",ie[7]="\\a",ie[8]="\\b",ie[9]="\\t",ie[10]="\\n",ie[11]="\\v",ie[12]="\\f",ie[13]="\\r",ie[27]="\\e",ie[34]='\\"',ie[92]="\\\\",ie[133]="\\N",ie[160]="\\_",ie[8232]="\\L",ie[8233]="\\P";var oe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],se=1,ae=2,le=3,ce=4,ue=5;t.exports.dump=T,t.exports.safeDump=P},{"./common":21,"./exception":23,"./schema/default_full":28,"./schema/default_safe":29}],23:[function(e,t,n){"use strict";function r(e,t){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},t.exports=r},{}],24:[function(e,t,n){"use strict";function r(e){return 10===e||13===e}function i(e){return 9===e||32===e}function o(e){return 9===e||32===e||10===e||13===e}function s(e){return 44===e||91===e||93===e||123===e||125===e}function a(e){var t;return e>=48&&57>=e?e-48:(t=32|e,t>=97&&102>=t?t-97+10:-1)}function l(e){return 120===e?2:117===e?4:85===e?8:0}function c(e){return e>=48&&57>=e?e-48:-1}function u(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e?"\t":9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function p(e){return 65535>=e?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function h(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||W,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function d(e,t){return new j(t,new z(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function f(e,t){throw d(e,t)}function m(e,t){e.onWarning&&e.onWarning.call(null,d(e,t))}function g(e,t,n,r){var i,o,s,a;if(n>t){if(a=e.input.slice(t,n),r)for(i=0,o=a.length;o>i;i+=1)s=a.charCodeAt(i),9===s||s>=32&&1114111>=s||f(e,"expected valid JSON character");else Z.test(a)&&f(e,"the stream contains non-printable characters");e.result+=a}}function y(e,t,n,r){var i,o,s,a;for(F.isObject(n)||f(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),s=0,a=i.length;a>s;s+=1)o=i[s],H.call(t,o)||(t[o]=n[o],r[o]=!0)}function v(e,t,n,r,i,o){var s,a;if(i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(s=0,a=o.length;a>s;s+=1)y(e,t,o[s],n);else y(e,t,o,n);else e.json||H.call(n,i)||!H.call(t,i)||f(e,"duplicated mapping key"),t[i]=o,delete n[i];return t}function b(e){var t;t=e.input.charCodeAt(e.position),10===t?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):f(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function S(e,t,n){for(var o=0,s=e.input.charCodeAt(e.position);0!==s;){for(;i(s);)s=e.input.charCodeAt(++e.position);if(t&&35===s)do s=e.input.charCodeAt(++e.position);while(10!==s&&13!==s&&0!==s);if(!r(s))break;for(b(e),s=e.input.charCodeAt(e.position),o++,e.lineIndent=0;32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position)}return-1!==n&&0!==o&&e.lineIndent<n&&m(e,"deficient indentation"),o}function w(e){var t,n=e.position;return t=e.input.charCodeAt(n),(45===t||46===t)&&t===e.input.charCodeAt(n+1)&&t===e.input.charCodeAt(n+2)&&(n+=3,t=e.input.charCodeAt(n),0===t||o(t))}function x(e,t){1===t?e.result+=" ":t>1&&(e.result+=F.repeat("\n",t-1))}function C(e,t,n){var a,l,c,u,p,h,d,f,m,y=e.kind,v=e.result;if(m=e.input.charCodeAt(e.position),o(m)||s(m)||35===m||38===m||42===m||33===m||124===m||62===m||39===m||34===m||37===m||64===m||96===m)return!1;if((63===m||45===m)&&(l=e.input.charCodeAt(e.position+1),o(l)||n&&s(l)))return!1;for(e.kind="scalar",e.result="",c=u=e.position,p=!1;0!==m;){if(58===m){if(l=e.input.charCodeAt(e.position+1),o(l)||n&&s(l))break}else if(35===m){if(a=e.input.charCodeAt(e.position-1),o(a))break}else{if(e.position===e.lineStart&&w(e)||n&&s(m))break;if(r(m)){if(h=e.line,d=e.lineStart,f=e.lineIndent,S(e,!1,-1),e.lineIndent>=t){p=!0,m=e.input.charCodeAt(e.position);continue}e.position=u,e.line=h,e.lineStart=d,e.lineIndent=f;break}}p&&(g(e,c,u,!1),x(e,e.line-h),c=u=e.position,p=!1),i(m)||(u=e.position+1),m=e.input.charCodeAt(++e.position)}return g(e,c,u,!1),!!e.result||(e.kind=y,e.result=v,!1)}function _(e,t){var n,i,o;if(n=e.input.charCodeAt(e.position),39!==n)return!1;for(e.kind="scalar",e.result="",e.position++,i=o=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(g(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),39!==n)return!0;i=o=e.position,e.position++}else r(n)?(g(e,i,o,!0),x(e,S(e,!1,t)),i=o=e.position):e.position===e.lineStart&&w(e)?f(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);f(e,"unexpected end of the stream within a single quoted scalar")}function k(e,t){var n,i,o,s,c,u;if(u=e.input.charCodeAt(e.position),34!==u)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(u=e.input.charCodeAt(e.position));){if(34===u)return g(e,n,e.position,!0),e.position++,!0;if(92===u){if(g(e,n,e.position,!0),u=e.input.charCodeAt(++e.position),r(u))S(e,!1,t);else if(256>u&&ie[u])e.result+=oe[u],e.position++;else if((c=l(u))>0){for(o=c,s=0;o>0;o--)u=e.input.charCodeAt(++e.position),(c=a(u))>=0?s=(s<<4)+c:f(e,"expected hexadecimal character");e.result+=p(s),e.position++}else f(e,"unknown escape sequence");n=i=e.position}else r(u)?(g(e,n,i,!0),x(e,S(e,!1,t)),n=i=e.position):e.position===e.lineStart&&w(e)?f(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}f(e,"unexpected end of the stream within a double quoted scalar")}function A(e,t){var n,r,i,s,a,l,c,u,p,h,d,m=!0,g=e.tag,y=e.anchor,b={};if(d=e.input.charCodeAt(e.position),91===d)s=93,c=!1,r=[];else{if(123!==d)return!1;s=125,c=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),d=e.input.charCodeAt(++e.position);0!==d;){if(S(e,!0,t),d=e.input.charCodeAt(e.position),d===s)return e.position++,e.tag=g,e.anchor=y,e.kind=c?"mapping":"sequence",e.result=r,!0;m||f(e,"missed comma between flow collection entries"),p=u=h=null,a=l=!1,63===d&&(i=e.input.charCodeAt(e.position+1),o(i)&&(a=l=!0,e.position++,S(e,!0,t))),n=e.line,O(e,t,q,!1,!0),p=e.tag,u=e.result,S(e,!0,t),d=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==d||(a=!0,d=e.input.charCodeAt(++e.position),S(e,!0,t),O(e,t,q,!1,!0),h=e.result),c?v(e,r,b,p,u,h):a?r.push(v(e,null,b,p,u,h)):r.push(u),S(e,!0,t),d=e.input.charCodeAt(e.position),44===d?(m=!0,d=e.input.charCodeAt(++e.position)):m=!1}f(e,"unexpected end of the stream within a flow collection")}function D(e,t){var n,o,s,a,l=J,u=!1,p=!1,h=t,d=0,m=!1;if(a=e.input.charCodeAt(e.position),124===a)o=!1;else{if(62!==a)return!1;o=!0}for(e.kind="scalar",e.result="";0!==a;)if(a=e.input.charCodeAt(++e.position),43===a||45===a)J===l?l=43===a?Q:K:f(e,"repeat of a chomping mode identifier");else{if(!((s=c(a))>=0))break;0===s?f(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):p?f(e,"repeat of an indentation width identifier"):(h=t+s-1,p=!0)}if(i(a)){do a=e.input.charCodeAt(++e.position);while(i(a));if(35===a)do a=e.input.charCodeAt(++e.position);while(!r(a)&&0!==a)}for(;0!==a;){for(b(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!p||e.lineIndent<h)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!p&&e.lineIndent>h&&(h=e.lineIndent),r(a))d++;else{if(e.lineIndent<h){l===Q?e.result+=F.repeat("\n",u?1+d:d):l===J&&u&&(e.result+="\n");break}for(o?i(a)?(m=!0,e.result+=F.repeat("\n",u?1+d:d)):m?(m=!1,e.result+=F.repeat("\n",d+1)):0===d?u&&(e.result+=" "):e.result+=F.repeat("\n",d):e.result+=F.repeat("\n",u?1+d:d),u=!0,p=!0,d=0,n=e.position;!r(a)&&0!==a;)a=e.input.charCodeAt(++e.position);g(e,n,e.position,!1)}}return!0}function T(e,t){var n,r,i,s=e.tag,a=e.anchor,l=[],c=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=l),i=e.input.charCodeAt(e.position);0!==i&&45===i&&(r=e.input.charCodeAt(e.position+1),o(r));)if(c=!0,e.position++,S(e,!0,-1)&&e.lineIndent<=t)l.push(null),i=e.input.charCodeAt(e.position);else if(n=e.line,O(e,t,X,!1,!0),l.push(e.result),S(e,!0,-1),i=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==i)f(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!c&&(e.tag=s,e.anchor=a,e.kind="sequence",e.result=l,!0)}function P(e,t,n){var r,s,a,l,c=e.tag,u=e.anchor,p={},h={},d=null,m=null,g=null,y=!1,b=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=p),l=e.input.charCodeAt(e.position);0!==l;){if(r=e.input.charCodeAt(e.position+1),a=e.line,63!==l&&58!==l||!o(r)){if(!O(e,n,$,!1,!0))break;if(e.line===a){for(l=e.input.charCodeAt(e.position);i(l);)l=e.input.charCodeAt(++e.position);if(58===l)l=e.input.charCodeAt(++e.position),o(l)||f(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(v(e,p,h,d,m,null),d=m=g=null),b=!0,y=!1,s=!1,d=e.tag,m=e.result;else{if(!b)return e.tag=c,e.anchor=u,!0;f(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=c,e.anchor=u,!0;f(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(y&&(v(e,p,h,d,m,null),d=m=g=null),b=!0,y=!0,s=!0):y?(y=!1,s=!0):f(e,"incomplete explicit mapping pair; a key node is missed"),e.position+=1,l=r;if((e.line===a||e.lineIndent>t)&&(O(e,t,Y,!0,s)&&(y?m=e.result:g=e.result),y||(v(e,p,h,d,m,g),d=m=g=null),S(e,!0,-1),l=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==l)f(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&v(e,p,h,d,m,null),b&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=p),b}function M(e){var t,n,r,i,s=!1,a=!1;if(i=e.input.charCodeAt(e.position),33!==i)return!1;if(null!==e.tag&&f(e,"duplication of a tag property"),i=e.input.charCodeAt(++e.position),60===i?(s=!0,i=e.input.charCodeAt(++e.position)):33===i?(a=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,s){do i=e.input.charCodeAt(++e.position);while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):f(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!o(i);)33===i&&(a?f(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),ne.test(n)||f(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),te.test(r)&&f(e,"tag suffix cannot contain flow indicator characters")}return r&&!re.test(r)&&f(e,"tag name cannot contain such characters: "+r),s?e.tag=r:H.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:f(e,'undeclared tag handle "'+n+'"'),!0}function E(e){var t,n;if(n=e.input.charCodeAt(e.position),38!==n)return!1;for(null!==e.anchor&&f(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!o(n)&&!s(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&f(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function N(e){var t,n,r;if(r=e.input.charCodeAt(e.position),42!==r)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!o(r)&&!s(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&f(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(n)||f(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],S(e,!0,-1),!0}function O(e,t,n,r,i){var o,s,a,l,c,u,p,h,d=1,m=!1,g=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=Y===n||X===n,r&&S(e,!0,-1)&&(m=!0,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)),1===d)for(;M(e)||E(e);)S(e,!0,-1)?(m=!0,a=o,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)):a=!1;if(a&&(a=m||i),1!==d&&Y!==n||(p=q===n||$===n?t:t+1,h=e.position-e.lineStart,1===d?a&&(T(e,h)||P(e,h,p))||A(e,p)?g=!0:(s&&D(e,p)||_(e,p)||k(e,p)?g=!0:N(e)?(g=!0,null===e.tag&&null===e.anchor||f(e,"alias node should not have any properties")):C(e,p,q===n)&&(g=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===d&&(g=a&&T(e,h))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(l=0,c=e.implicitTypes.length;c>l;l+=1)if(u=e.implicitTypes[l],u.resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else H.call(e.typeMap,e.tag)?(u=e.typeMap[e.tag],null!==e.result&&u.kind!==e.kind&&f(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result)?(e.result=u.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):f(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):f(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||g}function I(e){var t,n,s,a,l=e.position,c=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(a=e.input.charCodeAt(e.position))&&(S(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==a));){for(c=!0,a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!o(a);)a=e.input.charCodeAt(++e.position);for(n=e.input.slice(t,e.position),s=[],n.length<1&&f(e,"directive name must not be less than one character in length");0!==a;){for(;i(a);)a=e.input.charCodeAt(++e.position);if(35===a){do a=e.input.charCodeAt(++e.position);while(0!==a&&!r(a));break}if(r(a))break;for(t=e.position;0!==a&&!o(a);)a=e.input.charCodeAt(++e.position);s.push(e.input.slice(t,e.position))}0!==a&&b(e),H.call(ae,n)?ae[n](e,n,s):m(e,'unknown document directive "'+n+'"')}return S(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,S(e,!0,-1)):c&&f(e,"directives end mark is expected"),O(e,e.lineIndent-1,Y,!1,!0),S(e,!0,-1),e.checkLineBreaks&&ee.test(e.input.slice(l,e.position))&&m(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&w(e)?void(46===e.input.charCodeAt(e.position)&&(e.position+=3,S(e,!0,-1))):void(e.position<e.length-1&&f(e,"end of the stream or a document separator is expected"))}function V(e,t){e=String(e),t=t||{},0!==e.length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new h(e,t);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)I(n);return n.documents}function L(e,t,n){var r,i,o=V(e,n);for(r=0,i=o.length;i>r;r+=1)t(o[r])}function R(e,t){var n=V(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new j("expected a single document in the stream, but found more")}}function G(e,t,n){L(e,t,F.extend({schema:U},n))}function B(e,t){return R(e,F.extend({schema:U},t))}for(var F=e("./common"),j=e("./exception"),z=e("./mark"),U=e("./schema/default_safe"),W=e("./schema/default_full"),H=Object.prototype.hasOwnProperty,q=1,$=2,X=3,Y=4,J=1,K=2,Q=3,Z=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ee=/[\x85\u2028\u2029]/,te=/[,\[\]\{\}]/,ne=/^(?:!|!!|![a-z\-]+!)$/i,re=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,ie=new Array(256),oe=new Array(256),se=0;256>se;se++)ie[se]=u(se)?1:0,oe[se]=u(se);var ae={YAML:function(e,t,n){var r,i,o;null!==e.version&&f(e,"duplication of %YAML directive"),1!==n.length&&f(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),null===r&&f(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&f(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=2>o,1!==o&&2!==o&&m(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&f(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],ne.test(r)||f(e,"ill-formed tag handle (first argument) of the TAG directive"),H.call(e.tagMap,r)&&f(e,'there is a previously declared suffix for "'+r+'" tag handle'),re.test(i)||f(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[r]=i}};t.exports.loadAll=L,t.exports.load=R,t.exports.safeLoadAll=G,t.exports.safeLoad=B},{"./common":21,"./exception":23,"./mark":25,"./schema/default_full":28,"./schema/default_safe":29}],25:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.name=e,this.buffer=t,this.position=n,this.line=r,this.column=i}var i=e("./common");r.prototype.getSnippet=function(e,t){var n,r,o,s,a;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",r=this.position;r>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>t/2-1){n=" ... ",r+=5;break}for(o="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(s));)if(s+=1,s-this.position>t/2-1){o=" ... ",s-=5;break}return a=this.buffer.slice(r,s),i.repeat(" ",e)+n+a+o+"\n"+i.repeat(" ",e+this.position-r+n.length)+"^"},r.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet(),t&&(n+=":\n"+t)),n},t.exports=r},{"./common":21}],26:[function(e,t,n){"use strict";function r(e,t,n){var i=[];return e.include.forEach(function(e){n=r(e,t,n)}),e[t].forEach(function(e){n.forEach(function(t,n){t.tag===e.tag&&i.push(n)}),n.push(e)}),n.filter(function(e,t){return-1===i.indexOf(t)})}function i(){function e(e){r[e.tag]=e}var t,n,r={};for(t=0,n=arguments.length;n>t;t+=1)arguments[t].forEach(e);return r}function o(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=r(this,"implicit",[]),this.compiledExplicit=r(this,"explicit",[]),this.compiledTypeMap=i(this.compiledImplicit,this.compiledExplicit)}var s=e("./common"),a=e("./exception"),l=e("./type");o.DEFAULT=null,o.create=function(){var e,t;switch(arguments.length){case 1:e=o.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new a("Wrong number of arguments for Schema.create function")}if(e=s.toArray(e),t=s.toArray(t),!e.every(function(e){return e instanceof o}))throw new a("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof l}))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new o({include:e,explicit:t})},t.exports=o},{"./common":21,"./exception":23,"./type":32}],27:[function(e,t,n){"use strict";var r=e("../schema");t.exports=new r({include:[e("./json")]})},{"../schema":26,"./json":31}],28:[function(e,t,n){"use strict";var r=e("../schema");t.exports=r.DEFAULT=new r({include:[e("./default_safe")],explicit:[e("../type/js/undefined"),e("../type/js/regexp"),e("../type/js/function")]})},{"../schema":26,"../type/js/function":37,"../type/js/regexp":38,"../type/js/undefined":39,"./default_safe":29}],29:[function(e,t,n){"use strict";var r=e("../schema");t.exports=new r({include:[e("./core")],implicit:[e("../type/timestamp"),e("../type/merge")],explicit:[e("../type/binary"),e("../type/omap"),e("../type/pairs"),e("../type/set")]})},{"../schema":26,"../type/binary":33,"../type/merge":41,"../type/omap":43,"../type/pairs":44,"../type/set":46,"../type/timestamp":48,"./core":27}],30:[function(e,t,n){"use strict";var r=e("../schema");t.exports=new r({explicit:[e("../type/str"),e("../type/seq"),e("../type/map")]})},{"../schema":26,"../type/map":40,"../type/seq":45,"../type/str":47}],31:[function(e,t,n){"use strict";var r=e("../schema");t.exports=new r({include:[e("./failsafe")],implicit:[e("../type/null"),e("../type/bool"),e("../type/int"),e("../type/float")]})},{"../schema":26,"../type/bool":34,"../type/float":35,"../type/int":36,"../type/null":42,"./failsafe":30}],32:[function(e,t,n){"use strict";function r(e){var t={};return null!==e&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function i(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===s.indexOf(t))throw new o('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=r(t.styleAliases||null),-1===a.indexOf(this.kind))throw new o('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var o=e("./exception"),s=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],a=["scalar","sequence","mapping"];t.exports=i},{"./exception":23}],33:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=u;for(n=0;i>n;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(0>t)return!1;r+=6}return r%8===0}function i(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=u,s=0,l=[];for(t=0;i>t;t++)t%4===0&&t&&(l.push(s>>16&255),l.push(s>>8&255),l.push(255&s)),s=s<<6|o.indexOf(r.charAt(t));return n=i%4*6,0===n?(l.push(s>>16&255),l.push(s>>8&255),l.push(255&s)):18===n?(l.push(s>>10&255),l.push(s>>2&255)):12===n&&l.push(s>>4&255),a?new a(l):l}function o(e){var t,n,r="",i=0,o=e.length,s=u;for(t=0;o>t;t++)t%3===0&&t&&(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]),i=(i<<8)+e[t];return n=o%3,0===n?(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]):2===n?(r+=s[i>>10&63],r+=s[i>>4&63],r+=s[i<<2&63],r+=s[64]):1===n&&(r+=s[i>>2&63],r+=s[i<<4&63],r+=s[64],r+=s[64]),r}function s(e){return a&&a.isBuffer(e)}var a;try{var l=e;a=l("buffer").Buffer}catch(e){}var c=e("../type"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";t.exports=new c("tag:yaml.org,2002:binary",{kind:"scalar",resolve:r,construct:i,predicate:s,represent:o})},{"../type":32}],34:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)}function i(e){return"true"===e||"True"===e||"TRUE"===e}function o(e){return"[object Boolean]"===Object.prototype.toString.call(e)}var s=e("../type");t.exports=new s("tag:yaml.org,2002:bool",{kind:"scalar",resolve:r,construct:i,predicate:o,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){
return e?"True":"False"}},defaultStyle:"lowercase"})},{"../type":32}],35:[function(e,t,n){"use strict";function r(e){return null!==e&&!!c.test(e)}function i(e){var t,n,r,i;return t=e.replace(/_/g,"").toLowerCase(),n="-"===t[0]?-1:1,i=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){i.unshift(parseFloat(e,10))}),t=0,r=1,i.forEach(function(e){t+=e*r,r*=60}),n*t):n*parseFloat(t,10)}function o(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(a.isNegativeZero(e))return"-0.0";return n=e.toString(10),u.test(n)?n.replace("e",".e"):n}function s(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!==0||a.isNegativeZero(e))}var a=e("../common"),l=e("../type"),c=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),u=/^[-+]?[0-9]+e/;t.exports=new l("tag:yaml.org,2002:float",{kind:"scalar",resolve:r,construct:i,predicate:s,represent:o,defaultStyle:"lowercase"})},{"../common":21,"../type":32}],36:[function(e,t,n){"use strict";function r(e){return e>=48&&57>=e||e>=65&&70>=e||e>=97&&102>=e}function i(e){return e>=48&&55>=e}function o(e){return e>=48&&57>=e}function s(e){if(null===e)return!1;var t,n=e.length,s=0,a=!1;if(!n)return!1;if(t=e[s],"-"!==t&&"+"!==t||(t=e[++s]),"0"===t){if(s+1===n)return!0;if(t=e[++s],"b"===t){for(s++;n>s;s++)if(t=e[s],"_"!==t){if("0"!==t&&"1"!==t)return!1;a=!0}return a}if("x"===t){for(s++;n>s;s++)if(t=e[s],"_"!==t){if(!r(e.charCodeAt(s)))return!1;a=!0}return a}for(;n>s;s++)if(t=e[s],"_"!==t){if(!i(e.charCodeAt(s)))return!1;a=!0}return a}for(;n>s;s++)if(t=e[s],"_"!==t){if(":"===t)break;if(!o(e.charCodeAt(s)))return!1;a=!0}return!!a&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(s)))}function a(e){var t,n,r=e,i=1,o=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),t=r[0],"-"!==t&&"+"!==t||("-"===t&&(i=-1),r=r.slice(1),t=r[0]),"0"===r?0:"0"===t?"b"===r[1]?i*parseInt(r.slice(2),2):"x"===r[1]?i*parseInt(r,16):i*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach(function(e){o.unshift(parseInt(e,10))}),r=0,n=1,o.forEach(function(e){r+=e*n,n*=60}),i*r):i*parseInt(r,10)}function l(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1===0&&!c.isNegativeZero(e)}var c=e("../common"),u=e("../type");t.exports=new u("tag:yaml.org,2002:int",{kind:"scalar",resolve:s,construct:a,predicate:l,represent:{binary:function(e){return"0b"+e.toString(2)},octal:function(e){return"0"+e.toString(8)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return"0x"+e.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":21,"../type":32}],37:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;try{var t="("+e+")",n=a.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&"FunctionExpression"===n.body[0].expression.type}catch(e){return!1}}function i(e){var t,n="("+e+")",r=a.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(e){i.push(e.name)}),t=r.body[0].expression.body.range,new Function(i,n.slice(t[0]+1,t[1]-1))}function o(e){return e.toString()}function s(e){return"[object Function]"===Object.prototype.toString.call(e)}var a;try{var l=e;a=l("esprima")}catch(e){"undefined"!=typeof window&&(a=window.esprima)}var c=e("../../type");t.exports=new c("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:r,construct:i,predicate:s,represent:o})},{"../../type":32}],38:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),r="";if("/"===t[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==t[t.length-r.length-1])return!1}return!0}function i(e){var t=e,n=/\/([gim]*)$/.exec(e),r="";return"/"===t[0]&&(n&&(r=n[1]),t=t.slice(1,t.length-r.length-1)),new RegExp(t,r)}function o(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function s(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var a=e("../../type");t.exports=new a("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:r,construct:i,predicate:s,represent:o})},{"../../type":32}],39:[function(e,t,n){"use strict";function r(){return!0}function i(){}function o(){return""}function s(e){return"undefined"==typeof e}var a=e("../../type");t.exports=new a("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:r,construct:i,predicate:s,represent:o})},{"../../type":32}],40:[function(e,t,n){"use strict";var r=e("../type");t.exports=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},{"../type":32}],41:[function(e,t,n){"use strict";function r(e){return"<<"===e||null===e}var i=e("../type");t.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:r})},{"../type":32}],42:[function(e,t,n){"use strict";function r(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)}function i(){return null}function o(e){return null===e}var s=e("../type");t.exports=new s("tag:yaml.org,2002:null",{kind:"scalar",resolve:r,construct:i,predicate:o,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":32}],43:[function(e,t,n){"use strict";function r(e){if(null===e)return!0;var t,n,r,i,o,l=[],c=e;for(t=0,n=c.length;n>t;t+=1){if(r=c[t],o=!1,"[object Object]"!==a.call(r))return!1;for(i in r)if(s.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==l.indexOf(i))return!1;l.push(i)}return!0}function i(e){return null!==e?e:[]}var o=e("../type"),s=Object.prototype.hasOwnProperty,a=Object.prototype.toString;t.exports=new o("tag:yaml.org,2002:omap",{kind:"sequence",resolve:r,construct:i})},{"../type":32}],44:[function(e,t,n){"use strict";function r(e){if(null===e)return!0;var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;n>t;t+=1){if(r=a[t],"[object Object]"!==s.call(r))return!1;if(i=Object.keys(r),1!==i.length)return!1;o[t]=[i[0],r[i[0]]]}return!0}function i(e){if(null===e)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;n>t;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var o=e("../type"),s=Object.prototype.toString;t.exports=new o("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:r,construct:i})},{"../type":32}],45:[function(e,t,n){"use strict";var r=e("../type");t.exports=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},{"../type":32}],46:[function(e,t,n){"use strict";function r(e){if(null===e)return!0;var t,n=e;for(t in n)if(s.call(n,t)&&null!==n[t])return!1;return!0}function i(e){return null!==e?e:{}}var o=e("../type"),s=Object.prototype.hasOwnProperty;t.exports=new o("tag:yaml.org,2002:set",{kind:"mapping",resolve:r,construct:i})},{"../type":32}],47:[function(e,t,n){"use strict";var r=e("../type");t.exports=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},{"../type":32}],48:[function(e,t,n){"use strict";function r(e){return null!==e&&(null!==a.exec(e)||null!==l.exec(e))}function i(e){var t,n,r,i,o,s,c,u,p,h,d=0,f=null;if(t=a.exec(e),null===t&&(t=l.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],c=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(u=+t[10],p=+(t[11]||0),f=6e4*(60*u+p),"-"===t[9]&&(f=-f)),h=new Date(Date.UTC(n,r,i,o,s,c,d)),f&&h.setTime(h.getTime()-f),h}function o(e){return e.toISOString()}var s=e("../type"),a=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),l=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");t.exports=new s("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:r,construct:i,instanceOf:Date,represent:o})},{"../type":32}],49:[function(e,t,n){function r(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?s(r+n,0):n;else if(n){var a=o(e,t);return r>a&&(t===t?t===e[a]:e[a]!==e[a])?a:-1}return i(e,t,n||0)}var i=e("../internal/baseIndexOf"),o=e("../internal/binaryIndex"),s=Math.max;t.exports=r},{"../internal/baseIndexOf":78,"../internal/binaryIndex":92}],50:[function(e,t,n){function r(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=r},{}],51:[function(e,t,n){function r(e){if(l(e)&&!a(e)&&!(e instanceof i)){if(e instanceof o)return e;if(p.call(e,"__chain__")&&p.call(e,"__wrapped__"))return c(e)}return new o(e)}var i=e("../internal/LazyWrapper"),o=e("../internal/LodashWrapper"),s=e("../internal/baseLodash"),a=e("../lang/isArray"),l=e("../internal/isObjectLike"),c=e("../internal/wrapperClone"),u=Object.prototype,p=u.hasOwnProperty;r.prototype=s.prototype,t.exports=r},{"../internal/LazyWrapper":60,"../internal/LodashWrapper":61,"../internal/baseLodash":82,"../internal/isObjectLike":126,"../internal/wrapperClone":137,"../lang/isArray":140}],52:[function(e,t,n){t.exports=e("./forEach")},{"./forEach":54}],53:[function(e,t,n){var r=e("../internal/baseEach"),i=e("../internal/createFind"),o=i(r);t.exports=o},{"../internal/baseEach":71,"../internal/createFind":102}],54:[function(e,t,n){var r=e("../internal/arrayEach"),i=e("../internal/baseEach"),o=e("../internal/createForEach"),s=o(r,i);t.exports=s},{"../internal/arrayEach":63,"../internal/baseEach":71,"../internal/createForEach":103}],55:[function(e,t,n){function r(e,t,n,r){var h=e?o(e):0;return l(h)||(e=u(e),h=e.length),n="number"!=typeof n||r&&a(t,n,r)?0:0>n?p(h+n,0):n||0,"string"==typeof e||!s(e)&&c(e)?h>=n&&e.indexOf(t,n)>-1:!!h&&i(e,t,n)>-1}var i=e("../internal/baseIndexOf"),o=e("../internal/getLength"),s=e("../lang/isArray"),a=e("../internal/isIterateeCall"),l=e("../internal/isLength"),c=e("../lang/isString"),u=e("../object/values"),p=Math.max;t.exports=r},{"../internal/baseIndexOf":78,"../internal/getLength":112,"../internal/isIterateeCall":122,"../internal/isLength":125,"../lang/isArray":140,"../lang/isString":146,"../object/values":152}],56:[function(e,t,n){function r(e,t,n){var r=a(e)?i:s;return t=o(t,n,3),r(e,t)}var i=e("../internal/arrayMap"),o=e("../internal/baseCallback"),s=e("../internal/baseMap"),a=e("../lang/isArray");t.exports=r},{"../internal/arrayMap":64,"../internal/baseCallback":67,"../internal/baseMap":83,"../lang/isArray":140}],57:[function(e,t,n){var r=e("../internal/getNative"),i=r(Date,"now"),o=i||function(){return(new Date).getTime()};t.exports=o},{"../internal/getNative":114}],58:[function(e,t,n){var r=e("../internal/createWrapper"),i=e("../internal/replaceHolders"),o=e("./restParam"),s=1,a=32,l=o(function(e,t,n){var o=s;if(n.length){var c=i(n,l.placeholder);o|=a}return r(e,o,t,n,c)});l.placeholder={},t.exports=l},{"../internal/createWrapper":106,"../internal/replaceHolders":132,"./restParam":59}],59:[function(e,t,n){function r(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-t,0),s=Array(i);++r<i;)s[r]=n[t+r];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=s,e.apply(this,a)}}var i="Expected a function",o=Math.max;t.exports=r},{}],60:[function(e,t,n){function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=s,this.__views__=[]}var i=e("./baseCreate"),o=e("./baseLodash"),s=Number.POSITIVE_INFINITY;r.prototype=i(o.prototype),r.prototype.constructor=r,t.exports=r},{"./baseCreate":70,"./baseLodash":82}],61:[function(e,t,n){function r(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}var i=e("./baseCreate"),o=e("./baseLodash");r.prototype=i(o.prototype),r.prototype.constructor=r,t.exports=r},{"./baseCreate":70,"./baseLodash":82}],62:[function(e,t,n){function r(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.exports=r},{}],63:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=r},{}],64:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}t.exports=r},{}],65:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}t.exports=r},{}],66:[function(e,t,n){function r(e,t){return null==t?e:i(t,o(t),e)}var i=e("./baseCopy"),o=e("../object/keys");t.exports=r},{"../object/keys":149,"./baseCopy":69}],67:[function(e,t,n){function r(e,t,n){var r=typeof e;return"function"==r?void 0===t?e:s(e,t,n):null==e?a:"object"==r?i(e):void 0===t?l(e):o(e,t)}var i=e("./baseMatches"),o=e("./baseMatchesProperty"),s=e("./bindCallback"),a=e("../utility/identity"),l=e("../utility/property");t.exports=r},{"../utility/identity":154,"../utility/property":156,"./baseMatches":84,"./baseMatchesProperty":85,"./bindCallback":94}],68:[function(e,t,n){function r(e,t,n,m,g,y,v){var S;if(n&&(S=g?n(e,m,g):n(e)),void 0!==S)return S;if(!d(e))return e;var w=p(e);if(w){if(S=l(e),!t)return i(e,S)}else{var C=B.call(e),_=C==b;if(C!=x&&C!=f&&(!_||g))return R[C]?c(e,C,t):g?e:{};if(h(e))return g?e:{};if(S=u(_?{}:e),!t)return s(S,e)}y||(y=[]),v||(v=[]);for(var k=y.length;k--;)if(y[k]==e)return v[k];return y.push(e),v.push(S),(w?o:a)(e,function(i,o){S[o]=r(i,t,n,o,e,y,v)}),S}var i=e("./arrayCopy"),o=e("./arrayEach"),s=e("./baseAssign"),a=e("./baseForOwn"),l=e("./initCloneArray"),c=e("./initCloneByTag"),u=e("./initCloneObject"),p=e("../lang/isArray"),h=e("./isHostObject"),d=e("../lang/isObject"),f="[object Arguments]",m="[object Array]",g="[object Boolean]",y="[object Date]",v="[object Error]",b="[object Function]",S="[object Map]",w="[object Number]",x="[object Object]",C="[object RegExp]",_="[object Set]",k="[object String]",A="[object WeakMap]",D="[object ArrayBuffer]",T="[object Float32Array]",P="[object Float64Array]",M="[object Int8Array]",E="[object Int16Array]",N="[object Int32Array]",O="[object Uint8Array]",I="[object Uint8ClampedArray]",V="[object Uint16Array]",L="[object Uint32Array]",R={};R[f]=R[m]=R[D]=R[g]=R[y]=R[T]=R[P]=R[M]=R[E]=R[N]=R[w]=R[x]=R[C]=R[k]=R[O]=R[I]=R[V]=R[L]=!0,R[v]=R[b]=R[S]=R[_]=R[A]=!1;var G=Object.prototype,B=G.toString;t.exports=r},{"../lang/isArray":140,"../lang/isObject":144,"./arrayCopy":62,"./arrayEach":63,"./baseAssign":66,"./baseForOwn":76,"./initCloneArray":116,"./initCloneByTag":117,"./initCloneObject":118,"./isHostObject":120}],69:[function(e,t,n){function r(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}t.exports=r},{}],70:[function(e,t,n){var r=e("../lang/isObject"),i=function(){function e(){}return function(t){if(r(t)){e.prototype=t;var n=new e;e.prototype=void 0}return n||{}}}();t.exports=i},{"../lang/isObject":144}],71:[function(e,t,n){var r=e("./baseForOwn"),i=e("./createBaseEach"),o=i(r);t.exports=o},{"./baseForOwn":76,"./createBaseEach":98}],72:[function(e,t,n){function r(e,t,n,r){var i;return n(e,function(e,n,o){return t(e,n,o)?(i=r?n:e,!1):void 0}),i}t.exports=r},{}],73:[function(e,t,n){function r(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}t.exports=r},{}],74:[function(e,t,n){var r=e("./createBaseFor"),i=r();t.exports=i},{"./createBaseFor":99}],75:[function(e,t,n){function r(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keysIn");t.exports=r},{"../object/keysIn":150,"./baseFor":74}],76:[function(e,t,n){function r(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keys");t.exports=r},{"../object/keys":149,"./baseFor":74}],77:[function(e,t,n){function r(e,t,n){if(null!=e){e=i(e),void 0!==n&&n in e&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=i(e)[t[r++]];return r&&r==o?e:void 0}}var i=e("./toObject");t.exports=r},{"./toObject":135}],78:[function(e,t,n){function r(e,t,n){if(t!==t)return i(e,n);for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}var i=e("./indexOfNaN");t.exports=r},{"./indexOfNaN":115}],79:[function(e,t,n){function r(e,t,n,a,l,c){return e===t||(null==e||null==t||!o(e)&&!s(t)?e!==e&&t!==t:i(e,t,r,n,a,l,c))}var i=e("./baseIsEqualDeep"),o=e("../lang/isObject"),s=e("./isObjectLike");t.exports=r},{"../lang/isObject":144,"./baseIsEqualDeep":80,"./isObjectLike":126}],80:[function(e,t,n){function r(e,t,n,r,d,g,y){var v=a(e),b=a(t),S=p,w=p;v||(S=m.call(e),S==u?S=h:S!=h&&(v=c(e))),b||(w=m.call(t),w==u?w=h:w!=h&&(b=c(t)));var x=S==h&&!l(e),C=w==h&&!l(t),_=S==w;if(_&&!v&&!x)return o(e,t,S);if(!d){var k=x&&f.call(e,"__wrapped__"),A=C&&f.call(t,"__wrapped__");if(k||A)return n(k?e.value():e,A?t.value():t,r,d,g,y)}if(!_)return!1;g||(g=[]),y||(y=[]);for(var D=g.length;D--;)if(g[D]==e)return y[D]==t;g.push(e),y.push(t);var T=(v?i:s)(e,t,n,r,d,g,y);return g.pop(),y.pop(),T}var i=e("./equalArrays"),o=e("./equalByTag"),s=e("./equalObjects"),a=e("../lang/isArray"),l=e("./isHostObject"),c=e("../lang/isTypedArray"),u="[object Arguments]",p="[object Array]",h="[object Object]",d=Object.prototype,f=d.hasOwnProperty,m=d.toString;t.exports=r},{"../lang/isArray":140,"../lang/isTypedArray":147,"./equalArrays":107,"./equalByTag":108,"./equalObjects":109,"./isHostObject":120}],81:[function(e,t,n){function r(e,t,n){var r=t.length,s=r,a=!n;if(null==e)return!s;for(e=o(e);r--;){var l=t[r];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<s;){l=t[r];var c=l[0],u=e[c],p=l[1];if(a&&l[2]){if(void 0===u&&!(c in e))return!1}else{var h=n?n(u,p,c):void 0;if(!(void 0===h?i(p,u,n,!0):h))return!1}}return!0}var i=e("./baseIsEqual"),o=e("./toObject");t.exports=r},{"./baseIsEqual":79,"./toObject":135}],82:[function(e,t,n){function r(){}t.exports=r},{}],83:[function(e,t,n){function r(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,function(e,i,o){r[++n]=t(e,i,o)}),r}var i=e("./baseEach"),o=e("./isArrayLike");t.exports=r},{"./baseEach":71,"./isArrayLike":119}],84:[function(e,t,n){function r(e){var t=o(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&(e=s(e),e[n]===r&&(void 0!==r||n in e))}}return function(e){return i(e,t)}}var i=e("./baseIsMatch"),o=e("./getMatchData"),s=e("./toObject");t.exports=r},{"./baseIsMatch":81,"./getMatchData":113,"./toObject":135}],85:[function(e,t,n){function r(e,t){var n=a(e),r=l(e)&&c(t),d=e+"";return e=h(e),function(a){if(null==a)return!1;var l=d;if(a=p(a),(n||!r)&&!(l in a)){if(a=1==e.length?a:i(a,s(e,0,-1)),null==a)return!1;l=u(e),a=p(a)}return a[l]===t?void 0!==t||l in a:o(t,a[l],void 0,!0)}}var i=e("./baseGet"),o=e("./baseIsEqual"),s=e("./baseSlice"),a=e("../lang/isArray"),l=e("./isKey"),c=e("./isStrictComparable"),u=e("../array/last"),p=e("./toObject"),h=e("./toPath");t.exports=r},{"../array/last":50,"../lang/isArray":140,"./baseGet":77,"./baseIsEqual":79,"./baseSlice":89,"./isKey":123,"./isStrictComparable":127,"./toObject":135,"./toPath":136}],86:[function(e,t,n){function r(e){return function(t){return null==t?void 0:i(t)[e]}}var i=e("./toObject");t.exports=r},{"./toObject":135}],87:[function(e,t,n){function r(e){var t=e+"";return e=o(e),function(n){return i(n,e,t)}}var i=e("./baseGet"),o=e("./toPath");t.exports=r},{"./baseGet":77,"./toPath":136}],88:[function(e,t,n){var r=e("../utility/identity"),i=e("./metaMap"),o=i?function(e,t){return i.set(e,t),e}:r;t.exports=o},{"../utility/identity":154,"./metaMap":129}],89:[function(e,t,n){function r(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=void 0===n||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}t.exports=r},{}],90:[function(e,t,n){function r(e){return null==e?"":e+""}t.exports=r},{}],91:[function(e,t,n){function r(e,t){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e[t[n]];return i}t.exports=r},{}],92:[function(e,t,n){function r(e,t,n){var r=0,s=e?e.length:r;if("number"==typeof t&&t===t&&a>=s){for(;s>r;){var l=r+s>>>1,c=e[l];(n?t>=c:t>c)&&null!==c?r=l+1:s=l}return s}return i(e,t,o,n)}var i=e("./binaryIndexBy"),o=e("../utility/identity"),s=4294967295,a=s>>>1;t.exports=r},{"../utility/identity":154,"./binaryIndexBy":93}],93:[function(e,t,n){function r(e,t,n,r){t=n(t);for(var s=0,l=e?e.length:0,c=t!==t,u=null===t,p=void 0===t;l>s;){var h=i((s+l)/2),d=n(e[h]),f=void 0!==d,m=d===d;if(c)var g=m||r;else g=u?m&&f&&(r||null!=d):p?m&&(r||f):null!=d&&(r?t>=d:t>d);g?s=h+1:l=h}return o(l,a)}var i=Math.floor,o=Math.min,s=4294967295,a=s-1;t.exports=r},{}],94:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,s){return e.call(t,n,r,i,o,s)}}return function(){return e.apply(t,arguments)}}var i=e("../utility/identity");t.exports=r},{"../utility/identity":154}],95:[function(e,t,n){(function(e){function n(e){var t=new r(e.byteLength),n=new i(t);return n.set(new i(e)),t}var r=e.ArrayBuffer,i=e.Uint8Array;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(e,t,n){function r(e,t,n){for(var r=n.length,o=-1,s=i(e.length-r,0),a=-1,l=t.length,c=Array(l+s);++a<l;)c[a]=t[a];for(;++o<r;)c[n[o]]=e[o];for(;s--;)c[a++]=e[o++];return c}var i=Math.max;t.exports=r},{}],97:[function(e,t,n){function r(e,t,n){for(var r=-1,o=n.length,s=-1,a=i(e.length-o,0),l=-1,c=t.length,u=Array(a+c);++s<a;)u[s]=e[s];for(var p=s;++l<c;)u[p+l]=t[l];for(;++r<o;)u[p+n[r]]=e[s++];return u}var i=Math.max;t.exports=r},{}],98:[function(e,t,n){function r(e,t){return function(n,r){var a=n?i(n):0;if(!o(a))return e(n,r);for(var l=t?a:-1,c=s(n);(t?l--:++l<a)&&r(c[l],l,c)!==!1;);return n}}var i=e("./getLength"),o=e("./isLength"),s=e("./toObject");t.exports=r},{"./getLength":112,"./isLength":125,"./toObject":135}],99:[function(e,t,n){function r(e){return function(t,n,r){for(var o=i(t),s=r(t),a=s.length,l=e?a:-1;e?l--:++l<a;){var c=s[l];if(n(o[c],c,o)===!1)break}return t}}var i=e("./toObject");t.exports=r},{"./toObject":135}],100:[function(e,t,n){(function(n){function r(e,t){function r(){var i=this&&this!==n&&this instanceof r?o:e;return i.apply(t,arguments)}var o=i(e);return r}var i=e("./createCtorWrapper");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createCtorWrapper":101}],101:[function(e,t,n){function r(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=i(e.prototype),r=e.apply(n,t);return o(r)?r:n}}var i=e("./baseCreate"),o=e("../lang/isObject");t.exports=r},{"../lang/isObject":144,"./baseCreate":70}],102:[function(e,t,n){function r(e,t){return function(n,r,l){if(r=i(r,l,3),a(n)){var c=s(n,r,t);return c>-1?n[c]:void 0}return o(n,r,e)}}var i=e("./baseCallback"),o=e("./baseFind"),s=e("./baseFindIndex"),a=e("../lang/isArray");t.exports=r},{"../lang/isArray":140,"./baseCallback":67,"./baseFind":72,"./baseFindIndex":73}],103:[function(e,t,n){function r(e,t){return function(n,r,s){return"function"==typeof r&&void 0===s&&o(n)?e(n,r):t(n,i(r,s,3))}}var i=e("./bindCallback"),o=e("../lang/isArray");t.exports=r},{"../lang/isArray":140,"./bindCallback":94}],104:[function(e,t,n){(function(n){function r(e,t,w,x,C,_,k,A,D,T){function P(){for(var f=arguments.length,m=f,g=Array(f);m--;)g[m]=arguments[m];if(x&&(g=o(g,x,C)),_&&(g=s(g,_,k)),O||V){var b=P.placeholder,R=u(g,b);if(f-=R.length,T>f){var G=A?i(A):void 0,B=S(T-f,0),F=O?R:void 0,j=O?void 0:R,z=O?g:void 0,U=O?void 0:g;t|=O?y:v,t&=~(O?v:y),I||(t&=~(h|d));var W=[e,t,w,z,F,U,j,G,D,B],H=r.apply(void 0,W);return l(e)&&p(H,W),H.placeholder=b,H}}var q=E?w:this,$=N?q[e]:e;return A&&(g=c(g,A)),M&&D<g.length&&(g.length=D),this&&this!==n&&this instanceof P&&($=L||a(e)),$.apply(q,g)}var M=t&b,E=t&h,N=t&d,O=t&m,I=t&f,V=t&g,L=N?void 0:a(e);return P}var i=e("./arrayCopy"),o=e("./composeArgs"),s=e("./composeArgsRight"),a=e("./createCtorWrapper"),l=e("./isLaziable"),c=e("./reorder"),u=e("./replaceHolders"),p=e("./setData"),h=1,d=2,f=4,m=8,g=16,y=32,v=64,b=128,S=Math.max;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./arrayCopy":62,"./composeArgs":96,"./composeArgsRight":97,"./createCtorWrapper":101,"./isLaziable":124,"./reorder":131,"./replaceHolders":132,"./setData":133}],105:[function(e,t,n){(function(n){function r(e,t,r,s){function a(){for(var t=-1,i=arguments.length,o=-1,u=s.length,p=Array(u+i);++o<u;)p[o]=s[o];for(;i--;)p[o++]=arguments[++t];var h=this&&this!==n&&this instanceof a?c:e;return h.apply(l?r:this,p)}var l=t&o,c=i(e);return a}var i=e("./createCtorWrapper"),o=1;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createCtorWrapper":101}],106:[function(e,t,n){function r(e,t,n,r,y,v,b,S){var w=t&h;if(!w&&"function"!=typeof e)throw new TypeError(m);var x=r?r.length:0;if(x||(t&=~(d|f),r=y=void 0),x-=y?y.length:0,t&f){var C=r,_=y;r=y=void 0}var k=w?void 0:l(e),A=[e,t,n,r,y,C,_,v,b,S];if(k&&(c(A,k),t=A[1],S=A[9]),A[9]=null==S?w?0:e.length:g(S-x,0)||0,t==p)var D=o(A[0],A[2]);else D=t!=d&&t!=(p|d)||A[4].length?s.apply(void 0,A):a.apply(void 0,A);var T=k?i:u;return T(D,A)}var i=e("./baseSetData"),o=e("./createBindWrapper"),s=e("./createHybridWrapper"),a=e("./createPartialWrapper"),l=e("./getData"),c=e("./mergeData"),u=e("./setData"),p=1,h=2,d=32,f=64,m="Expected a function",g=Math.max;t.exports=r},{"./baseSetData":88,"./createBindWrapper":100,"./createHybridWrapper":104,"./createPartialWrapper":105,"./getData":110,"./mergeData":128,"./setData":133}],107:[function(e,t,n){function r(e,t,n,r,o,s,a){var l=-1,c=e.length,u=t.length;if(c!=u&&!(o&&u>c))return!1;for(;++l<c;){var p=e[l],h=t[l],d=r?r(o?h:p,o?p:h,l):void 0;if(void 0!==d){if(d)continue;return!1}if(o){if(!i(t,function(e){return p===e||n(p,e,r,o,s,a)}))return!1}else if(p!==h&&!n(p,h,r,o,s,a))return!1}return!0}var i=e("./arraySome");t.exports=r},{"./arraySome":65}],108:[function(e,t,n){function r(e,t,n){switch(n){case i:case o:return+e==+t;case s:return e.name==t.name&&e.message==t.message;case a:return e!=+e?t!=+t:e==+t;case l:case c:return e==t+""}return!1}var i="[object Boolean]",o="[object Date]",s="[object Error]",a="[object Number]",l="[object RegExp]",c="[object String]";t.exports=r},{}],109:[function(e,t,n){function r(e,t,n,r,o,a,l){var c=i(e),u=c.length,p=i(t),h=p.length;if(u!=h&&!o)return!1;for(var d=u;d--;){var f=c[d];if(!(o?f in t:s.call(t,f)))return!1}for(var m=o;++d<u;){f=c[d];var g=e[f],y=t[f],v=r?r(o?y:g,o?g:y,f):void 0;if(!(void 0===v?n(g,y,r,o,a,l):v))return!1;m||(m="constructor"==f)}if(!m){var b=e.constructor,S=t.constructor;if(b!=S&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S))return!1}return!0}var i=e("../object/keys"),o=Object.prototype,s=o.hasOwnProperty;t.exports=r},{"../object/keys":149}],110:[function(e,t,n){var r=e("./metaMap"),i=e("../utility/noop"),o=r?function(e){return r.get(e)}:i;t.exports=o},{"../utility/noop":155,"./metaMap":129}],111:[function(e,t,n){function r(e){for(var t=e.name+"",n=i[t],r=n?n.length:0;r--;){var o=n[r],s=o.func;if(null==s||s==e)return o.name}return t}var i=e("./realNames");t.exports=r},{"./realNames":130}],112:[function(e,t,n){var r=e("./baseProperty"),i=r("length");t.exports=i},{"./baseProperty":86}],113:[function(e,t,n){function r(e){for(var t=o(e),n=t.length;n--;)t[n][2]=i(t[n][1]);return t}var i=e("./isStrictComparable"),o=e("../object/pairs");t.exports=r},{"../object/pairs":151,"./isStrictComparable":127}],114:[function(e,t,n){function r(e,t){var n=null==e?void 0:e[t];return i(n)?n:void 0}var i=e("../lang/isNative");t.exports=r},{"../lang/isNative":143}],115:[function(e,t,n){function r(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}t.exports=r},{}],116:[function(e,t,n){function r(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var i=Object.prototype,o=i.hasOwnProperty;t.exports=r},{}],117:[function(e,t,n){(function(n){function r(e,t,n){var r=e.constructor;switch(t){case u:return i(e);case o:case s:return new r(+e);case p:case h:case d:case f:case m:case g:case y:case v:case b:r instanceof r&&(r=x[t]);var w=e.buffer;return new r(n?i(w):w,e.byteOffset,e.length);case a:case c:return new r(e);case l:var C=new r(e.source,S.exec(e));C.lastIndex=e.lastIndex}return C}var i=e("./bufferClone"),o="[object Boolean]",s="[object Date]",a="[object Number]",l="[object RegExp]",c="[object String]",u="[object ArrayBuffer]",p="[object Float32Array]",h="[object Float64Array]",d="[object Int8Array]",f="[object Int16Array]",m="[object Int32Array]",g="[object Uint8Array]",y="[object Uint8ClampedArray]",v="[object Uint16Array]",b="[object Uint32Array]",S=/\w*$/,w=n.Uint8Array,x={};x[p]=n.Float32Array,x[h]=n.Float64Array,x[d]=n.Int8Array,x[f]=n.Int16Array,x[m]=n.Int32Array,x[g]=w,x[y]=n.Uint8ClampedArray,x[v]=n.Uint16Array,x[b]=n.Uint32Array,t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bufferClone":95}],118:[function(e,t,n){function r(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=r},{}],119:[function(e,t,n){function r(e){return null!=e&&o(i(e))}var i=e("./getLength"),o=e("./isLength");t.exports=r},{"./getLength":112,"./isLength":125}],120:[function(e,t,n){var r=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}();t.exports=r},{}],121:[function(e,t,n){function r(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,o=9007199254740991;t.exports=r},{}],122:[function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;if("number"==r?i(n)&&o(t,n.length):"string"==r&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}var i=e("./isArrayLike"),o=e("./isIndex"),s=e("../lang/isObject");t.exports=r},{"../lang/isObject":144,"./isArrayLike":119,"./isIndex":121}],123:[function(e,t,n){function r(e,t){var n=typeof e;if("string"==n&&a.test(e)||"number"==n)return!0;if(i(e))return!1;var r=!s.test(e);return r||null!=t&&e in o(t)}var i=e("../lang/isArray"),o=e("./toObject"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=r},{"../lang/isArray":140,"./toObject":135}],124:[function(e,t,n){function r(e){var t=s(e),n=a[t];if("function"!=typeof n||!(t in i.prototype))return!1;if(e===n)return!0;var r=o(n);return!!r&&e===r[0]}var i=e("./LazyWrapper"),o=e("./getData"),s=e("./getFuncName"),a=e("../chain/lodash");t.exports=r},{"../chain/lodash":51,"./LazyWrapper":60,"./getData":110,"./getFuncName":111}],125:[function(e,t,n){function r(e){
return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=r},{}],126:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}t.exports=r},{}],127:[function(e,t,n){function r(e){return e===e&&!i(e)}var i=e("../lang/isObject");t.exports=r},{"../lang/isObject":144}],128:[function(e,t,n){function r(e,t){var n=e[1],r=t[1],m=n|r,g=p>m,y=r==p&&n==u||r==p&&n==h&&e[7].length<=t[8]||r==(p|h)&&n==u;if(!g&&!y)return e;r&l&&(e[2]=t[2],m|=n&l?0:c);var v=t[3];if(v){var b=e[3];e[3]=b?o(b,v,t[4]):i(v),e[4]=b?a(e[3],d):i(t[4])}return v=t[5],v&&(b=e[5],e[5]=b?s(b,v,t[6]):i(v),e[6]=b?a(e[5],d):i(t[6])),v=t[7],v&&(e[7]=i(v)),r&p&&(e[8]=null==e[8]?t[8]:f(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=m,e}var i=e("./arrayCopy"),o=e("./composeArgs"),s=e("./composeArgsRight"),a=e("./replaceHolders"),l=1,c=4,u=8,p=128,h=256,d="__lodash_placeholder__",f=Math.min;t.exports=r},{"./arrayCopy":62,"./composeArgs":96,"./composeArgsRight":97,"./replaceHolders":132}],129:[function(e,t,n){(function(n){var r=e("./getNative"),i=r(n,"WeakMap"),o=i&&new i;t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getNative":114}],130:[function(e,t,n){var r={};t.exports=r},{}],131:[function(e,t,n){function r(e,t){for(var n=e.length,r=s(t.length,n),a=i(e);r--;){var l=t[r];e[r]=o(l,n)?a[l]:void 0}return e}var i=e("./arrayCopy"),o=e("./isIndex"),s=Math.min;t.exports=r},{"./arrayCopy":62,"./isIndex":121}],132:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length,o=-1,s=[];++n<r;)e[n]===t&&(e[n]=i,s[++o]=n);return s}var i="__lodash_placeholder__";t.exports=r},{}],133:[function(e,t,n){var r=e("./baseSetData"),i=e("../date/now"),o=150,s=16,a=function(){var e=0,t=0;return function(n,a){var l=i(),c=s-(l-t);if(t=l,c>0){if(++e>=o)return n}else e=0;return r(n,a)}}();t.exports=a},{"../date/now":57,"./baseSetData":88}],134:[function(e,t,n){function r(e){for(var t=c(e),n=t.length,r=n&&e.length,u=!!r&&a(r)&&(o(e)||i(e)||l(e)),h=-1,d=[];++h<n;){var f=t[h];(u&&s(f,r)||p.call(e,f))&&d.push(f)}return d}var i=e("../lang/isArguments"),o=e("../lang/isArray"),s=e("./isIndex"),a=e("./isLength"),l=e("../lang/isString"),c=e("../object/keysIn"),u=Object.prototype,p=u.hasOwnProperty;t.exports=r},{"../lang/isArguments":139,"../lang/isArray":140,"../lang/isString":146,"../object/keysIn":150,"./isIndex":121,"./isLength":125}],135:[function(e,t,n){function r(e){if(s.unindexedChars&&o(e)){for(var t=-1,n=e.length,r=Object(e);++t<n;)r[t]=e.charAt(t);return r}return i(e)?e:Object(e)}var i=e("../lang/isObject"),o=e("../lang/isString"),s=e("../support");t.exports=r},{"../lang/isObject":144,"../lang/isString":146,"../support":153}],136:[function(e,t,n){function r(e){if(o(e))return e;var t=[];return i(e).replace(s,function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)}),t}var i=e("./baseToString"),o=e("../lang/isArray"),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=r},{"../lang/isArray":140,"./baseToString":90}],137:[function(e,t,n){function r(e){return e instanceof i?e.clone():new o(e.__wrapped__,e.__chain__,s(e.__actions__))}var i=e("./LazyWrapper"),o=e("./LodashWrapper"),s=e("./arrayCopy");t.exports=r},{"./LazyWrapper":60,"./LodashWrapper":61,"./arrayCopy":62}],138:[function(e,t,n){function r(e,t,n){return"function"==typeof t?i(e,!0,o(t,n,3)):i(e,!0)}var i=e("../internal/baseClone"),o=e("../internal/bindCallback");t.exports=r},{"../internal/baseClone":68,"../internal/bindCallback":94}],139:[function(e,t,n){function r(e){return o(e)&&i(e)&&a.call(e,"callee")&&!l.call(e,"callee")}var i=e("../internal/isArrayLike"),o=e("../internal/isObjectLike"),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable;t.exports=r},{"../internal/isArrayLike":119,"../internal/isObjectLike":126}],140:[function(e,t,n){var r=e("../internal/getNative"),i=e("../internal/isLength"),o=e("../internal/isObjectLike"),s="[object Array]",a=Object.prototype,l=a.toString,c=r(Array,"isArray"),u=c||function(e){return o(e)&&i(e.length)&&l.call(e)==s};t.exports=u},{"../internal/getNative":114,"../internal/isLength":125,"../internal/isObjectLike":126}],141:[function(e,t,n){function r(e){return null==e||(s(e)&&(o(e)||c(e)||i(e)||l(e)&&a(e.splice))?!e.length:!u(e).length)}var i=e("./isArguments"),o=e("./isArray"),s=e("../internal/isArrayLike"),a=e("./isFunction"),l=e("../internal/isObjectLike"),c=e("./isString"),u=e("../object/keys");t.exports=r},{"../internal/isArrayLike":119,"../internal/isObjectLike":126,"../object/keys":149,"./isArguments":139,"./isArray":140,"./isFunction":142,"./isString":146}],142:[function(e,t,n){function r(e){return i(e)&&a.call(e)==o}var i=e("./isObject"),o="[object Function]",s=Object.prototype,a=s.toString;t.exports=r},{"./isObject":144}],143:[function(e,t,n){function r(e){return null!=e&&(i(e)?p.test(c.call(e)):s(e)&&(o(e)?p:a).test(e))}var i=e("./isFunction"),o=e("../internal/isHostObject"),s=e("../internal/isObjectLike"),a=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,u=l.hasOwnProperty,p=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{"../internal/isHostObject":120,"../internal/isObjectLike":126,"./isFunction":142}],144:[function(e,t,n){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],145:[function(e,t,n){function r(e){var t;if(!a(e)||h.call(e)!=c||s(e)||o(e)||!p.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return l.ownLast?(i(e,function(e,t,r){return n=p.call(r,t),!1}),n!==!1):(i(e,function(e,t){n=t}),void 0===n||p.call(e,n))}var i=e("../internal/baseForIn"),o=e("./isArguments"),s=e("../internal/isHostObject"),a=e("../internal/isObjectLike"),l=e("../support"),c="[object Object]",u=Object.prototype,p=u.hasOwnProperty,h=u.toString;t.exports=r},{"../internal/baseForIn":75,"../internal/isHostObject":120,"../internal/isObjectLike":126,"../support":153,"./isArguments":139}],146:[function(e,t,n){function r(e){return"string"==typeof e||i(e)&&a.call(e)==o}var i=e("../internal/isObjectLike"),o="[object String]",s=Object.prototype,a=s.toString;t.exports=r},{"../internal/isObjectLike":126}],147:[function(e,t,n){function r(e){return o(e)&&i(e.length)&&!!P[E.call(e)]}var i=e("../internal/isLength"),o=e("../internal/isObjectLike"),s="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",p="[object Function]",h="[object Map]",d="[object Number]",f="[object Object]",m="[object RegExp]",g="[object Set]",y="[object String]",v="[object WeakMap]",b="[object ArrayBuffer]",S="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",C="[object Int16Array]",_="[object Int32Array]",k="[object Uint8Array]",A="[object Uint8ClampedArray]",D="[object Uint16Array]",T="[object Uint32Array]",P={};P[S]=P[w]=P[x]=P[C]=P[_]=P[k]=P[A]=P[D]=P[T]=!0,P[s]=P[a]=P[b]=P[l]=P[c]=P[u]=P[p]=P[h]=P[d]=P[f]=P[m]=P[g]=P[y]=P[v]=!1;var M=Object.prototype,E=M.toString;t.exports=r},{"../internal/isLength":125,"../internal/isObjectLike":126}],148:[function(e,t,n){function r(e){return void 0===e}t.exports=r},{}],149:[function(e,t,n){var r=e("../internal/getNative"),i=e("../internal/isArrayLike"),o=e("../lang/isObject"),s=e("../internal/shimKeys"),a=e("../support"),l=r(Object,"keys"),c=l?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||("function"==typeof e?a.enumPrototypes:i(e))?s(e):o(e)?l(e):[]}:s;t.exports=c},{"../internal/getNative":114,"../internal/isArrayLike":119,"../internal/shimKeys":134,"../lang/isObject":144,"../support":153}],150:[function(e,t,n){function r(e){if(null==e)return[];u(e)||(e=Object(e));var t=e.length;t=t&&c(t)&&(s(e)||o(e)||p(e))&&t||0;for(var n=e.constructor,r=-1,i=a(n)&&n.prototype||_,d=i===e,f=Array(t),m=t>0,y=h.enumErrorProps&&(e===C||e instanceof Error),v=h.enumPrototypes&&a(e);++r<t;)f[r]=r+"";for(var S in e)v&&"prototype"==S||y&&("message"==S||"name"==S)||m&&l(S,t)||"constructor"==S&&(d||!A.call(e,S))||f.push(S);if(h.nonEnumShadows&&e!==_){var P=e===k?w:e===C?g:D.call(e),M=T[P]||T[b];for(P==b&&(i=_),t=x.length;t--;){S=x[t];var E=M[S];d&&E||(E?!A.call(e,S):e[S]===i[S])||f.push(S)}}return f}var i=e("../internal/arrayEach"),o=e("../lang/isArguments"),s=e("../lang/isArray"),a=e("../lang/isFunction"),l=e("../internal/isIndex"),c=e("../internal/isLength"),u=e("../lang/isObject"),p=e("../lang/isString"),h=e("../support"),d="[object Array]",f="[object Boolean]",m="[object Date]",g="[object Error]",y="[object Function]",v="[object Number]",b="[object Object]",S="[object RegExp]",w="[object String]",x=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],C=Error.prototype,_=Object.prototype,k=String.prototype,A=_.hasOwnProperty,D=_.toString,T={};T[d]=T[m]=T[v]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},T[f]=T[w]={constructor:!0,toString:!0,valueOf:!0},T[g]=T[y]=T[S]={constructor:!0,toString:!0},T[b]={constructor:!0},i(x,function(e){for(var t in T)if(A.call(T,t)){var n=T[t];n[e]=A.call(n,e)}}),t.exports=r},{"../internal/arrayEach":63,"../internal/isIndex":121,"../internal/isLength":125,"../lang/isArguments":139,"../lang/isArray":140,"../lang/isFunction":142,"../lang/isObject":144,"../lang/isString":146,"../support":153}],151:[function(e,t,n){function r(e){e=o(e);for(var t=-1,n=i(e),r=n.length,s=Array(r);++t<r;){var a=n[t];s[t]=[a,e[a]]}return s}var i=e("./keys"),o=e("../internal/toObject");t.exports=r},{"../internal/toObject":135,"./keys":149}],152:[function(e,t,n){function r(e){return i(e,o(e))}var i=e("../internal/baseValues"),o=e("./keys");t.exports=r},{"../internal/baseValues":91,"./keys":149}],153:[function(e,t,n){var r=Array.prototype,i=Error.prototype,o=Object.prototype,s=o.propertyIsEnumerable,a=r.splice,l={};!function(e){var t=function(){this.x=e},n={0:e,length:e},r=[];t.prototype={valueOf:e,y:e};for(var o in new t)r.push(o);l.enumErrorProps=s.call(i,"message")||s.call(i,"name"),l.enumPrototypes=s.call(t,"prototype"),l.nonEnumShadows=!/valueOf/.test(r),l.ownLast="x"!=r[0],l.spliceObjects=(a.call(n,0,1),!n[0]),l.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),t.exports=l},{}],154:[function(e,t,n){function r(e){return e}t.exports=r},{}],155:[function(e,t,n){function r(){}t.exports=r},{}],156:[function(e,t,n){function r(e){return s(e)?i(e):o(e)}var i=e("../internal/baseProperty"),o=e("../internal/basePropertyDeep"),s=e("../internal/isKey");t.exports=r},{"../internal/baseProperty":86,"../internal/basePropertyDeep":87,"../internal/isKey":123}],157:[function(t,n,r){(function(t){!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof r&&"object"==typeof n)n.exports=t();else if("function"==typeof e&&e.amd)e(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var i="undefined"!=typeof window?window:self,o=i.Q;i.Q=t(),i.Q.noConflict=function(){return i.Q=o,this}}}(function(){"use strict";function e(e){return function(){return X.apply(e,arguments)}}function n(e){return e===Object(e)}function r(e){return"[object StopIteration]"===ne(e)||e instanceof W}function i(e,t){if(z&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(re)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var i=n.join("\n"+re+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];l(i)||s(i)||!i||n.push(i)}return n.join("\n")}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function l(e){var t=a(e);if(!t)return!1;var n=t[0],r=t[1];return n===U&&r>=H&&le>=r}function c(){if(z)try{throw new Error}catch(r){var e=r.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],n=a(t);if(!n)return;return U=n[0],n[1]}}function u(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function p(e){return e instanceof m?e:b(e)?T(e):D(e)}function h(){function e(e){t=e,o.source=e,J(n,function(t,n){p.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],i=Z(h.prototype),o=Z(m.prototype);if(o.promiseDispatch=function(e,i,o){var s=Y(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):p.nextTick(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(n)return o;var e=y(t);return v(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},p.longStackSupport&&z)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){t||e(p(n))},i.fulfill=function(n){t||e(D(n))},i.reject=function(n){t||e(A(n))},i.notify=function(e){t||J(r,function(t,n){p.nextTick(function(){n(e)})},void 0)},i}function d(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=h();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function f(e){return d(function(t,n){for(var r=0,i=e.length;i>r;r++)p(e[r]).then(t,n)})}function m(e,t,n){void 0===t&&(t=function(e){return A(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=Z(m.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(e){s=A(e)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function g(e,t,n,r){return p(e).then(t,n,r)}function y(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return e instanceof m}function b(e){return n(e)&&"function"==typeof e.then}function S(e){return v(e)&&"pending"===e.inspect().state}function w(e){return!v(e)||"fulfilled"===e.inspect().state}function x(e){return v(e)&&"rejected"===e.inspect().state}function C(){ie.length=0,oe.length=0,ae||(ae=!0)}function _(e,n){ae&&("object"==typeof t&&"function"==typeof t.emit&&p.nextTick.runAfter(function(){-1!==K(oe,e)&&(t.emit("unhandledRejection",n,e),se.push(e))}),oe.push(e),n&&"undefined"!=typeof n.stack?ie.push(n.stack):ie.push("(no stack) "+n))}function k(e){if(ae){var n=K(oe,e);-1!==n&&("object"==typeof t&&"function"==typeof t.emit&&p.nextTick.runAfter(function(){var r=K(se,e);-1!==r&&(t.emit("rejectionHandled",ie[n],e),se.splice(r,1))}),oe.splice(n,1),ie.splice(n,1))}}function A(e){var t=m({when:function(t){return t&&k(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return _(t,e),t}function D(e){return m({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return te(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function T(e){var t=h();return p.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise}function P(e){return m({isDef:function(){}},function(t,n){return V(e,t,n)},function(){return p(e).inspect()})}function M(e,t,n){return p(e).spread(t,n)}function E(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=n[e](t)}catch(e){return A(e)}return s.done?p(s.value):g(s.value,i,o)}try{s=n[e](t)}catch(e){return r(e)?p(e.value):A(e)}return g(s,i,o)}var n=e.apply(this,arguments),i=t.bind(t,"next"),o=t.bind(t,"throw");return i()}}function N(e){p.done(p.async(e)())}function O(e){throw new W(e)}function I(e){return function(){return M([this,L(arguments)],function(t,n){return e.apply(t,n)})}}function V(e,t,n){return p(e).dispatch(t,n)}function L(e){return g(e,function(e){var t=0,n=h();return J(e,function(r,i,o){var s;v(i)&&"fulfilled"===(s=i.inspect()).state?e[o]=s.value:(++t,g(i,function(r){e[o]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function R(e){if(0===e.length)return p.resolve();var t=p.defer(),n=0;return J(e,function(r,i,o){function s(e){t.resolve(e)}function a(){n--,0===n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function l(e){t.notify({index:o,value:e})}var c=e[o];n++,g(c,s,a,l)},void 0),t.promise}function G(e){return g(e,function(e){return e=Q(e,p),g(L(Q(e,function(e){return g(e,q,q)})),function(){return e})})}function B(e){return p(e).allSettled()}function F(e,t){return p(e).then(void 0,void 0,t)}function j(e,t){return p(e).nodeify(t)}var z=!1;try{throw new Error}catch(e){z=!!e.stack}var U,W,H=c(),q=function(){},$=function(){function e(){for(var e,t;r.next;)r=r.next,e=r.task,r.task=void 0,t=r.domain,t&&(r.domain=void 0,t.enter()),n(e,t);for(;l.length;)e=l.pop(),n(e);o=!1}function n(t,n){try{t()}catch(t){if(a)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}var r={task:void 0,next:null},i=r,o=!1,s=void 0,a=!1,l=[];if($=function(e){i=i.next={task:e,domain:a&&t.domain,next:null},o||(o=!0,s())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)a=!0,s=function(){t.nextTick(e)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=u,c.port1.onmessage=e,e()};var u=function(){c.port2.postMessage(0)};s=function(){setTimeout(e,0),u()}}else s=function(){setTimeout(e,0)};return $.runAfter=function(e){l.push(e),o||(o=!0,s())},$}(),X=Function.call,Y=e(Array.prototype.slice),J=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(t=e(t,this[n],n));return t}),K=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Q=e(Array.prototype.map||function(e,t){var n=this,r=[];return J(n,function(i,o,s){r.push(e.call(t,o,s,n))},void 0),r}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},ee=e(Object.prototype.hasOwnProperty),te=Object.keys||function(e){var t=[];for(var n in e)ee(e,n)&&t.push(n);return t},ne=e(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var re="From previous event:";p.resolve=p,p.nextTick=$,p.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(p.longStackSupport=!0),p.defer=h,h.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(n)}},p.Promise=d,p.promise=d,d.race=f,d.all=L,d.reject=A,d.resolve=p,p.passByCopy=function(e){return e},m.prototype.passByCopy=function(){return this},p.join=function(e,t){return p(e).join(t)},m.prototype.join=function(e){return p([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},p.race=f,m.prototype.race=function(){return this.then(p.race)},p.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(e){return A(e)}}function o(e){if("function"==typeof t){i(e,a);try{return t(e)}catch(e){return A(e)}}return A(e)}function s(e){return"function"==typeof n?n(e):e}var a=this,l=h(),c=!1;return p.nextTick(function(){a.promiseDispatch(function(e){c||(c=!0,l.resolve(r(e)))},"when",[function(e){c||(c=!0,l.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=s(e)}catch(e){if(n=!0,!p.onerror)throw e;p.onerror(e)}n||l.notify(t)}]),l.promise},p.tap=function(e,t){return p(e).tap(t)},m.prototype.tap=function(e){return e=p(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},p.when=g,m.prototype.thenResolve=function(e){return this.then(function(){return e})},p.thenResolve=function(e,t){return p(e).thenResolve(t)},m.prototype.thenReject=function(e){return this.then(function(){throw e})},p.thenReject=function(e,t){return p(e).thenReject(t)},p.nearer=y,p.isPromise=v,p.isPromiseAlike=b,p.isPending=S,m.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=w,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=x,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ie=[],oe=[],se=[],ae=!0;p.resetUnhandledRejections=C,p.getUnhandledReasons=function(){return ie.slice()},p.stopUnhandledRejectionTracking=function(){C(),ae=!1},C(),p.reject=A,p.fulfill=D,p.master=P,p.spread=M,m.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},p.async=E,p.spawn=N,p.return=O,p.promised=I,p.dispatch=V,m.prototype.dispatch=function(e,t){var n=this,r=h();return p.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},p.get=function(e,t){return p(e).dispatch("get",[t])},m.prototype.get=function(e){return this.dispatch("get",[e])},p.set=function(e,t,n){return p(e).dispatch("set",[t,n])},m.prototype.set=function(e,t){return this.dispatch("set",[e,t])},p.del=p.delete=function(e,t){return p(e).dispatch("delete",[t])},m.prototype.del=m.prototype.delete=function(e){return this.dispatch("delete",[e])},p.mapply=p.post=function(e,t,n){return p(e).dispatch("post",[t,n])},m.prototype.mapply=m.prototype.post=function(e,t){return this.dispatch("post",[e,t])},p.send=p.mcall=p.invoke=function(e,t){return p(e).dispatch("post",[t,Y(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(e){return this.dispatch("post",[e,Y(arguments,1)])},p.fapply=function(e,t){return p(e).dispatch("apply",[void 0,t])},m.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},p.try=p.fcall=function(e){return p(e).dispatch("apply",[void 0,Y(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},p.fbind=function(e){var t=p(e),n=Y(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(Y(arguments))])}},m.prototype.fbind=function(){var e=this,t=Y(arguments);return function(){return e.dispatch("apply",[this,t.concat(Y(arguments))])}},p.keys=function(e){return p(e).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},p.all=L,m.prototype.all=function(){return L(this)},p.any=R,m.prototype.any=function(){return R(this)},p.allResolved=u(G,"allResolved","allSettled"),m.prototype.allResolved=function(){return G(this)},p.allSettled=B,m.prototype.allSettled=function(){return this.then(function(e){return L(Q(e,function(e){function t(){return e.inspect()}return e=p(e),e.then(t,t)}))})},p.fail=p.catch=function(e,t){return p(e).then(void 0,t)},m.prototype.fail=m.prototype.catch=function(e){return this.then(void 0,e)},p.progress=F,m.prototype.progress=function(e){return this.then(void 0,void 0,e)},p.fin=p.finally=function(e,t){return p(e).finally(t)},m.prototype.fin=m.prototype.finally=function(e){return e=p(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},p.done=function(e,t,n,r){return p(e).done(t,n,r)},m.prototype.done=function(e,n,r){var o=function(e){p.nextTick(function(){if(i(e,s),!p.onerror)throw e;p.onerror(e)})},s=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),s.then(void 0,o)},p.timeout=function(e,t,n){return p(e).timeout(t,n)},m.prototype.timeout=function(e,t){var n=h(),r=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},p.delay=function(e,t){return void 0===t&&(t=e,e=void 0),p(e).delay(t)},m.prototype.delay=function(e){return this.then(function(t){var n=h();return setTimeout(function(){n.resolve(t)},e),n.promise})},p.nfapply=function(e,t){return p(e).nfapply(t)},m.prototype.nfapply=function(e){var t=h(),n=Y(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},p.nfcall=function(e){var t=Y(arguments,1);return p(e).nfapply(t)},m.prototype.nfcall=function(){var e=Y(arguments),t=h();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},p.nfbind=p.denodeify=function(e){var t=Y(arguments,1);return function(){var n=t.concat(Y(arguments)),r=h();return n.push(r.makeNodeResolver()),p(e).fapply(n).fail(r.reject),r.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var e=Y(arguments);return e.unshift(this),p.denodeify.apply(void 0,e)},p.nbind=function(e,t){var n=Y(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(Y(arguments)),o=h();return i.push(o.makeNodeResolver()),p(r).fapply(i).fail(o.reject),o.promise}},m.prototype.nbind=function(){var e=Y(arguments,0);return e.unshift(this),p.nbind.apply(void 0,e)},p.nmapply=p.npost=function(e,t,n){return p(e).npost(t,n)},m.prototype.nmapply=m.prototype.npost=function(e,t){var n=Y(t||[]),r=h();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(e,t){var n=Y(arguments,2),r=h();return n.push(r.makeNodeResolver()),p(e).dispatch("post",[t,n]).fail(r.reject),r.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(e){var t=Y(arguments,1),n=h();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},p.nodeify=j,m.prototype.nodeify=function(e){return e?void this.then(function(t){p.nextTick(function(){e(null,t)})},function(t){p.nextTick(function(){e(t)})}):this},p.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var le=c();return p})}).call(this,t("_process"))},{_process:12}],158:[function(e,t,n){function r(){}function i(e){if(!y(e))return e;var t=[];for(var n in e)o(t,n,e[n]);return t.join("&")}function o(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){o(e,t,n)});else if(y(n))for(var r in n)o(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function s(e){for(var t,n,r={},i=e.split("&"),o=0,s=i.length;s>o;++o)t=i[o],n=t.indexOf("="),-1==n?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function a(e){var t,n,r,i,o=e.split(/\r?\n/),s={};o.pop();for(var a=0,l=o.length;l>a;++a)n=o[a],t=n.indexOf(":"),r=n.slice(0,t).toLowerCase(),i=b(n.slice(t+1)),s[r]=i;return s}function l(e){return/[\/+]json\b/.test(e)}function c(e){return e.split(/ *; */).shift()}function u(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})}function p(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=a(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function h(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new p(n)}catch(t){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=t,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}n.emit("response",t);var r;try{(t.status<200||t.status>=300)&&(r=new Error(t.statusText||"Unsuccessful HTTP response"),r.original=e,r.response=t,r.status=t.status)}catch(e){r=e}r?n.callback(r,t):n.callback(null,t)})}function d(e,t){var n=v("DELETE",e);return t&&n.end(t),n}var f;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var m=e("emitter"),g=e("./request-base"),y=e("./is-object"),v=t.exports=e("./request").bind(null,h);v.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only verison of superagent could not find XHR")};var b="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};v.serializeObject=i,v.parseString=s,v.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},v.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},p.prototype.get=function(e){return this.header[e.toLowerCase()]},p.prototype._setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=c(t);var n=u(t);for(var r in n)this[r]=n[r]},p.prototype._parseBody=function(e){var t=v.parse[this.type];return!t&&l(this.type)&&(t=v.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},p.prototype._setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},p.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},v.Response=p,m(h.prototype);for(var S in g)h.prototype[S]=g[S];h.prototype.type=function(e){return this.set("Content-Type",v.types[e]||e),this},h.prototype.responseType=function(e){return this._responseType=e,this},h.prototype.accept=function(e){return this.set("Accept",v.types[e]||e),this},h.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);break;case"auto":this.username=e,this.password=t}return this},h.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},h.prototype.attach=function(e,t,n){return this._getFormData().append(e,t,n||t.name),this},h.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData},h.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},h.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},h.prototype._timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");
t.timeout=e,this.callback(t)},h.prototype._appendQueryString=function(){var e=this._query.join("&");e&&(this.url+=~this.url.indexOf("?")?"&"+e:"?"+e)},h.prototype.end=function(e){var t=this,n=this.xhr=v.getXHR(),i=this._timeout,o=this._formData||this._data;this._callback=e||r,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(t){e=0}if(0==e){if(t.timedout)return t._timeoutError();if(t._aborted)return;return t.crossDomainError()}t.emit("end")}};var s=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=s);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=s)}catch(e){}if(i&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},i)),this._appendQueryString(),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!this._isHost(o)){var a=this._header["content-type"],c=this._serializer||v.serialize[a?a.split(";")[0]:""];!c&&l(a)&&(c=v.serialize["application/json"]),c&&(o=c(o))}for(var u in this.header)null!=this.header[u]&&n.setRequestHeader(u,this.header[u]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof o?o:null),this},v.Request=h,v.get=function(e,t,n){var r=v("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},v.head=function(e,t,n){var r=v("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},v.options=function(e,t,n){var r=v("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},v.del=d,v.delete=d,v.patch=function(e,t,n){var r=v("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},v.post=function(e,t,n){var r=v("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},v.put=function(e,t,n){var r=v("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},{"./is-object":159,"./request":161,"./request-base":160,emitter:162}],159:[function(e,t,n){function r(e){return null!==e&&"object"==typeof e}t.exports=r},{}],160:[function(e,t,n){var r=e("./is-object");n.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},n.parse=function(e){return this._parser=e,this},n.serialize=function(e){return this._serializer=e,this},n.timeout=function(e){return this._timeout=e,this},n.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},n.use=function(e){return e(this),this},n.get=function(e){return this._header[e.toLowerCase()]},n.getHeader=n.get,n.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.field=function(e,t){return this._getFormData().append(e,t),this},n.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},n.withCredentials=function(){return this._withCredentials=!0,this},n.redirects=function(e){return this._maxRedirects=e,this},n.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n._isHost=function(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},n.send=function(e){var t=r(e),n=this._header["content-type"];if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)}},{"./is-object":159}],161:[function(e,t,n){function r(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}t.exports=r},{}],162:[function(e,t,n){function r(e){return e?i(e):void 0}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}"undefined"!=typeof t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}]},{},[1])(1)});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CoGSRunner",["require","exports","AbstractRunner","swaggerClient","ComputationResponse","ArrayItemsDataResponse","CodeBlockDataResponse","staticHelpers","AVPWorkspaceConverter"],function(e,t,n,r,i,s,a,l,c){"use strict";var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.retryStatusCodes=[401],t.run=_.throttle(function(e,n){t.post({kind:"run"},n),t.RunningState={isRunning:!0,workspace:n}},120),t}return o(t,e),t.prototype.retryPromisemaxRetryCount=function(e,t){var n=this;return e().catch(function(r){return t<=0||!_.contains(n.retryStatusCodes,n.lastResponse.status)?void console.log("could not complete request",r):n.retryPromisemaxRetryCount(e,t-1)})},t.prototype.getSwaggerClient=function(e){var t=this;if(this.client)e(this.client);else{var n=this,i={url:this.serviceURL,usePromise:!0,responseInterceptor:function(){return n.lastResponse=this,this}};this.authToken&&(i.authorizations={access_code:new r.ApiKeyAuthorization("Authorization","Bearer "+this.authToken,"header")}),this.retryPromisemaxRetryCount(function(){return new r(i).then(function(n){var r=l.parseURL(t.serviceURL),i=r.protocol.split(":")[0];n.setSchemes([i]),console.log("fetched a new client"),t.client=n,e(n)})},5)}},t.prototype.generateLibaryItemResponse=function(e){var t=e.Functions.map(function(e){return console.log("building library item for:"),console.log(e.Name),{name:e.Name,creationName:e.Name,displayName:e.Name,concreteType:"Dynamo.Graph.Nodes.ZeroTouch.DSFunction, DynamoCore",category:e.Name.split(".").slice(0,-1).join("."),keywords:(e.MetaKeywords||[]).concat([e.Name]),weight:0,keywordWeights:(e.MetaKeywords||[]).concat([e.Name]).map(function(e){return.5}),arguments:e.Req.map(function(e){return e.Name}),description:e.MetaDescription||"",parameters:e.Req.map(function(e){return{name:e.Name,defaultValue:e.MetaDefaultValue,toolTip:e.MetaDescription,type:e.Type}}),returnKeys:e.Resp.map(function(e){return{name:e.Name,toolTip:e.MetaDescription,type:e.Type}})}}),n=e.Types.map(function(e){return{name:e.Name,creationName:e.Name,displayName:e.Name,concreteType:"Dynamo.Graph.Nodes.ZeroTouch.DSFunction, DynamoCore",category:e.Name.split(".").slice(0,-1).join("."),keywords:[e.Name],weight:0,keywordWeights:[.5],arguments:e.Fields.map(function(e){return e.Name}),description:"",parameters:e.Fields.map(function(e){return{name:e.Name,defaultValue:"",toolTip:"",type:e.Type}}),returnKeys:[{name:e.Name,toolTip:"",type:e.Name}]}});return{libraryItems:t.concat(n)}},t.prototype.generateBuiltinNodes=function(){return[{name:"Code Block",creationName:"Code Block",concreteType:"Dynamo.Graph.Nodes.CodeBlockNodeModel, DynamoCore",displayName:"Code Block",category:"Core",keywords:[],keywordWeights:[],arguments:[],description:"Code Block",parameters:[],returnKeys:[]},{name:"Number Slider",creationName:"Number Slider",concreteType:"CoreNodeModels.Input.DoubleSlider, CoreNodeModels",displayName:"Number Slider",category:"Core",keywords:[],keywordWeights:[],arguments:[],description:"Number Slider",parameters:[],returnKeys:["number"]}]},t.prototype.convertGeometryCoGSGeoResponseToReachResponses=function(e){return e.map(function(e){return{geometryData:{nodeId:e.Id,graphicPrimitivesData:e.GeometryEntries.map(function(e){return{colors:e.Colors||"",textureCoordinates:e.TriangleTextureCoordinates||"",colorsStride:e.ColorsStride||"",pointVertices:e.PointVertices||"",PointVertexColors:e.PointVertexColors||"",meshVertices:e.TriangleVertices||"",meshNormals:e.TriangleNormals||"",lineStripVertices:e.LineStripVertices||"",lineStripColors:e.LineStripColors||"",lineStripCounts:e.LineStripCounts||"",requiresPerVertexColoration:e.RequiresPerVertexColoration||"",requiresTextureMapping:!!e.Colors}})}}})},t.prototype.GetMaximumDepthAndItemNumber=function(e){var t=this;if(Array.isArray(e)){var n=e.map(function(e){return t.GetMaximumDepthAndItemNumber(e)}),r=n.map(function(e){return e.maxDepth});_.isEmpty(r)&&(r=[1]);var i=_.max(r)+1,o=n.map(function(e){return e.numItems}).reduce(function(e,t){return e+t},0),s=n.map(function(e){return e.numElements}).reduce(function(e,t){return e+t},0)+1,a=e.length;return 0==o&&2==i?{numItems:o,maxDepth:i,numElements:s,arrayLength:a,results:null}:{numItems:o,maxDepth:i,numElements:s,arrayLength:a,results:n}}return{numItems:1,maxDepth:1,numElements:1,arrayLength:null,results:null}},t.prototype.GatherListTotals=function(e){var t=this;if(null!=e.results){var n=e.results.map(function(e){return t.GatherListTotals(e)});if(null==n[0]&&1==_.unique(n).length){var r=[e.arrayLength.toString(),e.numItems.toString(),e.numElements.toString(),[]];return r}var r=[e.arrayLength.toString(),e.numItems.toString(),e.numElements.toString(),n];return r}if(0==e.numItems){var r=[e.arrayLength.toString(),e.numItems.toString(),e.numElements.toString(),[]];return r}return null},t.prototype.constructExecuteNode=function(e,t,n,r){var i=this.GetMaximumDepthAndItemNumber(t),o={numItems:i.numItems,numElements:i.numElements,data:n,maxDepth:i.maxDepth,state:"",stateMessage:"",$type:"ExecutedNode",nodeId:e,containsGeometryData:r,totals:JSON.stringify(this.GatherListTotals(i))};return Array.isArray(t)||(o.numItems=null,o.numElements=null,o.maxDepth=null,o.totals=null),o},t.prototype.generateCodeblockUpdatesFromCoGSResponse=function(e,t){var n=[];return e.forEach(function(e){var r=t.SearchForNodeById(e.Name);r&&"Dynamo.Graph.Nodes.CodeBlockNodeModel, DynamoCore"==r.type.concreteType&&n.push(new a({workspaceGuid:null,nodeId:e.Name,data:{inPorts:[],outPorts:e.Array.map(function(e,t){return t.toString()}),code:r.extra.code,lineIndices:[]}}))}),n},t.prototype.convertCoGsCompuationtoCompuationResponse=function(e){var t=this,n=e.map(function(e){var n=e.Array.map(function(e){return e.hasOwnProperty("Value")?(console.log(e+"contained a single value"),console.log(e.Value),e.Value.Value):(console.log(e+"contained an array"),t.extractValuesFromPortValue(e))});return 1!=n.length||Array.isArray(n[0])||(n=n[0]),t.constructExecuteNode(e.Name,n,JSON.stringify(n),!0)});console.log("after our first conversion our executedNode datas which will go in our computation responses are:"),console.log(n);var r=new i({nodes:n,isGeometrySent:!0});console.log("computation response looks like"),console.log(r);var o=e.map(function(e){var n=e.Array.map(function(e){return e.hasOwnProperty("Value")?e.Value.Value:t.extractValuesFromPortValue(e)});return{array:n,nodeId:e.Name}});o=o.filter(function(e){return!(1==e.array.length&&!Array.isArray(e.array[0]))}),console.log("the array data looks like"),console.log(o);var a=o.map(function(e){return new s({nodeId:e.nodeId,items:JSON.stringify(e.array),indexFrom:0})});return{ComputationResponse:r,ArrayResponses:a}},t.prototype.extractValuesFromPortValue=function(e){var t=this;return _.isEmpty(e)?"empty":e.hasOwnProperty("Value")?e.Value.Value:e.Array.map(function(e){return t.extractValuesFromPortValue(e)})},t.prototype.initialize=function(t,n){if(n=n||{},!n.serviceURL)throw new Error("ServiceURL for CoGS swagger must exist");this.serviceURL=n.serviceURL,this.authToken=n.authToken||null,e.prototype.initialize.call(this,t,n)},t.prototype.postMessage=function(t,n,r){var i=this;void 0===r&&(r=!1),"post"==t.kind&&"GetLibraryItemsMessage"==JSON.parse(t.message).type&&this.getSwaggerClient(function(e){i.retryPromisemaxRetryCount(function(){return e.default.executeLibrary({responseContentType:"application/json"}).then(function(e){console.log(e.obj);var t=i.generateLibaryItemResponse(e.obj),n=i.generateBuiltinNodes();n.forEach(function(e){t.libraryItems.push(e)}),i.ProcessResponse("libraryItemsList-received:event",t)})},5)}),"run"==t.kind&&this.getSwaggerClient(function(e){var t=(new c.AVPWorkspaceConverter).CreateDYNWorkspace(n);console.log(t),i.retryPromisemaxRetryCount(function(){return e.default.executeGraph({body:{WantValues:"AllNodes",Graphics:{OutputPolicy:"AllNodes"},Graph:t}},{requestContentType:"application/json",responseContentType:"application/json"}).then(function(e){console.log(e.obj),e.obj.Geometry&&i.convertGeometryCoGSGeoResponseToReachResponses(e.obj.Geometry).forEach(function(e){i.ProcessResponse("geometry-data-received:event",e)});var t=i.convertCoGsCompuationtoCompuationResponse(e.obj.NamedValues);i.ProcessResponse("computation-completed:event",t.ComputationResponse);var r=i.generateCodeblockUpdatesFromCoGSResponse(e.obj.NamedValues,n);r.forEach(function(e){i.ProcessResponse("code-block-node-updated:event",e)}),t.ArrayResponses.forEach(function(e){i.ProcessResponse("array-items-received:event",e)})})},5)}),e.prototype.postMessage.call(this,t,n,r)},t.prototype.reset=function(){e.prototype.reset.call(this)},t.prototype.InitWorkspace=function(t){var n=this;return t.notNotifyServer?(t.notNotifyServer=!1,void t.nodes.forEach(function(e){n.watchNodeEvents(e,t)})):void e.prototype.InitWorkspace.call(this,t)},t}(n);return u});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("EditorHtmlPreloader",["require","exports","backbone","underscore"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#main-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){$(e.attributes.element).html(this.template())},t}(n.View);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("CustomizerHtmlPreloader",["require","exports","backbone","underscore"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return r.template($("#customizer-main-template").html())},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){$(e.attributes.element).html(this.template())},t}(n.View);return i});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("Logger",["require","exports","backbone","FileSaver"],function(e,t,n,r){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initialize=function(e){return this.messageList=[],this.executionTimeList=[],this},t.prototype.buildLog=function(e){var t=parseFloat(e.elapsedTime);return isNaN(t)&&(e.elapsedTime="0"),this.messageList.push(e),e&&"Graph Execution"==e.message&&(this.lastExecutionTime=e.elapsedTime,this.executionTimeList.push(e.elapsedTime)),this},t.prototype.writeLog=function(e){var t;t=JSON.stringify({ExecutionTime:this.getLastExecutionTime(),"Average Execution Time":this.getAverageExeuctionTime()});var n=this.messageList;t+=JSON.stringify(n);var i=new Blob([t],{type:"application/json"});e.workspaceName?r(i,e.workspaceName+"_"+Date.now()+".txt"):r(i,"Logs_"+Date.now()+".txt")},t.prototype.resetLogger=function(){this.messageList=[],this.executionTimeList=[]},t.prototype.getLogMessages=function(){return this.messageList},t.prototype.getLastExecutionTime=function(){return this.lastExecutionTime},t.prototype.getAverageExeuctionTime=function(){return 0==this.executionTimeList.length?0:this.executionTimeList.reduce(function(e,t){return parseFloat(e)+parseFloat(t)})/this.executionTimeList.length},t}(n.Model);return i});var a={REVISION:"70"};"object"==typeof module&&(module.exports=a),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:0<e?1:0}),a.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},a.CullFaceNone=0,a.CullFaceBack=1,a.CullFaceFront=2,a.CullFaceFrontBack=3,a.FrontFaceDirectionCW=0,a.FrontFaceDirectionCCW=1,a.BasicShadowMap=0,a.PCFShadowMap=1,a.PCFSoftShadowMap=2,a.FrontSide=0,a.BackSide=1,a.DoubleSide=2,a.NoShading=0,a.FlatShading=1,a.SmoothShading=2,a.NoColors=0,a.FaceColors=1,a.VertexColors=2,a.NoBlending=0,a.NormalBlending=1,a.AdditiveBlending=2,a.SubtractiveBlending=3,a.MultiplyBlending=4,a.CustomBlending=5,a.AddEquation=100,a.SubtractEquation=101,a.ReverseSubtractEquation=102,a.MinEquation=103,a.MaxEquation=104,a.ZeroFactor=200,a.OneFactor=201,a.SrcColorFactor=202,a.OneMinusSrcColorFactor=203,a.SrcAlphaFactor=204,a.OneMinusSrcAlphaFactor=205,a.DstAlphaFactor=206,a.OneMinusDstAlphaFactor=207,a.DstColorFactor=208,a.OneMinusDstColorFactor=209,a.SrcAlphaSaturateFactor=210,a.MultiplyOperation=0,a.MixOperation=1,a.AddOperation=2,a.UVMapping=300,a.CubeReflectionMapping=301,a.CubeRefractionMapping=302,a.EquirectangularReflectionMapping=303,a.EquirectangularRefractionMapping=304,a.SphericalReflectionMapping=305,a.RepeatWrapping=1e3,a.ClampToEdgeWrapping=1001,a.MirroredRepeatWrapping=1002,a.NearestFilter=1003,a.NearestMipMapNearestFilter=1004,a.NearestMipMapLinearFilter=1005,a.LinearFilter=1006,a.LinearMipMapNearestFilter=1007,a.LinearMipMapLinearFilter=1008,a.UnsignedByteType=1009,a.ByteType=1010,a.ShortType=1011,a.UnsignedShortType=1012,a.IntType=1013,a.UnsignedIntType=1014,a.FloatType=1015,a.UnsignedShort4444Type=1016,a.UnsignedShort5551Type=1017,a.UnsignedShort565Type=1018,a.AlphaFormat=1019,a.RGBFormat=1020,a.RGBAFormat=1021,a.LuminanceFormat=1022,a.LuminanceAlphaFormat=1023,a.RGBEFormat=a.RGBAFormat,a.RGB_S3TC_DXT1_Format=2001,a.RGBA_S3TC_DXT1_Format=2002,a.RGBA_S3TC_DXT3_Format=2003,a.RGBA_S3TC_DXT5_Format=2004,a.RGB_PVRTC_4BPPV1_Format=2100,a.RGB_PVRTC_2BPPV1_Format=2101,a.RGBA_PVRTC_4BPPV1_Format=2102,a.RGBA_PVRTC_2BPPV1_Format=2103,a.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},a.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},a.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},a.Color.prototype={constructor:a.Color,r:1,g:1,b:1,set:function(e){return e instanceof a.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(0===t)this.r=this.g=this.b=n;else{var r=function(e,t,n){return 0>n&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+6*(t-e)*(2/3-n):e};t=.5>=n?n*(1+t):n+t-n*t,n=2*n-t,this.r=r(n,t,e+1/3),this.g=r(n,t,e),this.b=r(n,t,e-1/3)}return this},setStyle:function(e){return/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)?(e=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e),this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this):/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)?(e=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e),this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this):/^\#([0-9a-f]{6})$/i.test(e)?(e=/^\#([0-9a-f]{6})$/i.exec(e),this.setHex(parseInt(e[1],16)),this):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)?(e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e),this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this):/^(\w+)$/i.test(e)?(this.setHex(a.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e=e||{h:0,s:0,l:0};var t,n=this.r,r=this.g,i=this.b,o=Math.max(n,r,i),s=Math.min(n,r,i),a=(s+o)/2;if(s===o)s=t=0;else{var l=o-s,s=.5>=a?l/(o+s):l/(2-o-s);switch(o){case n:t=(r-i)/l+(r<i?6:0);break;case r:t=(i-n)/l+2;break;case i:t=(n-r)/l+4}t/=6}return e.h=t,e.s=s,e.l=a,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new a.Color).setRGB(this.r,this.g,this.b)}},a.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},a.Quaternion=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1},a.Quaternion.prototype={constructor:a.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1==e instanceof a.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),o=Math.sin(e._x/2),s=Math.sin(e._y/2),l=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=o*r*i+n*s*l,this._y=n*s*i-o*r*l,this._z=n*r*l+o*s*i,this._w=n*r*i-o*s*l):"YXZ"===e.order?(this._x=o*r*i+n*s*l,this._y=n*s*i-o*r*l,this._z=n*r*l-o*s*i,this._w=n*r*i+o*s*l):"ZXY"===e.order?(this._x=o*r*i-n*s*l,this._y=n*s*i+o*r*l,this._z=n*r*l+o*s*i,this._w=n*r*i-o*s*l):"ZYX"===e.order?(this._x=o*r*i-n*s*l,this._y=n*s*i+o*r*l,this._z=n*r*l-o*s*i,this._w=n*r*i+o*s*l):"YZX"===e.order?(this._x=o*r*i+n*s*l,this._y=n*s*i+o*r*l,this._z=n*r*l-o*s*i,this._w=n*r*i-o*s*l):"XZY"===e.order&&(this._x=o*r*i-n*s*l,this._y=n*s*i-o*r*l,this._z=n*r*l+o*s*i,this._w=n*r*i+o*s*l),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0];e=t[4];var r=t[8],i=t[1],o=t[5],s=t[9],a=t[2],l=t[6],t=t[10],c=n+o+t;return 0<c?(n=.5/Math.sqrt(c+1),this._w=.25/n,this._x=(l-s)*n,this._y=(r-a)*n,this._z=(i-e)*n):n>o&&n>t?(n=2*Math.sqrt(1+n-o-t),this._w=(l-s)/n,this._x=.25*n,this._y=(e+i)/n,this._z=(r+a)/n):o>t?(n=2*Math.sqrt(1+o-n-t),this._w=(r-a)/n,this._x=(e+i)/n,this._y=.25*n,this._z=(s+l)/n):(n=2*Math.sqrt(1+t-n-o),this._w=(i-e)/n,this._x=(r+a)/n,this._y=(s+l)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(n,r){return void 0===e&&(e=new a.Vector3),t=n.dot(r)+1,1e-6>t?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+r*l-i*a,this._y=r*c+o*a+i*s-n*l,this._z=i*c+o*l+n*a-r*s,this._w=o*c-n*s-r*a-i*l,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,s=o*e._w+n*e._x+r*e._y+i*e._z;if(0>s?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=o,this._x=n,this._y=r,this._z=i,this;var a=Math.acos(s),l=Math.sqrt(1-s*s);return.001>Math.abs(l)?(this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this):(s=Math.sin((1-t)*a)/l,a=Math.sin(t*a)/l,this._w=o*s+this._w*a,this._x=n*s+this._x*a,this._y=r*s+this._y*a,this._z=i*s+this._z*a,this.onChangeCallback(),this)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new a.Quaternion(this._x,this._y,this._z,this._w)}},a.Quaternion.slerp=function(e,t,n,r){return n.copy(e).slerp(t,r)},a.Vector2=function(e,t){this.x=e||0,this.y=t||0},a.Vector2.prototype={constructor:a.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e);
}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e):this.y=this.x=0,this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new a.Vector2,t=new a.Vector2),e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this},clone:function(){return new a.Vector2(this.x,this.y)}},a.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},a.Vector3.prototype={constructor:a.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return!1==t instanceof a.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new a.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new a.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,n)),this}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6]*r,this.y=e[1]*t+e[4]*n+e[7]*r,this.z=e[2]*t+e[5]*n+e[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12],this.y=e[1]*t+e[5]*n+e[9]*r+e[13],this.z=e[2]*t+e[6]*n+e[10]*r+e[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z;e=e.elements;var i=1/(e[3]*t+e[7]*n+e[11]*r+e[15]);return this.x=(e[0]*t+e[4]*n+e[8]*r+e[12])*i,this.y=(e[1]*t+e[5]*n+e[9]*r+e[13])*i,this.z=(e[2]*t+e[6]*n+e[10]*r+e[14])*i,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,s=e.z;e=e.w;var a=e*t+o*r-s*n,l=e*n+s*t-i*r,c=e*r+i*n-o*t,t=-i*t-o*n-s*r;return this.x=a*e+t*-i+l*-s-c*-o,this.y=l*e+t*-o+c*-i-a*-s,this.z=c*e+t*-s+a*-o-l*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new a.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new a.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r,this.y=e[1]*t+e[5]*n+e[9]*r,this.z=e[2]*t+e[6]*n+e[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e,this.z*=e):this.z=this.y=this.x=0,this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new a.Vector3,t=new a.Vector3),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,s=t.y,a=t.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this},projectOnVector:function(){var e,t;return function(n){return void 0===e&&(e=new a.Vector3),e.copy(n).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new a.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new a.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){return e=this.dot(e)/(this.length()*e.length()),Math.acos(a.Math.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return e=this.z-e.z,t*t+n*n+e*e},setEulerFromRotationMatrix:function(e,t){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length();return e=this.set(e.elements[8],e.elements[9],e.elements[10]).length(),this.x=t,this.y=n,this.z=e,this},setFromMatrixColumn:function(e,t){var n=4*e,r=t.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this},clone:function(){return new a.Vector3(this.x,this.y,this.z)}},a.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},a.Vector4.prototype={constructor:a.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12]*i,this.y=e[1]*t+e[5]*n+e[9]*r+e[13]*i,this.z=e[2]*t+e[6]*n+e[10]*r+e[14]*i,this.w=e[3]*t+e[7]*n+e[11]*r+e[15]*i,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.z=this.y=this.x=0,this.w=1),this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r;e=e.elements;var i=e[0];r=e[4];var o=e[8],s=e[1],a=e[5],l=e[9];n=e[2],t=e[6];var c=e[10];return.01>Math.abs(r-s)&&.01>Math.abs(o-n)&&.01>Math.abs(l-t)?.1>Math.abs(r+s)&&.1>Math.abs(o+n)&&.1>Math.abs(l+t)&&.1>Math.abs(i+a+c-3)?(this.set(1,0,0,0),this):(e=Math.PI,i=(i+1)/2,a=(a+1)/2,c=(c+1)/2,r=(r+s)/4,o=(o+n)/4,l=(l+t)/4,i>a&&i>c?.01>i?(t=0,r=n=.707106781):(t=Math.sqrt(i),n=r/t,r=o/t):a>c?.01>a?(t=.707106781,n=0,r=.707106781):(n=Math.sqrt(a),t=r/n,r=l/n):.01>c?(n=t=.707106781,r=0):(r=Math.sqrt(c),t=o/r,n=l/r),this.set(t,n,r,e),this):(e=Math.sqrt((t-l)*(t-l)+(o-n)*(o-n)+(s-r)*(s-r)),.001>Math.abs(e)&&(e=1),this.x=(t-l)/e,this.y=(o-n)/e,this.z=(s-r)/e,this.w=Math.acos((i+a+c-1)/2),this)},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new a.Vector4,t=new a.Vector4),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this},clone:function(){return new a.Vector4(this.x,this.y,this.z,this.w)}},a.Euler=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||a.Euler.DefaultOrder},a.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),a.Euler.DefaultOrder="XYZ",a.Euler.prototype={constructor:a.Euler,_x:0,_y:0,_z:0,_order:a.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=a.Math.clamp,i=e.elements;e=i[0];var o=i[4],s=i[8],l=i[1],c=i[5],u=i[9],p=i[2],h=i[6],i=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-u,i),this._z=Math.atan2(-o,e)):(this._x=Math.atan2(h,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(s,i),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(-p,i),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,e))):"ZYX"===t?(this._y=Math.asin(-r(p,-1,1)),.99999>Math.abs(p)?(this._x=Math.atan2(h,i),this._z=Math.atan2(l,e)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-p,e)):(this._x=0,this._y=Math.atan2(s,i))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,e)):(this._x=Math.atan2(-u,i),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,r){return void 0===e&&(e=new a.Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r),this}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new a.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new a.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new a.Euler(this._x,this._y,this._z,this._order)}},a.Line3=function(e,t){this.start=void 0!==e?e:new a.Vector3,this.end=void 0!==t?t:new a.Vector3},a.Line3.prototype={constructor:a.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){return(e||new a.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new a.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new a.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new a.Vector3,t=new a.Vector3;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),i=t.dot(e)/i;return r&&(i=a.Math.clamp(i,0,1)),i}}(),closestPointToPoint:function(e,t,n){return e=this.closestPointToPointParameter(e,t),n=n||new a.Vector3,this.delta(n).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new a.Line3).copy(this)}},a.Box2=function(e,t){this.min=void 0!==e?e:new a.Vector2(1/0,1/0),this.max=void 0!==t?t:new a.Vector2(-(1/0),-(1/0))},a.Box2.prototype={constructor:a.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new a.Vector2;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){return(e||new a.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new a.Vector2).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new a.Vector2).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new a.Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new a.Vector2;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new a.Box2).copy(this)}},a.Box3=function(e,t){this.min=void 0!==e?e:new a.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new a.Vector3(-(1/0),-(1/0),-(1/0))},a.Box3.prototype={constructor:a.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new a.Vector3;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new a.Vector3;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r=t.geometry;if(void 0!==r)if(r instanceof a.Geometry)for(var i=r.vertices,r=0,o=i.length;r<o;r++)e.copy(i[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e);else if(r instanceof a.BufferGeometry&&void 0!==r.attributes.position)for(i=r.attributes.position.array,r=0,o=i.length;r<o;r+=3)e.set(i[r],i[r+1],i[r+2]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new a.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new a.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new a.Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},clampPoint:function(e,t){return(t||new a.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new a.Vector3;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new a.Vector3;return function(t){return t=t||new a.Sphere,t.center=this.center(),t.radius=.5*this.size(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new a.Box3).copy(this)}},a.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},a.Matrix3.prototype={constructor:a.Matrix3,set:function(e,t,n,r,i,o,s,a,l){var c=this.elements;return c[0]=e,c[3]=t,c[6]=n,c[1]=r,c[4]=i,c[7]=o,c[2]=s,c[5]=a,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){return e=e.elements,this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new a.Vector3;return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0;i<r;i+=3,n+=3)e.x=t[n],e.y=t[n+1],e.z=t[n+2],e.applyMatrix3(this),t[n]=e.x,t[n+1]=e.y,t[n+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],e=e[8];return t*o*e-t*s*l-n*i*e+n*s*a+r*i*l-r*o*a},getInverse:function(e,t){var n=e.elements,r=this.elements;if(r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4],n=n[0]*r[0]+n[1]*r[3]+n[2]*r[6],0===n){if(t)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new a.Matrix3).fromArray(this.elements)}},a.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},a.Matrix4.prototype={constructor:a.Matrix4,set:function(e,t,n,r,i,o,s,a,l,c,u,p,h,d,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=p,g[3]=h,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,n){var r=this.elements;return e.set(r[0],r[1],r[2]),t.set(r[4],r[5],r[6]),n.set(r[8],r[9],r[10]),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new a.Vector3;return function(t){var n=this.elements;t=t.elements;var r=1/e.set(t[0],t[1],t[2]).length(),i=1/e.set(t[4],t[5],t[6]).length(),o=1/e.set(t[8],t[9],t[10]).length();return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*i,n[8]=t[8]*o,n[9]=t[9]*o,n[10]=t[10]*o,this}}(),makeRotationFromEuler:function(e){!1==e instanceof a.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),n=Math.sin(n),s=Math.cos(r),r=Math.sin(r),l=Math.cos(i),i=Math.sin(i);if("XYZ"===e.order){e=o*l;var c=o*i,u=n*l,p=n*i;t[0]=s*l,t[4]=-s*i,t[8]=r,t[1]=c+u*r,t[5]=e-p*r,t[9]=-n*s,t[2]=p-e*r,t[6]=u+c*r,t[10]=o*s}else"YXZ"===e.order?(e=s*l,c=s*i,u=r*l,p=r*i,t[0]=e+p*n,t[4]=u*n-c,t[8]=o*r,t[1]=o*i,t[5]=o*l,t[9]=-n,t[2]=c*n-u,t[6]=p+e*n,t[10]=o*s):"ZXY"===e.order?(e=s*l,c=s*i,u=r*l,p=r*i,t[0]=e-p*n,t[4]=-o*i,t[8]=u+c*n,t[1]=c+u*n,t[5]=o*l,t[9]=p-e*n,t[2]=-o*r,t[6]=n,t[10]=o*s):"ZYX"===e.order?(e=o*l,c=o*i,u=n*l,p=n*i,t[0]=s*l,t[4]=u*r-c,t[8]=e*r+p,t[1]=s*i,t[5]=p*r+e,t[9]=c*r-u,t[2]=-r,t[6]=n*s,t[10]=o*s):"YZX"===e.order?(e=o*s,c=o*r,u=n*s,p=n*r,t[0]=s*l,t[4]=p-e*i,t[8]=u*i+c,t[1]=i,t[5]=o*l,t[9]=-n*l,t[2]=-r*l,t[6]=c*i+u,t[10]=e-p*i):"XZY"===e.order&&(e=o*s,c=o*r,u=n*s,p=n*r,t[0]=s*l,t[4]=-i,t[8]=r*l,t[1]=e*i+p,t[5]=o*l,t[9]=c*i-u,t[2]=u*i-c,t[6]=n*l,t[10]=p*i+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,s=n+n,a=r+r,l=i+i;
e=n*s;var c=n*a,n=n*l,u=r*a,r=r*l,i=i*l,s=o*s,a=o*a,o=o*l;return t[0]=1-(u+i),t[4]=c-o,t[8]=n+a,t[1]=c+o,t[5]=1-(e+i),t[9]=r-s,t[2]=n-a,t[6]=r+s,t[10]=1-(e+u),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new a.Vector3,t=new a.Vector3,n=new a.Vector3;return function(r,i,o){var s=this.elements;return n.subVectors(r,i).normalize(),0===n.length()&&(n.z=1),e.crossVectors(o,n).normalize(),0===e.length()&&(n.x+=1e-4,e.crossVectors(o,n).normalize()),t.crossVectors(n,e),s[0]=e.x,s[4]=t.x,s[8]=n.x,s[1]=e.y,s[5]=t.y,s[9]=n.y,s[2]=e.z,s[6]=t.z,s[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],p=n[9],h=n[13],d=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],n=n[15],S=r[0],w=r[4],x=r[8],C=r[12],_=r[1],k=r[5],A=r[9],D=r[13],T=r[2],P=r[6],M=r[10],E=r[14],N=r[3],O=r[7],I=r[11],r=r[15];return i[0]=o*S+s*_+a*T+l*N,i[4]=o*w+s*k+a*P+l*O,i[8]=o*x+s*A+a*M+l*I,i[12]=o*C+s*D+a*E+l*r,i[1]=c*S+u*_+p*T+h*N,i[5]=c*w+u*k+p*P+h*O,i[9]=c*x+u*A+p*M+h*I,i[13]=c*C+u*D+p*E+h*r,i[2]=d*S+f*_+m*T+g*N,i[6]=d*w+f*k+m*P+g*O,i[10]=d*x+f*A+m*M+g*I,i[14]=d*C+f*D+m*E+g*r,i[3]=y*S+v*_+b*T+n*N,i[7]=y*w+v*k+b*P+n*O,i[11]=y*x+v*A+b*M+n*I,i[15]=y*C+v*D+b*E+n*r,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new a.Vector3;return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0;i<r;i+=3,n+=3)e.x=t[n],e.y=t[n+1],e.z=t[n+2],e.applyMatrix4(this),t[n]=e.x,t[n+1]=e.y,t[n+2]=e.z;return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],p=e[10],h=e[14];return e[3]*(+i*a*u-r*l*u-i*s*p+n*l*p+r*s*h-n*a*h)+e[7]*(+t*a*h-t*l*p+i*o*p-r*o*h+r*l*c-i*a*c)+e[11]*(+t*l*u-t*s*h-i*o*u+n*o*h+i*s*c-n*l*c)+e[15]*(-r*s*c-t*a*u+t*s*p+r*o*u-n*o*p+n*a*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e=new a.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[4],s=r[8],a=r[12],l=r[1],c=r[5],u=r[9],p=r[13],h=r[2],d=r[6],f=r[10],m=r[14],g=r[3],y=r[7],v=r[11],r=r[15];if(n[0]=u*m*y-p*f*y+p*d*v-c*m*v-u*d*r+c*f*r,n[4]=a*f*y-s*m*y-a*d*v+o*m*v+s*d*r-o*f*r,n[8]=s*p*y-a*u*y+a*c*v-o*p*v-s*c*r+o*u*r,n[12]=a*u*d-s*p*d-a*c*f+o*p*f+s*c*m-o*u*m,n[1]=p*f*g-u*m*g-p*h*v+l*m*v+u*h*r-l*f*r,n[5]=s*m*g-a*f*g+a*h*v-i*m*v-s*h*r+i*f*r,n[9]=a*u*g-s*p*g-a*l*v+i*p*v+s*l*r-i*u*r,n[13]=s*p*h-a*u*h+a*l*f-i*p*f-s*l*m+i*u*m,n[2]=c*m*g-p*d*g+p*h*y-l*m*y-c*h*r+l*d*r,n[6]=a*d*g-o*m*g-a*h*y+i*m*y+o*h*r-i*d*r,n[10]=o*p*g-a*c*g+a*l*y-i*p*y-o*l*r+i*c*r,n[14]=a*c*h-o*p*h-a*l*d+i*p*d+o*l*m-i*c*m,n[3]=u*d*g-c*f*g-u*h*y+l*f*y+c*h*v-l*d*v,n[7]=o*f*g-s*d*g+s*h*y-i*f*y-o*h*v+i*d*v,n[11]=s*c*g-o*u*g-s*l*y+i*u*y+o*l*v-i*c*v,n[15]=o*u*h-s*c*h+s*l*d-i*u*d-o*l*f+i*c*f,n=i*n[0]+l*n[4]+h*n[8]+g*n[12],0==n){if(t)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/n),this},translate:function(e){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,n=e.x,r=e.y;return e=e.z,t[0]*=n,t[4]*=r,t[8]*=e,t[1]*=n,t[5]*=r,t[9]*=e,t[2]*=n,t[6]*=r,t[10]*=e,t[3]*=n,t[7]*=r,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],Math.max(e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10])))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,s=e.y,a=e.z,l=i*o,c=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,c*s+n,c*a-r*o,0,l*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new a.Vector3,t=new a.Matrix4;return function(n,r,i){var o=this.elements,s=e.set(o[0],o[1],o[2]).length(),a=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();0>this.determinant()&&(s=-s),n.x=o[12],n.y=o[13],n.z=o[14],t.elements.set(this.elements),n=1/s;var o=1/a,c=1/l;return t.elements[0]*=n,t.elements[1]*=n,t.elements[2]*=n,t.elements[4]*=o,t.elements[5]*=o,t.elements[6]*=o,t.elements[8]*=c,t.elements[9]*=c,t.elements[10]*=c,r.setFromRotationMatrix(t),i.x=s,i.y=a,i.z=l,this}}(),makeFrustum:function(e,t,n,r,i,o){var s=this.elements;return s[0]=2*i/(t-e),s[4]=0,s[8]=(t+e)/(t-e),s[12]=0,s[1]=0,s[5]=2*i/(r-n),s[9]=(r+n)/(r-n),s[13]=0,s[2]=0,s[6]=0,s[10]=-(o+i)/(o-i),s[14]=-2*o*i/(o-i),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makePerspective:function(e,t,n,r){e=n*Math.tan(a.Math.degToRad(.5*e));var i=-e;return this.makeFrustum(i*t,e*t,i,e,n,r)},makeOrthographic:function(e,t,n,r,i,o){var s=this.elements,a=t-e,l=n-r,c=o-i;return s[0]=2/a,s[4]=0,s[8]=0,s[12]=-((t+e)/a),s[1]=0,s[5]=2/l,s[9]=0,s[13]=-((n+r)/l),s[2]=0,s[6]=0,s[10]=-2/c,s[14]=-((o+i)/c),s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new a.Matrix4).fromArray(this.elements)}},a.Ray=function(e,t){this.origin=void 0!==e?e:new a.Vector3,this.direction=void 0!==t?t:new a.Vector3},a.Ray.prototype={constructor:a.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new a.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new a.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new a.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return 0>r?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var e=new a.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(){var e=new a.Vector3,t=new a.Vector3,n=new a.Vector3;return function(r,i,o,s){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var a,l=.5*r.distanceTo(i),c=-this.direction.dot(t),u=n.dot(this.direction),p=-n.dot(t),h=n.lengthSq(),d=Math.abs(1-c*c);return 0<d?(r=c*p-u,i=c*u-p,a=l*d,0<=r?i>=-a?i<=a?(l=1/d,r*=l,i*=l,c=r*(r+c*i+2*u)+i*(c*r+i+2*p)+h):(i=l,r=Math.max(0,-(c*i+u)),c=-r*r+i*(i+2*p)+h):(i=-l,r=Math.max(0,-(c*i+u)),c=-r*r+i*(i+2*p)+h):i<=-a?(r=Math.max(0,-(-c*l+u)),i=0<r?-l:Math.min(Math.max(-l,-p),l),c=-r*r+i*(i+2*p)+h):i<=a?(r=0,i=Math.min(Math.max(-l,-p),l),c=i*(i+2*p)+h):(r=Math.max(0,-(c*l+u)),i=0<r?l:Math.min(Math.max(-l,-p),l),c=-r*r+i*(i+2*p)+h)):(i=0<c?-l:l,r=Math.max(0,-(c*i+u)),c=-r*r+i*(i+2*p)+h),o&&o.copy(this.direction).multiplyScalar(r).add(this.origin),s&&s.copy(t).multiplyScalar(i).add(e),c}}(),isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new a.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;return i>o?null:(o=Math.sqrt(o-i),i=r-o,r+=o,0>i&&0>r?null:0>i?this.at(r,n):this.at(i,n))}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0==t?0==e.distanceToPoint(this.origin)?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/t,0<=e?e:null)},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},isIntersectionBox:function(){var e=new a.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var n,r,i,o,s;r=1/this.direction.x,o=1/this.direction.y,s=1/this.direction.z;var a=this.origin;return 0<=r?(n=(e.min.x-a.x)*r,r*=e.max.x-a.x):(n=(e.max.x-a.x)*r,r*=e.min.x-a.x),0<=o?(i=(e.min.y-a.y)*o,o*=e.max.y-a.y):(i=(e.max.y-a.y)*o,o*=e.min.y-a.y),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),0<=s?(i=(e.min.z-a.z)*s,s*=e.max.z-a.z):(i=(e.max.z-a.z)*s,s*=e.min.z-a.z),n>s||i>r?null:((i>n||n!==n)&&(n=i),(s<r||r!==r)&&(r=s),0>r?null:this.at(0<=n?n:r,t)))},intersectTriangle:function(){var e=new a.Vector3,t=new a.Vector3,n=new a.Vector3,r=new a.Vector3;return function(i,o,s,a,l){if(t.subVectors(o,i),n.subVectors(s,i),r.crossVectors(t,n),o=this.direction.dot(r),0<o){if(a)return null;a=1}else{if(!(0>o))return null;a=-1,o=-o}return e.subVectors(this.origin,i),i=a*this.direction.dot(n.crossVectors(e,n)),0>i?null:(s=a*this.direction.dot(t.cross(e)),0>s||i+s>o?null:(i=-a*e.dot(r),0>i?null:this.at(i/o,l)))}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new a.Ray).copy(this)}},a.Sphere=function(e,t){this.center=void 0!==e?e:new a.Vector3,this.radius=void 0!==t?t:0},a.Sphere.prototype={constructor:a.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new a.Box3;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).center(r);for(var i=0,o=0,s=t.length;o<s;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new a.Vector3;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){return e=e||new a.Box3,e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new a.Sphere).copy(this)}},a.Frustum=function(e,t,n,r,i,o){this.planes=[void 0!==e?e:new a.Plane,void 0!==t?t:new a.Plane,void 0!==n?n:new a.Plane,void 0!==r?r:new a.Plane,void 0!==i?i:new a.Plane,void 0!==o?o:new a.Plane]},a.Frustum.prototype={constructor:a.Frustum,set:function(e,t,n,r,i,o){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements;e=n[0];var r=n[1],i=n[2],o=n[3],s=n[4],a=n[5],l=n[6],c=n[7],u=n[8],p=n[9],h=n[10],d=n[11],f=n[12],m=n[13],g=n[14],n=n[15];return t[0].setComponents(o-e,c-s,d-u,n-f).normalize(),t[1].setComponents(o+e,c+s,d+u,n+f).normalize(),t[2].setComponents(o+r,c+a,d+p,n+m).normalize(),t[3].setComponents(o-r,c-a,d-p,n-m).normalize(),t[4].setComponents(o-i,c-l,d-h,n-g).normalize(),t[5].setComponents(o+i,c+l,d+h,n+g).normalize(),this},intersectsObject:function(){var e=new a.Sphere;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,n=e.center;e=-e.radius;for(var r=0;6>r;r++)if(t[r].distanceToPoint(n)<e)return!1;return!0},intersectsBox:function(){var e=new a.Vector3,t=new a.Vector3;return function(n){for(var r=this.planes,i=0;6>i;i++){var o=r[i];e.x=0<o.normal.x?n.min.x:n.max.x,t.x=0<o.normal.x?n.max.x:n.min.x,e.y=0<o.normal.y?n.min.y:n.max.y,t.y=0<o.normal.y?n.max.y:n.min.y,e.z=0<o.normal.z?n.min.z:n.max.z,t.z=0<o.normal.z?n.max.z:n.min.z;var s=o.distanceToPoint(e),o=o.distanceToPoint(t);if(0>s&&0>o)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0},clone:function(){return(new a.Frustum).copy(this)}},a.Plane=function(e,t){this.normal=void 0!==e?e:new a.Vector3(1,0,0),this.constant=void 0!==t?t:0},a.Plane.prototype={constructor:a.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new a.Vector3,t=new a.Vector3;return function(n,r,i){return r=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,n),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new a.Vector3).copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectLine:function(){var e=new a.Vector3;return function(t,n){var r=n||new a.Vector3,i=t.delta(e),o=this.normal.dot(i);return 0!=o?(o=-(t.start.dot(this.normal)+this.constant)/o,0>o||1<o?void 0:r.copy(i).multiplyScalar(o).add(t.start)):0==this.distanceToPoint(t.start)?r.copy(t.start):void 0}}(),coplanarPoint:function(e){return(e||new a.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new a.Vector3,t=new a.Vector3,n=new a.Matrix3;return function(r,i){var o=i||n.getNormalMatrix(r),o=e.copy(this.normal).applyMatrix3(o),s=this.coplanarPoint(t);return s.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(o,s),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new a.Plane).copy(this)}},a.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=Array(36),r=0;return function(){for(var i=0;36>i;i++)8==i||13==i||18==i||23==i?n[i]="-":14==i?n[i]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19==i?3&e|8:e]);return n.join("")}}(),clamp:function(e,t,n){return e<t?t:e>n?n:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return Math.floor(this.randFloat(e,t))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e}},a.Spline=function(e){function t(e,t,n,r,i,o,s){return e=.5*(n-e),r=.5*(r-t),(2*(t-n)+e+r)*s+(-3*(t-n)-2*e-r)*o+e*i+t}this.points=e;var n,r,i,o,s,l,c,u,p,h=[],d={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,r=Math.floor(n),i=n-r,h[0]=0===r?r:r-1,h[1]=r,h[2]=r>this.points.length-2?this.points.length-1:r+1,h[3]=r>this.points.length-3?this.points.length-1:r+2,l=this.points[h[0]],c=this.points[h[1]],u=this.points[h[2]],p=this.points[h[3]],o=i*i,s=i*o,d.x=t(l.x,c.x,u.x,p.x,i,o,s),d.y=t(l.y,c.y,u.y,p.y,i,o,s),d.z=t(l.z,c.z,u.z,p.z,i,o,s),d},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,i=t=t=0,o=new a.Vector3,s=new a.Vector3,l=[],c=0;for(l[0]=0,e||(e=100),n=this.points.length*e,o.copy(this.points[0]),e=1;e<n;e++)t=e/n,r=this.getPoint(t),s.copy(r),c+=s.distanceTo(o),o.copy(r),t*=this.points.length-1,t=Math.floor(t),t!=i&&(l[t]=c,i=t);return l[l.length]=c,{chunks:l,total:c}},this.reparametrizeByArcLength=function(e){var t,n,r,i,o,s,l=[],c=new a.Vector3,u=this.getLength();for(l.push(c.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(n=u.chunks[t]-u.chunks[t-1],s=Math.ceil(e*n/u.total),i=(t-1)/(this.points.length-1),o=t/(this.points.length-1),n=1;n<s-1;n++)r=i+1/s*n*(o-i),r=this.getPoint(r),l.push(c.copy(r).clone());l.push(c.copy(this.points[t]).clone())}this.points=l}},a.Triangle=function(e,t,n){this.a=void 0!==e?e:new a.Vector3,this.b=void 0!==t?t:new a.Vector3,this.c=void 0!==n?n:new a.Vector3},a.Triangle.normal=function(){var e=new a.Vector3;return function(t,n,r,i){return i=i||new a.Vector3,i.subVectors(r,n),e.subVectors(t,n),i.cross(e),t=i.lengthSq(),0<t?i.multiplyScalar(1/Math.sqrt(t)):i.set(0,0,0)}}(),a.Triangle.barycoordFromPoint=function(){var e=new a.Vector3,t=new a.Vector3,n=new a.Vector3;return function(r,i,o,s,l){e.subVectors(s,i),t.subVectors(o,i),n.subVectors(r,i),r=e.dot(e),i=e.dot(t),o=e.dot(n);var c=t.dot(t);s=t.dot(n);var u=r*c-i*i;return l=l||new a.Vector3,0==u?l.set(-2,-1,-1):(u=1/u,c=(c*o-i*s)*u,r=(r*s-i*o)*u,l.set(1-c-r,r,c))}}(),a.Triangle.containsPoint=function(){var e=new a.Vector3;return function(t,n,r,i){return t=a.Triangle.barycoordFromPoint(t,n,r,i,e),0<=t.x&&0<=t.y&&1>=t.x+t.y}}(),a.Triangle.prototype={constructor:a.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new a.Vector3,t=new a.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new a.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return a.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new a.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return a.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return a.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new a.Triangle).copy(this)}},a.Clock=function(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},a.Clock.prototype={constructor:a.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),e=.001*(t-this.oldTime);this.oldTime=t,this.elapsedTime+=e}return e}},a.EventDispatcher=function(){},a.EventDispatcher.prototype={constructor:a.EventDispatcher,apply:function(e){e.addEventListener=a.EventDispatcher.prototype.addEventListener,e.hasEventListener=a.EventDispatcher.prototype.hasEventListener,e.removeEventListener=a.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=a.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=[],r=t.length,i=0;i<r;i++)n[i]=t[i];for(i=0;i<r;i++)n[i].call(this,e)}}}},function(e){e.Raycaster=function(t,n,r,i){this.ray=new e.Ray(t,n),this.near=r||0,this.far=i||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},n=function(e,t,r,i){if(e.raycast(t,r),!0===i){e=e.children,i=0;for(var o=e.length;i<o;i++)n(e[i],t,r,!0)}};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,n){n instanceof e.PerspectiveCamera?(this.ray.origin.copy(n.position),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(n.position).normalize()):n instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,r){var i=[];return n(e,this,i,r),i.sort(t),i},intersectObjects:function(e,r){var i=[];if(!1==e instanceof Array)return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,s=e.length;o<s;o++)n(e[o],this,i,r);return i.sort(t),i}}}(a),a.Object3D=function(){Object.defineProperty(this,"id",{value:a.Object3DIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=a.Object3D.DefaultUp.clone();var e=new a.Vector3,t=new a.Euler,n=new a.Quaternion,r=new a.Vector3(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r}}),this.rotationAutoUpdate=!0,this.matrix=new a.Matrix4,this.matrixWorld=new a.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.userData={}},a.Object3D.DefaultUp=new a.Vector3(0,1,0),a.Object3D.prototype={constructor:a.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new a.Quaternion;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new a.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new a.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new a.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new a.Vector3;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new a.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new a.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new a.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new a.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new a.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add:",e,"can't be added as a child of itself."),this):(e instanceof a.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add:",e,"is not an instance of THREE.Object3D."),this)},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);t=this.children.indexOf(e),-1!==t&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(t,1))},getChildByName:function(e,t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},getObjectById:function(e,t){return this.getObjectByProperty("id",e,t)},getObjectByName:function(e,t){return this.getObjectByProperty("name",e,t)},getObjectByProperty:function(e,t,n){if(this[e]===t)return this;for(var r=0,i=this.children.length;r<i;r++){var o=this.children[r].getObjectByProperty(e,t,n);if(void 0!==o)return o}},getWorldPosition:function(e){return e=e||new a.Vector3,this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new a.Vector3,t=new a.Vector3;return function(n){return n=n||new a.Quaternion,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldRotation:function(){var e=new a.Quaternion;return function(t){return t=t||new a.Euler,this.getWorldQuaternion(e),t.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new a.Vector3,t=new a.Quaternion;return function(n){return n=n||new a.Vector3,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new a.Quaternion;return function(t){return t=t||new a.Vector3,this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=0,n=this.children.length;t<n;t++)this.children[t].traverseVisible(e)}},traverseAncestors:function(e){this.parent&&(e(this.parent),this.parent.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},n=function(n){if(void 0===e.geometries&&(e.geometries=[]),void 0===t[n.uuid]){var r=n.toJSON();delete r.metadata,t[n.uuid]=r,e.geometries.push(r)}return n.uuid},r={},i=function(t){if(void 0===e.materials&&(e.materials=[]),void 0===r[t.uuid]){var n=t.toJSON();delete n.metadata,r[t.uuid]=n,e.materials.push(n)}return t.uuid},o=function(e){var t={};if(t.uuid=e.uuid,t.type=e.type,""!==e.name&&(t.name=e.name),"{}"!==JSON.stringify(e.userData)&&(t.userData=e.userData),!0!==e.visible&&(t.visible=e.visible),e instanceof a.PerspectiveCamera?(t.fov=e.fov,t.aspect=e.aspect,t.near=e.near,t.far=e.far):e instanceof a.OrthographicCamera?(t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,t.near=e.near,t.far=e.far):e instanceof a.AmbientLight?t.color=e.color.getHex():e instanceof a.DirectionalLight?(t.color=e.color.getHex(),t.intensity=e.intensity):e instanceof a.PointLight?(t.color=e.color.getHex(),
t.intensity=e.intensity,t.distance=e.distance):e instanceof a.SpotLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance,t.angle=e.angle,t.exponent=e.exponent):e instanceof a.HemisphereLight?(t.color=e.color.getHex(),t.groundColor=e.groundColor.getHex()):e instanceof a.Mesh?(t.geometry=n(e.geometry),t.material=i(e.material)):e instanceof a.Line?(t.geometry=n(e.geometry),t.material=i(e.material)):e instanceof a.Sprite&&(t.material=i(e.material)),t.matrix=e.matrix.toArray(),0<e.children.length){t.children=[];for(var r=0;r<e.children.length;r++)t.children.push(o(e.children[r]))}return t};return e.object=o(this),e},clone:function(e,t){if(void 0===e&&(e=new a.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),!0===t)for(var n=0;n<this.children.length;n++)e.add(this.children[n].clone());return e}},a.EventDispatcher.prototype.apply(a.Object3D.prototype),a.Object3DIdCount=0,a.Face3=function(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r instanceof a.Vector3?r:new a.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=i instanceof a.Color?i:new a.Color,this.vertexColors=i instanceof Array?i:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0},a.Face3.prototype={constructor:a.Face3,clone:function(){var e=new a.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,n=this.vertexNormals.length;t<n;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,n=this.vertexColors.length;t<n;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,n=this.vertexTangents.length;t<n;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},a.Face4=function(e,t,n,r,i,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new a.Face3(e,t,n,i,o,s)},a.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},a.BufferAttribute.prototype={constructor:a.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r]},set:function(e){return this.array.set(e),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},clone:function(){return new a.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},a.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new a.BufferAttribute(e,t)},a.BufferGeometry=function(){Object.defineProperty(this,"id",{value:a.GeometryIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.offsets=this.drawcalls=[],this.boundingSphere=this.boundingBox=null},a.BufferGeometry.prototype={constructor:a.BufferGeometry,addAttribute:function(e,t,n){!1==t instanceof a.BufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[e]={array:t,itemSize:n}):(this.attributes[e]=t,this.attributesKeys=Object.keys(this.attributes))},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,n){this.drawcalls.push({start:e,count:t,index:void 0!==n?n:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0),t=this.attributes.normal,void 0!==t&&((new a.Matrix3).getNormalMatrix(e).applyToVector3Array(t.array),t.needsUpdate=!0)},center:function(){},fromGeometry:function(e,t){t=t||{vertexColors:a.NoColors};var n=e.vertices,r=e.faces,i=e.faceVertexUvs,o=t.vertexColors,s=0<i[0].length,l=3==r[0].vertexNormals.length,c=new Float32Array(9*r.length);this.addAttribute("position",new a.BufferAttribute(c,3));var u=new Float32Array(9*r.length);if(this.addAttribute("normal",new a.BufferAttribute(u,3)),o!==a.NoColors){var p=new Float32Array(9*r.length);this.addAttribute("color",new a.BufferAttribute(p,3))}if(!0===s){var h=new Float32Array(6*r.length);this.addAttribute("uv",new a.BufferAttribute(h,2))}for(var d=0,f=0,m=0;d<r.length;d++,f+=6,m+=9){var g=r[d],y=n[g.a],v=n[g.b],b=n[g.c];c[m]=y.x,c[m+1]=y.y,c[m+2]=y.z,c[m+3]=v.x,c[m+4]=v.y,c[m+5]=v.z,c[m+6]=b.x,c[m+7]=b.y,c[m+8]=b.z,!0===l?(y=g.vertexNormals[0],v=g.vertexNormals[1],b=g.vertexNormals[2],u[m]=y.x,u[m+1]=y.y,u[m+2]=y.z,u[m+3]=v.x,u[m+4]=v.y,u[m+5]=v.z,u[m+6]=b.x,u[m+7]=b.y,u[m+8]=b.z):(y=g.normal,u[m]=y.x,u[m+1]=y.y,u[m+2]=y.z,u[m+3]=y.x,u[m+4]=y.y,u[m+5]=y.z,u[m+6]=y.x,u[m+7]=y.y,u[m+8]=y.z),o===a.FaceColors?(g=g.color,p[m]=g.r,p[m+1]=g.g,p[m+2]=g.b,p[m+3]=g.r,p[m+4]=g.g,p[m+5]=g.b,p[m+6]=g.r,p[m+7]=g.g,p[m+8]=g.b):o===a.VertexColors&&(y=g.vertexColors[0],v=g.vertexColors[1],g=g.vertexColors[2],p[m]=y.r,p[m+1]=y.g,p[m+2]=y.b,p[m+3]=v.r,p[m+4]=v.g,p[m+5]=v.b,p[m+6]=g.r,p[m+7]=g.g,p[m+8]=g.b),!0===s&&(g=i[0][d][0],y=i[0][d][1],v=i[0][d][2],h[f]=g.x,h[f+1]=g.y,h[f+2]=y.x,h[f+3]=y.y,h[f+4]=v.x,h[f+5]=v.y)}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var e=new a.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new a.Box3);var t=this.attributes.position.array;if(t){var n=this.boundingBox;n.makeEmpty();for(var r=0,i=t.length;r<i;r+=3)e.set(t[r],t[r+1],t[r+2]),n.expandByPoint(e)}void 0!==t&&0!==t.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var e=new a.Box3,t=new a.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new a.Sphere);var n=this.attributes.position.array;if(n){e.makeEmpty();for(var r=this.boundingSphere.center,i=0,o=n.length;i<o;i+=3)t.set(n[i],n[i+1],n[i+2]),e.expandByPoint(t);e.center(r);for(var s=0,i=0,o=n.length;i<o;i+=3)t.set(n[i],n[i+1],n[i+2]),s=Math.max(s,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new a.BufferAttribute(new Float32Array(t.length),3));else for(var n=e.normal.array,r=0,i=n.length;r<i;r++)n[r]=0;var o,s,l,n=e.normal.array,c=new a.Vector3,u=new a.Vector3,p=new a.Vector3,h=new a.Vector3,d=new a.Vector3;if(e.index)for(var f=e.index.array,m=0<this.offsets.length?this.offsets:[{start:0,count:f.length,index:0}],g=0,y=m.length;g<y;++g){i=m[g].start,o=m[g].count;for(var v=m[g].index,r=i,i=i+o;r<i;r+=3)o=3*(v+f[r]),s=3*(v+f[r+1]),l=3*(v+f[r+2]),c.fromArray(t,o),u.fromArray(t,s),p.fromArray(t,l),h.subVectors(p,u),d.subVectors(c,u),h.cross(d),n[o]+=h.x,n[o+1]+=h.y,n[o+2]+=h.z,n[s]+=h.x,n[s+1]+=h.y,n[s+2]+=h.z,n[l]+=h.x,n[l+1]+=h.y,n[l+2]+=h.z}else for(r=0,i=t.length;r<i;r+=9)c.fromArray(t,r),u.fromArray(t,r+3),p.fromArray(t,r+6),h.subVectors(p,u),d.subVectors(c,u),h.cross(d),n[r]=h.x,n[r+1]=h.y,n[r+2]=h.z,n[r+3]=h.x,n[r+4]=h.y,n[r+5]=h.z,n[r+6]=h.x,n[r+7]=h.y,n[r+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){function e(e,t,n){T.fromArray(r,3*e),P.fromArray(r,3*t),M.fromArray(r,3*n),E.fromArray(o,2*e),N.fromArray(o,2*t),O.fromArray(o,2*n),h=P.x-T.x,d=M.x-T.x,f=P.y-T.y,m=M.y-T.y,g=P.z-T.z,y=M.z-T.z,v=N.x-E.x,b=O.x-E.x,S=N.y-E.y,w=O.y-E.y,x=1/(v*w-b*S),I.set((w*h-S*d)*x,(w*f-S*m)*x,(w*g-S*y)*x),V.set((v*d-b*h)*x,(v*m-b*f)*x,(v*y-b*g)*x),c[e].add(I),c[t].add(I),c[n].add(I),u[e].add(V),u[t].add(V),u[n].add(V)}function t(e){U.fromArray(i,3*e),W.copy(U),B=c[e],j.copy(B),j.sub(U.multiplyScalar(U.dot(B))).normalize(),z.crossVectors(W,B),F=z.dot(u[e]),G=0>F?-1:1,l[4*e]=j.x,l[4*e+1]=j.y,l[4*e+2]=j.z,l[4*e+3]=G}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var n=this.attributes.index.array,r=this.attributes.position.array,i=this.attributes.normal.array,o=this.attributes.uv.array,s=r.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new a.BufferAttribute(new Float32Array(4*s),4));for(var l=this.attributes.tangent.array,c=[],u=[],p=0;p<s;p++)c[p]=new a.Vector3,u[p]=new a.Vector3;var h,d,f,m,g,y,v,b,S,w,x,C,_,k,A,D,T=new a.Vector3,P=new a.Vector3,M=new a.Vector3,E=new a.Vector2,N=new a.Vector2,O=new a.Vector2,I=new a.Vector3,V=new a.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,n.length,0);var L=this.drawcalls,p=0;for(_=L.length;p<_;++p){C=L[p].start,k=L[p].count;var R=L[p].index,s=C;for(C+=k;s<C;s+=3)k=R+n[s],A=R+n[s+1],D=R+n[s+2],e(k,A,D)}var G,B,F,j=new a.Vector3,z=new a.Vector3,U=new a.Vector3,W=new a.Vector3,p=0;for(_=L.length;p<_;++p)for(C=L[p].start,k=L[p].count,R=L[p].index,s=C,C+=k;s<C;s+=3)k=R+n[s],A=R+n[s+1],D=R+n[s+2],t(k),t(A),t(D)}},computeOffsets:function(e){var t=e;void 0===e&&(t=65535),Date.now(),e=this.attributes.index.array;for(var n=this.attributes.position.array,r=e.length/3,i=new Uint16Array(e.length),o=0,s=0,a=[{start:0,count:0,index:0}],l=a[0],c=0,u=0,p=new Int32Array(6),h=new Int32Array(n.length),d=new Int32Array(n.length),f=0;f<n.length;f++)h[f]=-1,d[f]=-1;for(n=0;n<r;n++){for(var m=u=0;3>m;m++)f=e[3*n+m],-1==h[f]?(p[2*m]=f,p[2*m+1]=-1,u++):h[f]<l.index?(p[2*m]=f,p[2*m+1]=-1,c++):(p[2*m]=f,p[2*m+1]=h[f]);if(s+u>l.index+t)for(l={start:o,count:0,index:s},a.push(l),u=0;6>u;u+=2)m=p[u+1],-1<m&&m<l.index&&(p[u+1]=-1);for(u=0;6>u;u+=2)f=p[u],m=p[u+1],-1===m&&(m=s++),h[f]=m,d[m]=f,i[o++]=m-l.index,l.count++}return this.reorderBuffers(i,d,s),this.offsets=a},merge:function(e,t){if(!1!=e instanceof a.BufferGeometry){void 0===t&&(t=0);var n,r=this.attributes;for(n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,o=e.attributes[n],s=o.array,l=0,o=o.itemSize*t;l<s.length;l++,o++)i[o]=s[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,n,r=this.attributes.normal.array,i=0,o=r.length;i<o;i+=3)e=r[i],t=r[i+1],n=r[i+2],e=1/Math.sqrt(e*e+t*t+n*n),r[i]*=e,r[i+1]*=e,r[i+2]*=e},reorderBuffers:function(e,t,n){var r,i={};for(r in this.attributes)"index"!=r&&(i[r]=new this.attributes[r].array.constructor(this.attributes[r].itemSize*n));for(var o=0;o<n;o++){var s=t[o];for(r in this.attributes)if("index"!=r)for(var a=this.attributes[r].array,l=this.attributes[r].itemSize,c=i[r],u=0;u<l;u++)c[o*l+u]=a[s*l+u]}this.attributes.index.array=e;for(r in this.attributes)"index"!=r&&(this.attributes[r].array=i[r],this.attributes[r].numItems=this.attributes[r].itemSize*n)},toJSON:function(){var e,t={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},n=this.attributes,r=this.offsets,i=this.boundingSphere;for(e in n){for(var o=n[e],s=[],a=o.array,l=0,c=a.length;l<c;l++)s[l]=a[l];t.data.attributes[e]={itemSize:o.itemSize,type:o.array.constructor.name,array:s}}return 0<r.length&&(t.data.offsets=JSON.parse(JSON.stringify(r))),null!==i&&(t.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),t},clone:function(){var e,t=new a.BufferGeometry;for(e in this.attributes)t.addAttribute(e,this.attributes[e].clone());e=0;for(var n=this.offsets.length;e<n;e++){var r=this.offsets[e];t.offsets.push({start:r.start,index:r.index,count:r.count})}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.BufferGeometry.prototype),a.Geometry=function(){Object.defineProperty(this,"id",{value:a.GeometryIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.hasTangents=!1,this.dynamic=!0,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1},a.Geometry.prototype={constructor:a.Geometry,applyMatrix:function(e){for(var t=(new a.Matrix3).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){e=this.faces[n],e.normal.applyMatrix3(t).normalize();for(var i=0,o=e.vertexNormals.length;i<o;i++)e.vertexNormals[i].applyMatrix3(t).normalize()}this.boundingBox instanceof a.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof a.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(e){for(var t=this,n=e.attributes,r=n.position.array,i=void 0!==n.index?n.index.array:void 0,o=void 0!==n.normal?n.normal.array:void 0,s=void 0!==n.color?n.color.array:void 0,l=void 0!==n.uv?n.uv.array:void 0,c=[],u=[],p=n=0;n<r.length;n+=3,p+=2)t.vertices.push(new a.Vector3(r[n],r[n+1],r[n+2])),void 0!==o&&c.push(new a.Vector3(o[n],o[n+1],o[n+2])),void 0!==s&&t.colors.push(new a.Color(s[n],s[n+1],s[n+2])),void 0!==l&&u.push(new a.Vector2(l[p],l[p+1]));if(p=function(e,n,r){var i=void 0!==o?[c[e].clone(),c[n].clone(),c[r].clone()]:[],p=void 0!==s?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[];t.faces.push(new a.Face3(e,n,r,i,p)),void 0!==l&&t.faceVertexUvs[0].push([u[e].clone(),u[n].clone(),u[r].clone()])},void 0!==i)for(n=0;n<i.length;n+=3)p(i[n],i[n+1],i[n+2]);else for(n=0;n<r.length/3;n+=3)p(n,n+1,n+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=new a.Vector3;return e.addVectors(this.boundingBox.min,this.boundingBox.max),e.multiplyScalar(-.5),this.applyMatrix((new a.Matrix4).makeTranslation(e.x,e.y,e.z)),this.computeBoundingBox(),e},computeFaceNormals:function(){for(var e=new a.Vector3,t=new a.Vector3,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],s=this.vertices[i.b];e.subVectors(this.vertices[i.c],s),t.subVectors(o,s),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r;for(r=Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)r[t]=new a.Vector3;if(e){var i,o,s,l=new a.Vector3,c=new a.Vector3;for(new a.Vector3,new a.Vector3,new a.Vector3,e=0,t=this.faces.length;e<t;e++)n=this.faces[e],i=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c],l.subVectors(s,o),c.subVectors(i,o),l.cross(c),r[n.a].add(l),r[n.b].add(l),r[n.c].add(l)}else for(e=0,t=this.faces.length;e<t;e++)n=this.faces[e],r[n.a].add(n.normal),r[n.b].add(n.normal),r[n.c].add(n.normal);for(t=0,n=this.vertices.length;t<n;t++)r[t].normalize();for(e=0,t=this.faces.length;e<t;e++)n=this.faces[e],n.vertexNormals[0]=r[n.a].clone(),n.vertexNormals[1]=r[n.b].clone(),n.vertexNormals[2]=r[n.c].clone()},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new a.Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[],i=this.morphNormals[e].faceNormals;var s,l,c=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)s=new a.Vector3,l={a:new a.Vector3,b:new a.Vector3,c:new a.Vector3},i.push(s),c.push(l)}for(c=this.morphNormals[e],o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],s=c.faceNormals[n],l=c.vertexNormals[n],s.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){var e,t,n,r,i,o,s,l,c,u,p,h,d,f,m,g,y,v=[],b=[];n=new a.Vector3;var S=new a.Vector3,w=new a.Vector3,x=new a.Vector3,C=new a.Vector3;for(e=0,t=this.vertices.length;e<t;e++)v[e]=new a.Vector3,b[e]=new a.Vector3;for(e=0,t=this.faces.length;e<t;e++)i=this.faces[e],o=this.faceVertexUvs[0][e],r=i.a,y=i.b,i=i.c,s=this.vertices[r],l=this.vertices[y],c=this.vertices[i],u=o[0],p=o[1],h=o[2],o=l.x-s.x,d=c.x-s.x,f=l.y-s.y,m=c.y-s.y,l=l.z-s.z,s=c.z-s.z,c=p.x-u.x,g=h.x-u.x,p=p.y-u.y,u=h.y-u.y,h=1/(c*u-g*p),n.set((u*o-p*d)*h,(u*f-p*m)*h,(u*l-p*s)*h),S.set((c*d-g*o)*h,(c*m-g*f)*h,(c*s-g*l)*h),v[r].add(n),v[y].add(n),v[i].add(n),b[r].add(S),b[y].add(S),b[i].add(S);for(S=["a","b","c","d"],e=0,t=this.faces.length;e<t;e++)for(i=this.faces[e],n=0;n<Math.min(i.vertexNormals.length,3);n++)C.copy(i.vertexNormals[n]),r=i[S[n]],y=v[r],w.copy(y),w.sub(C.multiplyScalar(C.dot(y))).normalize(),x.crossVectors(i.vertexNormals[n],y),r=x.dot(b[r]),r=0>r?-1:1,i.vertexTangents[n]=new a.Vector4(w.x,w.y,w.z,r);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)0<n&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new a.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new a.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!1==e instanceof a.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);else{var r,i=this.vertices.length,o=this.vertices,s=e.vertices,l=this.faces,c=e.faces,u=this.faceVertexUvs[0];e=e.faceVertexUvs[0],void 0===n&&(n=0),void 0!==t&&(r=(new a.Matrix3).getNormalMatrix(t));for(var p=0,h=s.length;p<h;p++){var d=s[p].clone();void 0!==t&&d.applyMatrix4(t),o.push(d)}for(p=0,h=c.length;p<h;p++){var f,s=c[p],m=s.vertexNormals,g=s.vertexColors,d=new a.Face3(s.a+i,s.b+i,s.c+i);for(d.normal.copy(s.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize(),t=0,o=m.length;t<o;t++)f=m[t].clone(),void 0!==r&&f.applyMatrix3(r).normalize(),d.vertexNormals.push(f);for(d.color.copy(s.color),t=0,o=g.length;t<o;t++)f=g[t],d.vertexColors.push(f.clone());d.materialIndex=s.materialIndex+n,l.push(d)}for(p=0,h=e.length;p<h;p++)if(n=e[p],r=[],void 0!==n){for(t=0,o=n.length;t<o;t++)r.push(n[t].clone());u.push(r)}}},mergeMesh:function(e){!1==e instanceof a.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,n,r={},i=[],o=[],s=Math.pow(10,4);for(t=0,n=this.vertices.length;t<n;t++)e=this.vertices[t],e=Math.round(e.x*s)+"_"+Math.round(e.y*s)+"_"+Math.round(e.z*s),void 0===r[e]?(r[e]=t,i.push(this.vertices[t]),o[t]=i.length-1):o[t]=o[r[e]];for(r=[],t=0,n=this.faces.length;t<n;t++)for(s=this.faces[t],s.a=o[s.a],s.b=o[s.b],s.c=o[s.c],s=[s.a,s.b,s.c],e=0;3>e;e++)if(s[e]==s[(e+1)%3]){r.push(t);break}for(t=r.length-1;0<=t;t--)for(s=r[t],this.faces.splice(s,1),o=0,n=this.faceVertexUvs.length;o<n;o++)this.faceVertexUvs[o].splice(s,1);return t=this.vertices.length-i.length,this.vertices=i,t},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=l.length/3,l.push(e.x,e.y,e.z),c[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=u.length,u.push(e.getHex()),p[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}var i={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o,s=this.parameters;for(o in s)void 0!==s[o]&&(i[o]=s[o]);return i}for(s=[],o=0;o<this.vertices.length;o++){var a=this.vertices[o];s.push(a.x,a.y,a.z)}var a=[],l=[],c={},u=[],p={},h=[],d={};for(o=0;o<this.faces.length;o++){var f=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],g=0<f.normal.length(),y=0<f.vertexNormals.length,v=1!==f.color.r||1!==f.color.g||1!==f.color.b,b=0<f.vertexColors.length,S=0,S=e(S,0,0),S=e(S,1,!1),S=e(S,2,!1),S=e(S,3,m),S=e(S,4,g),S=e(S,5,y),S=e(S,6,v),S=e(S,7,b);a.push(S),a.push(f.a,f.b,f.c),m&&(m=this.faceVertexUvs[0][o],a.push(r(m[0]),r(m[1]),r(m[2]))),g&&a.push(t(f.normal)),y&&(g=f.vertexNormals,a.push(t(g[0]),t(g[1]),t(g[2]))),v&&a.push(n(f.color)),b&&(f=f.vertexColors,a.push(n(f[0]),n(f[1]),n(f[2])))}return i.data={},i.data.vertices=s,i.data.normals=l,0<u.length&&(i.data.colors=u),0<h.length&&(i.data.uvs=[h]),i.data.faces=a,i},clone:function(){for(var e=new a.Geometry,t=this.vertices,n=0,r=t.length;n<r;n++)e.vertices.push(t[n].clone());for(t=this.faces,n=0,r=t.length;n<r;n++)e.faces.push(t[n].clone());for(n=0,r=this.faceVertexUvs.length;n<r;n++){t=this.faceVertexUvs[n],void 0===e.faceVertexUvs[n]&&(e.faceVertexUvs[n]=[]);for(var i=0,o=t.length;i<o;i++){for(var s=t[i],l=[],c=0,u=s.length;c<u;c++)l.push(s[c].clone());e.faceVertexUvs[n].push(l)}}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.Geometry.prototype),a.GeometryIdCount=0,a.Camera=function(){a.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new a.Matrix4,this.projectionMatrix=new a.Matrix4},a.Camera.prototype=Object.create(a.Object3D.prototype),a.Camera.prototype.constructor=a.Camera,a.Camera.prototype.getWorldDirection=function(){var e=new a.Quaternion;return function(t){return t=t||new a.Vector3,this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),a.Camera.prototype.lookAt=function(){var e=new a.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),a.Camera.prototype.clone=function(e){return void 0===e&&(e=new a.Camera),a.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},a.CubeCamera=function(e,t,n){a.Object3D.call(this),this.type="CubeCamera";var r=new a.PerspectiveCamera(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new a.Vector3(1,0,0)),this.add(r);var i=new a.PerspectiveCamera(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new a.Vector3(-1,0,0)),this.add(i);var o=new a.PerspectiveCamera(90,1,e,t);o.up.set(0,0,1),o.lookAt(new a.Vector3(0,1,0)),this.add(o);var s=new a.PerspectiveCamera(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new a.Vector3(0,-1,0)),this.add(s);var l=new a.PerspectiveCamera(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new a.Vector3(0,0,1)),this.add(l);var c=new a.PerspectiveCamera(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new a.Vector3(0,0,-1)),this.add(c),this.renderTarget=new a.WebGLRenderTargetCube(n,n,{format:a.RGBFormat,magFilter:a.LinearFilter,minFilter:a.LinearFilter}),this.updateCubeMap=function(e,t){var n=this.renderTarget,a=n.generateMipmaps;n.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,s,n),n.activeCubeFace=4,e.render(t,l,n),n.generateMipmaps=a,n.activeCubeFace=5,e.render(t,c,n)}},a.CubeCamera.prototype=Object.create(a.Object3D.prototype),a.CubeCamera.prototype.constructor=a.CubeCamera,a.OrthographicCamera=function(e,t,n,r,i,o){a.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},a.OrthographicCamera.prototype=Object.create(a.Camera.prototype),a.OrthographicCamera.prototype.constructor=a.OrthographicCamera,a.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(n-e,n+e,r+t,r-t,this.near,this.far)},a.OrthographicCamera.prototype.clone=function(){var e=new a.OrthographicCamera;return a.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},a.PerspectiveCamera=function(e,t,n,r){a.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},a.PerspectiveCamera.prototype=Object.create(a.Camera.prototype),a.PerspectiveCamera.prototype.constructor=a.PerspectiveCamera,a.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*a.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},a.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,r,i,o){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=r,this.width=i,this.height=o,this.updateProjectionMatrix()},a.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=a.Math.radToDeg(2*Math.atan(Math.tan(.5*a.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,e=Math.tan(a.Math.degToRad(.5*e))*this.near,n=-e,r=t*n,t=Math.abs(t*e-r),n=Math.abs(e-n);this.projectionMatrix.makeFrustum(r+this.x*t/this.fullWidth,r+(this.x+this.width)*t/this.fullWidth,e-(this.y+this.height)*n/this.fullHeight,e-this.y*n/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},a.PerspectiveCamera.prototype.clone=function(){var e=new a.PerspectiveCamera;return a.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},a.Light=function(e){a.Object3D.call(this),this.type="Light",this.color=new a.Color(e)},a.Light.prototype=Object.create(a.Object3D.prototype),a.Light.prototype.constructor=a.Light,a.Light.prototype.clone=function(e){return void 0===e&&(e=new a.Light),a.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},a.AmbientLight=function(e){a.Light.call(this,e),this.type="AmbientLight"},a.AmbientLight.prototype=Object.create(a.Light.prototype),a.AmbientLight.prototype.constructor=a.AmbientLight,a.AmbientLight.prototype.clone=function(){var e=new a.AmbientLight;return a.Light.prototype.clone.call(this,e),e},a.AreaLight=function(e,t){a.Light.call(this,e),this.type="AreaLight",this.normal=new a.Vector3(0,-1,0),this.right=new a.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.height=this.width=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},a.AreaLight.prototype=Object.create(a.Light.prototype),a.AreaLight.prototype.constructor=a.AreaLight,a.DirectionalLight=function(e,t){a.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new a.Object3D,this.intensity=void 0!==t?t:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new a.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},a.DirectionalLight.prototype=Object.create(a.Light.prototype),a.DirectionalLight.prototype.constructor=a.DirectionalLight,a.DirectionalLight.prototype.clone=function(){var e=new a.DirectionalLight;return a.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},a.HemisphereLight=function(e,t,n){a.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new a.Color(t),this.intensity=void 0!==n?n:1},a.HemisphereLight.prototype=Object.create(a.Light.prototype),a.HemisphereLight.prototype.constructor=a.HemisphereLight,a.HemisphereLight.prototype.clone=function(){var e=new a.HemisphereLight;
return a.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},a.PointLight=function(e,t,n){a.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0};a.PointLight.prototype=Object.create(a.Light.prototype);a.PointLight.prototype.constructor=a.PointLight,a.PointLight.prototype.clone=function(){var e=new a.PointLight;return a.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},a.SpotLight=function(e,t,n,r,i){a.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new a.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==i?i:10,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},a.SpotLight.prototype=Object.create(a.Light.prototype),a.SpotLight.prototype.constructor=a.SpotLight,a.SpotLight.prototype.clone=function(){var e=new a.SpotLight;return a.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},a.Cache=function(){this.files={}},a.Cache.prototype={constructor:a.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},a.Loader=function(e){this.statusDomElement=(this.showStatus=e)?a.Loader.prototype.addStatusElement():null,this.imageLoader=new a.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},a.Loader.prototype={constructor:a.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ",t=e.total?t+((100*e.loaded/e.total).toFixed(0)+"%"):t+((e.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=t},extractUrlBase:function(e){return e=e.split("/"),1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(e,t){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t);return n},needsTangents:function(e){for(var t=0,n=e.length;t<n;t++)if(e[t]instanceof a.ShaderMaterial)return!0;return!1},createMaterial:function(e,t){function n(e){return e=Math.log(e)/Math.LN2,Math.pow(2,Math.round(e))}function r(e,r,i,s,l,c,u){var p,h=t+i,d=a.Loader.Handlers.get(h);null!==d?p=d.load(h):(p=new a.Texture,d=o.imageLoader,d.crossOrigin=o.crossOrigin,d.load(h,function(e){if(!1===a.Math.isPowerOfTwo(e.width)||!1===a.Math.isPowerOfTwo(e.height)){var t=n(e.width),r=n(e.height),i=document.createElement("canvas");i.width=t,i.height=r,i.getContext("2d").drawImage(e,0,0,t,r),p.image=i}else p.image=e;p.needsUpdate=!0})),p.sourceFile=i,s&&(p.repeat.set(s[0],s[1]),1!==s[0]&&(p.wrapS=a.RepeatWrapping),1!==s[1]&&(p.wrapT=a.RepeatWrapping)),l&&p.offset.set(l[0],l[1]),c&&(i={repeat:a.RepeatWrapping,mirror:a.MirroredRepeatWrapping},void 0!==i[c[0]]&&(p.wrapS=i[c[0]]),void 0!==i[c[1]]&&(p.wrapT=i[c[1]])),u&&(p.anisotropy=u),e[r]=p}function i(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var o=this,s="MeshLambertMaterial",l={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var c=e.shading.toLowerCase();"phong"===c?s="MeshPhongMaterial":"basic"===c&&(s="MeshBasicMaterial")}return void 0!==e.blending&&void 0!==a[e.blending]&&(l.blending=a[e.blending]),(void 0!==e.transparent||1>e.opacity)&&(l.transparent=e.transparent),void 0!==e.depthTest&&(l.depthTest=e.depthTest),void 0!==e.depthWrite&&(l.depthWrite=e.depthWrite),void 0!==e.visible&&(l.visible=e.visible),void 0!==e.flipSided&&(l.side=a.BackSide),void 0!==e.doubleSided&&(l.side=a.DoubleSide),void 0!==e.wireframe&&(l.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?l.vertexColors=a.FaceColors:e.vertexColors&&(l.vertexColors=a.VertexColors)),e.colorDiffuse?l.color=i(e.colorDiffuse):e.DbgColor&&(l.color=e.DbgColor),e.colorSpecular&&(l.specular=i(e.colorSpecular)),e.colorAmbient&&(l.ambient=i(e.colorAmbient)),e.colorEmissive&&(l.emissive=i(e.colorEmissive)),e.transparency&&(l.opacity=e.transparency),e.specularCoef&&(l.shininess=e.specularCoef),e.mapDiffuse&&t&&r(l,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&r(l,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&r(l,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&r(l,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&r(l,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&r(l,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(l.bumpScale=e.mapBumpScale),e.mapNormalFactor&&(l.normalScale=new a.Vector2(e.mapNormalFactor,e.mapNormalFactor)),s=new a[s](l),void 0!==e.DbgName&&(s.name=e.DbgName),s}},a.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,n=this.handlers.length;t<n;t+=2){var r=this.handlers[t+1];if(this.handlers[t].test(e))return r}return null}},a.XHRLoader=function(e){this.cache=new a.Cache,this.manager=void 0!==e?e:a.DefaultLoadingManager},a.XHRLoader.prototype={constructor:a.XHRLoader,load:function(e,t,n,r){var i=this,o=i.cache.get(e);void 0!==o?t&&t(o):(o=new XMLHttpRequest,o.open("GET",e,!0),o.addEventListener("load",function(n){i.cache.add(e,this.response),t&&t(this.response),i.manager.itemEnd(e)},!1),void 0!==n&&o.addEventListener("progress",function(e){n(e)},!1),void 0!==r&&o.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(o.responseType=this.responseType),o.send(null),i.manager.itemStart(e))},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},a.ImageLoader=function(e){this.cache=new a.Cache,this.manager=void 0!==e?e:a.DefaultLoadingManager},a.ImageLoader.prototype={constructor:a.ImageLoader,load:function(e,t,n,r){var i=this,o=i.cache.get(e);return void 0===o?(o=document.createElement("img"),void 0!==t&&o.addEventListener("load",function(n){i.cache.add(e,this),t(this),i.manager.itemEnd(e)},!1),void 0!==n&&o.addEventListener("progress",function(e){n(e)},!1),void 0!==r&&o.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.src=e,i.manager.itemStart(e),o):void t(o)},setCrossOrigin:function(e){this.crossOrigin=e}},a.JSONLoader=function(e){a.Loader.call(this,e),this.withCredentials=!1},a.JSONLoader.prototype=Object.create(a.Loader.prototype),a.JSONLoader.prototype.constructor=a.JSONLoader,a.JSONLoader.prototype.load=function(e,t,n){n=n&&"string"==typeof n?n:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,n)},a.JSONLoader.prototype.loadAjaxJSON=function(e,t,n,r,i){var o=new XMLHttpRequest,s=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var a=JSON.parse(o.responseText);if(void 0!==a.metadata&&"scene"===a.metadata.type)return void console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.');a=e.parse(a,r),n(a.geometry,a.materials)}else console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.');e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+o.status+")");else o.readyState===o.LOADING?i&&(0===s&&(s=o.getResponseHeader("Content-Length")),i({total:s,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==i&&(s=o.getResponseHeader("Content-Length"))},o.open("GET",t,!0),o.withCredentials=this.withCredentials,o.send(null)},a.JSONLoader.prototype.parse=function(e,t){var n=new a.Geometry,r=void 0!==e.scale?1/e.scale:1;return function(t){var r,i,o,s,l,c,u,p,h,d,f,m,g,y=e.faces;c=e.vertices;var v=e.normals,b=e.colors,S=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&S++;for(r=0;r<S;r++)n.faceVertexUvs[r]=[]}for(s=0,l=c.length;s<l;)r=new a.Vector3,r.x=c[s++]*t,r.y=c[s++]*t,r.z=c[s++]*t,n.vertices.push(r);for(s=0,l=y.length;s<l;)if(t=y[s++],h=1&t,o=2&t,r=8&t,u=16&t,d=32&t,c=64&t,t&=128,h){if(h=new a.Face3,h.a=y[s],h.b=y[s+1],h.c=y[s+3],f=new a.Face3,f.a=y[s+1],f.b=y[s+2],f.c=y[s+3],s+=4,o&&(o=y[s++],h.materialIndex=o,f.materialIndex=o),o=n.faces.length,r)for(r=0;r<S;r++)for(m=e.uvs[r],n.faceVertexUvs[r][o]=[],n.faceVertexUvs[r][o+1]=[],i=0;4>i;i++)p=y[s++],g=m[2*p],p=m[2*p+1],g=new a.Vector2(g,p),2!==i&&n.faceVertexUvs[r][o].push(g),0!==i&&n.faceVertexUvs[r][o+1].push(g);if(u&&(u=3*y[s++],h.normal.set(v[u++],v[u++],v[u]),f.normal.copy(h.normal)),d)for(r=0;4>r;r++)u=3*y[s++],d=new a.Vector3(v[u++],v[u++],v[u]),2!==r&&h.vertexNormals.push(d),0!==r&&f.vertexNormals.push(d);if(c&&(c=y[s++],c=b[c],h.color.setHex(c),f.color.setHex(c)),t)for(r=0;4>r;r++)c=y[s++],c=b[c],2!==r&&h.vertexColors.push(new a.Color(c)),0!==r&&f.vertexColors.push(new a.Color(c));n.faces.push(h),n.faces.push(f)}else{if(h=new a.Face3,h.a=y[s++],h.b=y[s++],h.c=y[s++],o&&(o=y[s++],h.materialIndex=o),o=n.faces.length,r)for(r=0;r<S;r++)for(m=e.uvs[r],n.faceVertexUvs[r][o]=[],i=0;3>i;i++)p=y[s++],g=m[2*p],p=m[2*p+1],g=new a.Vector2(g,p),n.faceVertexUvs[r][o].push(g);if(u&&(u=3*y[s++],h.normal.set(v[u++],v[u++],v[u])),d)for(r=0;3>r;r++)u=3*y[s++],d=new a.Vector3(v[u++],v[u++],v[u]),h.vertexNormals.push(d);if(c&&(c=y[s++],h.color.setHex(b[c])),t)for(r=0;3>r;r++)c=y[s++],h.vertexColors.push(new a.Color(b[c]));n.faces.push(h)}}(r),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=t)n.skinWeights.push(new a.Vector4(e.skinWeights[r],1<t?e.skinWeights[r+1]:0,2<t?e.skinWeights[r+2]:0,3<t?e.skinWeights[r+3]:0));if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=t)n.skinIndices.push(new a.Vector4(e.skinIndices[r],1<t?e.skinIndices[r+1]:0,2<t?e.skinIndices[r+2]:0,3<t?e.skinIndices[r+3]:0));n.bones=e.bones,n.bones&&0<n.bones.length&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match."),n.animation=e.animation,n.animations=e.animations}(),function(t){if(void 0!==e.morphTargets){var r,i,o,s,l,c;for(r=0,i=e.morphTargets.length;r<i;r++)for(n.morphTargets[r]={},n.morphTargets[r].name=e.morphTargets[r].name,n.morphTargets[r].vertices=[],l=n.morphTargets[r].vertices,c=e.morphTargets[r].vertices,o=0,s=c.length;o<s;o+=3){var u=new a.Vector3;u.x=c[o]*t,u.y=c[o+1]*t,u.z=c[o+2]*t,l.push(u)}}if(void 0!==e.morphColors)for(r=0,i=e.morphColors.length;r<i;r++)for(n.morphColors[r]={},n.morphColors[r].name=e.morphColors[r].name,n.morphColors[r].colors=[],s=n.morphColors[r].colors,l=e.morphColors[r].colors,t=0,o=l.length;t<o;t+=3)c=new a.Color(16755200),c.setRGB(l[t],l[t+1],l[t+2]),s.push(c)}(r),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:(r=this.initMaterials(e.materials,t),this.needsTangents(r)&&n.computeTangents(),{geometry:n,materials:r})},a.LoadingManager=function(e,t,n){var r=this,i=0,o=0;this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++},this.itemEnd=function(e){i++,void 0!==r.onProgress&&r.onProgress(e,i,o),i===o&&void 0!==r.onLoad&&r.onLoad()}},a.DefaultLoadingManager=new a.LoadingManager,a.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:a.DefaultLoadingManager},a.BufferGeometryLoader.prototype={constructor:a.BufferGeometryLoader,load:function(e,t,n,r){var i=this,o=new a.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t,n=new a.BufferGeometry,r=e.attributes;for(t in r){var i=r[t],o=new self[i.type](i.array);n.addAttribute(t,new a.BufferAttribute(o,i.itemSize))}return r=e.offsets,void 0!==r&&(n.offsets=JSON.parse(JSON.stringify(r))),e=e.boundingSphere,void 0!==e&&(r=new a.Vector3,void 0!==e.center&&r.fromArray(e.center),n.boundingSphere=new a.Sphere(r,e.radius)),n}},a.MaterialLoader=function(e){this.manager=void 0!==e?e:a.DefaultLoadingManager},a.MaterialLoader.prototype={constructor:a.MaterialLoader,load:function(e,t,n,r){var i=this,o=new a.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new a[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var n=0,r=e.materials.length;n<r;n++)t.materials.push(this.parse(e.materials[n]));return t}},a.ObjectLoader=function(e){this.manager=void 0!==e?e:a.DefaultLoadingManager},a.ObjectLoader.prototype={constructor:a.ObjectLoader,load:function(e,t,n,r){var i=this,o=new a.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),n=this.parseMaterials(e.materials);return this.parseObject(e.object,t,n)},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new a.JSONLoader,r=new a.BufferGeometryLoader,i=0,o=e.length;i<o;i++){var s,l=e[i];switch(l.type){case"PlaneGeometry":s=new a.PlaneGeometry(l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"CubeGeometry":s=new a.BoxGeometry(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":s=new a.CircleGeometry(l.radius,l.segments);break;case"CylinderGeometry":s=new a.CylinderGeometry(l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded);break;case"SphereGeometry":s=new a.SphereGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"IcosahedronGeometry":s=new a.IcosahedronGeometry(l.radius,l.detail);break;case"TorusGeometry":s=new a.TorusGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":s=new a.TorusKnotGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.p,l.q,l.heightScale);break;case"BufferGeometry":s=r.parse(l.data);break;case"Geometry":s=n.parse(l.data).geometry}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),t[l.uuid]=s}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var n=new a.MaterialLoader,r=0,i=e.length;r<i;r++){var o=e[r],s=n.parse(o);s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),t[o.uuid]=s}return t},parseObject:function(){var e=new a.Matrix4;return function(t,n,r){var i;switch(t.type){case"Scene":i=new a.Scene;break;case"PerspectiveCamera":i=new a.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":i=new a.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new a.AmbientLight(t.color);break;case"DirectionalLight":i=new a.DirectionalLight(t.color,t.intensity);break;case"PointLight":i=new a.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":i=new a.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":i=new a.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":i=n[t.geometry];var o=r[t.material];void 0===i&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===o&&console.warn("THREE.ObjectLoader: Undefined material",t.material),i=new a.Mesh(i,o);break;case"Line":i=n[t.geometry],o=r[t.material],void 0===i&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===o&&console.warn("THREE.ObjectLoader: Undefined material",t.material),i=new a.Line(i,o);break;case"Sprite":o=r[t.material],void 0===o&&console.warn("THREE.ObjectLoader: Undefined material",t.material),i=new a.Sprite(o);break;case"Group":i=new a.Group;break;default:i=new a.Object3D}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.children)for(var s in t.children)i.add(this.parseObject(t.children[s],n,r));return i}}()},a.TextureLoader=function(e){this.manager=void 0!==e?e:a.DefaultLoadingManager},a.TextureLoader.prototype={constructor:a.TextureLoader,load:function(e,t,n,r){var i=new a.ImageLoader(this.manager);i.setCrossOrigin(this.crossOrigin),i.load(e,function(e){e=new a.Texture(e),e.needsUpdate=!0,void 0!==t&&t(e)},n,r)},setCrossOrigin:function(e){this.crossOrigin=e}},a.DataTextureLoader=a.BinaryTextureLoader=function(){this._parser=null},a.BinaryTextureLoader.prototype={constructor:a.BinaryTextureLoader,load:function(e,t,n,r){var i=this,o=new a.DataTexture,s=new a.XHRLoader;return s.setResponseType("arraybuffer"),s.load(e,function(e){(e=i._parser(e))&&(void 0!==e.image?o.image=e.image:void 0!==e.data&&(o.image.width=e.width,o.image.height=e.height,o.image.data=e.data),o.wrapS=void 0!==e.wrapS?e.wrapS:a.ClampToEdgeWrapping,o.wrapT=void 0!==e.wrapT?e.wrapT:a.ClampToEdgeWrapping,o.magFilter=void 0!==e.magFilter?e.magFilter:a.LinearFilter,o.minFilter=void 0!==e.minFilter?e.minFilter:a.LinearMipMapLinearFilter,o.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(o.format=e.format),void 0!==e.type&&(o.type=e.type),void 0!==e.mipmaps&&(o.mipmaps=e.mipmaps),1===e.mipmapCount&&(o.minFilter=a.LinearFilter),o.needsUpdate=!0,t&&t(o,e))},n,r),o}},a.CompressedTextureLoader=function(){this._parser=null},a.CompressedTextureLoader.prototype={constructor:a.CompressedTextureLoader,load:function(e,t,n){var r=this,i=[],o=new a.CompressedTexture;o.image=i;var s=new a.XHRLoader;if(s.setResponseType("arraybuffer"),e instanceof Array){var l=0;n=function(n){s.load(e[n],function(e){e=r._parser(e,!0),i[n]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},l+=1,6===l&&(1==e.mipmapCount&&(o.minFilter=a.LinearFilter),o.format=e.format,o.needsUpdate=!0,t&&t(o))})};for(var c=0,u=e.length;c<u;++c)n(c)}else s.load(e,function(e){if(e=r._parser(e,!0),e.isCubemap)for(var n=e.mipmaps.length/e.mipmapCount,s=0;s<n;s++){i[s]={mipmaps:[]};for(var l=0;l<e.mipmapCount;l++)i[s].mipmaps.push(e.mipmaps[s*e.mipmapCount+l]),i[s].format=e.format,i[s].width=e.width,i[s].height=e.height}else o.image.width=e.width,o.image.height=e.height,o.mipmaps=e.mipmaps;1===e.mipmapCount&&(o.minFilter=a.LinearFilter),o.format=e.format,o.needsUpdate=!0,t&&t(o)});return o}},a.Material=function(){Object.defineProperty(this,"id",{value:a.MaterialIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="Material",this.side=a.FrontSide,this.opacity=1,this.transparent=!1,this.blending=a.NormalBlending,this.blendSrc=a.SrcAlphaFactor,this.blendDst=a.OneMinusSrcAlphaFactor,this.blendEquation=a.AddEquation,this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.needsUpdate=this.visible=!0},a.Material.prototype={constructor:a.Material,setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if(t in this){var r=this[t];r instanceof a.Color?r.set(n):r instanceof a.Vector3&&n instanceof a.Vector3?r.copy(n):this[t]="overdraw"==t?Number(n):n}}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(e.name=this.name),this instanceof a.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==a.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==a.NormalBlending&&(e.blending=this.blending),this.side!==a.FrontSide&&(e.side=this.side)):this instanceof a.MeshLambertMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==a.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==a.NormalBlending&&(e.blending=this.blending),this.side!==a.FrontSide&&(e.side=this.side)):this instanceof a.MeshPhongMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==a.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==a.NormalBlending&&(e.blending=this.blending),this.side!==a.FrontSide&&(e.side=this.side)):this instanceof a.MeshNormalMaterial?(this.shading!==a.FlatShading&&(e.shading=this.shading),this.blending!==a.NormalBlending&&(e.blending=this.blending),this.side!==a.FrontSide&&(e.side=this.side)):this instanceof a.MeshDepthMaterial?(this.blending!==a.NormalBlending&&(e.blending=this.blending),this.side!==a.FrontSide&&(e.side=this.side)):this instanceof a.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof a.SpriteMaterial&&(e.color=this.color.getHex()),1>this.opacity&&(e.opacity=this.opacity),!1!==this.transparent&&(e.transparent=this.transparent),!1!==this.wireframe&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new a.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.Material.prototype),a.MaterialIdCount=0,a.LineBasicMaterial=function(e){a.Material.call(this),this.type="LineBasicMaterial",this.color=new a.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=a.NoColors,this.fog=!0,this.setValues(e)},a.LineBasicMaterial.prototype=Object.create(a.Material.prototype),a.LineBasicMaterial.prototype.constructor=a.LineBasicMaterial,a.LineBasicMaterial.prototype.clone=function(){var e=new a.LineBasicMaterial;return a.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},a.LineDashedMaterial=function(e){a.Material.call(this),this.type="LineDashedMaterial",this.color=new a.Color(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},a.LineDashedMaterial.prototype=Object.create(a.Material.prototype),a.LineDashedMaterial.prototype.constructor=a.LineDashedMaterial,a.LineDashedMaterial.prototype.clone=function(){var e=new a.LineDashedMaterial;return a.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},a.MeshBasicMaterial=function(e){a.Material.call(this),this.type="MeshBasicMaterial",this.color=new a.Color(16777215),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=a.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=a.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=a.NoColors,this.morphTargets=this.skinning=!1,this.setValues(e)},a.MeshBasicMaterial.prototype=Object.create(a.Material.prototype),a.MeshBasicMaterial.prototype.constructor=a.MeshBasicMaterial,a.MeshBasicMaterial.prototype.clone=function(){var e=new a.MeshBasicMaterial;return a.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},a.MeshLambertMaterial=function(e){a.Material.call(this),this.type="MeshLambertMaterial",this.color=new a.Color(16777215),this.ambient=new a.Color(16777215),this.emissive=new a.Color(0),this.wrapAround=!1,this.wrapRGB=new a.Vector3(1,1,1),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=a.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=a.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=a.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},a.MeshLambertMaterial.prototype=Object.create(a.Material.prototype),a.MeshLambertMaterial.prototype.constructor=a.MeshLambertMaterial,a.MeshLambertMaterial.prototype.clone=function(){var e=new a.MeshLambertMaterial;return a.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},a.MeshPhongMaterial=function(e){a.Material.call(this),this.type="MeshPhongMaterial",this.color=new a.Color(16777215),this.ambient=new a.Color(16777215),this.emissive=new a.Color(0),this.specular=new a.Color(1118481),this.shininess=30,this.wrapAround=this.metal=!1,this.wrapRGB=new a.Vector3(1,1,1),this.bumpMap=this.lightMap=this.map=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new a.Vector2(1,1),this.envMap=this.alphaMap=this.specularMap=null,this.combine=a.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=a.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=a.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},a.MeshPhongMaterial.prototype=Object.create(a.Material.prototype),a.MeshPhongMaterial.prototype.constructor=a.MeshPhongMaterial,a.MeshPhongMaterial.prototype.clone=function(){var e=new a.MeshPhongMaterial;return a.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},a.MeshDepthMaterial=function(e){a.Material.call(this),this.type="MeshDepthMaterial",this.wireframe=this.morphTargets=!1,this.wireframeLinewidth=1,this.setValues(e)},a.MeshDepthMaterial.prototype=Object.create(a.Material.prototype),a.MeshDepthMaterial.prototype.constructor=a.MeshDepthMaterial,a.MeshDepthMaterial.prototype.clone=function(){var e=new a.MeshDepthMaterial;return a.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},a.MeshNormalMaterial=function(e){a.Material.call(this,e),this.type="MeshNormalMaterial",this.shading=a.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},a.MeshNormalMaterial.prototype=Object.create(a.Material.prototype),a.MeshNormalMaterial.prototype.constructor=a.MeshNormalMaterial,a.MeshNormalMaterial.prototype.clone=function(){var e=new a.MeshNormalMaterial;return a.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},a.MeshFaceMaterial=function(e){this.uuid=a.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},a.MeshFaceMaterial.prototype={constructor:a.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,n=this.materials.length;t<n;t++)e.materials.push(this.materials[t].toJSON());return e},clone:function(){for(var e=new a.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e}},a.PointCloudMaterial=function(e){a.Material.call(this),this.type="PointCloudMaterial",this.color=new a.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=a.NoColors,this.fog=!0,this.setValues(e)},a.PointCloudMaterial.prototype=Object.create(a.Material.prototype),a.PointCloudMaterial.prototype.constructor=a.PointCloudMaterial,a.PointCloudMaterial.prototype.clone=function(){var e=new a.PointCloudMaterial;return a.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},a.ParticleBasicMaterial=function(e){
return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new a.PointCloudMaterial(e)},a.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new a.PointCloudMaterial(e)},a.ShaderMaterial=function(e){a.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=a.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.vertexColors=a.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},a.ShaderMaterial.prototype=Object.create(a.Material.prototype),a.ShaderMaterial.prototype.constructor=a.ShaderMaterial,a.ShaderMaterial.prototype.clone=function(){var e=new a.ShaderMaterial;return a.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=a.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},a.RawShaderMaterial=function(e){a.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},a.RawShaderMaterial.prototype=Object.create(a.ShaderMaterial.prototype),a.RawShaderMaterial.prototype.constructor=a.RawShaderMaterial,a.RawShaderMaterial.prototype.clone=function(){var e=new a.RawShaderMaterial;return a.ShaderMaterial.prototype.clone.call(this,e),e},a.SpriteMaterial=function(e){a.Material.call(this),this.type="SpriteMaterial",this.color=new a.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},a.SpriteMaterial.prototype=Object.create(a.Material.prototype),a.SpriteMaterial.prototype.constructor=a.SpriteMaterial,a.SpriteMaterial.prototype.clone=function(){var e=new a.SpriteMaterial;return a.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},a.Texture=function(e,t,n,r,i,o,s,l,c){Object.defineProperty(this,"id",{value:a.TextureIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.image=void 0!==e?e:a.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:a.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:a.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:a.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:a.LinearFilter,this.minFilter=void 0!==o?o:a.LinearMipMapLinearFilter,this.anisotropy=void 0!==c?c:1,this.format=void 0!==s?s:a.RGBAFormat,this.type=void 0!==l?l:a.UnsignedByteType,this.offset=new a.Vector2(0,0),this.repeat=new a.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},a.Texture.DEFAULT_IMAGE=void 0,a.Texture.DEFAULT_MAPPING=a.UVMapping,a.Texture.prototype={constructor:a.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new a.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.Texture.prototype),a.TextureIdCount=0,a.CubeTexture=function(e,t,n,r,i,o,s,l,c){t=void 0!==t?t:a.CubeReflectionMapping,a.Texture.call(this,e,t,n,r,i,o,s,l,c),this.images=e},a.CubeTexture.prototype=Object.create(a.Texture.prototype),a.CubeTexture.prototype.constructor=a.CubeTexture,a.CubeTexture.clone=function(e){return void 0===e&&(e=new a.CubeTexture),a.Texture.prototype.clone.call(this,e),e.images=this.images,e},a.CompressedTexture=function(e,t,n,r,i,o,s,l,c,u,p){a.Texture.call(this,null,o,s,l,c,u,r,i,p),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=this.flipY=!1},a.CompressedTexture.prototype=Object.create(a.Texture.prototype),a.CompressedTexture.prototype.constructor=a.CompressedTexture,a.CompressedTexture.prototype.clone=function(){var e=new a.CompressedTexture;return a.Texture.prototype.clone.call(this,e),e},a.DataTexture=function(e,t,n,r,i,o,s,l,c,u,p){a.Texture.call(this,null,o,s,l,c,u,r,i,p),this.image={data:e,width:t,height:n}},a.DataTexture.prototype=Object.create(a.Texture.prototype),a.DataTexture.prototype.constructor=a.DataTexture,a.DataTexture.prototype.clone=function(){var e=new a.DataTexture;return a.Texture.prototype.clone.call(this,e),e},a.VideoTexture=function(e,t,n,r,i,o,s,l,c){a.Texture.call(this,e,t,n,r,i,o,s,l,c),this.generateMipmaps=!1;var u=this,p=function(){requestAnimationFrame(p),e.readyState===e.HAVE_ENOUGH_DATA&&(u.needsUpdate=!0)};p()},a.VideoTexture.prototype=Object.create(a.Texture.prototype),a.VideoTexture.prototype.constructor=a.VideoTexture,a.Group=function(){a.Object3D.call(this),this.type="Group"},a.Group.prototype=Object.create(a.Object3D.prototype),a.Group.prototype.constructor=a.Group,a.PointCloud=function(e,t){a.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new a.Geometry,this.material=void 0!==t?t:new a.PointCloudMaterial({color:16777215*Math.random()})},a.PointCloud.prototype=Object.create(a.Object3D.prototype),a.PointCloud.prototype.constructor=a.PointCloud,a.PointCloud.prototype.raycast=function(){var e=new a.Matrix4,t=new a.Ray;return function(n,r){var i=this,o=i.geometry,s=n.params.PointCloud.threshold;if(e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e),null===o.boundingBox||!1!==t.isIntersectionBox(o.boundingBox)){var l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=new a.Vector3,s=function(e,o){var s=t.distanceToPoint(e);if(s<l){var a=t.closestPointToPoint(e);a.applyMatrix4(i.matrixWorld);var c=n.ray.origin.distanceTo(a);r.push({distance:c,distanceToRay:s,point:a.clone(),index:o,face:null,object:i})}};if(o instanceof a.BufferGeometry){var u=o.attributes,p=u.position.array;if(void 0!==u.index){var u=u.index.array,h=o.offsets;0===h.length&&(h=[{start:0,count:u.length,index:0}]);for(var d=0,f=h.length;d<f;++d)for(var m=h[d].start,g=h[d].index,o=m,m=m+h[d].count;o<m;o++){var y=g+u[o];c.fromArray(p,3*y),s(c,y)}}else for(u=p.length/3,o=0;o<u;o++)c.set(p[3*o],p[3*o+1],p[3*o+2]),s(c,o)}else for(c=this.geometry.vertices,o=0;o<c.length;o++)s(c[o],o)}}}(),a.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new a.PointCloud(this.geometry,this.material)),a.Object3D.prototype.clone.call(this,e),e},a.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new a.PointCloud(e,t)},a.Line=function(e,t,n){a.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new a.Geometry,this.material=void 0!==t?t:new a.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==n?n:a.LineStrip},a.LineStrip=0,a.LinePieces=1,a.Line.prototype=Object.create(a.Object3D.prototype),a.Line.prototype.constructor=a.Line,a.Line.prototype.raycast=function(){var e=new a.Matrix4,t=new a.Ray,n=new a.Sphere;return function(r,i){var o=r.linePrecision,o=o*o,s=this.geometry;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==r.ray.isIntersectionSphere(n)){e.getInverse(this.matrixWorld),t.copy(r.ray).applyMatrix4(e);var l=new a.Vector3,c=new a.Vector3,u=new a.Vector3,p=new a.Vector3,h=this.mode===a.LineStrip?1:2;if(s instanceof a.BufferGeometry){var d=s.attributes;if(void 0!==d.index){var f=d.index.array,d=d.position.array,m=s.offsets;0===m.length&&(m=[{start:0,count:f.length,index:0}]);for(var g=0;g<m.length;g++)for(var y=m[g].start,v=m[g].count,b=m[g].index,s=y;s<y+v-1;s+=h){var S=b+f[s+1];l.fromArray(d,3*(b+f[s])),c.fromArray(d,3*S),S=t.distanceSqToSegment(l,c,p,u),S>o||(S=t.origin.distanceTo(p),S<r.near||S>r.far||i.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}}else for(d=d.position.array,s=0;s<d.length/3-1;s+=h)l.fromArray(d,3*s),c.fromArray(d,3*s+3),S=t.distanceSqToSegment(l,c,p,u),S>o||(S=t.origin.distanceTo(p),S<r.near||S>r.far||i.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}else if(s instanceof a.Geometry)for(l=s.vertices,c=l.length,s=0;s<c-1;s+=h)S=t.distanceSqToSegment(l[s],l[s+1],p,u),S>o||(S=t.origin.distanceTo(p),S<r.near||S>r.far||i.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}}}(),a.Line.prototype.clone=function(e){return void 0===e&&(e=new a.Line(this.geometry,this.material,this.mode)),a.Object3D.prototype.clone.call(this,e),e},a.Mesh=function(e,t){a.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new a.Geometry,this.material=void 0!==t?t:new a.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},a.Mesh.prototype=Object.create(a.Object3D.prototype),a.Mesh.prototype.constructor=a.Mesh,a.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},a.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},a.Mesh.prototype.raycast=function(){var e=new a.Matrix4,t=new a.Ray,n=new a.Sphere,r=new a.Vector3,i=new a.Vector3,o=new a.Vector3;return function(s,l){var c=this.geometry;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==s.ray.isIntersectionSphere(n)&&(e.getInverse(this.matrixWorld),t.copy(s.ray).applyMatrix4(e),null===c.boundingBox||!1!==t.isIntersectionBox(c.boundingBox)))if(c instanceof a.BufferGeometry){var u=this.material;if(void 0!==u){var p,h,d=c.attributes,f=s.precision;if(void 0!==d.index){var m=d.index.array,g=d.position.array,y=c.offsets;0===y.length&&(y=[{start:0,count:m.length,index:0}]);for(var v=0,b=y.length;v<b;++v)for(var d=y[v].start,S=y[v].index,c=d,w=d+y[v].count;c<w;c+=3){d=S+m[c],p=S+m[c+1],h=S+m[c+2],r.fromArray(g,3*d),i.fromArray(g,3*p),o.fromArray(g,3*h);var x=u.side===a.BackSide?t.intersectTriangle(o,i,r,!0):t.intersectTriangle(r,i,o,u.side!==a.DoubleSide);if(null!==x){x.applyMatrix4(this.matrixWorld);var C=s.ray.origin.distanceTo(x);C<f||C<s.near||C>s.far||l.push({distance:C,point:x,face:new a.Face3(d,p,h,a.Triangle.normal(r,i,o)),faceIndex:null,object:this})}}}else for(g=d.position.array,m=c=0,w=g.length;c<w;c+=3,m+=9)d=c,p=c+1,h=c+2,r.fromArray(g,m),i.fromArray(g,m+3),o.fromArray(g,m+6),x=u.side===a.BackSide?t.intersectTriangle(o,i,r,!0):t.intersectTriangle(r,i,o,u.side!==a.DoubleSide),null!==x&&(x.applyMatrix4(this.matrixWorld),C=s.ray.origin.distanceTo(x),C<f||C<s.near||C>s.far||l.push({distance:C,point:x,face:new a.Face3(d,p,h,a.Triangle.normal(r,i,o)),faceIndex:null,object:this}))}}else if(c instanceof a.Geometry)for(m=this.material instanceof a.MeshFaceMaterial,g=!0===m?this.material.materials:null,f=s.precision,y=c.vertices,v=0,b=c.faces.length;v<b;v++)if(S=c.faces[v],u=!0===m?g[S.materialIndex]:this.material,void 0!==u){if(d=y[S.a],p=y[S.b],h=y[S.c],!0===u.morphTargets){x=c.morphTargets,C=this.morphTargetInfluences,r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var w=0,_=x.length;w<_;w++){var k=C[w];if(0!==k){var A=x[w].vertices;r.x+=(A[S.a].x-d.x)*k,r.y+=(A[S.a].y-d.y)*k,r.z+=(A[S.a].z-d.z)*k,i.x+=(A[S.b].x-p.x)*k,i.y+=(A[S.b].y-p.y)*k,i.z+=(A[S.b].z-p.z)*k,o.x+=(A[S.c].x-h.x)*k,o.y+=(A[S.c].y-h.y)*k,o.z+=(A[S.c].z-h.z)*k}}r.add(d),i.add(p),o.add(h),d=r,p=i,h=o}x=u.side===a.BackSide?t.intersectTriangle(h,p,d,!0):t.intersectTriangle(d,p,h,u.side!==a.DoubleSide),null!==x&&(x.applyMatrix4(this.matrixWorld),C=s.ray.origin.distanceTo(x),C<f||C<s.near||C>s.far||l.push({distance:C,point:x,face:S,faceIndex:v,object:this}))}}}(),a.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new a.Mesh(this.geometry,this.material)),a.Object3D.prototype.clone.call(this,e,t),e},a.Bone=function(e){a.Object3D.call(this),this.skin=e},a.Bone.prototype=Object.create(a.Object3D.prototype),a.Bone.prototype.constructor=a.Bone,a.Skeleton=function(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new a.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=e=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new a.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,a.RGBAFormat,a.FloatType),this.boneTexture.minFilter=a.NearestFilter,this.boneTexture.magFilter=a.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new a.Matrix4)},a.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new a.Matrix4;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},a.Skeleton.prototype.pose=function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},a.Skeleton.prototype.update=function(){var e=new a.Matrix4;return function(){for(var t=0,n=this.bones.length;t<n;t++)e.multiplyMatrices(this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),a.SkinnedMesh=function(e,t,n){if(a.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new a.Matrix4,this.bindMatrixInverse=new a.Matrix4,e=[],this.geometry&&void 0!==this.geometry.bones){for(var r,i,o,s,l=0,c=this.geometry.bones.length;l<c;++l)r=this.geometry.bones[l],i=r.pos,o=r.rotq,s=r.scl,t=new a.Bone(this),e.push(t),t.name=r.name,t.position.set(i[0],i[1],i[2]),t.quaternion.set(o[0],o[1],o[2],o[3]),void 0!==s?t.scale.set(s[0],s[1],s[2]):t.scale.set(1,1,1);for(l=0,c=this.geometry.bones.length;l<c;++l)r=this.geometry.bones[l],-1!==r.parent?e[r.parent].add(e[l]):this.add(e[l])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new a.Skeleton(e,void 0,n))},a.SkinnedMesh.prototype=Object.create(a.Mesh.prototype),a.SkinnedMesh.prototype.constructor=a.SkinnedMesh,a.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},a.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},a.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof a.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();1/0!==n?t.multiplyScalar(n):t.set(1)}},a.SkinnedMesh.prototype.updateMatrixWorld=function(e){a.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},a.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new a.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),a.Mesh.prototype.clone.call(this,e),e},a.MorphAnimMesh=function(e,t){a.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.currentKeyframe=this.lastKeyframe=this.time=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},a.MorphAnimMesh.prototype=Object.create(a.Mesh.prototype),a.MorphAnimMesh.prototype.constructor=a.MorphAnimMesh,a.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},a.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},a.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},a.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,n=e.animations,r=/([a-z]+)_?(\d+)/,i=0,o=e.morphTargets.length;i<o;i++){var s=e.morphTargets[i].name.match(r);if(s&&1<s.length){s=s[1],n[s]||(n[s]={start:1/0,end:-(1/0)});var a=n[s];i<a.start&&(a.start=i),i>a.end&&(a.end=i),t||(t=s)}}e.firstAnimation=t},a.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,n){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:n}},a.MorphAnimMesh.prototype.playAnimation=function(e,t){var n=this.geometry.animations[e];n?(this.setFrameRange(n.start,n.end),this.duration=(n.end-n.start)/t*1e3,this.time=0):console.warn("animation["+e+"] undefined")},a.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||0>this.time)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)):(this.time%=this.duration,0>this.time&&(this.time+=this.duration)),e=this.startKeyframe+a.Math.clamp(Math.floor(this.time/t),0,this.length-1),e!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[e]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=e),t=this.time%t/t,this.directionBackwards&&(t=1-t),this.morphTargetInfluences[this.currentKeyframe]=t,this.morphTargetInfluences[this.lastKeyframe]=1-t},a.MorphAnimMesh.prototype.interpolateTargets=function(e,t,n){for(var r=this.morphTargetInfluences,i=0,o=r.length;i<o;i++)r[i]=0;-1<e&&(r[e]=1-n),-1<t&&(r[t]=n)},a.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new a.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,a.Mesh.prototype.clone.call(this,e),e},a.LOD=function(){a.Object3D.call(this),this.objects=[]},a.LOD.prototype=Object.create(a.Object3D.prototype),a.LOD.prototype.constructor=a.LOD,a.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=0;n<this.objects.length&&!(t<this.objects[n].distance);n++);this.objects.splice(n,0,{distance:t,object:e}),this.add(e)},a.LOD.prototype.getObjectForDistance=function(e){for(var t=1,n=this.objects.length;t<n&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},a.LOD.prototype.raycast=function(){var e=new a.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),a.LOD.prototype.update=function(){var e=new a.Vector3,t=new a.Vector3;return function(n){if(1<this.objects.length){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld),n=e.distanceTo(t),this.objects[0].object.visible=!0;for(var r=1,i=this.objects.length;r<i&&n>=this.objects[r].distance;r++)this.objects[r-1].object.visible=!1,this.objects[r].object.visible=!0;for(;r<i;r++)this.objects[r].object.visible=!1}}}(),a.LOD.prototype.clone=function(e){void 0===e&&(e=new a.LOD),a.Object3D.prototype.clone.call(this,e);for(var t=0,n=this.objects.length;t<n;t++){var r=this.objects[t].object.clone();r.visible=0===t,e.addLevel(r,this.objects[t].distance)}return e},a.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),n=new Float32Array([0,0,1,0,1,1,0,1]),r=new a.BufferGeometry;return r.addAttribute("index",new a.BufferAttribute(e,1)),r.addAttribute("position",new a.BufferAttribute(t,3)),r.addAttribute("uv",new a.BufferAttribute(n,2)),function(e){a.Object3D.call(this),this.type="Sprite",this.geometry=r,this.material=void 0!==e?e:new a.SpriteMaterial}}(),a.Sprite.prototype=Object.create(a.Object3D.prototype),a.Sprite.prototype.constructor=a.Sprite,a.Sprite.prototype.raycast=function(){var e=new a.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceToPoint(e);r>this.scale.x||n.push({distance:r,point:this.position,face:null,object:this})}}(),a.Sprite.prototype.clone=function(e){return void 0===e&&(e=new a.Sprite(this.material)),a.Object3D.prototype.clone.call(this,e),e},a.Particle=a.Sprite,a.LensFlare=function(e,t,n,r,i){a.Object3D.call(this),this.lensFlares=[],this.positionScreen=new a.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)},a.LensFlare.prototype=Object.create(a.Object3D.prototype),a.LensFlare.prototype.constructor=a.LensFlare,a.LensFlare.prototype.add=function(e,t,n,r,i,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=new a.Color(16777215)),void 0===r&&(r=a.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:i,blending:r})},a.LensFlare.prototype.updateLensFlares=function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<n;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},a.Scene=function(){a.Object3D.call(this),this.type="Scene",this.overrideMaterial=this.fog=null,this.autoUpdate=!0},a.Scene.prototype=Object.create(a.Object3D.prototype),a.Scene.prototype.constructor=a.Scene,a.Scene.prototype.clone=function(e){return void 0===e&&(e=new a.Scene),a.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},a.Fog=function(e,t,n){this.name="",this.color=new a.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},a.Fog.prototype.clone=function(){return new a.Fog(this.color.getHex(),this.near,this.far)},a.FogExp2=function(e,t){this.name="",this.color=new a.Color(e),this.density=void 0!==t?t:25e-5},a.FogExp2.prototype.clone=function(){return new a.FogExp2(this.color.getHex(),this.density)},a.ShaderChunk={},a.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",a.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\tvec3 dirVector = normalize( lDirection.xyz );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat lDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",a.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",a.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n\tvec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",a.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",a.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n",a.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif",a.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif",a.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tvec3 pointDiffuse = vec3( 0.0 );\n\tvec3 pointSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tvec3 spotDiffuse = vec3( 0.0 );\n\tvec3 spotSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n\t\t\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tvec3 dirDiffuse = vec3( 0.0 );\n\tvec3 dirSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\tvec3 dirVector = normalize( lDirection.xyz );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tvec3 hemiDiffuse = vec3( 0.0 );\n\tvec3 hemiSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\themiDiffuse += diffuse * hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n\ttotalDiffuse += dirDiffuse;\n\ttotalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\ttotalDiffuse += hemiDiffuse;\n\ttotalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\ttotalDiffuse += pointDiffuse;\n\ttotalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\ttotalDiffuse += spotDiffuse;\n\ttotalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",
a.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif",a.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif",a.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n",a.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",a.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";a.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n";a.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif",a.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif",a.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif",a.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\t#ifdef GAMMA_INPUT\n\n\t\ttexelColor.xyz *= texelColor.xyz;\n\n\t#endif\n\n\tgl_FragColor = gl_FragColor * texelColor;\n\n#endif",a.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif",a.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",a.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",a.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\t#ifdef GAMMA_INPUT\n\n\t\tvColor = color * color;\n\n\t#else\n\n\t\tvColor = color;\n\n\t#endif\n\n#endif",a.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n",a.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n",a.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",a.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif",a.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n",a.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n",a.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t\t\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\t#ifdef GAMMA_INPUT\n\n\t\tenvColor.xyz *= envColor.xyz;\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\tgl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",a.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif",a.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif",a.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif",a.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif",a.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",a.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif",a.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n\tvec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n\tvec3 objectNormal = morphedNormal;\n\n#else\n\n\tvec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",a.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",a.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",a.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",a.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",a.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",a.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",a.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif",a.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n\tworldNormal = normalize( worldNormal );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n",a.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\tshadowColor *= shadowColor;\n\n\t#endif\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",a.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#elif defined( USE_MORPHTARGETS )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif\n",a.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif",a.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",a.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif",a.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",a.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",a.UniformsUtils={merge:function(e){for(var t={},n=0;n<e.length;n++){var r,i=this.clone(e[n]);for(r in i)t[r]=i[r]}return t},clone:function(e){var t,n={};for(t in e){n[t]={};for(var r in e[t]){var i=e[t][r];n[t][r]=i instanceof a.Color||i instanceof a.Vector2||i instanceof a.Vector3||i instanceof a.Vector4||i instanceof a.Matrix4||i instanceof a.Texture?i.clone():i instanceof Array?i.slice():i}}return n}},a.UniformsLib={common:{diffuse:{type:"c",value:new a.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new a.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new a.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new a.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new a.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new a.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},a.ShaderLib={basic:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.fog,a.UniformsLib.shadowmap]),vertexShader:[a.ShaderChunk.map_pars_vertex,a.ShaderChunk.lightmap_pars_vertex,a.ShaderChunk.envmap_pars_vertex,a.ShaderChunk.color_pars_vertex,a.ShaderChunk.morphtarget_pars_vertex,a.ShaderChunk.skinning_pars_vertex,a.ShaderChunk.shadowmap_pars_vertex,a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",a.ShaderChunk.map_vertex,a.ShaderChunk.lightmap_vertex,a.ShaderChunk.color_vertex,a.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",a.ShaderChunk.morphnormal_vertex,a.ShaderChunk.skinnormal_vertex,a.ShaderChunk.defaultnormal_vertex,"\t#endif",a.ShaderChunk.morphtarget_vertex,a.ShaderChunk.skinning_vertex,a.ShaderChunk.default_vertex,a.ShaderChunk.logdepthbuf_vertex,a.ShaderChunk.worldpos_vertex,a.ShaderChunk.envmap_vertex,a.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",a.ShaderChunk.color_pars_fragment,a.ShaderChunk.map_pars_fragment,a.ShaderChunk.alphamap_pars_fragment,a.ShaderChunk.lightmap_pars_fragment,a.ShaderChunk.envmap_pars_fragment,a.ShaderChunk.fog_pars_fragment,a.ShaderChunk.shadowmap_pars_fragment,a.ShaderChunk.specularmap_pars_fragment,a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( diffuse, opacity );",a.ShaderChunk.logdepthbuf_fragment,a.ShaderChunk.map_fragment,a.ShaderChunk.alphamap_fragment,a.ShaderChunk.alphatest_fragment,a.ShaderChunk.specularmap_fragment,a.ShaderChunk.lightmap_fragment,a.ShaderChunk.color_fragment,a.ShaderChunk.envmap_fragment,a.ShaderChunk.shadowmap_fragment,a.ShaderChunk.linear_to_gamma_fragment,a.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.fog,a.UniformsLib.lights,a.UniformsLib.shadowmap,{ambient:{type:"c",value:new a.Color(16777215)},emissive:{type:"c",value:new a.Color(0)},wrapRGB:{type:"v3",value:new a.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",a.ShaderChunk.map_pars_vertex,a.ShaderChunk.lightmap_pars_vertex,a.ShaderChunk.envmap_pars_vertex,a.ShaderChunk.lights_lambert_pars_vertex,a.ShaderChunk.color_pars_vertex,a.ShaderChunk.morphtarget_pars_vertex,a.ShaderChunk.skinning_pars_vertex,a.ShaderChunk.shadowmap_pars_vertex,a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",a.ShaderChunk.map_vertex,a.ShaderChunk.lightmap_vertex,a.ShaderChunk.color_vertex,a.ShaderChunk.morphnormal_vertex,a.ShaderChunk.skinbase_vertex,a.ShaderChunk.skinnormal_vertex,a.ShaderChunk.defaultnormal_vertex,a.ShaderChunk.morphtarget_vertex,a.ShaderChunk.skinning_vertex,a.ShaderChunk.default_vertex,a.ShaderChunk.logdepthbuf_vertex,a.ShaderChunk.worldpos_vertex,a.ShaderChunk.envmap_vertex,a.ShaderChunk.lights_lambert_vertex,a.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",a.ShaderChunk.color_pars_fragment,a.ShaderChunk.map_pars_fragment,a.ShaderChunk.alphamap_pars_fragment,a.ShaderChunk.lightmap_pars_fragment,a.ShaderChunk.envmap_pars_fragment,a.ShaderChunk.fog_pars_fragment,a.ShaderChunk.shadowmap_pars_fragment,a.ShaderChunk.specularmap_pars_fragment,a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",a.ShaderChunk.logdepthbuf_fragment,a.ShaderChunk.map_fragment,a.ShaderChunk.alphamap_fragment,a.ShaderChunk.alphatest_fragment,a.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\tgl_FragColor.xyz *= vLightFront;\n\t\telse\n\t\t\tgl_FragColor.xyz *= vLightBack;\n\t#else\n\t\tgl_FragColor.xyz *= vLightFront;\n\t#endif",a.ShaderChunk.lightmap_fragment,a.ShaderChunk.color_fragment,a.ShaderChunk.envmap_fragment,a.ShaderChunk.shadowmap_fragment,a.ShaderChunk.linear_to_gamma_fragment,a.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.bump,a.UniformsLib.normalmap,a.UniformsLib.fog,a.UniformsLib.lights,a.UniformsLib.shadowmap,{ambient:{type:"c",value:new a.Color(16777215)},emissive:{type:"c",value:new a.Color(0)},specular:{type:"c",value:new a.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new a.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",a.ShaderChunk.map_pars_vertex,a.ShaderChunk.lightmap_pars_vertex,a.ShaderChunk.envmap_pars_vertex,a.ShaderChunk.lights_phong_pars_vertex,a.ShaderChunk.color_pars_vertex,a.ShaderChunk.morphtarget_pars_vertex,a.ShaderChunk.skinning_pars_vertex,a.ShaderChunk.shadowmap_pars_vertex,a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",a.ShaderChunk.map_vertex,a.ShaderChunk.lightmap_vertex,a.ShaderChunk.color_vertex,a.ShaderChunk.morphnormal_vertex,a.ShaderChunk.skinbase_vertex,a.ShaderChunk.skinnormal_vertex,a.ShaderChunk.defaultnormal_vertex,"\tvNormal = normalize( transformedNormal );",a.ShaderChunk.morphtarget_vertex,a.ShaderChunk.skinning_vertex,a.ShaderChunk.default_vertex,a.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",a.ShaderChunk.worldpos_vertex,a.ShaderChunk.envmap_vertex,a.ShaderChunk.lights_phong_vertex,a.ShaderChunk.shadowmap_vertex,"}"].join("\n"),
fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",a.ShaderChunk.color_pars_fragment,a.ShaderChunk.map_pars_fragment,a.ShaderChunk.alphamap_pars_fragment,a.ShaderChunk.lightmap_pars_fragment,a.ShaderChunk.envmap_pars_fragment,a.ShaderChunk.fog_pars_fragment,a.ShaderChunk.lights_phong_pars_fragment,a.ShaderChunk.shadowmap_pars_fragment,a.ShaderChunk.bumpmap_pars_fragment,a.ShaderChunk.normalmap_pars_fragment,a.ShaderChunk.specularmap_pars_fragment,a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",a.ShaderChunk.logdepthbuf_fragment,a.ShaderChunk.map_fragment,a.ShaderChunk.alphamap_fragment,a.ShaderChunk.alphatest_fragment,a.ShaderChunk.specularmap_fragment,a.ShaderChunk.lights_phong_fragment,a.ShaderChunk.lightmap_fragment,a.ShaderChunk.color_fragment,a.ShaderChunk.envmap_fragment,a.ShaderChunk.shadowmap_fragment,a.ShaderChunk.linear_to_gamma_fragment,a.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:a.UniformsUtils.merge([a.UniformsLib.particle,a.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",a.ShaderChunk.color_pars_vertex,a.ShaderChunk.shadowmap_pars_vertex,a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",a.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",a.ShaderChunk.logdepthbuf_vertex,a.ShaderChunk.worldpos_vertex,a.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",a.ShaderChunk.color_pars_fragment,a.ShaderChunk.map_particle_pars_fragment,a.ShaderChunk.fog_pars_fragment,a.ShaderChunk.shadowmap_pars_fragment,a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( psColor, opacity );",a.ShaderChunk.logdepthbuf_fragment,a.ShaderChunk.map_particle_fragment,a.ShaderChunk.alphatest_fragment,a.ShaderChunk.color_fragment,a.ShaderChunk.shadowmap_fragment,a.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",a.ShaderChunk.color_pars_vertex,a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",a.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",a.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",a.ShaderChunk.color_pars_fragment,a.ShaderChunk.fog_pars_fragment,a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tgl_FragColor = vec4( diffuse, opacity );",a.ShaderChunk.logdepthbuf_fragment,a.ShaderChunk.color_fragment,a.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[a.ShaderChunk.morphtarget_pars_vertex,a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",a.ShaderChunk.morphtarget_vertex,a.ShaderChunk.default_vertex,a.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",a.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",a.ShaderChunk.morphtarget_pars_vertex,a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",a.ShaderChunk.morphtarget_vertex,a.ShaderChunk.default_vertex,a.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",a.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",a.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",a.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",a.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",a.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);\nsampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",a.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[a.ShaderChunk.morphtarget_pars_vertex,a.ShaderChunk.skinning_pars_vertex,a.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",a.ShaderChunk.skinbase_vertex,a.ShaderChunk.morphtarget_vertex,a.ShaderChunk.skinning_vertex,a.ShaderChunk.default_vertex,a.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[a.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",a.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}},a.WebGLRenderer=function(e){function t(e){var t=e.geometry;e=e.material;var n=t.vertices.length;if(e.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var r in e.attributes){var i=e.attributes[r];if(!i.__webglInitialized||i.createUniqueBuffers){i.__webglInitialized=!0;var o=1;"v2"===i.type?o=2:"v3"===i.type?o=3:"v4"===i.type?o=4:"c"===i.type&&(o=3),i.size=o,i.array=new Float32Array(n*o),i.buffer=Ee.createBuffer(),i.buffer.belongsToAttribute=r,i.needsUpdate=!0}t.__webglCustomAttributesList.push(i)}}}function n(e,t){var n=t.geometry,i=e.faces3,o=3*i.length,s=1*i.length,a=3*i.length,i=r(t,e);e.__vertexArray=new Float32Array(3*o),e.__normalArray=new Float32Array(3*o),e.__colorArray=new Float32Array(3*o),e.__uvArray=new Float32Array(2*o),1<n.faceVertexUvs.length&&(e.__uv2Array=new Float32Array(2*o)),n.hasTangents&&(e.__tangentArray=new Float32Array(4*o)),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*o),e.__skinWeightArray=new Float32Array(4*o)),n=null!==Re.get("OES_element_index_uint")&&21845<s?Uint32Array:Uint16Array,e.__typeArray=n,e.__faceArray=new n(3*s),e.__lineArray=new n(2*a);var l=e.numMorphTargets;if(l)for(e.__morphTargetsArrays=[],n=0;n<l;n++)e.__morphTargetsArrays.push(new Float32Array(3*o));if(l=e.numMorphNormals)for(e.__morphNormalsArrays=[],n=0;n<l;n++)e.__morphNormalsArrays.push(new Float32Array(3*o));if(e.__webglFaceCount=3*s,e.__webglLineCount=2*a,i.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var c in i.attributes){var u,s=i.attributes[c],a={};for(u in s)a[u]=s[u];a.__webglInitialized&&!a.createUniqueBuffers||(a.__webglInitialized=!0,n=1,"v2"===a.type?n=2:"v3"===a.type?n=3:"v4"===a.type?n=4:"c"===a.type&&(n=3),a.size=n,a.array=new Float32Array(o*n),a.buffer=Ee.createBuffer(),a.buffer.belongsToAttribute=c,s.needsUpdate=!0,a.__original=s),e.__webglCustomAttributesList.push(a)}}e.__inittedArrays=!0}function r(e,t){return e.material instanceof a.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function i(e,t,n,r){n=n.attributes;var i=t.attributes;t=t.attributesKeys;for(var o=0,a=t.length;o<a;o++){var c=t[o],u=i[c];if(0<=u){var p=n[c];void 0!==p?(c=p.itemSize,Ee.bindBuffer(Ee.ARRAY_BUFFER,p.buffer),s(u),Ee.vertexAttribPointer(u,c,Ee.FLOAT,!1,0,r*c*4)):void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[c].length?Ee.vertexAttrib2fv(u,e.defaultAttributeValues[c]):3===e.defaultAttributeValues[c].length&&Ee.vertexAttrib3fv(u,e.defaultAttributeValues[c]))}}l()}function o(){for(var e=0,t=De.length;e<t;e++)De[e]=0}function s(e){De[e]=1,0===Te[e]&&(Ee.enableVertexAttribArray(e),Te[e]=1)}function l(){for(var e=0,t=Te.length;e<t;e++)Te[e]!==De[e]&&(Ee.disableVertexAttribArray(e),Te[e]=0)}function c(e,t){return e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function u(e,t){return e.z!==t.z?t.z-e.z:e.id-t.id}function p(e,t){return t[0]-e[0]}function h(e){if(!1!==e.visible){if(!(e instanceof a.Scene||e instanceof a.Group)){void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new a.Matrix4,e._normalMatrix=new a.Matrix3,e.addEventListener("removed",nt));var n=e.geometry;if(void 0!==n&&void 0===n.__webglInit)if(n.__webglInit=!0,n.addEventListener("dispose",rt),n instanceof a.BufferGeometry)te.info.memory.geometries++;else if(e instanceof a.Mesh)g(e,n);else if(e instanceof a.Line){if(void 0===n.__webglVertexBuffer){n.__webglVertexBuffer=Ee.createBuffer(),n.__webglColorBuffer=Ee.createBuffer(),n.__webglLineDistanceBuffer=Ee.createBuffer(),te.info.memory.geometries++;var r=n.vertices.length;n.__vertexArray=new Float32Array(3*r),n.__colorArray=new Float32Array(3*r),n.__lineDistanceArray=new Float32Array(1*r),n.__webglLineCount=r,t(e),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0,n.lineDistancesNeedUpdate=!0}}else e instanceof a.PointCloud&&void 0===n.__webglVertexBuffer&&(n.__webglVertexBuffer=Ee.createBuffer(),n.__webglColorBuffer=Ee.createBuffer(),te.info.memory.geometries++,r=n.vertices.length,n.__vertexArray=new Float32Array(3*r),n.__colorArray=new Float32Array(3*r),n.__sortArray=[],n.__webglParticleCount=r,t(e),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0);if(void 0===e.__webglActive)if(e.__webglActive=!0,e instanceof a.Mesh){if(n instanceof a.BufferGeometry)y(Y,n,e);else if(n instanceof a.Geometry)for(var n=ct[n.id],r=0,i=n.length;r<i;r++)y(Y,n[r],e)}else e instanceof a.Line||e instanceof a.PointCloud?y(Y,n,e):(e instanceof a.ImmediateRenderObject||e.immediateRenderCallback)&&J.push({id:null,object:e,opaque:null,transparent:null,z:0});if(e instanceof a.Light)X.push(e);else if(e instanceof a.Sprite)Z.push(e);else if(e instanceof a.LensFlare)ee.push(e);else if((n=Y[e.id])&&(!1===e.frustumCulled||!0===Pe.intersectsObject(e)))for(r=0,i=n.length;r<i;r++){var o=n[r],s=o,l=s.object,c=s.buffer,u=l.geometry,l=l.material;l instanceof a.MeshFaceMaterial?(l=l.materials[u instanceof a.BufferGeometry?0:c.materialIndex],s.material=l,l.transparent?Q.push(s):K.push(s)):l&&(s.material=l,l.transparent?Q.push(s):K.push(s)),o.render=!0,!0===te.sortObjects&&(Ne.setFromMatrixPosition(e.matrixWorld),Ne.applyProjection(Me),o.z=Ne.z)}}for(r=0,i=e.children.length;r<i;r++)h(e.children[r])}}function d(e,t,n,r,i,o){for(var s,l=0,c=e.length;l<c;l++){s=e[l];var u=s.object,p=s.buffer;if(_(u,t),o)s=o;else{if(s=s.material,!s)continue;i&&te.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),te.setDepthTest(s.depthTest),te.setDepthWrite(s.depthWrite),T(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}te.setMaterialFaces(s),p instanceof a.BufferGeometry?te.renderBufferDirect(t,n,r,s,p,u):te.renderBuffer(t,n,r,s,p,u)}}function f(e,t,n,r,i,o,s){for(var a,l=0,c=e.length;l<c;l++){a=e[l];var u=a.object;if(u.visible){if(s)a=s;else{if(a=a[t],!a)continue;o&&te.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst),te.setDepthTest(a.depthTest),te.setDepthWrite(a.depthWrite),T(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}te.renderImmediateObject(n,r,i,a,u)}}}function m(e){var t=e.object.material;t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)}function g(e,t){var r=e.material,i=!1;if(void 0===ct[t.id]||!0===t.groupsNeedUpdate){delete Y[e.id];for(var o,s,l=ct,c=t.id,r=r instanceof a.MeshFaceMaterial,u=Re.get("OES_element_index_uint")?4294967296:65535,i={},p=t.morphTargets.length,h=t.morphNormals.length,d={},f=[],m=0,g=t.faces.length;m<g;m++){o=t.faces[m];var v=r?o.materialIndex:0;v in i||(i[v]={hash:v,counter:0}),o=i[v].hash+"_"+i[v].counter,o in d||(s={id:ut++,faces3:[],materialIndex:v,vertices:0,numMorphTargets:p,numMorphNormals:h},d[o]=s,f.push(s)),d[o].vertices+3>u&&(i[v].counter+=1,o=i[v].hash+"_"+i[v].counter,o in d||(s={id:ut++,faces3:[],materialIndex:v,vertices:0,numMorphTargets:p,numMorphNormals:h},d[o]=s,f.push(s))),d[o].faces3.push(m),d[o].vertices+=3}l[c]=f,t.groupsNeedUpdate=!1}for(l=ct[t.id],c=0,r=l.length;c<r;c++){if(u=l[c],void 0===u.__webglVertexBuffer){if(i=u,i.__webglVertexBuffer=Ee.createBuffer(),i.__webglNormalBuffer=Ee.createBuffer(),i.__webglTangentBuffer=Ee.createBuffer(),i.__webglColorBuffer=Ee.createBuffer(),i.__webglUVBuffer=Ee.createBuffer(),i.__webglUV2Buffer=Ee.createBuffer(),i.__webglSkinIndicesBuffer=Ee.createBuffer(),i.__webglSkinWeightsBuffer=Ee.createBuffer(),i.__webglFaceBuffer=Ee.createBuffer(),i.__webglLineBuffer=Ee.createBuffer(),h=i.numMorphTargets)for(i.__webglMorphTargetsBuffers=[],p=0;p<h;p++)i.__webglMorphTargetsBuffers.push(Ee.createBuffer());if(h=i.numMorphNormals)for(i.__webglMorphNormalsBuffers=[],p=0;p<h;p++)i.__webglMorphNormalsBuffers.push(Ee.createBuffer());te.info.memory.geometries++,n(u,e),t.verticesNeedUpdate=!0,t.morphTargetsNeedUpdate=!0,t.elementsNeedUpdate=!0,t.uvsNeedUpdate=!0,t.normalsNeedUpdate=!0,t.tangentsNeedUpdate=!0,i=t.colorsNeedUpdate=!0}else i=!1;(i||void 0===e.__webglActive)&&y(Y,u,e)}e.__webglActive=!0}function y(e,t,n){var r=n.id;e[r]=e[r]||[],e[r].push({id:r,buffer:t,object:n,material:null,z:0})}function v(e){var t=e.geometry;if(t instanceof a.BufferGeometry)for(var i=t.attributes,o=t.attributesKeys,s=0,l=o.length;s<l;s++){var c=o[s],u=i[c];if(void 0===u.buffer&&(u.buffer=Ee.createBuffer(),u.needsUpdate=!0),!0===u.needsUpdate){var p="index"===c?Ee.ELEMENT_ARRAY_BUFFER:Ee.ARRAY_BUFFER;Ee.bindBuffer(p,u.buffer),Ee.bufferData(p,u.array,Ee.STATIC_DRAW),u.needsUpdate=!1}}else if(e instanceof a.Mesh){!0===t.groupsNeedUpdate&&g(e,t);for(var h=ct[t.id],s=0,d=h.length;s<d;s++){var f=h[s],m=r(e,f);!0===t.groupsNeedUpdate&&n(f,e);var y=m.attributes&&b(m);if(t.verticesNeedUpdate||t.morphTargetsNeedUpdate||t.elementsNeedUpdate||t.uvsNeedUpdate||t.normalsNeedUpdate||t.colorsNeedUpdate||t.tangentsNeedUpdate||y){var v=f,w=e,x=Ee.DYNAMIC_DRAW,C=!t.dynamic,_=m;if(v.__inittedArrays){var k=_&&void 0!==_.shading&&_.shading===a.SmoothShading,A=void 0,D=void 0,T=void 0,P=void 0,M=void 0,E=void 0,N=void 0,O=void 0,I=void 0,V=void 0,L=void 0,R=void 0,G=void 0,B=void 0,F=void 0,j=void 0,z=void 0,U=void 0,W=void 0,H=void 0,q=void 0,$=void 0,X=void 0,Y=void 0,J=void 0,K=void 0,Q=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,se=void 0,ae=void 0,le=void 0,ce=void 0,ue=void 0,pe=void 0,he=0,de=0,fe=0,me=0,ge=0,ye=0,ve=0,be=0,Se=0,we=0,xe=0,Ce=0,_e=void 0,ke=v.__vertexArray,Ae=v.__uvArray,De=v.__uv2Array,Te=v.__normalArray,Pe=v.__tangentArray,Me=v.__colorArray,Ne=v.__skinIndexArray,Oe=v.__skinWeightArray,Ie=v.__morphTargetsArrays,Ve=v.__morphNormalsArrays,Le=v.__webglCustomAttributesList,Re=void 0,Ge=v.__faceArray,Be=v.__lineArray,Fe=w.geometry,je=Fe.elementsNeedUpdate,ze=Fe.uvsNeedUpdate,Ue=Fe.normalsNeedUpdate,We=Fe.tangentsNeedUpdate,He=Fe.colorsNeedUpdate,qe=Fe.morphTargetsNeedUpdate,$e=Fe.vertices,Xe=v.faces3,Ye=Fe.faces,Je=Fe.faceVertexUvs[0],Ke=Fe.faceVertexUvs[1],Qe=Fe.skinIndices,Ze=Fe.skinWeights,et=Fe.morphTargets,tt=Fe.morphNormals;if(Fe.verticesNeedUpdate){for(A=0,D=Xe.length;A<D;A++)P=Ye[Xe[A]],R=$e[P.a],G=$e[P.b],B=$e[P.c],ke[de]=R.x,ke[de+1]=R.y,ke[de+2]=R.z,ke[de+3]=G.x,ke[de+4]=G.y,ke[de+5]=G.z,ke[de+6]=B.x,ke[de+7]=B.y,ke[de+8]=B.z,de+=9;Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglVertexBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,ke,x)}if(qe)for(se=0,ae=et.length;se<ae;se++){for(A=xe=0,D=Xe.length;A<D;A++)ue=Xe[A],P=Ye[ue],R=et[se].vertices[P.a],G=et[se].vertices[P.b],B=et[se].vertices[P.c],le=Ie[se],le[xe]=R.x,le[xe+1]=R.y,le[xe+2]=R.z,le[xe+3]=G.x,le[xe+4]=G.y,le[xe+5]=G.z,le[xe+6]=B.x,le[xe+7]=B.y,le[xe+8]=B.z,_.morphNormals&&(k?(pe=tt[se].vertexNormals[ue],U=pe.a,W=pe.b,H=pe.c):H=W=U=tt[se].faceNormals[ue],ce=Ve[se],ce[xe]=U.x,ce[xe+1]=U.y,ce[xe+2]=U.z,ce[xe+3]=W.x,ce[xe+4]=W.y,ce[xe+5]=W.z,ce[xe+6]=H.x,ce[xe+7]=H.y,ce[xe+8]=H.z),xe+=9;Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglMorphTargetsBuffers[se]),Ee.bufferData(Ee.ARRAY_BUFFER,Ie[se],x),_.morphNormals&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglMorphNormalsBuffers[se]),Ee.bufferData(Ee.ARRAY_BUFFER,Ve[se],x))}if(Ze.length){for(A=0,D=Xe.length;A<D;A++)P=Ye[Xe[A]],Y=Ze[P.a],J=Ze[P.b],K=Ze[P.c],Oe[we]=Y.x,Oe[we+1]=Y.y,Oe[we+2]=Y.z,Oe[we+3]=Y.w,Oe[we+4]=J.x,Oe[we+5]=J.y,Oe[we+6]=J.z,Oe[we+7]=J.w,Oe[we+8]=K.x,Oe[we+9]=K.y,Oe[we+10]=K.z,Oe[we+11]=K.w,Q=Qe[P.a],Z=Qe[P.b],ee=Qe[P.c],Ne[we]=Q.x,Ne[we+1]=Q.y,Ne[we+2]=Q.z,Ne[we+3]=Q.w,Ne[we+4]=Z.x,Ne[we+5]=Z.y,Ne[we+6]=Z.z,Ne[we+7]=Z.w,Ne[we+8]=ee.x,Ne[we+9]=ee.y,Ne[we+10]=ee.z,Ne[we+11]=ee.w,we+=12;0<we&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglSkinIndicesBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,Ne,x),Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglSkinWeightsBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,Oe,x))}if(He){for(A=0,D=Xe.length;A<D;A++)P=Ye[Xe[A]],N=P.vertexColors,O=P.color,3===N.length&&_.vertexColors===a.VertexColors?(q=N[0],$=N[1],X=N[2]):X=$=q=O,Me[Se]=q.r,Me[Se+1]=q.g,Me[Se+2]=q.b,Me[Se+3]=$.r,Me[Se+4]=$.g,Me[Se+5]=$.b,Me[Se+6]=X.r,Me[Se+7]=X.g,Me[Se+8]=X.b,Se+=9;0<Se&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglColorBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,Me,x))}if(We&&Fe.hasTangents){for(A=0,D=Xe.length;A<D;A++)P=Ye[Xe[A]],I=P.vertexTangents,F=I[0],j=I[1],z=I[2],Pe[ve]=F.x,Pe[ve+1]=F.y,Pe[ve+2]=F.z,Pe[ve+3]=F.w,Pe[ve+4]=j.x,Pe[ve+5]=j.y,Pe[ve+6]=j.z,Pe[ve+7]=j.w,Pe[ve+8]=z.x,Pe[ve+9]=z.y,Pe[ve+10]=z.z,Pe[ve+11]=z.w,ve+=12;Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglTangentBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,Pe,x)}if(Ue){for(A=0,D=Xe.length;A<D;A++)if(P=Ye[Xe[A]],M=P.vertexNormals,E=P.normal,3===M.length&&k)for(te=0;3>te;te++)re=M[te],Te[ye]=re.x,Te[ye+1]=re.y,Te[ye+2]=re.z,ye+=3;else for(te=0;3>te;te++)Te[ye]=E.x,Te[ye+1]=E.y,Te[ye+2]=E.z,ye+=3;Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglNormalBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,Te,x)}if(ze&&Je){for(A=0,D=Xe.length;A<D;A++)if(T=Xe[A],V=Je[T],void 0!==V)for(te=0;3>te;te++)ie=V[te],Ae[fe]=ie.x,Ae[fe+1]=ie.y,fe+=2;0<fe&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglUVBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,Ae,x))}if(ze&&Ke){for(A=0,D=Xe.length;A<D;A++)if(T=Xe[A],L=Ke[T],void 0!==L)for(te=0;3>te;te++)oe=L[te],De[me]=oe.x,De[me+1]=oe.y,me+=2;0<me&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,v.__webglUV2Buffer),Ee.bufferData(Ee.ARRAY_BUFFER,De,x))}if(je){for(A=0,D=Xe.length;A<D;A++)Ge[ge]=he,Ge[ge+1]=he+1,Ge[ge+2]=he+2,ge+=3,Be[be]=he,Be[be+1]=he+1,Be[be+2]=he,Be[be+3]=he+2,Be[be+4]=he+1,Be[be+5]=he+2,be+=6,he+=3;Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,v.__webglFaceBuffer),Ee.bufferData(Ee.ELEMENT_ARRAY_BUFFER,Ge,x),Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,v.__webglLineBuffer),Ee.bufferData(Ee.ELEMENT_ARRAY_BUFFER,Be,x)}if(Le)for(te=0,ne=Le.length;te<ne;te++)if(Re=Le[te],Re.__original.needsUpdate){if(Ce=0,1===Re.size){if(void 0===Re.boundTo||"vertices"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)P=Ye[Xe[A]],Re.array[Ce]=Re.value[P.a],Re.array[Ce+1]=Re.value[P.b],Re.array[Ce+2]=Re.value[P.c],Ce+=3;else if("faces"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)_e=Re.value[Xe[A]],Re.array[Ce]=_e,Re.array[Ce+1]=_e,Re.array[Ce+2]=_e,Ce+=3}else if(2===Re.size){if(void 0===Re.boundTo||"vertices"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)P=Ye[Xe[A]],R=Re.value[P.a],G=Re.value[P.b],B=Re.value[P.c],Re.array[Ce]=R.x,Re.array[Ce+1]=R.y,Re.array[Ce+2]=G.x,Re.array[Ce+3]=G.y,Re.array[Ce+4]=B.x,Re.array[Ce+5]=B.y,Ce+=6;else if("faces"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)B=G=R=_e=Re.value[Xe[A]],Re.array[Ce]=R.x,Re.array[Ce+1]=R.y,Re.array[Ce+2]=G.x,Re.array[Ce+3]=G.y,Re.array[Ce+4]=B.x,Re.array[Ce+5]=B.y,Ce+=6}else if(3===Re.size){var nt;if(nt="c"===Re.type?["r","g","b"]:["x","y","z"],void 0===Re.boundTo||"vertices"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)P=Ye[Xe[A]],R=Re.value[P.a],G=Re.value[P.b],B=Re.value[P.c],Re.array[Ce]=R[nt[0]],Re.array[Ce+1]=R[nt[1]],Re.array[Ce+2]=R[nt[2]],Re.array[Ce+3]=G[nt[0]],Re.array[Ce+4]=G[nt[1]],Re.array[Ce+5]=G[nt[2]],Re.array[Ce+6]=B[nt[0]],Re.array[Ce+7]=B[nt[1]],Re.array[Ce+8]=B[nt[2]],Ce+=9;else if("faces"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)B=G=R=_e=Re.value[Xe[A]],Re.array[Ce]=R[nt[0]],Re.array[Ce+1]=R[nt[1]],Re.array[Ce+2]=R[nt[2]],Re.array[Ce+3]=G[nt[0]],Re.array[Ce+4]=G[nt[1]],Re.array[Ce+5]=G[nt[2]],Re.array[Ce+6]=B[nt[0]],Re.array[Ce+7]=B[nt[1]],Re.array[Ce+8]=B[nt[2]],Ce+=9;else if("faceVertices"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)_e=Re.value[Xe[A]],R=_e[0],G=_e[1],B=_e[2],Re.array[Ce]=R[nt[0]],Re.array[Ce+1]=R[nt[1]],Re.array[Ce+2]=R[nt[2]],Re.array[Ce+3]=G[nt[0]],Re.array[Ce+4]=G[nt[1]],Re.array[Ce+5]=G[nt[2]],Re.array[Ce+6]=B[nt[0]],Re.array[Ce+7]=B[nt[1]],Re.array[Ce+8]=B[nt[2]],Ce+=9}else if(4===Re.size)if(void 0===Re.boundTo||"vertices"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)P=Ye[Xe[A]],R=Re.value[P.a],G=Re.value[P.b],B=Re.value[P.c],Re.array[Ce]=R.x,Re.array[Ce+1]=R.y,Re.array[Ce+2]=R.z,Re.array[Ce+3]=R.w,Re.array[Ce+4]=G.x,Re.array[Ce+5]=G.y,Re.array[Ce+6]=G.z,Re.array[Ce+7]=G.w,Re.array[Ce+8]=B.x,Re.array[Ce+9]=B.y,Re.array[Ce+10]=B.z,Re.array[Ce+11]=B.w,Ce+=12;else if("faces"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)B=G=R=_e=Re.value[Xe[A]],Re.array[Ce]=R.x,Re.array[Ce+1]=R.y,Re.array[Ce+2]=R.z,Re.array[Ce+3]=R.w,Re.array[Ce+4]=G.x,Re.array[Ce+5]=G.y,Re.array[Ce+6]=G.z,Re.array[Ce+7]=G.w,Re.array[Ce+8]=B.x,Re.array[Ce+9]=B.y,Re.array[Ce+10]=B.z,Re.array[Ce+11]=B.w,Ce+=12;else if("faceVertices"===Re.boundTo)for(A=0,D=Xe.length;A<D;A++)_e=Re.value[Xe[A]],R=_e[0],G=_e[1],B=_e[2],Re.array[Ce]=R.x,Re.array[Ce+1]=R.y,Re.array[Ce+2]=R.z,Re.array[Ce+3]=R.w,Re.array[Ce+4]=G.x,Re.array[Ce+5]=G.y,Re.array[Ce+6]=G.z,Re.array[Ce+7]=G.w,Re.array[Ce+8]=B.x,Re.array[Ce+9]=B.y,Re.array[Ce+10]=B.z,Re.array[Ce+11]=B.w,Ce+=12;Ee.bindBuffer(Ee.ARRAY_BUFFER,Re.buffer),Ee.bufferData(Ee.ARRAY_BUFFER,Re.array,x)}C&&(delete v.__inittedArrays,delete v.__colorArray,delete v.__normalArray,delete v.__tangentArray,delete v.__uvArray,delete v.__uv2Array,delete v.__faceArray,delete v.__vertexArray,delete v.__lineArray,delete v.__skinIndexArray,delete v.__skinWeightArray)}}}t.verticesNeedUpdate=!1,t.morphTargetsNeedUpdate=!1,t.elementsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.tangentsNeedUpdate=!1,m.attributes&&S(m)}else if(e instanceof a.Line){if(m=r(e,t),y=m.attributes&&b(m),t.verticesNeedUpdate||t.colorsNeedUpdate||t.lineDistancesNeedUpdate||y){var rt,it,ot,st,at,lt,ut,pt,ht,dt,ft,mt,gt=Ee.DYNAMIC_DRAW,yt=t.vertices,vt=t.colors,bt=t.lineDistances,St=yt.length,wt=vt.length,xt=bt.length,Ct=t.__vertexArray,_t=t.__colorArray,kt=t.__lineDistanceArray,At=t.colorsNeedUpdate,Dt=t.lineDistancesNeedUpdate,Tt=t.__webglCustomAttributesList;if(t.verticesNeedUpdate){for(rt=0;rt<St;rt++)st=yt[rt],at=3*rt,Ct[at]=st.x,Ct[at+1]=st.y,Ct[at+2]=st.z;Ee.bindBuffer(Ee.ARRAY_BUFFER,t.__webglVertexBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,Ct,gt)}if(At){for(it=0;it<wt;it++)lt=vt[it],at=3*it,_t[at]=lt.r,_t[at+1]=lt.g,_t[at+2]=lt.b;Ee.bindBuffer(Ee.ARRAY_BUFFER,t.__webglColorBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,_t,gt)}if(Dt){for(ot=0;ot<xt;ot++)kt[ot]=bt[ot];Ee.bindBuffer(Ee.ARRAY_BUFFER,t.__webglLineDistanceBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,kt,gt)}if(Tt)for(ut=0,pt=Tt.length;ut<pt;ut++)if(mt=Tt[ut],mt.needsUpdate&&(void 0===mt.boundTo||"vertices"===mt.boundTo)){if(at=0,dt=mt.value.length,1===mt.size)for(ht=0;ht<dt;ht++)mt.array[ht]=mt.value[ht];else if(2===mt.size)for(ht=0;ht<dt;ht++)ft=mt.value[ht],mt.array[at]=ft.x,mt.array[at+1]=ft.y,at+=2;else if(3===mt.size)if("c"===mt.type)for(ht=0;ht<dt;ht++)ft=mt.value[ht],mt.array[at]=ft.r,mt.array[at+1]=ft.g,mt.array[at+2]=ft.b,at+=3;else for(ht=0;ht<dt;ht++)ft=mt.value[ht],mt.array[at]=ft.x,mt.array[at+1]=ft.y,mt.array[at+2]=ft.z,at+=3;else if(4===mt.size)for(ht=0;ht<dt;ht++)ft=mt.value[ht],mt.array[at]=ft.x,mt.array[at+1]=ft.y,mt.array[at+2]=ft.z,mt.array[at+3]=ft.w,at+=4;Ee.bindBuffer(Ee.ARRAY_BUFFER,mt.buffer),Ee.bufferData(Ee.ARRAY_BUFFER,mt.array,gt),mt.needsUpdate=!1}}t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,t.lineDistancesNeedUpdate=!1,m.attributes&&S(m)}else if(e instanceof a.PointCloud){if(m=r(e,t),y=m.attributes&&b(m),t.verticesNeedUpdate||t.colorsNeedUpdate||y){var Pt,Mt,Et,Nt,Ot,It,Vt,Lt,Rt,Gt,Bt,Ft=Ee.DYNAMIC_DRAW,jt=t.vertices,zt=jt.length,Ut=t.colors,Wt=Ut.length,Ht=t.__vertexArray,qt=t.__colorArray,$t=t.colorsNeedUpdate,Xt=t.__webglCustomAttributesList;if(t.verticesNeedUpdate){for(Pt=0;Pt<zt;Pt++)Et=jt[Pt],Nt=3*Pt,Ht[Nt]=Et.x,Ht[Nt+1]=Et.y,Ht[Nt+2]=Et.z;Ee.bindBuffer(Ee.ARRAY_BUFFER,t.__webglVertexBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,Ht,Ft)}if($t){for(Mt=0;Mt<Wt;Mt++)Ot=Ut[Mt],Nt=3*Mt,qt[Nt]=Ot.r,qt[Nt+1]=Ot.g,qt[Nt+2]=Ot.b;Ee.bindBuffer(Ee.ARRAY_BUFFER,t.__webglColorBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,qt,Ft)}if(Xt)for(It=0,Vt=Xt.length;It<Vt;It++){if(Bt=Xt[It],Bt.needsUpdate&&(void 0===Bt.boundTo||"vertices"===Bt.boundTo))if(Rt=Bt.value.length,Nt=0,1===Bt.size)for(Lt=0;Lt<Rt;Lt++)Bt.array[Lt]=Bt.value[Lt];else if(2===Bt.size)for(Lt=0;Lt<Rt;Lt++)Gt=Bt.value[Lt],Bt.array[Nt]=Gt.x,Bt.array[Nt+1]=Gt.y,Nt+=2;else if(3===Bt.size)if("c"===Bt.type)for(Lt=0;Lt<Rt;Lt++)Gt=Bt.value[Lt],Bt.array[Nt]=Gt.r,Bt.array[Nt+1]=Gt.g,Bt.array[Nt+2]=Gt.b,Nt+=3;else for(Lt=0;Lt<Rt;Lt++)Gt=Bt.value[Lt],Bt.array[Nt]=Gt.x,Bt.array[Nt+1]=Gt.y,Bt.array[Nt+2]=Gt.z,Nt+=3;else if(4===Bt.size)for(Lt=0;Lt<Rt;Lt++)Gt=Bt.value[Lt],Bt.array[Nt]=Gt.x,Bt.array[Nt+1]=Gt.y,Bt.array[Nt+2]=Gt.z,Bt.array[Nt+3]=Gt.w,Nt+=4;Ee.bindBuffer(Ee.ARRAY_BUFFER,Bt.buffer),Ee.bufferData(Ee.ARRAY_BUFFER,Bt.array,Ft),Bt.needsUpdate=!1}}t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,m.attributes&&S(m)}}function b(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function S(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function w(e,t,n,r,i){var o,s,l,c;if(le=0,r.needsUpdate){r.program&&lt(r),r.addEventListener("dispose",st);var u=pt[r.type];if(u){var p=a.ShaderLib[u];r.__webglShader={uniforms:a.UniformsUtils.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}}else r.__webglShader={uniforms:r.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader};for(var h=0,d=0,f=0,m=0,g=0,y=t.length;g<y;g++){var v=t[g];v.onlyShadow||!1===v.visible||(v instanceof a.DirectionalLight&&h++,v instanceof a.PointLight&&d++,v instanceof a.SpotLight&&f++,v instanceof a.HemisphereLight&&m++)}o=h,s=d,l=f,c=m;for(var b,S=0,w=0,_=t.length;w<_;w++){var D=t[w];D.castShadow&&(D instanceof a.SpotLight&&S++,D instanceof a.DirectionalLight&&!D.shadowCascade&&S++)}b=S;var T;if(He&&i&&i.skeleton&&i.skeleton.useVertexTexture)T=1024;else{var E=Ee.getParameter(Ee.MAX_VERTEX_UNIFORM_VECTORS),N=Math.floor((E-20)/4);void 0!==i&&i instanceof a.SkinnedMesh&&(N=Math.min(i.skeleton.bones.length,N),N<i.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+i.skeleton.bones.length+", this GPU supports just "+N+" (try OpenGL instead of ANGLE)")),T=N}var O={precision:G,supportsVertexTextures:We,map:!!r.map,envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,lightMap:!!r.lightMap,bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,combine:r.combine,vertexColors:r.vertexColors,fog:n,useFog:r.fog,fogExp:n instanceof a.FogExp2,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:H,skinning:r.skinning,maxBones:T,useVertexTexture:He&&i&&i.skeleton&&i.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:te.maxMorphTargets,maxMorphNormals:te.maxMorphNormals,maxDirLights:o,maxPointLights:s,maxSpotLights:l,maxHemiLights:c,maxShadows:b,shadowMapEnabled:te.shadowMapEnabled&&i.receiveShadow&&0<b,shadowMapType:te.shadowMapType,shadowMapDebug:te.shadowMapDebug,shadowMapCascade:te.shadowMapCascade,alphaTest:r.alphaTest,metal:r.metal,wrapAround:r.wrapAround,doubleSided:r.side===a.DoubleSide,flipSided:r.side===a.BackSide},L=[];if(u?L.push(u):(L.push(r.fragmentShader),L.push(r.vertexShader)),void 0!==r.defines)for(var R in r.defines)L.push(R),L.push(r.defines[R]);for(R in O)L.push(R),L.push(O[R]);for(var B,F=L.join(),j=0,z=ne.length;j<z;j++){var U=ne[j];if(U.code===F){B=U,B.usedTimes++;break}}void 0===B&&(B=new a.WebGLProgram(te,F,r,O),ne.push(B),te.info.memory.programs=ne.length),r.program=B;var W=B.attributes;if(r.morphTargets){r.numSupportedMorphTargets=0;for(var q,$="morphTarget",X=0;X<te.maxMorphTargets;X++)q=$+X,0<=W[q]&&r.numSupportedMorphTargets++}if(r.morphNormals)for(r.numSupportedMorphNormals=0,$="morphNormal",X=0;X<te.maxMorphNormals;X++)q=$+X,0<=W[q]&&r.numSupportedMorphNormals++;r.uniformsList=[];for(var Y in r.__webglShader.uniforms){var J=r.program.uniforms[Y];J&&r.uniformsList.push([r.__webglShader.uniforms[Y],J])}r.needsUpdate=!1}r.morphTargets&&!i.__webglMorphTargetInfluences&&(i.__webglMorphTargetInfluences=new Float32Array(te.maxMorphTargets));var K=!1,Q=!1,Z=!1,ee=r.program,ie=ee.uniforms,se=r.__webglShader.uniforms;if(ee.id!==re&&(Ee.useProgram(ee.program),re=ee.id,Z=Q=K=!0),r.id!==oe&&(-1===oe&&(Z=!0),oe=r.id,Q=!0),(K||e!==ae)&&(Ee.uniformMatrix4fv(ie.projectionMatrix,!1,e.projectionMatrix.elements),H&&Ee.uniform1f(ie.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==ae&&(ae=e),(r instanceof a.ShaderMaterial||r instanceof a.MeshPhongMaterial||r.envMap)&&null!==ie.cameraPosition&&(Ne.setFromMatrixPosition(e.matrixWorld),Ee.uniform3f(ie.cameraPosition,Ne.x,Ne.y,Ne.z)),(r instanceof a.MeshPhongMaterial||r instanceof a.MeshLambertMaterial||r instanceof a.MeshBasicMaterial||r instanceof a.ShaderMaterial||r.skinning)&&null!==ie.viewMatrix&&Ee.uniformMatrix4fv(ie.viewMatrix,!1,e.matrixWorldInverse.elements)),r.skinning)if(i.bindMatrix&&null!==ie.bindMatrix&&Ee.uniformMatrix4fv(ie.bindMatrix,!1,i.bindMatrix.elements),i.bindMatrixInverse&&null!==ie.bindMatrixInverse&&Ee.uniformMatrix4fv(ie.bindMatrixInverse,!1,i.bindMatrixInverse.elements),He&&i.skeleton&&i.skeleton.useVertexTexture){if(null!==ie.boneTexture){var ce=C();Ee.uniform1i(ie.boneTexture,ce),te.setTexture(i.skeleton.boneTexture,ce)}null!==ie.boneTextureWidth&&Ee.uniform1i(ie.boneTextureWidth,i.skeleton.boneTextureWidth),
null!==ie.boneTextureHeight&&Ee.uniform1i(ie.boneTextureHeight,i.skeleton.boneTextureHeight)}else i.skeleton&&i.skeleton.boneMatrices&&null!==ie.boneGlobalMatrices&&Ee.uniformMatrix4fv(ie.boneGlobalMatrices,!1,i.skeleton.boneMatrices);if(Q){if(n&&r.fog&&(se.fogColor.value=n.color,n instanceof a.Fog?(se.fogNear.value=n.near,se.fogFar.value=n.far):n instanceof a.FogExp2&&(se.fogDensity.value=n.density)),r instanceof a.MeshPhongMaterial||r instanceof a.MeshLambertMaterial||r.lights){if(Ie){var ue,pe,he,de,fe,me,ge,ye,ve,Z=!0,be=0,Se=0,we=0,xe=Ve,Ce=xe.directional.colors,_e=xe.directional.positions,ke=xe.point.colors,Ae=xe.point.positions,De=xe.point.distances,Te=xe.spot.colors,Pe=xe.spot.positions,Me=xe.spot.distances,Le=xe.spot.directions,Re=xe.spot.anglesCos,Ge=xe.spot.exponents,Be=xe.hemi.skyColors,Fe=xe.hemi.groundColors,je=xe.hemi.positions,ze=0,qe=0,$e=0,Xe=0,Ye=0,Ke=0,Qe=0,Ze=0,et=0,tt=0,nt=0,rt=0;for(ue=0,pe=t.length;ue<pe;ue++)he=t[ue],he.onlyShadow||(de=he.color,ge=he.intensity,ve=he.distance,he instanceof a.AmbientLight?he.visible&&(te.gammaInput?(be+=de.r*de.r,Se+=de.g*de.g,we+=de.b*de.b):(be+=de.r,Se+=de.g,we+=de.b)):he instanceof a.DirectionalLight?(Ye+=1,he.visible&&(Oe.setFromMatrixPosition(he.matrixWorld),Ne.setFromMatrixPosition(he.target.matrixWorld),Oe.sub(Ne),Oe.normalize(),et=3*ze,_e[et]=Oe.x,_e[et+1]=Oe.y,_e[et+2]=Oe.z,te.gammaInput?k(Ce,et,de,ge*ge):A(Ce,et,de,ge),ze+=1)):he instanceof a.PointLight?(Ke+=1,he.visible&&(tt=3*qe,te.gammaInput?k(ke,tt,de,ge*ge):A(ke,tt,de,ge),Ne.setFromMatrixPosition(he.matrixWorld),Ae[tt]=Ne.x,Ae[tt+1]=Ne.y,Ae[tt+2]=Ne.z,De[qe]=ve,qe+=1)):he instanceof a.SpotLight?(Qe+=1,he.visible&&(nt=3*$e,te.gammaInput?k(Te,nt,de,ge*ge):A(Te,nt,de,ge),Oe.setFromMatrixPosition(he.matrixWorld),Pe[nt]=Oe.x,Pe[nt+1]=Oe.y,Pe[nt+2]=Oe.z,Me[$e]=ve,Ne.setFromMatrixPosition(he.target.matrixWorld),Oe.sub(Ne),Oe.normalize(),Le[nt]=Oe.x,Le[nt+1]=Oe.y,Le[nt+2]=Oe.z,Re[$e]=Math.cos(he.angle),Ge[$e]=he.exponent,$e+=1)):he instanceof a.HemisphereLight&&(Ze+=1,he.visible&&(Oe.setFromMatrixPosition(he.matrixWorld),Oe.normalize(),rt=3*Xe,je[rt]=Oe.x,je[rt+1]=Oe.y,je[rt+2]=Oe.z,fe=he.color,me=he.groundColor,te.gammaInput?(ye=ge*ge,k(Be,rt,fe,ye),k(Fe,rt,me,ye)):(A(Be,rt,fe,ge),A(Fe,rt,me,ge)),Xe+=1)));for(ue=3*ze,pe=Math.max(Ce.length,3*Ye);ue<pe;ue++)Ce[ue]=0;for(ue=3*qe,pe=Math.max(ke.length,3*Ke);ue<pe;ue++)ke[ue]=0;for(ue=3*$e,pe=Math.max(Te.length,3*Qe);ue<pe;ue++)Te[ue]=0;for(ue=3*Xe,pe=Math.max(Be.length,3*Ze);ue<pe;ue++)Be[ue]=0;for(ue=3*Xe,pe=Math.max(Fe.length,3*Ze);ue<pe;ue++)Fe[ue]=0;xe.directional.length=ze,xe.point.length=qe,xe.spot.length=$e,xe.hemi.length=Xe,xe.ambient[0]=be,xe.ambient[1]=Se,xe.ambient[2]=we,Ie=!1}if(Z){var ot=Ve;se.ambientLightColor.value=ot.ambient,se.directionalLightColor.value=ot.directional.colors,se.directionalLightDirection.value=ot.directional.positions,se.pointLightColor.value=ot.point.colors,se.pointLightPosition.value=ot.point.positions,se.pointLightDistance.value=ot.point.distances,se.spotLightColor.value=ot.spot.colors,se.spotLightPosition.value=ot.spot.positions,se.spotLightDistance.value=ot.spot.distances,se.spotLightDirection.value=ot.spot.directions,se.spotLightAngleCos.value=ot.spot.anglesCos,se.spotLightExponent.value=ot.spot.exponents,se.hemisphereLightSkyColor.value=ot.hemi.skyColors,se.hemisphereLightGroundColor.value=ot.hemi.groundColors,se.hemisphereLightDirection.value=ot.hemi.positions,x(se,!0)}else x(se,!1)}if(r instanceof a.MeshBasicMaterial||r instanceof a.MeshLambertMaterial||r instanceof a.MeshPhongMaterial){se.opacity.value=r.opacity,te.gammaInput?se.diffuse.value.copyGammaToLinear(r.color):se.diffuse.value=r.color,se.map.value=r.map,se.lightMap.value=r.lightMap,se.specularMap.value=r.specularMap,se.alphaMap.value=r.alphaMap,r.bumpMap&&(se.bumpMap.value=r.bumpMap,se.bumpScale.value=r.bumpScale),r.normalMap&&(se.normalMap.value=r.normalMap,se.normalScale.value.copy(r.normalScale));var at;if(r.map?at=r.map:r.specularMap?at=r.specularMap:r.normalMap?at=r.normalMap:r.bumpMap?at=r.bumpMap:r.alphaMap&&(at=r.alphaMap),void 0!==at){var ct=at.offset,ut=at.repeat;se.offsetRepeat.value.set(ct.x,ct.y,ut.x,ut.y)}se.envMap.value=r.envMap,se.flipEnvMap.value=r.envMap instanceof a.WebGLRenderTargetCube?1:-1,se.reflectivity.value=r.reflectivity,se.refractionRatio.value=r.refractionRatio}if(r instanceof a.LineBasicMaterial?(se.diffuse.value=r.color,se.opacity.value=r.opacity):r instanceof a.LineDashedMaterial?(se.diffuse.value=r.color,se.opacity.value=r.opacity,se.dashSize.value=r.dashSize,se.totalSize.value=r.dashSize+r.gapSize,se.scale.value=r.scale):r instanceof a.PointCloudMaterial?(se.psColor.value=r.color,se.opacity.value=r.opacity,se.size.value=r.size,se.scale.value=V.height/2,se.map.value=r.map):r instanceof a.MeshPhongMaterial?(se.shininess.value=r.shininess,te.gammaInput?(se.ambient.value.copyGammaToLinear(r.ambient),se.emissive.value.copyGammaToLinear(r.emissive),se.specular.value.copyGammaToLinear(r.specular)):(se.ambient.value=r.ambient,se.emissive.value=r.emissive,se.specular.value=r.specular),r.wrapAround&&se.wrapRGB.value.copy(r.wrapRGB)):r instanceof a.MeshLambertMaterial?(te.gammaInput?(se.ambient.value.copyGammaToLinear(r.ambient),se.emissive.value.copyGammaToLinear(r.emissive)):(se.ambient.value=r.ambient,se.emissive.value=r.emissive),r.wrapAround&&se.wrapRGB.value.copy(r.wrapRGB)):r instanceof a.MeshDepthMaterial?(se.mNear.value=e.near,se.mFar.value=e.far,se.opacity.value=r.opacity):r instanceof a.MeshNormalMaterial&&(se.opacity.value=r.opacity),i.receiveShadow&&!r._shadowPass&&se.shadowMatrix)for(var ht=0,dt=0,ft=t.length;dt<ft;dt++){var mt=t[dt];mt.castShadow&&(mt instanceof a.SpotLight||mt instanceof a.DirectionalLight&&!mt.shadowCascade)&&(se.shadowMap.value[ht]=mt.shadowMap,se.shadowMapSize.value[ht]=mt.shadowMapSize,se.shadowMatrix.value[ht]=mt.shadowMatrix,se.shadowDarkness.value[ht]=mt.shadowDarkness,se.shadowBias.value[ht]=mt.shadowBias,ht++)}for(var gt,yt,vt,bt=r.uniformsList,St=0,wt=bt.length;St<wt;St++){var xt=bt[St][0];if(!1!==xt.needsUpdate){var Ct=xt.type,_t=xt.value,kt=bt[St][1];switch(Ct){case"1i":Ee.uniform1i(kt,_t);break;case"1f":Ee.uniform1f(kt,_t);break;case"2f":Ee.uniform2f(kt,_t[0],_t[1]);break;case"3f":Ee.uniform3f(kt,_t[0],_t[1],_t[2]);break;case"4f":Ee.uniform4f(kt,_t[0],_t[1],_t[2],_t[3]);break;case"1iv":Ee.uniform1iv(kt,_t);break;case"3iv":Ee.uniform3iv(kt,_t);break;case"1fv":Ee.uniform1fv(kt,_t);break;case"2fv":Ee.uniform2fv(kt,_t);break;case"3fv":Ee.uniform3fv(kt,_t);break;case"4fv":Ee.uniform4fv(kt,_t);break;case"Matrix3fv":Ee.uniformMatrix3fv(kt,!1,_t);break;case"Matrix4fv":Ee.uniformMatrix4fv(kt,!1,_t);break;case"i":Ee.uniform1i(kt,_t);break;case"f":Ee.uniform1f(kt,_t);break;case"v2":Ee.uniform2f(kt,_t.x,_t.y);break;case"v3":Ee.uniform3f(kt,_t.x,_t.y,_t.z);break;case"v4":Ee.uniform4f(kt,_t.x,_t.y,_t.z,_t.w);break;case"c":Ee.uniform3f(kt,_t.r,_t.g,_t.b);break;case"iv1":Ee.uniform1iv(kt,_t);break;case"iv":Ee.uniform3iv(kt,_t);break;case"fv1":Ee.uniform1fv(kt,_t);break;case"fv":Ee.uniform3fv(kt,_t);break;case"v2v":void 0===xt._array&&(xt._array=new Float32Array(2*_t.length));for(var At=0,Dt=_t.length;At<Dt;At++)vt=2*At,xt._array[vt]=_t[At].x,xt._array[vt+1]=_t[At].y;Ee.uniform2fv(kt,xt._array);break;case"v3v":for(void 0===xt._array&&(xt._array=new Float32Array(3*_t.length)),At=0,Dt=_t.length;At<Dt;At++)vt=3*At,xt._array[vt]=_t[At].x,xt._array[vt+1]=_t[At].y,xt._array[vt+2]=_t[At].z;Ee.uniform3fv(kt,xt._array);break;case"v4v":for(void 0===xt._array&&(xt._array=new Float32Array(4*_t.length)),At=0,Dt=_t.length;At<Dt;At++)vt=4*At,xt._array[vt]=_t[At].x,xt._array[vt+1]=_t[At].y,xt._array[vt+2]=_t[At].z,xt._array[vt+3]=_t[At].w;Ee.uniform4fv(kt,xt._array);break;case"m3":Ee.uniformMatrix3fv(kt,!1,_t.elements);break;case"m3v":for(void 0===xt._array&&(xt._array=new Float32Array(9*_t.length)),At=0,Dt=_t.length;At<Dt;At++)_t[At].flattenToArrayOffset(xt._array,9*At);Ee.uniformMatrix3fv(kt,!1,xt._array);break;case"m4":Ee.uniformMatrix4fv(kt,!1,_t.elements);break;case"m4v":for(void 0===xt._array&&(xt._array=new Float32Array(16*_t.length)),At=0,Dt=_t.length;At<Dt;At++)_t[At].flattenToArrayOffset(xt._array,16*At);Ee.uniformMatrix4fv(kt,!1,xt._array);break;case"t":if(gt=_t,yt=C(),Ee.uniform1i(kt,yt),!gt)continue;if(gt instanceof a.CubeTexture||gt.image instanceof Array&&6===gt.image.length){var Tt=gt,Pt=yt;if(6===Tt.image.length)if(Tt.needsUpdate){Tt.image.__webglTextureCube||(Tt.addEventListener("dispose",it),Tt.image.__webglTextureCube=Ee.createTexture(),te.info.memory.textures++),Ee.activeTexture(Ee.TEXTURE0+Pt),Ee.bindTexture(Ee.TEXTURE_CUBE_MAP,Tt.image.__webglTextureCube),Ee.pixelStorei(Ee.UNPACK_FLIP_Y_WEBGL,Tt.flipY);for(var Mt=Tt instanceof a.CompressedTexture,Et=Tt.image[0]instanceof a.DataTexture,Nt=[],Ot=0;6>Ot;Ot++)Nt[Ot]=!te.autoScaleCubemaps||Mt||Et?Et?Tt.image[Ot].image:Tt.image[Ot]:M(Tt.image[Ot],Ue);var It=Nt[0],Vt=a.Math.isPowerOfTwo(It.width)&&a.Math.isPowerOfTwo(It.height),Lt=I(Tt.format),Rt=I(Tt.type);for(P(Ee.TEXTURE_CUBE_MAP,Tt,Vt),Ot=0;6>Ot;Ot++)if(Mt)for(var Gt,Bt=Nt[Ot].mipmaps,Ft=0,jt=Bt.length;Ft<jt;Ft++)Gt=Bt[Ft],Tt.format!==a.RGBAFormat&&Tt.format!==a.RGBFormat?-1<Je().indexOf(Lt)?Ee.compressedTexImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,Ft,Lt,Gt.width,Gt.height,0,Gt.data):console.warn("Attempt to load unsupported compressed texture format"):Ee.texImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,Ft,Lt,Gt.width,Gt.height,0,Lt,Rt,Gt.data);else Et?Ee.texImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,Lt,Nt[Ot].width,Nt[Ot].height,0,Lt,Rt,Nt[Ot].data):Ee.texImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,Lt,Lt,Rt,Nt[Ot]);Tt.generateMipmaps&&Vt&&Ee.generateMipmap(Ee.TEXTURE_CUBE_MAP),Tt.needsUpdate=!1,Tt.onUpdate&&Tt.onUpdate()}else Ee.activeTexture(Ee.TEXTURE0+Pt),Ee.bindTexture(Ee.TEXTURE_CUBE_MAP,Tt.image.__webglTextureCube)}else if(gt instanceof a.WebGLRenderTargetCube){var zt=gt;Ee.activeTexture(Ee.TEXTURE0+yt),Ee.bindTexture(Ee.TEXTURE_CUBE_MAP,zt.__webglTexture)}else te.setTexture(gt,yt);break;case"tv":for(void 0===xt._array&&(xt._array=[]),At=0,Dt=xt.value.length;At<Dt;At++)xt._array[At]=C();for(Ee.uniform1iv(kt,xt._array),At=0,Dt=xt.value.length;At<Dt;At++)gt=xt.value[At],yt=xt._array[At],gt&&te.setTexture(gt,yt);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+Ct)}}}}return Ee.uniformMatrix4fv(ie.modelViewMatrix,!1,i._modelViewMatrix.elements),ie.normalMatrix&&Ee.uniformMatrix3fv(ie.normalMatrix,!1,i._normalMatrix.elements),null!==ie.modelMatrix&&Ee.uniformMatrix4fv(ie.modelMatrix,!1,i.matrixWorld.elements),ee}function x(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function C(){var e=le;return e>=Fe&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Fe),le+=1,e}function _(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function k(e,t,n,r){e[t]=n.r*n.r*r,e[t+1]=n.g*n.g*r,e[t+2]=n.b*n.b*r}function A(e,t,n,r){e[t]=n.r*r,e[t+1]=n.g*r,e[t+2]=n.b*r}function D(e){e*=R,e!==Se&&(Ee.lineWidth(e),Se=e)}function T(e,t,n){ye!==e&&(e?Ee.enable(Ee.POLYGON_OFFSET_FILL):Ee.disable(Ee.POLYGON_OFFSET_FILL),ye=e),!e||ve===t&&be===n||(Ee.polygonOffset(t,n),ve=t,be=n)}function P(e,t,n){n?(Ee.texParameteri(e,Ee.TEXTURE_WRAP_S,I(t.wrapS)),Ee.texParameteri(e,Ee.TEXTURE_WRAP_T,I(t.wrapT)),Ee.texParameteri(e,Ee.TEXTURE_MAG_FILTER,I(t.magFilter)),Ee.texParameteri(e,Ee.TEXTURE_MIN_FILTER,I(t.minFilter))):(Ee.texParameteri(e,Ee.TEXTURE_WRAP_S,Ee.CLAMP_TO_EDGE),Ee.texParameteri(e,Ee.TEXTURE_WRAP_T,Ee.CLAMP_TO_EDGE),t.wrapS===a.ClampToEdgeWrapping&&t.wrapT===a.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( "+t.sourceFile+" )"),Ee.texParameteri(e,Ee.TEXTURE_MAG_FILTER,O(t.magFilter)),Ee.texParameteri(e,Ee.TEXTURE_MIN_FILTER,O(t.minFilter)),t.minFilter!==a.NearestFilter&&t.minFilter!==a.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( "+t.sourceFile+" )")),(n=Re.get("EXT_texture_filter_anisotropic"))&&t.type!==a.FloatType&&(1<t.anisotropy||t.__oldAnisotropy)&&(Ee.texParameterf(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,te.getMaxAnisotropy())),t.__oldAnisotropy=t.anisotropy)}function M(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElement("canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.log("THREE.WebGLRenderer:",e,"is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height+"."),r}return e}function E(e,t){Ee.bindRenderbuffer(Ee.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Ee.renderbufferStorage(Ee.RENDERBUFFER,Ee.DEPTH_COMPONENT16,t.width,t.height),Ee.framebufferRenderbuffer(Ee.FRAMEBUFFER,Ee.DEPTH_ATTACHMENT,Ee.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Ee.renderbufferStorage(Ee.RENDERBUFFER,Ee.DEPTH_STENCIL,t.width,t.height),Ee.framebufferRenderbuffer(Ee.FRAMEBUFFER,Ee.DEPTH_STENCIL_ATTACHMENT,Ee.RENDERBUFFER,e)):Ee.renderbufferStorage(Ee.RENDERBUFFER,Ee.RGBA4,t.width,t.height)}function N(e){e instanceof a.WebGLRenderTargetCube?(Ee.bindTexture(Ee.TEXTURE_CUBE_MAP,e.__webglTexture),Ee.generateMipmap(Ee.TEXTURE_CUBE_MAP),Ee.bindTexture(Ee.TEXTURE_CUBE_MAP,null)):(Ee.bindTexture(Ee.TEXTURE_2D,e.__webglTexture),Ee.generateMipmap(Ee.TEXTURE_2D),Ee.bindTexture(Ee.TEXTURE_2D,null))}function O(e){return e===a.NearestFilter||e===a.NearestMipMapNearestFilter||e===a.NearestMipMapLinearFilter?Ee.NEAREST:Ee.LINEAR}function I(e){var t;if(e===a.RepeatWrapping)return Ee.REPEAT;if(e===a.ClampToEdgeWrapping)return Ee.CLAMP_TO_EDGE;if(e===a.MirroredRepeatWrapping)return Ee.MIRRORED_REPEAT;if(e===a.NearestFilter)return Ee.NEAREST;if(e===a.NearestMipMapNearestFilter)return Ee.NEAREST_MIPMAP_NEAREST;if(e===a.NearestMipMapLinearFilter)return Ee.NEAREST_MIPMAP_LINEAR;if(e===a.LinearFilter)return Ee.LINEAR;if(e===a.LinearMipMapNearestFilter)return Ee.LINEAR_MIPMAP_NEAREST;if(e===a.LinearMipMapLinearFilter)return Ee.LINEAR_MIPMAP_LINEAR;if(e===a.UnsignedByteType)return Ee.UNSIGNED_BYTE;if(e===a.UnsignedShort4444Type)return Ee.UNSIGNED_SHORT_4_4_4_4;if(e===a.UnsignedShort5551Type)return Ee.UNSIGNED_SHORT_5_5_5_1;if(e===a.UnsignedShort565Type)return Ee.UNSIGNED_SHORT_5_6_5;if(e===a.ByteType)return Ee.BYTE;if(e===a.ShortType)return Ee.SHORT;if(e===a.UnsignedShortType)return Ee.UNSIGNED_SHORT;if(e===a.IntType)return Ee.INT;if(e===a.UnsignedIntType)return Ee.UNSIGNED_INT;if(e===a.FloatType)return Ee.FLOAT;if(e===a.AlphaFormat)return Ee.ALPHA;if(e===a.RGBFormat)return Ee.RGB;if(e===a.RGBAFormat)return Ee.RGBA;if(e===a.LuminanceFormat)return Ee.LUMINANCE;if(e===a.LuminanceAlphaFormat)return Ee.LUMINANCE_ALPHA;if(e===a.AddEquation)return Ee.FUNC_ADD;if(e===a.SubtractEquation)return Ee.FUNC_SUBTRACT;if(e===a.ReverseSubtractEquation)return Ee.FUNC_REVERSE_SUBTRACT;if(e===a.ZeroFactor)return Ee.ZERO;if(e===a.OneFactor)return Ee.ONE;if(e===a.SrcColorFactor)return Ee.SRC_COLOR;if(e===a.OneMinusSrcColorFactor)return Ee.ONE_MINUS_SRC_COLOR;if(e===a.SrcAlphaFactor)return Ee.SRC_ALPHA;if(e===a.OneMinusSrcAlphaFactor)return Ee.ONE_MINUS_SRC_ALPHA;if(e===a.DstAlphaFactor)return Ee.DST_ALPHA;if(e===a.OneMinusDstAlphaFactor)return Ee.ONE_MINUS_DST_ALPHA;if(e===a.DstColorFactor)return Ee.DST_COLOR;if(e===a.OneMinusDstColorFactor)return Ee.ONE_MINUS_DST_COLOR;if(e===a.SrcAlphaSaturateFactor)return Ee.SRC_ALPHA_SATURATE;if(t=Re.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===a.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===a.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===a.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===a.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=Re.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===a.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===a.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===a.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===a.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=Re.get("EXT_blend_minmax"),null!==t){if(e===a.MinEquation)return t.MIN_EXT;if(e===a.MaxEquation)return t.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",a.REVISION),e=e||{};var V=void 0!==e.canvas?e.canvas:document.createElement("canvas"),L=void 0!==e.context?e.context:null,R=1,G=void 0!==e.precision?e.precision:"highp",B=void 0!==e.alpha&&e.alpha,F=void 0===e.depth||e.depth,j=void 0===e.stencil||e.stencil,z=void 0!==e.antialias&&e.antialias,U=void 0===e.premultipliedAlpha||e.premultipliedAlpha,W=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,H=void 0!==e.logarithmicDepthBuffer&&e.logarithmicDepthBuffer,q=new a.Color(0),$=0,X=[],Y={},J=[],K=[],Q=[],Z=[],ee=[];this.domElement=V,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1,this.shadowMapType=a.PCFShadowMap,this.shadowMapCullFace=a.CullFaceFront,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var te=this,ne=[],re=null,ie=null,oe=-1,se="",ae=null,le=0,ce=-1,ue=-1,pe=-1,he=-1,de=-1,fe=-1,me=-1,ge=-1,ye=null,ve=null,be=null,Se=null,we=0,xe=0,Ce=V.width,_e=V.height,ke=0,Ae=0,De=new Uint8Array(16),Te=new Uint8Array(16),Pe=new a.Frustum,Me=new a.Matrix4;new a.Matrix4;var Ee,Ne=new a.Vector3,Oe=new a.Vector3,Ie=!0,Ve={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var Le={alpha:B,depth:F,stencil:j,antialias:z,premultipliedAlpha:U,preserveDrawingBuffer:W};if(Ee=L||V.getContext("webgl",Le)||V.getContext("experimental-webgl",Le),null===Ee){if(null!==V.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}V.addEventListener("webglcontextlost",function(e){e.preventDefault(),Be(),Ge(),Y={}},!1)}catch(e){console.error(e)}void 0===Ee.getShaderPrecisionFormat&&(Ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var Re=new a.WebGLExtensions(Ee);Re.get("OES_texture_float"),Re.get("OES_texture_float_linear"),Re.get("OES_standard_derivatives"),H&&Re.get("EXT_frag_depth");var Ge=function(){Ee.clearColor(0,0,0,1),Ee.clearDepth(1),Ee.clearStencil(0),Ee.enable(Ee.DEPTH_TEST),Ee.depthFunc(Ee.LEQUAL),Ee.frontFace(Ee.CCW),Ee.cullFace(Ee.BACK),Ee.enable(Ee.CULL_FACE),Ee.enable(Ee.BLEND),Ee.blendEquation(Ee.FUNC_ADD),Ee.blendFunc(Ee.SRC_ALPHA,Ee.ONE_MINUS_SRC_ALPHA),Ee.viewport(we,xe,Ce,_e),Ee.clearColor(q.r,q.g,q.b,$)},Be=function(){ae=re=null,ue=ce=ge=me=pe=-1,se="",oe=-1,Ie=!0;for(var e=0;e<Te.length;e++)Te[e]=0};Ge(),this.context=Ee;var Fe=Ee.getParameter(Ee.MAX_TEXTURE_IMAGE_UNITS),je=Ee.getParameter(Ee.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ze=Ee.getParameter(Ee.MAX_TEXTURE_SIZE),Ue=Ee.getParameter(Ee.MAX_CUBE_MAP_TEXTURE_SIZE),We=0<je,He=We&&Re.get("OES_texture_float"),qe=Ee.getShaderPrecisionFormat(Ee.VERTEX_SHADER,Ee.HIGH_FLOAT),$e=Ee.getShaderPrecisionFormat(Ee.VERTEX_SHADER,Ee.MEDIUM_FLOAT);Ee.getShaderPrecisionFormat(Ee.VERTEX_SHADER,Ee.LOW_FLOAT);var Xe=Ee.getShaderPrecisionFormat(Ee.FRAGMENT_SHADER,Ee.HIGH_FLOAT),Ye=Ee.getShaderPrecisionFormat(Ee.FRAGMENT_SHADER,Ee.MEDIUM_FLOAT);Ee.getShaderPrecisionFormat(Ee.FRAGMENT_SHADER,Ee.LOW_FLOAT);var Je=function(){var e;return function(){if(void 0!==e)return e;if(e=[],Re.get("WEBGL_compressed_texture_pvrtc")||Re.get("WEBGL_compressed_texture_s3tc"))for(var t=Ee.getParameter(Ee.COMPRESSED_TEXTURE_FORMATS),n=0;n<t.length;n++)e.push(t[n]);return e}}(),Ke=0<qe.precision&&0<Xe.precision,Qe=0<$e.precision&&0<Ye.precision;"highp"!==G||Ke||(Qe?(G="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(G="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==G||Qe||(G="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var Ze=new a.ShadowMapPlugin(this,X,Y,J),et=new a.SpritePlugin(this,Z),tt=new a.LensFlarePlugin(this,ee);this.getContext=function(){return Ee},this.forceContextLoss=function(){Re.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return We},this.supportsFloatTextures=function(){return Re.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return Re.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return Re.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return Re.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return Re.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var e;return function(){if(void 0!==e)return e;var t=Re.get("EXT_texture_filter_anisotropic");return e=null!==t?Ee.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return G},this.getPixelRatio=function(){return R},this.setPixelRatio=function(e){R=e},this.setSize=function(e,t,n){V.width=e*R,V.height=t*R,!1!==n&&(V.style.width=e+"px",V.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){we=e*R,xe=t*R,Ce=n*R,_e=r*R,Ee.viewport(we,xe,Ce,_e)},this.setScissor=function(e,t,n,r){Ee.scissor(e*R,t*R,n*R,r*R)},this.enableScissorTest=function(e){e?Ee.enable(Ee.SCISSOR_TEST):Ee.disable(Ee.SCISSOR_TEST)},this.getClearColor=function(){return q},this.setClearColor=function(e,t){q.set(e),$=void 0!==t?t:1,Ee.clearColor(q.r,q.g,q.b,$)},this.getClearAlpha=function(){return $},this.setClearAlpha=function(e){$=e,Ee.clearColor(q.r,q.g,q.b,$)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=Ee.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Ee.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Ee.STENCIL_BUFFER_BIT),Ee.clear(r)},this.clearColor=function(){Ee.clear(Ee.COLOR_BUFFER_BIT)},this.clearDepth=function(){Ee.clear(Ee.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Ee.clear(Ee.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=Be;var nt=function(e){e.target.traverse(function(e){if(e.removeEventListener("remove",nt),e instanceof a.Mesh||e instanceof a.PointCloud||e instanceof a.Line)delete Y[e.id];else if(e instanceof a.ImmediateRenderObject||e.immediateRenderCallback)for(var t=J,n=t.length-1;0<=n;n--)t[n].object===e&&t.splice(n,1);delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive})},rt=function(e){if(e=e.target,e.removeEventListener("dispose",rt),delete e.__webglInit,e instanceof a.BufferGeometry){for(var t in e.attributes){var n=e.attributes[t];void 0!==n.buffer&&(Ee.deleteBuffer(n.buffer),delete n.buffer)}te.info.memory.geometries--}else if(t=ct[e.id],void 0!==t){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(void 0!==i.numMorphTargets){for(var o=0,s=i.numMorphTargets;o<s;o++)Ee.deleteBuffer(i.__webglMorphTargetsBuffers[o]);delete i.__webglMorphTargetsBuffers}if(void 0!==i.numMorphNormals){for(o=0,s=i.numMorphNormals;o<s;o++)Ee.deleteBuffer(i.__webglMorphNormalsBuffers[o]);delete i.__webglMorphNormalsBuffers}at(i)}delete ct[e.id]}else at(e);se=""},it=function(e){e=e.target,e.removeEventListener("dispose",it),e.image&&e.image.__webglTextureCube?(Ee.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube):void 0!==e.__webglInit&&(Ee.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit),te.info.memory.textures--},ot=function(e){if(e=e.target,e.removeEventListener("dispose",ot),e&&void 0!==e.__webglTexture){if(Ee.deleteTexture(e.__webglTexture),delete e.__webglTexture,e instanceof a.WebGLRenderTargetCube)for(var t=0;6>t;t++)Ee.deleteFramebuffer(e.__webglFramebuffer[t]),Ee.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Ee.deleteFramebuffer(e.__webglFramebuffer),Ee.deleteRenderbuffer(e.__webglRenderbuffer);delete e.__webglFramebuffer,delete e.__webglRenderbuffer}te.info.memory.textures--},st=function(e){e=e.target,e.removeEventListener("dispose",st),lt(e)},at=function(e){for(var t="__webglVertexBuffer __webglNormalBuffer __webglTangentBuffer __webglColorBuffer __webglUVBuffer __webglUV2Buffer __webglSkinIndicesBuffer __webglSkinWeightsBuffer __webglFaceBuffer __webglLineBuffer __webglLineDistanceBuffer".split(" "),n=0,r=t.length;n<r;n++){var i=t[n];void 0!==e[i]&&(Ee.deleteBuffer(e[i]),delete e[i])}if(void 0!==e.__webglCustomAttributesList){for(i in e.__webglCustomAttributesList)Ee.deleteBuffer(e.__webglCustomAttributesList[i].buffer);delete e.__webglCustomAttributesList}te.info.memory.geometries--},lt=function(e){var t=e.program.program;if(void 0!==t){e.program=void 0;var n,r,i=!1;for(e=0,n=ne.length;e<n;e++)if(r=ne[e],r.program===t){r.usedTimes--,0===r.usedTimes&&(i=!0);break}if(!0===i){for(i=[],e=0,n=ne.length;e<n;e++)r=ne[e],r.program!==t&&i.push(r);ne=i,Ee.deleteProgram(t),te.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,n){if(o(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Ee.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Ee.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Ee.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Ee.createBuffer()),e.hasPositions&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,e.__webglVertexBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,e.positionArray,Ee.DYNAMIC_DRAW),s(t.attributes.position),Ee.vertexAttribPointer(t.attributes.position,3,Ee.FLOAT,!1,0,0)),e.hasNormals){if(Ee.bindBuffer(Ee.ARRAY_BUFFER,e.__webglNormalBuffer),n.shading===a.FlatShading){var r,i,c,u,p,h,d,f,m,g,y,v=3*e.count;for(y=0;y<v;y+=9)g=e.normalArray,r=g[y],i=g[y+1],c=g[y+2],u=g[y+3],h=g[y+4],f=g[y+5],p=g[y+6],d=g[y+7],m=g[y+8],r=(r+u+p)/3,i=(i+h+d)/3,c=(c+f+m)/3,g[y]=r,g[y+1]=i,g[y+2]=c,g[y+3]=r,g[y+4]=i,g[y+5]=c,g[y+6]=r,g[y+7]=i,g[y+8]=c}Ee.bufferData(Ee.ARRAY_BUFFER,e.normalArray,Ee.DYNAMIC_DRAW),s(t.attributes.normal),Ee.vertexAttribPointer(t.attributes.normal,3,Ee.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,e.__webglUvBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,e.uvArray,Ee.DYNAMIC_DRAW),s(t.attributes.uv),Ee.vertexAttribPointer(t.attributes.uv,2,Ee.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==a.NoColors&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,e.__webglColorBuffer),Ee.bufferData(Ee.ARRAY_BUFFER,e.colorArray,Ee.DYNAMIC_DRAW),s(t.attributes.color),Ee.vertexAttribPointer(t.attributes.color,3,Ee.FLOAT,!1,0,0)),l(),Ee.drawArrays(Ee.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,s,l){if(!1!==r.visible)if(v(l),e=w(e,t,n,r,l),t=!1,n="direct_"+s.id+"_"+e.id+"_"+(r.wireframe?1:0),n!==se&&(se=n,t=!0),t&&o(),l instanceof a.Mesh){l=!0===r.wireframe?Ee.LINES:Ee.TRIANGLES;var c=s.attributes.index;if(c){var u,p;if(c.array instanceof Uint32Array&&Re.get("OES_element_index_uint")?(u=Ee.UNSIGNED_INT,p=4):(u=Ee.UNSIGNED_SHORT,p=2),n=s.offsets,0===n.length)t&&(i(r,e,s,0),Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,c.buffer)),Ee.drawElements(l,c.array.length,u,0),te.info.render.calls++,te.info.render.vertices+=c.array.length,te.info.render.faces+=c.array.length/3;else{t=!0;for(var h=0,d=n.length;h<d;h++){var f=n[h].index;t&&(i(r,e,s,f),Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,c.buffer)),Ee.drawElements(l,n[h].count,u,n[h].start*p),te.info.render.calls++,te.info.render.vertices+=n[h].count,te.info.render.faces+=n[h].count/3}}}else t&&i(r,e,s,0),r=s.attributes.position,Ee.drawArrays(l,0,r.array.length/3),te.info.render.calls++,te.info.render.vertices+=r.array.length/3,te.info.render.faces+=r.array.length/9}else if(l instanceof a.PointCloud)if(l=Ee.POINTS,c=s.attributes.index)if(c.array instanceof Uint32Array&&Re.get("OES_element_index_uint")?(u=Ee.UNSIGNED_INT,p=4):(u=Ee.UNSIGNED_SHORT,p=2),n=s.offsets,0===n.length)t&&(i(r,e,s,0),Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,c.buffer)),Ee.drawElements(l,c.array.length,u,0),te.info.render.calls++,te.info.render.points+=c.array.length;else for(1<n.length&&(t=!0),h=0,d=n.length;h<d;h++)f=n[h].index,t&&(i(r,e,s,f),Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,c.buffer)),Ee.drawElements(l,n[h].count,u,n[h].start*p),te.info.render.calls++,te.info.render.points+=n[h].count;else if(t&&i(r,e,s,0),r=s.attributes.position,n=s.offsets,0===n.length)Ee.drawArrays(l,0,r.array.length/3),te.info.render.calls++,te.info.render.points+=r.array.length/3;else for(h=0,d=n.length;h<d;h++)Ee.drawArrays(l,n[h].index,n[h].count),te.info.render.calls++,te.info.render.points+=n[h].count;else if(l instanceof a.Line)if(l=l.mode===a.LineStrip?Ee.LINE_STRIP:Ee.LINES,D(r.linewidth),c=s.attributes.index)if(c.array instanceof Uint32Array?(u=Ee.UNSIGNED_INT,p=4):(u=Ee.UNSIGNED_SHORT,p=2),n=s.offsets,0===n.length)t&&(i(r,e,s,0),Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,c.buffer)),Ee.drawElements(l,c.array.length,u,0),te.info.render.calls++,te.info.render.vertices+=c.array.length;else for(1<n.length&&(t=!0),h=0,d=n.length;h<d;h++)f=n[h].index,t&&(i(r,e,s,f),Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,c.buffer)),Ee.drawElements(l,n[h].count,u,n[h].start*p),te.info.render.calls++,te.info.render.vertices+=n[h].count;else if(t&&i(r,e,s,0),r=s.attributes.position,n=s.offsets,0===n.length)Ee.drawArrays(l,0,r.array.length/3),te.info.render.calls++,te.info.render.vertices+=r.array.length/3;else for(h=0,d=n.length;h<d;h++)Ee.drawArrays(l,n[h].index,n[h].count),te.info.render.calls++,te.info.render.vertices+=n[h].count},this.renderBuffer=function(e,t,n,r,i,c){if(!1!==r.visible){if(v(c),n=w(e,t,n,r,c),t=n.attributes,e=!1,n=i.id+"_"+n.id+"_"+(r.wireframe?1:0),n!==se&&(se=n,e=!0),e&&o(),!r.morphTargets&&0<=t.position)e&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglVertexBuffer),s(t.position),Ee.vertexAttribPointer(t.position,3,Ee.FLOAT,!1,0,0));else if(c.morphTargetBase){if(n=r.program.attributes,-1!==c.morphTargetBase&&0<=n.position?(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[c.morphTargetBase]),s(n.position),Ee.vertexAttribPointer(n.position,3,Ee.FLOAT,!1,0,0)):0<=n.position&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglVertexBuffer),s(n.position),Ee.vertexAttribPointer(n.position,3,Ee.FLOAT,!1,0,0)),c.morphTargetForcedOrder.length)for(var u,h=0,d=c.morphTargetForcedOrder,f=c.morphTargetInfluences;h<r.numSupportedMorphTargets&&h<d.length;)u=n["morphTarget"+h],0<=u&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[d[h]]),s(u),Ee.vertexAttribPointer(u,3,Ee.FLOAT,!1,0,0)),u=n["morphNormal"+h],0<=u&&r.morphNormals&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglMorphNormalsBuffers[d[h]]),s(u),Ee.vertexAttribPointer(u,3,Ee.FLOAT,!1,0,0)),c.__webglMorphTargetInfluences[h]=f[d[h]],h++;else{for(d=[],f=c.morphTargetInfluences,h=0,u=f.length;h<u;h++)d.push([f[h],h]);d.length>r.numSupportedMorphTargets?(d.sort(p),d.length=r.numSupportedMorphTargets):d.length>r.numSupportedMorphNormals?d.sort(p):0===d.length&&d.push([0,0]);for(var h=0,m=r.numSupportedMorphTargets;h<m;h++)if(d[h]){var g=d[h][1];u=n["morphTarget"+h],0<=u&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[g]),s(u),Ee.vertexAttribPointer(u,3,Ee.FLOAT,!1,0,0)),u=n["morphNormal"+h],0<=u&&r.morphNormals&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglMorphNormalsBuffers[g]),
s(u),Ee.vertexAttribPointer(u,3,Ee.FLOAT,!1,0,0)),c.__webglMorphTargetInfluences[h]=f[g]}else c.__webglMorphTargetInfluences[h]=0}null!==r.program.uniforms.morphTargetInfluences&&Ee.uniform1fv(r.program.uniforms.morphTargetInfluences,c.__webglMorphTargetInfluences)}if(e){if(i.__webglCustomAttributesList)for(n=0,f=i.__webglCustomAttributesList.length;n<f;n++)d=i.__webglCustomAttributesList[n],0<=t[d.buffer.belongsToAttribute]&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,d.buffer),s(t[d.buffer.belongsToAttribute]),Ee.vertexAttribPointer(t[d.buffer.belongsToAttribute],d.size,Ee.FLOAT,!1,0,0));0<=t.color&&(0<c.geometry.colors.length||0<c.geometry.faces.length?(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglColorBuffer),s(t.color),Ee.vertexAttribPointer(t.color,3,Ee.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Ee.vertexAttrib3fv(t.color,r.defaultAttributeValues.color)),0<=t.normal&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglNormalBuffer),s(t.normal),Ee.vertexAttribPointer(t.normal,3,Ee.FLOAT,!1,0,0)),0<=t.tangent&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglTangentBuffer),s(t.tangent),Ee.vertexAttribPointer(t.tangent,4,Ee.FLOAT,!1,0,0)),0<=t.uv&&(c.geometry.faceVertexUvs[0]?(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglUVBuffer),s(t.uv),Ee.vertexAttribPointer(t.uv,2,Ee.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Ee.vertexAttrib2fv(t.uv,r.defaultAttributeValues.uv)),0<=t.uv2&&(c.geometry.faceVertexUvs[1]?(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglUV2Buffer),s(t.uv2),Ee.vertexAttribPointer(t.uv2,2,Ee.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Ee.vertexAttrib2fv(t.uv2,r.defaultAttributeValues.uv2)),r.skinning&&0<=t.skinIndex&&0<=t.skinWeight&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglSkinIndicesBuffer),s(t.skinIndex),Ee.vertexAttribPointer(t.skinIndex,4,Ee.FLOAT,!1,0,0),Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglSkinWeightsBuffer),s(t.skinWeight),Ee.vertexAttribPointer(t.skinWeight,4,Ee.FLOAT,!1,0,0)),0<=t.lineDistance&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,i.__webglLineDistanceBuffer),s(t.lineDistance),Ee.vertexAttribPointer(t.lineDistance,1,Ee.FLOAT,!1,0,0))}l(),c instanceof a.Mesh?(c=i.__typeArray===Uint32Array?Ee.UNSIGNED_INT:Ee.UNSIGNED_SHORT,r.wireframe?(D(r.wireframeLinewidth),e&&Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,i.__webglLineBuffer),Ee.drawElements(Ee.LINES,i.__webglLineCount,c,0)):(e&&Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),Ee.drawElements(Ee.TRIANGLES,i.__webglFaceCount,c,0)),te.info.render.calls++,te.info.render.vertices+=i.__webglFaceCount,te.info.render.faces+=i.__webglFaceCount/3):c instanceof a.Line?(c=c.mode===a.LineStrip?Ee.LINE_STRIP:Ee.LINES,D(r.linewidth),Ee.drawArrays(c,0,i.__webglLineCount),te.info.render.calls++):c instanceof a.PointCloud&&(Ee.drawArrays(Ee.POINTS,0,i.__webglParticleCount),te.info.render.calls++,te.info.render.points+=i.__webglParticleCount)}},this.render=function(e,t,n,r){if(!1==t instanceof a.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var i=e.fog;se="",oe=-1,ae=null,Ie=!0,!0===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse(function(e){e instanceof a.SkinnedMesh&&e.skeleton.update()}),t.matrixWorldInverse.getInverse(t.matrixWorld),Me.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Pe.setFromMatrix(Me),X.length=0,K.length=0,Q.length=0,Z.length=0,ee.length=0,h(e),!0===te.sortObjects&&(K.sort(c),Q.sort(u)),Ze.render(e,t),te.info.render.calls=0,te.info.render.vertices=0,te.info.render.faces=0,te.info.render.points=0,this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r=0;for(var o=J.length;r<o;r++){var s=J[r],l=s.object;l.visible&&(_(l,t),m(s))}e.overrideMaterial?(r=e.overrideMaterial,this.setBlending(r.blending,r.blendEquation,r.blendSrc,r.blendDst),this.setDepthTest(r.depthTest),this.setDepthWrite(r.depthWrite),T(r.polygonOffset,r.polygonOffsetFactor,r.polygonOffsetUnits),d(K,t,X,i,!0,r),d(Q,t,X,i,!0,r),f(J,"",t,X,i,!1,r)):(r=null,this.setBlending(a.NoBlending),d(K,t,X,i,!1,r),f(J,"opaque",t,X,i,!1,r),d(Q,t,X,i,!0,r),f(J,"transparent",t,X,i,!0,r)),et.render(e,t),tt.render(e,t,ke,Ae),n&&n.generateMipmaps&&n.minFilter!==a.NearestFilter&&n.minFilter!==a.LinearFilter&&N(n),this.setDepthTest(!0),this.setDepthWrite(!0)}},this.renderImmediateObject=function(e,t,n,r,i){var o=w(e,t,n,r,i);se="",te.setMaterialFaces(r),i.immediateRenderCallback?i.immediateRenderCallback(o,Ee,Pe):i.render(function(e){te.renderBufferImmediate(e,o,r)})};var ct={},ut=0,pt={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};this.setFaceCulling=function(e,t){e===a.CullFaceNone?Ee.disable(Ee.CULL_FACE):(t===a.FrontFaceDirectionCW?Ee.frontFace(Ee.CW):Ee.frontFace(Ee.CCW),e===a.CullFaceBack?Ee.cullFace(Ee.BACK):e===a.CullFaceFront?Ee.cullFace(Ee.FRONT):Ee.cullFace(Ee.FRONT_AND_BACK),Ee.enable(Ee.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===a.DoubleSide;e=e.side===a.BackSide,ce!==t&&(t?Ee.disable(Ee.CULL_FACE):Ee.enable(Ee.CULL_FACE),ce=t),ue!==e&&(e?Ee.frontFace(Ee.CW):Ee.frontFace(Ee.CCW),ue=e)},this.setDepthTest=function(e){me!==e&&(e?Ee.enable(Ee.DEPTH_TEST):Ee.disable(Ee.DEPTH_TEST),me=e)},this.setDepthWrite=function(e){ge!==e&&(Ee.depthMask(e),ge=e)},this.setBlending=function(e,t,n,r){e!==pe&&(e===a.NoBlending?Ee.disable(Ee.BLEND):e===a.AdditiveBlending?(Ee.enable(Ee.BLEND),Ee.blendEquation(Ee.FUNC_ADD),Ee.blendFunc(Ee.SRC_ALPHA,Ee.ONE)):e===a.SubtractiveBlending?(Ee.enable(Ee.BLEND),Ee.blendEquation(Ee.FUNC_ADD),Ee.blendFunc(Ee.ZERO,Ee.ONE_MINUS_SRC_COLOR)):e===a.MultiplyBlending?(Ee.enable(Ee.BLEND),Ee.blendEquation(Ee.FUNC_ADD),Ee.blendFunc(Ee.ZERO,Ee.SRC_COLOR)):e===a.CustomBlending?Ee.enable(Ee.BLEND):(Ee.enable(Ee.BLEND),Ee.blendEquationSeparate(Ee.FUNC_ADD,Ee.FUNC_ADD),Ee.blendFuncSeparate(Ee.SRC_ALPHA,Ee.ONE_MINUS_SRC_ALPHA,Ee.ONE,Ee.ONE_MINUS_SRC_ALPHA)),pe=e),e===a.CustomBlending?(t!==he&&(Ee.blendEquation(I(t)),he=t),(n!==de||r!==fe)&&(Ee.blendFunc(I(n),I(r)),de=n,fe=r)):fe=de=he=null},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",it),e.__webglTexture=Ee.createTexture(),te.info.memory.textures++),Ee.bindTexture(Ee.TEXTURE_2D,e.__webglTexture),Ee.pixelStorei(Ee.UNPACK_FLIP_Y_WEBGL,e.flipY),Ee.pixelStorei(Ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Ee.pixelStorei(Ee.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=M(e.image,ze);var t=e.image,n=a.Math.isPowerOfTwo(t.width)&&a.Math.isPowerOfTwo(t.height),r=I(e.format),i=I(e.type);P(Ee.TEXTURE_2D,e,n);var o=e.mipmaps;if(e instanceof a.DataTexture)if(0<o.length&&n){for(var s=0,l=o.length;s<l;s++)t=o[s],Ee.texImage2D(Ee.TEXTURE_2D,s,r,t.width,t.height,0,r,i,t.data);e.generateMipmaps=!1}else Ee.texImage2D(Ee.TEXTURE_2D,0,r,t.width,t.height,0,r,i,t.data);else if(e instanceof a.CompressedTexture)for(s=0,l=o.length;s<l;s++)t=o[s],e.format!==a.RGBAFormat&&e.format!==a.RGBFormat?-1<Je().indexOf(r)?Ee.compressedTexImage2D(Ee.TEXTURE_2D,s,r,t.width,t.height,0,t.data):console.warn("Attempt to load unsupported compressed texture format"):Ee.texImage2D(Ee.TEXTURE_2D,s,r,t.width,t.height,0,r,i,t.data);else if(0<o.length&&n){for(s=0,l=o.length;s<l;s++)t=o[s],Ee.texImage2D(Ee.TEXTURE_2D,s,r,r,i,t);e.generateMipmaps=!1}else Ee.texImage2D(Ee.TEXTURE_2D,0,r,r,i,e.image);e.generateMipmaps&&n&&Ee.generateMipmap(Ee.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){Ee.activeTexture(Ee.TEXTURE0+t),e.needsUpdate?te.uploadTexture(e):Ee.bindTexture(Ee.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof a.WebGLRenderTargetCube;if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",ot),e.__webglTexture=Ee.createTexture(),te.info.memory.textures++;var n=a.Math.isPowerOfTwo(e.width)&&a.Math.isPowerOfTwo(e.height),r=I(e.format),i=I(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Ee.bindTexture(Ee.TEXTURE_CUBE_MAP,e.__webglTexture),P(Ee.TEXTURE_CUBE_MAP,e,n);for(var o=0;6>o;o++){e.__webglFramebuffer[o]=Ee.createFramebuffer(),e.__webglRenderbuffer[o]=Ee.createRenderbuffer(),Ee.texImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,r,e.width,e.height,0,r,i,null);var s=e,l=Ee.TEXTURE_CUBE_MAP_POSITIVE_X+o;Ee.bindFramebuffer(Ee.FRAMEBUFFER,e.__webglFramebuffer[o]),Ee.framebufferTexture2D(Ee.FRAMEBUFFER,Ee.COLOR_ATTACHMENT0,l,s.__webglTexture,0),E(e.__webglRenderbuffer[o],e)}n&&Ee.generateMipmap(Ee.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Ee.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:Ee.createRenderbuffer(),Ee.bindTexture(Ee.TEXTURE_2D,e.__webglTexture),P(Ee.TEXTURE_2D,e,n),Ee.texImage2D(Ee.TEXTURE_2D,0,r,e.width,e.height,0,r,i,null),r=Ee.TEXTURE_2D,Ee.bindFramebuffer(Ee.FRAMEBUFFER,e.__webglFramebuffer),Ee.framebufferTexture2D(Ee.FRAMEBUFFER,Ee.COLOR_ATTACHMENT0,r,e.__webglTexture,0),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Ee.framebufferRenderbuffer(Ee.FRAMEBUFFER,Ee.DEPTH_ATTACHMENT,Ee.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Ee.framebufferRenderbuffer(Ee.FRAMEBUFFER,Ee.DEPTH_STENCIL_ATTACHMENT,Ee.RENDERBUFFER,e.__webglRenderbuffer):E(e.__webglRenderbuffer,e),n&&Ee.generateMipmap(Ee.TEXTURE_2D);t?Ee.bindTexture(Ee.TEXTURE_CUBE_MAP,null):Ee.bindTexture(Ee.TEXTURE_2D,null),Ee.bindRenderbuffer(Ee.RENDERBUFFER,null),Ee.bindFramebuffer(Ee.FRAMEBUFFER,null)}e?(t=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,n=e.width,e=e.height,i=r=0):(t=null,n=Ce,e=_e,r=we,i=xe),t!==ie&&(Ee.bindFramebuffer(Ee.FRAMEBUFFER,t),Ee.viewport(r,i,n,e),ie=t),ke=n,Ae=e},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},a.WebGLRenderTarget=function(e,t,n){this.width=e,this.height=t,n=n||{},this.wrapS=void 0!==n.wrapS?n.wrapS:a.ClampToEdgeWrapping,this.wrapT=void 0!==n.wrapT?n.wrapT:a.ClampToEdgeWrapping,this.magFilter=void 0!==n.magFilter?n.magFilter:a.LinearFilter,this.minFilter=void 0!==n.minFilter?n.minFilter:a.LinearMipMapLinearFilter,this.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,this.offset=new a.Vector2(0,0),this.repeat=new a.Vector2(1,1),this.format=void 0!==n.format?n.format:a.RGBAFormat,this.type=void 0!==n.type?n.type:a.UnsignedByteType,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.generateMipmaps=!0,this.shareDepthFrom=null},a.WebGLRenderTarget.prototype={constructor:a.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new a.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.WebGLRenderTarget.prototype),a.WebGLRenderTargetCube=function(e,t,n){a.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},a.WebGLRenderTargetCube.prototype=Object.create(a.WebGLRenderTarget.prototype),a.WebGLRenderTargetCube.prototype.constructor=a.WebGLRenderTargetCube,a.WebGLExtensions=function(e){var t={};this.get=function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.log("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r}},a.WebGLProgram=function(){var e=0;return function(t,n,r,i){var o=t.context,s=r.defines,l=r.__webglShader.uniforms,c=r.attributes,u=r.__webglShader.vertexShader,p=r.__webglShader.fragmentShader,h=r.index0AttributeName;void 0===h&&!0===i.morphTargets&&(h="position");var d="SHADOWMAP_TYPE_BASIC";i.shadowMapType===a.PCFShadowMap?d="SHADOWMAP_TYPE_PCF":i.shadowMapType===a.PCFSoftShadowMap&&(d="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",m="ENVMAP_MODE_REFLECTION",g="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(r.envMap.mapping){case a.CubeReflectionMapping:case a.CubeRefractionMapping:f="ENVMAP_TYPE_CUBE";break;case a.EquirectangularReflectionMapping:case a.EquirectangularRefractionMapping:f="ENVMAP_TYPE_EQUIREC";break;case a.SphericalReflectionMapping:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case a.CubeRefractionMapping:case a.EquirectangularRefractionMapping:m="ENVMAP_MODE_REFRACTION"}switch(r.combine){case a.MultiplyOperation:g="ENVMAP_BLENDING_MULTIPLY";break;case a.MixOperation:g="ENVMAP_BLENDING_MIX";break;case a.AddOperation:g="ENVMAP_BLENDING_ADD"}}var y,v;y=[];for(var b in s)v=s[b],!1!==v&&(v="#define "+b+" "+v,y.push(v));y=y.join("\n"),s=o.createProgram(),r instanceof a.RawShaderMaterial?t=r="":(r=["precision "+i.precision+" float;","precision "+i.precision+" int;",y,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.gammaInput?"#define GAMMA_INPUT":"",t.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+i.maxDirLights,"#define MAX_POINT_LIGHTS "+i.maxPointLights,"#define MAX_SPOT_LIGHTS "+i.maxSpotLights,"#define MAX_HEMI_LIGHTS "+i.maxHemiLights,"#define MAX_SHADOWS "+i.maxShadows,"#define MAX_BONES "+i.maxBones,i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+m:"",i.lightMap?"#define USE_LIGHTMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals?"#define USE_MORPHNORMALS":"",i.wrapAround?"#define WRAP_AROUND":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+d:"",i.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",i.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n"].join("\n"),t=["precision "+i.precision+" float;","precision "+i.precision+" int;",i.bumpMap||i.normalMap?"#extension GL_OES_standard_derivatives : enable":"",y,"#define MAX_DIR_LIGHTS "+i.maxDirLights,"#define MAX_POINT_LIGHTS "+i.maxPointLights,"#define MAX_SPOT_LIGHTS "+i.maxSpotLights,"#define MAX_HEMI_LIGHTS "+i.maxHemiLights,"#define MAX_SHADOWS "+i.maxShadows,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"",t.gammaInput?"#define GAMMA_INPUT":"",t.gammaOutput?"#define GAMMA_OUTPUT":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+f:"",i.envMap?"#define "+m:"",i.envMap?"#define "+g:"",i.lightMap?"#define USE_LIGHTMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.metal?"#define METAL":"",i.wrapAround?"#define WRAP_AROUND":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+d:"",i.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",i.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n")),u=new a.WebGLShader(o,o.VERTEX_SHADER,r+u),p=new a.WebGLShader(o,o.FRAGMENT_SHADER,t+p),o.attachShader(s,u),o.attachShader(s,p),void 0!==h&&o.bindAttribLocation(s,0,h),o.linkProgram(s),!1===o.getProgramParameter(s,o.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",o.getProgramParameter(s,o.VALIDATE_STATUS)),console.error("gl.getError()",o.getError())),""!==o.getProgramInfoLog(s)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",o.getProgramInfoLog(s)),o.deleteShader(u),o.deleteShader(p),h="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" "),i.useVertexTexture?(h.push("boneTexture"),h.push("boneTextureWidth"),h.push("boneTextureHeight")):h.push("boneGlobalMatrices"),i.logarithmicDepthBuffer&&h.push("logDepthBufFC");for(var S in l)h.push(S);for(l=h,S={},h=0,t=l.length;h<t;h++)d=l[h],S[d]=o.getUniformLocation(s,d);for(this.uniforms=S,h="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" "),l=0;l<i.maxMorphTargets;l++)h.push("morphTarget"+l);for(l=0;l<i.maxMorphNormals;l++)h.push("morphNormal"+l);for(var w in c)h.push(w);for(i=h,c={},w=0,l=i.length;w<l;w++)S=i[w],c[S]=o.getAttribLocation(s,S);return this.attributes=c,this.attributesKeys=Object.keys(this.attributes),this.id=e++,this.code=n,this.usedTimes=1,this.program=s,this.vertexShader=u,this.fragmentShader=p,this}}(),a.WebGLShader=function(){var e=function(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")};return function(t,n,r){return n=t.createShader(n),t.shaderSource(n,r),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(n)),console.warn(e(r))),n}}(),a.LensFlarePlugin=function(e,t){var n,r,i,o,s,l,c,u,p,h,d,f,m,g,y,v,b=e.context;this.render=function(S,w,x,C){if(0!==t.length){S=new a.Vector3;var _=C/x,k=.5*x,A=.5*C,D=16/C,T=new a.Vector2(D*_,D),P=new a.Vector3(1,1,0),M=new a.Vector2(1,1);if(void 0===m){var D=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),E=new Uint16Array([0,1,2,0,2,3]);d=b.createBuffer(),f=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,d),b.bufferData(b.ARRAY_BUFFER,D,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,f),b.bufferData(b.ELEMENT_ARRAY_BUFFER,E,b.STATIC_DRAW),y=b.createTexture(),v=b.createTexture(),b.bindTexture(b.TEXTURE_2D,y),b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.bindTexture(b.TEXTURE_2D,v),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);var D=(g=0<b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},E=b.createProgram(),N=b.createShader(b.FRAGMENT_SHADER),O=b.createShader(b.VERTEX_SHADER),I="precision "+e.getPrecision()+" float;\n";b.shaderSource(N,I+D.fragmentShader),b.shaderSource(O,I+D.vertexShader),b.compileShader(N),b.compileShader(O),b.attachShader(E,N),b.attachShader(E,O),b.linkProgram(E),m=E,p=b.getAttribLocation(m,"position"),h=b.getAttribLocation(m,"uv"),n=b.getUniformLocation(m,"renderType"),r=b.getUniformLocation(m,"map"),i=b.getUniformLocation(m,"occlusionMap"),o=b.getUniformLocation(m,"opacity"),s=b.getUniformLocation(m,"color"),l=b.getUniformLocation(m,"scale"),c=b.getUniformLocation(m,"rotation"),u=b.getUniformLocation(m,"screenPosition")}for(b.useProgram(m),b.enableVertexAttribArray(p),b.enableVertexAttribArray(h),b.uniform1i(i,0),b.uniform1i(r,1),b.bindBuffer(b.ARRAY_BUFFER,d),b.vertexAttribPointer(p,2,b.FLOAT,!1,16,0),b.vertexAttribPointer(h,2,b.FLOAT,!1,16,8),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,f),b.disable(b.CULL_FACE),b.depthMask(!1),E=0,N=t.length;E<N;E++)if(D=16/C,T.set(D*_,D),O=t[E],S.set(O.matrixWorld.elements[12],O.matrixWorld.elements[13],O.matrixWorld.elements[14]),S.applyMatrix4(w.matrixWorldInverse),S.applyProjection(w.projectionMatrix),P.copy(S),M.x=P.x*k+k,M.y=P.y*A+A,g||0<M.x&&M.x<x&&0<M.y&&M.y<C){b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,y),b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,M.x-8,M.y-8,16,16,0),b.uniform1i(n,0),b.uniform2f(l,T.x,T.y),b.uniform3f(u,P.x,P.y,P.z),b.disable(b.BLEND),b.enable(b.DEPTH_TEST),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,v),b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,M.x-8,M.y-8,16,16,0),b.uniform1i(n,1),b.disable(b.DEPTH_TEST),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,y),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0),O.positionScreen.copy(P),O.customUpdateCallback?O.customUpdateCallback(O):O.updateLensFlares(),b.uniform1i(n,2),b.enable(b.BLEND);for(var I=0,V=O.lensFlares.length;I<V;I++){var L=O.lensFlares[I];.001<L.opacity&&.001<L.scale&&(P.x=L.x,P.y=L.y,P.z=L.z,D=L.size*L.scale/C,T.x=D*_,T.y=D,b.uniform3f(u,P.x,P.y,P.z),b.uniform2f(l,T.x,T.y),b.uniform1f(c,L.rotation),b.uniform1f(o,L.opacity),b.uniform3f(s,L.color.r,L.color.g,L.color.b),e.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),e.setTexture(L.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}}b.enable(b.CULL_FACE),b.enable(b.DEPTH_TEST),b.depthMask(!0),e.resetGLState()}}},a.ShadowMapPlugin=function(e,t,n,r){function i(e,t,r){if(t.visible){var o=n[t.id];if(o&&t.castShadow&&(!1===t.frustumCulled||!0===p.intersectsObject(t)))for(var s=0,a=o.length;s<a;s++){var l=o[s];t._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),g.push(l)}for(s=0,a=t.children.length;s<a;s++)i(e,t.children[s],r)}}var o,s,l,c,u=e.context,p=new a.Frustum,h=new a.Matrix4,d=new a.Vector3,f=new a.Vector3,m=new a.Vector3,g=[],y=a.ShaderLib.depthRGBA,v=a.UniformsUtils.clone(y.uniforms);o=new a.ShaderMaterial({uniforms:v,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader}),s=new a.ShaderMaterial({uniforms:v,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,morphTargets:!0}),l=new a.ShaderMaterial({uniforms:v,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,skinning:!0}),c=new a.ShaderMaterial({uniforms:v,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,morphTargets:!0,skinning:!0}),o._shadowPass=!0,s._shadowPass=!0,l._shadowPass=!0,c._shadowPass=!0,this.render=function(n,y){if(!1!==e.shadowMapEnabled){var v,b,S,w,x,C,_,k,A=[];for(w=0,u.clearColor(1,1,1,1),u.disable(u.BLEND),u.enable(u.CULL_FACE),u.frontFace(u.CCW),e.shadowMapCullFace===a.CullFaceFront?u.cullFace(u.FRONT):u.cullFace(u.BACK),e.setDepthTest(!0),v=0,b=t.length;v<b;v++)if(S=t[v],S.castShadow)if(S instanceof a.DirectionalLight&&S.shadowCascade)for(x=0;x<S.shadowCascadeCount;x++){var D;if(S.shadowCascadeArray[x])D=S.shadowCascadeArray[x];else{_=S;var T=x;D=new a.DirectionalLight,D.isVirtual=!0,D.onlyShadow=!0,D.castShadow=!0,D.shadowCameraNear=_.shadowCameraNear,D.shadowCameraFar=_.shadowCameraFar,D.shadowCameraLeft=_.shadowCameraLeft,D.shadowCameraRight=_.shadowCameraRight,D.shadowCameraBottom=_.shadowCameraBottom,D.shadowCameraTop=_.shadowCameraTop,D.shadowCameraVisible=_.shadowCameraVisible,D.shadowDarkness=_.shadowDarkness,D.shadowBias=_.shadowCascadeBias[T],D.shadowMapWidth=_.shadowCascadeWidth[T],D.shadowMapHeight=_.shadowCascadeHeight[T],D.pointsWorld=[],D.pointsFrustum=[],k=D.pointsWorld,C=D.pointsFrustum;for(var P=0;8>P;P++)k[P]=new a.Vector3,C[P]=new a.Vector3;k=_.shadowCascadeNearZ[T],_=_.shadowCascadeFarZ[T],C[0].set(-1,-1,k),C[1].set(1,-1,k),C[2].set(-1,1,k),C[3].set(1,1,k),C[4].set(-1,-1,_),C[5].set(1,-1,_),C[6].set(-1,1,_),C[7].set(1,1,_),D.originalCamera=y,C=new a.Gyroscope,C.position.copy(S.shadowCascadeOffset),C.add(D),C.add(D.target),y.add(C),S.shadowCascadeArray[x]=D,console.log("Created virtualLight",D)}T=S,k=x,_=T.shadowCascadeArray[k],_.position.copy(T.position),_.target.position.copy(T.target.position),_.lookAt(_.target),_.shadowCameraVisible=T.shadowCameraVisible,_.shadowDarkness=T.shadowDarkness,_.shadowBias=T.shadowCascadeBias[k],C=T.shadowCascadeNearZ[k],T=T.shadowCascadeFarZ[k],_=_.pointsFrustum,_[0].z=C,_[1].z=C,_[2].z=C,_[3].z=C,_[4].z=T,_[5].z=T,_[6].z=T,_[7].z=T,A[w]=D,w++}else A[w]=S,w++;for(v=0,b=A.length;v<b;v++){if(S=A[v],S.shadowMap||(x=a.LinearFilter,e.shadowMapType===a.PCFSoftShadowMap&&(x=a.NearestFilter),S.shadowMap=new a.WebGLRenderTarget(S.shadowMapWidth,S.shadowMapHeight,{minFilter:x,magFilter:x,format:a.RGBAFormat}),S.shadowMapSize=new a.Vector2(S.shadowMapWidth,S.shadowMapHeight),S.shadowMatrix=new a.Matrix4),!S.shadowCamera){if(S instanceof a.SpotLight)S.shadowCamera=new a.PerspectiveCamera(S.shadowCameraFov,S.shadowMapWidth/S.shadowMapHeight,S.shadowCameraNear,S.shadowCameraFar);else{if(!(S instanceof a.DirectionalLight)){console.error("Unsupported light type for shadow");continue}S.shadowCamera=new a.OrthographicCamera(S.shadowCameraLeft,S.shadowCameraRight,S.shadowCameraTop,S.shadowCameraBottom,S.shadowCameraNear,S.shadowCameraFar)}n.add(S.shadowCamera),!0===n.autoUpdate&&n.updateMatrixWorld()}if(S.shadowCameraVisible&&!S.cameraHelper&&(S.cameraHelper=new a.CameraHelper(S.shadowCamera),n.add(S.cameraHelper)),S.isVirtual&&D.originalCamera==y){for(x=y,w=S.shadowCamera,C=S.pointsFrustum,_=S.pointsWorld,d.set(1/0,1/0,1/0),f.set(-(1/0),-(1/0),-(1/0)),T=0;8>T;T++)k=_[T],k.copy(C[T]),k.unproject(x),k.applyMatrix4(w.matrixWorldInverse),k.x<d.x&&(d.x=k.x),k.x>f.x&&(f.x=k.x),k.y<d.y&&(d.y=k.y),k.y>f.y&&(f.y=k.y),k.z<d.z&&(d.z=k.z),k.z>f.z&&(f.z=k.z);w.left=d.x,w.right=f.x,w.top=f.y,w.bottom=d.y,w.updateProjectionMatrix()}for(w=S.shadowMap,C=S.shadowMatrix,x=S.shadowCamera,x.position.setFromMatrixPosition(S.matrixWorld),m.setFromMatrixPosition(S.target.matrixWorld),x.lookAt(m),x.updateMatrixWorld(),x.matrixWorldInverse.getInverse(x.matrixWorld),S.cameraHelper&&(S.cameraHelper.visible=S.shadowCameraVisible),S.shadowCameraVisible&&S.cameraHelper.update(),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(x.projectionMatrix),C.multiply(x.matrixWorldInverse),h.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),p.setFromMatrix(h),e.setRenderTarget(w),e.clear(),g.length=0,i(n,n,x),S=0,w=g.length;S<w;S++)_=g[S],C=_.object,_=_.buffer,T=C.material instanceof a.MeshFaceMaterial?C.material.materials[0]:C.material,k=void 0!==C.geometry.morphTargets&&0<C.geometry.morphTargets.length&&T.morphTargets,P=C instanceof a.SkinnedMesh&&T.skinning,k=C.customDepthMaterial?C.customDepthMaterial:P?k?c:l:k?s:o,e.setMaterialFaces(T),_ instanceof a.BufferGeometry?e.renderBufferDirect(x,t,null,k,_,C):e.renderBuffer(x,t,null,k,_,C);for(S=0,w=r.length;S<w;S++)_=r[S],C=_.object,C.visible&&C.castShadow&&(C._modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,C.matrixWorld),e.renderImmediateObject(x,t,null,o,C))}v=e.getClearColor(),b=e.getClearAlpha(),u.clearColor(v.r,v.g,v.b,b),u.enable(u.BLEND),e.shadowMapCullFace===a.CullFaceFront&&u.cullFace(u.BACK),e.resetGLState()}}},a.SpritePlugin=function(e,t){function n(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var r,i,o,s,l,c,u,p,h,d,f,m,g,y,v,b,S,w,x,C,_,k=e.context,A=new a.Vector3,D=new a.Quaternion,T=new a.Vector3;
this.render=function(P,M){if(0!==t.length){if(void 0===C){var E=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),N=new Uint16Array([0,1,2,0,2,3]);w=k.createBuffer(),x=k.createBuffer(),k.bindBuffer(k.ARRAY_BUFFER,w),k.bufferData(k.ARRAY_BUFFER,E,k.STATIC_DRAW),k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,x),k.bufferData(k.ELEMENT_ARRAY_BUFFER,N,k.STATIC_DRAW);var E=k.createProgram(),N=k.createShader(k.VERTEX_SHADER),O=k.createShader(k.FRAGMENT_SHADER);k.shaderSource(N,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),k.shaderSource(O,["precision "+e.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),k.compileShader(N),k.compileShader(O),k.attachShader(E,N),k.attachShader(E,O),k.linkProgram(E),C=E,b=k.getAttribLocation(C,"position"),S=k.getAttribLocation(C,"uv"),r=k.getUniformLocation(C,"uvOffset"),i=k.getUniformLocation(C,"uvScale"),o=k.getUniformLocation(C,"rotation"),s=k.getUniformLocation(C,"scale"),l=k.getUniformLocation(C,"color"),c=k.getUniformLocation(C,"map"),u=k.getUniformLocation(C,"opacity"),p=k.getUniformLocation(C,"modelViewMatrix"),h=k.getUniformLocation(C,"projectionMatrix"),d=k.getUniformLocation(C,"fogType"),f=k.getUniformLocation(C,"fogDensity"),m=k.getUniformLocation(C,"fogNear"),g=k.getUniformLocation(C,"fogFar"),y=k.getUniformLocation(C,"fogColor"),v=k.getUniformLocation(C,"alphaTest"),E=document.createElement("canvas"),E.width=8,E.height=8,N=E.getContext("2d"),N.fillStyle="white",N.fillRect(0,0,8,8),_=new a.Texture(E),_.needsUpdate=!0}k.useProgram(C),k.enableVertexAttribArray(b),k.enableVertexAttribArray(S),k.disable(k.CULL_FACE),k.enable(k.BLEND),k.bindBuffer(k.ARRAY_BUFFER,w),k.vertexAttribPointer(b,2,k.FLOAT,!1,16,0),k.vertexAttribPointer(S,2,k.FLOAT,!1,16,8),k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,x),k.uniformMatrix4fv(h,!1,M.projectionMatrix.elements),k.activeTexture(k.TEXTURE0),k.uniform1i(c,0),N=E=0,(O=P.fog)?(k.uniform3f(y,O.color.r,O.color.g,O.color.b),O instanceof a.Fog?(k.uniform1f(m,O.near),k.uniform1f(g,O.far),k.uniform1i(d,1),N=E=1):O instanceof a.FogExp2&&(k.uniform1f(f,O.density),k.uniform1i(d,2),N=E=2)):(k.uniform1i(d,0),N=E=0);for(var O=0,I=t.length;O<I;O++){var V=t[O];V._modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,V.matrixWorld),V.z=-V._modelViewMatrix.elements[14]}t.sort(n);for(var L=[],O=0,I=t.length;O<I;O++){var V=t[O],R=V.material;k.uniform1f(v,R.alphaTest),k.uniformMatrix4fv(p,!1,V._modelViewMatrix.elements),V.matrixWorld.decompose(A,D,T),L[0]=T.x,L[1]=T.y,V=0,P.fog&&R.fog&&(V=N),E!==V&&(k.uniform1i(d,V),E=V),null!==R.map?(k.uniform2f(r,R.map.offset.x,R.map.offset.y),k.uniform2f(i,R.map.repeat.x,R.map.repeat.y)):(k.uniform2f(r,0,0),k.uniform2f(i,1,1)),k.uniform1f(u,R.opacity),k.uniform3f(l,R.color.r,R.color.g,R.color.b),k.uniform1f(o,R.rotation),k.uniform2fv(s,L),e.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst),e.setDepthTest(R.depthTest),e.setDepthWrite(R.depthWrite),R.map&&R.map.image&&R.map.image.width?e.setTexture(R.map,0):e.setTexture(_,0),k.drawElements(k.TRIANGLES,6,k.UNSIGNED_SHORT,0)}k.enable(k.CULL_FACE),e.resetGLState()}}},a.GeometryUtils={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t instanceof a.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},a.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,n,r){var i=new a.ImageLoader;i.crossOrigin=this.crossOrigin;var o=new a.Texture(void 0,t);return i.load(e,function(e){o.image=e,o.needsUpdate=!0,n&&n(o)},void 0,function(e){r&&r(e)}),o.sourceFile=e,o},loadTextureCube:function(e,t,n,r){var i=new a.ImageLoader;i.crossOrigin=this.crossOrigin;var o=new a.CubeTexture([],t);o.flipY=!1;var s=0;t=function(t){i.load(e[t],function(e){o.images[t]=e,s+=1,6===s&&(o.needsUpdate=!0,n&&n(o))},void 0,r)};for(var l=0,c=e.length;l<c;++l)t(l);return o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var n=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t|=1;var r=e.width,i=e.height,o=document.createElement("canvas");o.width=r,o.height=i;var s=o.getContext("2d");s.drawImage(e,0,0);for(var a=s.getImageData(0,0,r,i).data,l=s.createImageData(r,i),c=l.data,u=0;u<r;u++)for(var p=0;p<i;p++){var h=0>p-1?0:p-1,d=p+1>i-1?i-1:p+1,f=0>u-1?0:u-1,m=u+1>r-1?r-1:u+1,g=[],y=[0,0,a[4*(p*r+u)]/255*t];for(g.push([-1,0,a[4*(p*r+f)]/255*t]),g.push([-1,-1,a[4*(h*r+f)]/255*t]),g.push([0,-1,a[4*(h*r+u)]/255*t]),g.push([1,-1,a[4*(h*r+m)]/255*t]),g.push([1,0,a[4*(p*r+m)]/255*t]),g.push([1,1,a[4*(d*r+m)]/255*t]),g.push([0,1,a[4*(d*r+u)]/255*t]),g.push([-1,1,a[4*(d*r+f)]/255*t]),h=[],f=g.length,d=0;d<f;d++){var m=g[d],v=g[(d+1)%f],m=[m[0]-y[0],m[1]-y[1],m[2]-y[2]],v=[v[0]-y[0],v[1]-y[1],v[2]-y[2]];h.push(n([m[1]*v[2]-m[2]*v[1],m[2]*v[0]-m[0]*v[2],m[0]*v[1]-m[1]*v[0]]))}for(g=[0,0,0],d=0;d<h.length;d++)g[0]+=h[d][0],g[1]+=h[d][1],g[2]+=h[d][2];g[0]/=h.length,g[1]/=h.length,g[2]/=h.length,y=4*(p*r+u),c[y]=(g[0]+1)/2*255|0,c[y+1]=(g[1]+1)/2*255|0,c[y+2]=255*g[2]|0,c[y+3]=255}return s.putImageData(l,0,0),o},generateDataTexture:function(e,t,n){var r=e*t,i=new Uint8Array(3*r),o=Math.floor(255*n.r),s=Math.floor(255*n.g);n=Math.floor(255*n.b);for(var l=0;l<r;l++)i[3*l]=o,i[3*l+1]=s,i[3*l+2]=n;return e=new a.DataTexture(i,e,t,a.RGBFormat),e.needsUpdate=!0,e}},a.SceneUtils={createMultiMaterialObject:function(e,t){for(var n=new a.Object3D,r=0,i=t.length;r<i;r++)n.add(new a.Mesh(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new a.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},a.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase();return this.faces[t]=this.faces[t]||{},this.faces[t][e.cssFontWeight]=this.faces[t][e.cssFontWeight]||{},this.faces[t][e.cssFontWeight][e.cssFontStyle]=e,this.faces[t][e.cssFontWeight][e.cssFontStyle]=e},drawText:function(e){var t=this.getFace(),n=this.size/t.resolution,r=0,i=String(e).split(""),o=i.length,s=[];for(e=0;e<o;e++){var l=new a.Path,l=this.extractGlyphPoints(i[e],t,n,r,l),r=r+l.offset;s.push(l.path)}return{paths:s,offset:r/2}},extractGlyphPoints:function(e,t,n,r,i){var o,s,l,c,u,p,h,d,f,m,g,y=[],v=t.glyphs[e]||t.glyphs["?"];if(v){if(v.o)for(t=v._cachedOutline||(v._cachedOutline=v.o.split(" ")),c=t.length,e=0;e<c;)switch(l=t[e++]){case"m":l=t[e++]*n+r,u=t[e++]*n,i.moveTo(l,u);break;case"l":l=t[e++]*n+r,u=t[e++]*n,i.lineTo(l,u);break;case"q":if(l=t[e++]*n+r,u=t[e++]*n,d=t[e++]*n+r,f=t[e++]*n,i.quadraticCurveTo(d,f,l,u),o=y[y.length-1])for(p=o.x,h=o.y,o=1,s=this.divisions;o<=s;o++){var b=o/s;a.Shape.Utils.b2(b,p,d,l),a.Shape.Utils.b2(b,h,f,u)}break;case"b":if(l=t[e++]*n+r,u=t[e++]*n,d=t[e++]*n+r,f=t[e++]*n,m=t[e++]*n+r,g=t[e++]*n,i.bezierCurveTo(d,f,m,g,l,u),o=y[y.length-1])for(p=o.x,h=o.y,o=1,s=this.divisions;o<=s;o++)b=o/s,a.Shape.Utils.b3(b,p,d,m,l),a.Shape.Utils.b3(b,h,f,g,u)}return{offset:v.ha*n,path:i}}}},a.FontUtils.generateShapes=function(e,t){t=t||{};var n=void 0!==t.curveSegments?t.curveSegments:4,r=void 0!==t.font?t.font:"helvetiker",i=void 0!==t.weight?t.weight:"normal",o=void 0!==t.style?t.style:"normal";for(a.FontUtils.size=void 0!==t.size?t.size:100,a.FontUtils.divisions=n,a.FontUtils.face=r,a.FontUtils.weight=i,a.FontUtils.style=o,n=a.FontUtils.drawText(e).paths,r=[],i=0,o=n.length;i<o;i++)Array.prototype.push.apply(r,n[i].toShapes());return r},function(e){var t=function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n};return e.Triangulate=function(e,n){var r=e.length;if(3>r)return null;var i,o,s,a=[],l=[],c=[];if(0<t(e))for(o=0;o<r;o++)l[o]=o;else for(o=0;o<r;o++)l[o]=r-1-o;var u=2*r;for(o=r-1;2<r;){if(0>=u--){console.log("Warning, unable to triangulate polygon!");break}i=o,r<=i&&(i=0),o=i+1,r<=o&&(o=0),s=o+1,r<=s&&(s=0);var p;e:{var h=p=void 0,d=void 0,f=void 0,m=void 0,g=void 0,y=void 0,v=void 0,b=void 0,h=e[l[i]].x,d=e[l[i]].y,f=e[l[o]].x,m=e[l[o]].y,g=e[l[s]].x,y=e[l[s]].y;if(1e-10>(f-h)*(y-d)-(m-d)*(g-h))p=!1;else{var S=void 0,w=void 0,x=void 0,C=void 0,_=void 0,k=void 0,A=void 0,D=void 0,T=void 0,P=void 0,T=D=A=b=v=void 0,S=g-f,w=y-m,x=h-g,C=d-y,_=f-h,k=m-d;for(p=0;p<r;p++)if(v=e[l[p]].x,b=e[l[p]].y,!(v===h&&b===d||v===f&&b===m||v===g&&b===y)&&(A=v-h,D=b-d,T=v-f,P=b-m,v-=g,b-=y,T=S*P-w*T,A=_*D-k*A,D=x*b-C*v,-1e-10<=T&&-1e-10<=D&&-1e-10<=A)){p=!1;break e}p=!0}}if(p){for(a.push([e[l[i]],e[l[o]],e[l[s]]]),c.push([l[i],l[o],l[s]]),i=o,s=o+1;s<r;i++,s++)l[i]=l[s];r--,u=2*r}}return n?c:a},e.Triangulate.area=t,e}(a.FontUtils),self._typeface_js={faces:a.FontUtils.faces,loadFace:a.FontUtils.loadFace},a.typeface_js=self._typeface_js,a.Audio=function(e){a.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},a.Audio.prototype=Object.create(a.Object3D.prototype),a.Audio.prototype.constructor=a.Audio,a.Audio.prototype.load=function(e){var t=this,n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.source.connect(t.panner),t.source.start(0)})},n.send(),this},a.Audio.prototype.setLoop=function(e){this.source.loop=e},a.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},a.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},a.Audio.prototype.updateMatrixWorld=function(){var e=new a.Vector3;return function(t){a.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),a.AudioListener=function(){a.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},a.AudioListener.prototype=Object.create(a.Object3D.prototype),a.AudioListener.prototype.constructor=a.AudioListener,a.AudioListener.prototype.updateMatrixWorld=function(){var e=new a.Vector3,t=new a.Quaternion,n=new a.Vector3,r=new a.Vector3,i=new a.Vector3,o=new a.Vector3;return function(s){a.Object3D.prototype.updateMatrixWorld.call(this,s),s=this.context.listener;var l=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),i.subVectors(e,o),s.setPosition(e.x,e.y,e.z),s.setOrientation(r.x,r.y,r.z,l.x,l.y,l.z),s.setVelocity(i.x,i.y,i.z),o.copy(e)}}(),a.Curve=function(){},a.Curve.prototype.getPoint=function(e){return console.log("Warning, getPoint() not implemented!"),null},a.Curve.prototype.getPointAt=function(e){return e=this.getUtoTmapping(e),this.getPoint(e)},a.Curve.prototype.getPoints=function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPoint(t/e));return n},a.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n},a.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},a.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r},a.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},a.Curve.prototype.getUtoTmapping=function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t?t:e*r[o-1];for(var s,a=0,l=o-1;a<=l;)if(i=Math.floor(a+(l-a)/2),s=r[i]-n,0>s)a=i+1;else{if(!(0<s)){l=i;break}l=i-1}return i=l,r[i]==n?i/(o-1):(a=r[i],r=(i+(n-a)/(r[i+1]-a))/(o-1))},a.Curve.prototype.getTangent=function(e){var t=e-1e-4;return e+=1e-4,0>t&&(t=0),1<e&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},a.Curve.prototype.getTangentAt=function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},a.Curve.Utils={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,t,n,r,i){e=.5*(n-e),r=.5*(r-t);var o=i*i;return(2*t-2*n+e+r)*i*o+(-3*t+3*n-2*e-r)*o+e*i+t}},a.Curve.create=function(e,t){return e.prototype=Object.create(a.Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},a.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},a.CurvePath.prototype=Object.create(a.Curve.prototype),a.CurvePath.prototype.constructor=a.CurvePath,a.CurvePath.prototype.add=function(e){this.curves.push(e)},a.CurvePath.prototype.checkConnection=function(){},a.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new a.LineCurve(t,e))},a.CurvePath.prototype.getPoint=function(e){var t=e*this.getLength(),n=this.getCurveLengths();for(e=0;e<n.length;){if(n[e]>=t)return t=n[e]-t,e=this.curves[e],t=1-t/e.getLength(),e.getPointAt(t);e++}return null},a.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},a.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],n=0,r=this.curves.length;for(e=0;e<r;e++)n+=this.curves[e].getLength(),t.push(n);return this.cacheLengths=t},a.CurvePath.prototype.getBoundingBox=function(){var e,t,n,r,i,o,s=this.getPoints();e=t=Number.NEGATIVE_INFINITY,r=i=Number.POSITIVE_INFINITY;var l,c,u,p,h=s[0]instanceof a.Vector3;for(p=h?new a.Vector3:new a.Vector2,c=0,u=s.length;c<u;c++)l=s[c],l.x>e?e=l.x:l.x<r&&(r=l.x),l.y>t?t=l.y:l.y<i&&(i=l.y),h&&(l.z>n?n=l.z:l.z<o&&(o=l.z)),p.add(l);return s={minX:r,minY:i,maxX:e,maxY:t},h&&(s.maxZ=n,s.minZ=o),s},a.CurvePath.prototype.createPointsGeometry=function(e){return e=this.getPoints(e,!0),this.createGeometry(e)},a.CurvePath.prototype.createSpacedPointsGeometry=function(e){return e=this.getSpacedPoints(e,!0),this.createGeometry(e)},a.CurvePath.prototype.createGeometry=function(e){for(var t=new a.Geometry,n=0;n<e.length;n++)t.vertices.push(new a.Vector3(e[n].x,e[n].y,e[n].z||0));return t},a.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},a.CurvePath.prototype.getTransformedPoints=function(e,t){var n,r,i=this.getPoints(e);for(t||(t=this.bends),n=0,r=t.length;n<r;n++)i=this.getWrapPoints(i,t[n]);return i},a.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var n,r,i=this.getSpacedPoints(e);for(t||(t=this.bends),n=0,r=t.length;n<r;n++)i=this.getWrapPoints(i,t[n]);return i},a.CurvePath.prototype.getWrapPoints=function(e,t){var n,r,i,o,s,a,l=this.getBoundingBox();for(n=0,r=e.length;n<r;n++)i=e[n],o=i.x,s=i.y,a=o/l.maxX,a=t.getUtoTmapping(a,o),o=t.getPoint(a),a=t.getTangent(a),a.set(-a.y,a.x).multiplyScalar(s),i.x=o.x+a.x,i.y=o.y+a.y;return e},a.Gyroscope=function(){a.Object3D.call(this)},a.Gyroscope.prototype=Object.create(a.Object3D.prototype),a.Gyroscope.prototype.constructor=a.Gyroscope,a.Gyroscope.prototype.updateMatrixWorld=function(){var e=new a.Vector3,t=new a.Quaternion,n=new a.Vector3,r=new a.Vector3,i=new a.Quaternion,o=new a.Vector3;return function(s){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||s)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(r,i,o),this.matrix.decompose(e,t,n),this.matrixWorld.compose(r,t,o)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,s=!0);for(var a=0,l=this.children.length;a<l;a++)this.children[a].updateMatrixWorld(s)}}(),a.Path=function(e){a.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},a.Path.prototype=Object.create(a.CurvePath.prototype),a.Path.prototype.constructor=a.Path,a.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},a.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},a.Path.prototype.moveTo=function(e,t){var n=Array.prototype.slice.call(arguments);this.actions.push({action:a.PathActions.MOVE_TO,args:n})},a.Path.prototype.lineTo=function(e,t){var n=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,r=new a.LineCurve(new a.Vector2(r[r.length-2],r[r.length-1]),new a.Vector2(e,t));this.curves.push(r),this.actions.push({action:a.PathActions.LINE_TO,args:n})},a.Path.prototype.quadraticCurveTo=function(e,t,n,r){var i=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,o=new a.QuadraticBezierCurve(new a.Vector2(o[o.length-2],o[o.length-1]),new a.Vector2(e,t),new a.Vector2(n,r));this.curves.push(o),this.actions.push({action:a.PathActions.QUADRATIC_CURVE_TO,args:i})},a.Path.prototype.bezierCurveTo=function(e,t,n,r,i,o){var s=Array.prototype.slice.call(arguments),l=this.actions[this.actions.length-1].args,l=new a.CubicBezierCurve(new a.Vector2(l[l.length-2],l[l.length-1]),new a.Vector2(e,t),new a.Vector2(n,r),new a.Vector2(i,o));this.curves.push(l),this.actions.push({action:a.PathActions.BEZIER_CURVE_TO,args:s})},a.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,n=[new a.Vector2(n[n.length-2],n[n.length-1])];Array.prototype.push.apply(n,e),n=new a.SplineCurve(n),this.curves.push(n),this.actions.push({action:a.PathActions.CSPLINE_THRU,args:t})},a.Path.prototype.arc=function(e,t,n,r,i,o){var s=this.actions[this.actions.length-1].args;this.absarc(e+s[s.length-2],t+s[s.length-1],n,r,i,o)},a.Path.prototype.absarc=function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},a.Path.prototype.ellipse=function(e,t,n,r,i,o,s){var a=this.actions[this.actions.length-1].args;this.absellipse(e+a[a.length-2],t+a[a.length-1],n,r,i,o,s)},a.Path.prototype.absellipse=function(e,t,n,r,i,o,s){var l=Array.prototype.slice.call(arguments),c=new a.EllipseCurve(e,t,n,r,i,o,s);this.curves.push(c),c=c.getPoint(1),l.push(c.x),l.push(c.y),this.actions.push({action:a.PathActions.ELLIPSE,args:l})},a.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var n=[],r=0;r<e;r++)n.push(this.getPoint(r/e));return n},a.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var n,r,i,o,s,l,c,u,p,h,d,f,m,g=[];for(n=0,r=this.actions.length;n<r;n++)switch(i=this.actions[n],o=i.action,i=i.args,o){case a.PathActions.MOVE_TO:g.push(new a.Vector2(i[0],i[1]));break;case a.PathActions.LINE_TO:g.push(new a.Vector2(i[0],i[1]));break;case a.PathActions.QUADRATIC_CURVE_TO:for(s=i[2],l=i[3],p=i[0],h=i[1],0<g.length?(o=g[g.length-1],d=o.x,f=o.y):(o=this.actions[n-1].args,d=o[o.length-2],f=o[o.length-1]),i=1;i<=e;i++)m=i/e,o=a.Shape.Utils.b2(m,d,p,s),m=a.Shape.Utils.b2(m,f,h,l),g.push(new a.Vector2(o,m));break;case a.PathActions.BEZIER_CURVE_TO:for(s=i[4],l=i[5],p=i[0],h=i[1],c=i[2],u=i[3],0<g.length?(o=g[g.length-1],d=o.x,f=o.y):(o=this.actions[n-1].args,d=o[o.length-2],f=o[o.length-1]),i=1;i<=e;i++)m=i/e,o=a.Shape.Utils.b3(m,d,p,c,s),m=a.Shape.Utils.b3(m,f,h,u,l),g.push(new a.Vector2(o,m));break;case a.PathActions.CSPLINE_THRU:for(o=this.actions[n-1].args,m=[new a.Vector2(o[o.length-2],o[o.length-1])],o=e*i[0].length,m=m.concat(i[0]),m=new a.SplineCurve(m),i=1;i<=o;i++)g.push(m.getPointAt(i/o));break;case a.PathActions.ARC:for(s=i[0],l=i[1],h=i[2],c=i[3],o=i[4],p=!!i[5],d=o-c,f=2*e,i=1;i<=f;i++)m=i/f,p||(m=1-m),m=c+m*d,o=s+h*Math.cos(m),m=l+h*Math.sin(m),g.push(new a.Vector2(o,m));break;case a.PathActions.ELLIPSE:for(s=i[0],l=i[1],h=i[2],u=i[3],c=i[4],o=i[5],p=!!i[6],d=o-c,f=2*e,i=1;i<=f;i++)m=i/f,p||(m=1-m),m=c+m*d,o=s+h*Math.cos(m),m=l+u*Math.sin(m),g.push(new a.Vector2(o,m))}return n=g[g.length-1],1e-10>Math.abs(n.x-g[0].x)&&1e-10>Math.abs(n.y-g[0].y)&&g.splice(g.length-1,1),t&&g.push(g[0]),g},a.Path.prototype.toShapes=function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new a.Shape;o.actions=i.actions,o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var s=t[i],a=t[o],l=a.x-s.x,c=a.y-s.y;if(1e-10<Math.abs(c)){if(0>c&&(s=t[o],l=-l,a=t[i],c=-c),!(e.y<s.y||e.y>a.y))if(e.y==s.y){if(e.x==s.x)return!0}else{if(i=c*(e.x-s.x)-l*(e.y-s.y),0==i)return!0;0>i||(r=!r)}}else if(e.y==s.y&&(a.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=a.x))return!0}return r}var i=function(e){var t,n,r,i,o=[],s=new a.Path;for(t=0,n=e.length;t<n;t++)r=e[t],i=r.args,r=r.action,r==a.PathActions.MOVE_TO&&0!=s.actions.length&&(o.push(s),s=new a.Path),s[r].apply(s,i);return 0!=s.actions.length&&o.push(s),o}(this.actions);if(0==i.length)return[];if(!0===t)return n(i);var o,s,l,c=[];if(1==i.length)return s=i[0],l=new a.Shape,l.actions=s.actions,l.curves=s.curves,c.push(l),c;var u=!a.Shape.Utils.isClockWise(i[0].getPoints()),u=e?!u:u;l=[];var p,h=[],d=[],f=0;h[f]=void 0,d[f]=[];var m,g;for(m=0,g=i.length;m<g;m++)s=i[m],p=s.getPoints(),o=a.Shape.Utils.isClockWise(p),(o=e?!o:o)?(!u&&h[f]&&f++,h[f]={s:new a.Shape,p:p},h[f].s.actions=s.actions,h[f].s.curves=s.curves,u&&f++,d[f]=[]):d[f].push({h:s,p:p[0]});if(!h[0])return n(i);if(1<h.length){for(m=!1,g=[],s=0,i=h.length;s<i;s++)l[s]=[];for(s=0,i=h.length;s<i;s++)for(o=d[s],u=0;u<o.length;u++){f=o[u],p=!0;for(var y=0;y<h.length;y++)r(f.p,h[y].p)&&(s!=y&&g.push({froms:s,tos:y,hole:u}),p?(p=!1,l[y].push(f)):m=!0);p&&l[s].push(f)}0<g.length&&(m||(d=l))}for(m=0,g=h.length;m<g;m++)for(l=h[m].s,c.push(l),s=d[m],i=0,o=s.length;i<o;i++)l.holes.push(s[i].h);return c},a.Shape=function(){a.Path.apply(this,arguments),this.holes=[]},a.Shape.prototype=Object.create(a.Path.prototype),a.Shape.prototype.constructor=a.Shape,a.Shape.prototype.extrude=function(e){return new a.ExtrudeGeometry(this,e)},a.Shape.prototype.makeGeometry=function(e){return new a.ShapeGeometry(this,e)},a.Shape.prototype.getPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;t<n;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},a.Shape.prototype.getSpacedPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;t<n;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},a.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},a.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},a.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},a.Shape.Utils={triangulateShape:function(e,t){function n(e,t,n){return e.x!=t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function r(e,t,r,i,o){var s=t.x-e.x,a=t.y-e.y,l=i.x-r.x,c=i.y-r.y,u=e.x-r.x,p=e.y-r.y,h=a*l-s*c,d=a*u-s*p;if(1e-10<Math.abs(h)){if(0<h){if(0>d||d>h)return[];if(l=c*u-l*p,0>l||l>h)return[]}else{if(0<d||d<h)return[];if(l=c*u-l*p,0<l||l<h)return[]}return 0==l?!o||0!=d&&d!=h?[e]:[]:l==h?!o||0!=d&&d!=h?[t]:[]:0==d?[r]:d==h?[i]:(o=l/h,[{x:e.x+o*s,y:e.y+o*a}])}return 0!=d||c*u!=l*p?[]:(a=0==s&&0==a,l=0==l&&0==c,a&&l?e.x!=r.x||e.y!=r.y?[]:[e]:a?n(r,i,e)?[e]:[]:l?n(e,t,r)?[r]:[]:(0!=s?(e.x<t.x?(s=e,l=e.x,a=t,e=t.x):(s=t,l=t.x,a=e,e=e.x),r.x<i.x?(t=r,h=r.x,c=i,r=i.x):(t=i,h=i.x,c=r,r=r.x)):(e.y<t.y?(s=e,l=e.y,a=t,e=t.y):(s=t,l=t.y,a=e,e=e.y),r.y<i.y?(t=r,h=r.y,c=i,r=i.y):(t=i,h=i.y,c=r,r=r.y)),l<=h?e<h?[]:e==h?o?[]:[t]:e<=r?[t,a]:[t,c]:l>r?[]:l==r?o?[]:[s]:e<=r?[s,a]:[s,c]))}function i(e,t,n,r){var i=t.x-e.x,o=t.y-e.y;t=n.x-e.x,n=n.y-e.y;var s=r.x-e.x;return r=r.y-e.y,e=i*n-o*t,i=i*r-o*s,1e-10<Math.abs(e)?(t=s*n-r*t,0<e?0<=i&&0<=t:0<=i||0<=t):0<i}var o,s,l,c,u,p={};for(l=e.concat(),o=0,s=t.length;o<s;o++)Array.prototype.push.apply(l,t[o]);for(o=0,s=l.length;o<s;o++)u=l[o].x+":"+l[o].y,void 0!==p[u]&&console.log("Duplicate point",u),p[u]=o;o=function(e,t){function n(e,t){var n=g.length-1,r=e-1;0>r&&(r=n);var o=e+1;return o>n&&(o=0),!!(n=i(g[e],g[r],g[o],a[t]))&&(n=a.length-1,r=t-1,0>r&&(r=n),o=t+1,o>n&&(o=0),!!(n=i(a[t],a[r],a[o],g[e])))}function o(e,t){var n,i;for(n=0;n<g.length;n++)if(i=n+1,i%=g.length,i=r(e,t,g[n],g[i],!0),0<i.length)return!0;return!1}function s(e,n){var i,o,s,a;for(i=0;i<y.length;i++)for(o=t[y[i]],s=0;s<o.length;s++)if(a=s+1,a%=o.length,a=r(e,n,o[s],o[a],!0),0<a.length)return!0;return!1}var a,l,c,u,p,h,d,f,m,g=e.concat(),y=[],v=[],b=0;for(l=t.length;b<l;b++)y.push(b);d=0;for(var S=2*y.length;0<y.length;){if(S--,0>S){console.log("Infinite Loop! Holes left:"+y.length+", Probably Hole outside Shape!");break}for(c=d;c<g.length;c++){for(u=g[c],l=-1,b=0;b<y.length;b++)if(p=y[b],h=u.x+":"+u.y+":"+p,void 0===v[h]){for(a=t[p],f=0;f<a.length;f++)if(p=a[f],n(c,f)&&!o(u,p)&&!s(u,p)){l=f,y.splice(b,1),d=g.slice(0,c+1),p=g.slice(c),f=a.slice(l),m=a.slice(0,l+1),g=d.concat(f).concat(m).concat(p),d=c;break}if(0<=l)break;v[h]=!0}if(0<=l)break}}return g}(e,t);var h=a.FontUtils.Triangulate(o,!1);for(o=0,s=h.length;o<s;o++)for(c=h[o],l=0;3>l;l++)u=c[l].x+":"+c[l].y,u=p[u],void 0!==u&&(c[l]=u);return h.concat()},isClockWise:function(e){return 0>a.FontUtils.Triangulate.area(e)},b2p0:function(e,t){var n=1-e;return n*n*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,n,r){return this.b2p0(e,t)+this.b2p1(e,n)+this.b2p2(e,r)},b3p0:function(e,t){var n=1-e;return n*n*n*t},b3p1:function(e,t){var n=1-e;return 3*n*n*e*t},b3p2:function(e,t){return 3*(1-e)*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,n,r,i){return this.b3p0(e,t)+this.b3p1(e,n)+this.b3p2(e,r)+this.b3p3(e,i)}},a.LineCurve=function(e,t){this.v1=e,this.v2=t},a.LineCurve.prototype=Object.create(a.Curve.prototype),a.LineCurve.prototype.constructor=a.LineCurve,a.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},a.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},a.LineCurve.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},a.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},a.QuadraticBezierCurve.prototype=Object.create(a.Curve.prototype),a.QuadraticBezierCurve.prototype.constructor=a.QuadraticBezierCurve,a.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new a.Vector2;return t.x=a.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=a.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},a.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new a.Vector2;return t.x=a.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=a.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},a.CubicBezierCurve=function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},a.CubicBezierCurve.prototype=Object.create(a.Curve.prototype),a.CubicBezierCurve.prototype.constructor=a.CubicBezierCurve,a.CubicBezierCurve.prototype.getPoint=function(e){var t;return t=a.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e=a.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new a.Vector2(t,e)},a.CubicBezierCurve.prototype.getTangent=function(e){var t;return t=a.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e=a.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t=new a.Vector2(t,e),t.normalize(),t},a.SplineCurve=function(e){this.points=void 0==e?[]:e},a.SplineCurve.prototype=Object.create(a.Curve.prototype),a.SplineCurve.prototype.constructor=a.SplineCurve,a.SplineCurve.prototype.getPoint=function(e){var t=this.points;e*=t.length-1;var n=Math.floor(e);e-=n;var r=t[0==n?n:n-1],i=t[n],o=t[n>t.length-2?t.length-1:n+1],t=t[n>t.length-3?t.length-1:n+2],n=new a.Vector2;return n.x=a.Curve.Utils.interpolate(r.x,i.x,o.x,t.x,e),n.y=a.Curve.Utils.interpolate(r.y,i.y,o.y,t.y,e),n},a.EllipseCurve=function(e,t,n,r,i,o,s){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s},a.EllipseCurve.prototype=Object.create(a.Curve.prototype),a.EllipseCurve.prototype.constructor=a.EllipseCurve,a.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;return 0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),e=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t,t=new a.Vector2,t.x=this.aX+this.xRadius*Math.cos(e),t.y=this.aY+this.yRadius*Math.sin(e),t},a.ArcCurve=function(e,t,n,r,i,o){a.EllipseCurve.call(this,e,t,n,n,r,i,o)},a.ArcCurve.prototype=Object.create(a.EllipseCurve.prototype),a.ArcCurve.prototype.constructor=a.ArcCurve,a.LineCurve3=a.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new a.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),a.QuadraticBezierCurve3=a.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=new a.Vector3;return t.x=a.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=a.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=a.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t}),a.CubicBezierCurve3=a.Curve.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=new a.Vector3;return t.x=a.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=a.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=a.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t}),a.SplineCurve3=a.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points;e*=t.length-1;var n=Math.floor(e);e-=n;var r=t[0==n?n:n-1],i=t[n],o=t[n>t.length-2?t.length-1:n+1],t=t[n>t.length-3?t.length-1:n+2],n=new a.Vector3;
return n.x=a.Curve.Utils.interpolate(r.x,i.x,o.x,t.x,e),n.y=a.Curve.Utils.interpolate(r.y,i.y,o.y,t.y,e),n.z=a.Curve.Utils.interpolate(r.z,i.z,o.z,t.z,e),n}),a.ClosedSplineCurve3=a.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points;e*=t.length-0;var n=Math.floor(e);e-=n;var n=n+(0<n?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length),r=t[(n-1)%t.length],i=t[n%t.length],o=t[(n+1)%t.length],t=t[(n+2)%t.length],n=new a.Vector3;return n.x=a.Curve.Utils.interpolate(r.x,i.x,o.x,t.x,e),n.y=a.Curve.Utils.interpolate(r.y,i.y,o.y,t.y,e),n.z=a.Curve.Utils.interpolate(r.z,i.z,o.z,t.z,e),n}),a.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(!0===e.initialized)return e;for(var t=0;t<e.hierarchy.length;t++){for(var n=0;n<e.hierarchy[t].keys.length;n++)if(0>e.hierarchy[t].keys[n].time&&(e.hierarchy[t].keys[n].time=0),void 0!==e.hierarchy[t].keys[n].rot&&!(e.hierarchy[t].keys[n].rot instanceof a.Quaternion)){var r=e.hierarchy[t].keys[n].rot;e.hierarchy[t].keys[n].rot=(new a.Quaternion).fromArray(r)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(r={},n=0;n<e.hierarchy[t].keys.length;n++)for(var i=0;i<e.hierarchy[t].keys[n].morphTargets.length;i++){var o=e.hierarchy[t].keys[n].morphTargets[i];r[o]=-1}for(e.hierarchy[t].usedMorphTargets=r,n=0;n<e.hierarchy[t].keys.length;n++){var s={};for(o in r){for(i=0;i<e.hierarchy[t].keys[n].morphTargets.length;i++)if(e.hierarchy[t].keys[n].morphTargets[i]===o){s[o]=e.hierarchy[t].keys[n].morphTargetsInfluences[i];break}i===e.hierarchy[t].keys[n].morphTargets.length&&(s[o]=0)}e.hierarchy[t].keys[n].morphTargetsInfluences=s}}for(n=1;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].time===e.hierarchy[t].keys[n-1].time&&(e.hierarchy[t].keys.splice(n,1),n--);for(n=0;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].index=n}return e.initialized=!0,e},parse:function(e){var t=function(e,n){n.push(e);for(var r=0;r<e.children.length;r++)t(e.children[r],n)},n=[];if(e instanceof a.SkinnedMesh)for(var r=0;r<e.skeleton.bones.length;r++)n.push(e.skeleton.bones[r]);else t(e,n);return n},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){e=this.animations.indexOf(e),-1!==e&&this.animations.splice(e,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights();for(t=0;t<this.animations.length;t++)this.animations[t].update(e)}},a.Animation=function(e,t){this.root=e,this.data=a.AnimationHandler.init(t),this.hierarchy=a.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=a.AnimationHandler.LINEAR},a.Animation.prototype.keyTypes=["pos","rot","scl"],a.Animation.prototype.play=function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),a.AnimationHandler.play(this)},a.Animation.prototype.stop=function(){this.isPlaying=!1,a.AnimationHandler.stop(this)},a.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e];void 0===n.animationCache&&(n.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===n.animationCache.animations[this.data.name]&&(n.animationCache.animations[this.data.name]={},n.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},n.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},n.animationCache.animations[this.data.name].originalMatrix=n.matrix);for(var n=n.animationCache.animations[this.data.name],r=0;3>r;r++){for(var i=this.keyTypes[r],o=this.data.hierarchy[e].keys[0],s=this.getNextKeyWith(i,e,1);s.time<this.currentTime&&s.index>o.index;)o=s,s=this.getNextKeyWith(i,e,s.index+1);n.prevKey[i]=o,n.nextKey[i]=s}}},a.Animation.prototype.resetBlendWeights=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e];void 0!==n.animationCache&&(n.animationCache.blending.positionWeight=0,n.animationCache.blending.quaternionWeight=0,n.animationCache.blending.scaleWeight=0)}},a.Animation.prototype.update=function(){var e=[],t=new a.Vector3,n=new a.Vector3,r=new a.Quaternion,i=function(e,t){var n,r,i,s,a,l,c=[],u=[];return n=(e.length-1)*t,r=Math.floor(n),n-=r,c[0]=0===r?r:r-1,c[1]=r,c[2]=r>e.length-2?r:r+1,c[3]=r>e.length-3?r:r+2,r=e[c[0]],s=e[c[1]],a=e[c[2]],l=e[c[3]],c=n*n,i=n*c,u[0]=o(r[0],s[0],a[0],l[0],n,c,i),u[1]=o(r[1],s[1],a[1],l[1],n,c,i),u[2]=o(r[2],s[2],a[2],l[2],n,c,i),u},o=function(e,t,n,r,i,o,s){return e=.5*(n-e),r=.5*(r-t),(2*(t-n)+e+r)*s+(-3*(t-n)-2*e-r)*o+e*i+t};return function(o){if(!1!==this.isPlaying&&(this.currentTime+=o*this.timeScale,0!==this.weight)){o=this.data.length,(this.currentTime>o||0>this.currentTime)&&(this.loop?(this.currentTime%=o,0>this.currentTime&&(this.currentTime+=o),this.reset()):this.stop()),o=0;for(var s=this.hierarchy.length;o<s;o++)for(var l=this.hierarchy[o],c=l.animationCache.animations[this.data.name],u=l.animationCache.blending,p=0;3>p;p++){var h=this.keyTypes[p],d=c.prevKey[h],f=c.nextKey[h];if(0<this.timeScale&&f.time<=this.currentTime||0>this.timeScale&&d.time>=this.currentTime){for(d=this.data.hierarchy[o].keys[0],f=this.getNextKeyWith(h,o,1);f.time<this.currentTime&&f.index>d.index;)d=f,f=this.getNextKeyWith(h,o,f.index+1);c.prevKey[h]=d,c.nextKey[h]=f}var m=(this.currentTime-d.time)/(f.time-d.time),g=d[h],y=f[h];0>m&&(m=0),1<m&&(m=1),"pos"===h?this.interpolationType===a.AnimationHandler.LINEAR?(n.x=g[0]+(y[0]-g[0])*m,n.y=g[1]+(y[1]-g[1])*m,n.z=g[2]+(y[2]-g[2])*m,d=this.weight/(this.weight+u.positionWeight),l.position.lerp(n,d),u.positionWeight+=this.weight):this.interpolationType!==a.AnimationHandler.CATMULLROM&&this.interpolationType!==a.AnimationHandler.CATMULLROM_FORWARD||(e[0]=this.getPrevKeyWith("pos",o,d.index-1).pos,e[1]=g,e[2]=y,e[3]=this.getNextKeyWith("pos",o,f.index+1).pos,m=.33*m+.33,f=i(e,m),d=this.weight/(this.weight+u.positionWeight),u.positionWeight+=this.weight,h=l.position,h.x+=(f[0]-h.x)*d,h.y+=(f[1]-h.y)*d,h.z+=(f[2]-h.z)*d,this.interpolationType===a.AnimationHandler.CATMULLROM_FORWARD&&(m=i(e,1.01*m),t.set(m[0],m[1],m[2]),t.sub(h),t.y=0,t.normalize(),m=Math.atan2(t.x,t.z),l.rotation.set(0,m,0))):"rot"===h?(a.Quaternion.slerp(g,y,r,m),0===u.quaternionWeight?(l.quaternion.copy(r),u.quaternionWeight=this.weight):(d=this.weight/(this.weight+u.quaternionWeight),a.Quaternion.slerp(l.quaternion,r,l.quaternion,d),u.quaternionWeight+=this.weight)):"scl"===h&&(n.x=g[0]+(y[0]-g[0])*m,n.y=g[1]+(y[1]-g[1])*m,n.z=g[2]+(y[2]-g[2])*m,d=this.weight/(this.weight+u.scaleWeight),l.scale.lerp(n,d),u.scaleWeight+=this.weight)}return!0}}}(),a.Animation.prototype.getNextKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;for(n=this.interpolationType===a.AnimationHandler.CATMULLROM||this.interpolationType===a.AnimationHandler.CATMULLROM_FORWARD?n<r.length-1?n:r.length-1:n%r.length;n<r.length;n++)if(void 0!==r[n][e])return r[n];return this.data.hierarchy[t].keys[0]},a.Animation.prototype.getPrevKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;for(n=this.interpolationType===a.AnimationHandler.CATMULLROM||this.interpolationType===a.AnimationHandler.CATMULLROM_FORWARD?0<n?n:0:0<=n?n:n+r.length;0<=n;n--)if(void 0!==r[n][e])return r[n];return this.data.hierarchy[t].keys[r.length-1]},a.KeyFrameAnimation=function(e){this.root=e.node,this.data=a.AnimationHandler.init(e),this.hierarchy=a.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.loop=this.isPaused=!0,e=0;for(var t=this.hierarchy.length;e<t;e++){var n=this.data.hierarchy[e].sids,r=this.hierarchy[e];if(this.data.hierarchy[e].keys.length&&n){for(var i=0;i<n.length;i++){var o=n[i],s=this.getNextKeyWith(o,e,0);s&&s.apply(o)}r.matrixAutoUpdate=!1,this.data.hierarchy[e].node.updateMatrix(),r.matrixWorldNeedsUpdate=!0}}},a.KeyFrameAnimation.prototype.play=function(e){if(this.currentTime=void 0!==e?e:0,!1===this.isPlaying){this.isPlaying=!0;var t,n,r=this.hierarchy.length;for(e=0;e<r;e++)t=this.hierarchy[e],n=this.data.hierarchy[e],void 0===n.animationCache&&(n.animationCache={},n.animationCache.prevKey=null,n.animationCache.nextKey=null,n.animationCache.originalMatrix=t.matrix),t=this.data.hierarchy[e].keys,t.length&&(n.animationCache.prevKey=t[0],n.animationCache.nextKey=t[1],this.startTime=Math.min(t[0].time,this.startTime),this.endTime=Math.max(t[t.length-1].time,this.endTime));this.update(0)}this.isPaused=!1,a.AnimationHandler.play(this)},a.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1,a.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],n=this.data.hierarchy[e];if(void 0!==n.animationCache){var r=n.animationCache.originalMatrix;r.copy(t.matrix),t.matrix=r,delete n.animationCache}}},a.KeyFrameAnimation.prototype.update=function(e){if(!1!==this.isPlaying){this.currentTime+=e*this.timeScale,e=this.data.length,!0===this.loop&&this.currentTime>e&&(this.currentTime%=e),this.currentTime=Math.min(this.currentTime,e),e=0;for(var t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e],r=this.data.hierarchy[e],i=r.keys,r=r.animationCache;if(i.length){var o=r.prevKey,s=r.nextKey;if(s.time<=this.currentTime){for(;s.time<this.currentTime&&s.index>o.index;)o=s,s=i[o.index+1];r.prevKey=o,r.nextKey=s}s.time>=this.currentTime?o.interpolate(s,this.currentTime):o.interpolate(s,s.time),this.data.hierarchy[e].node.updateMatrix(),n.matrixWorldNeedsUpdate=!0}}}},a.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,n){for(t=this.data.hierarchy[t].keys,n%=t.length;n<t.length;n++)if(t[n].hasTarget(e))return t[n];return t[0]},a.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,n){for(t=this.data.hierarchy[t].keys,n=0<=n?n:n+t.length;0<=n;n--)if(t[n].hasTarget(e))return t[n];return t[t.length-1]},a.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.currentFrame=this.lastFrame=0,this.isPlaying=!1},a.MorphAnimation.prototype={constructor:a.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(e){if(!1!==this.isPlaying){this.currentTime+=e,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration),e=this.duration/this.frames;var t=Math.floor(this.currentTime/e);t!=this.currentFrame&&(this.mesh.morphTargetInfluences[this.lastFrame]=0,this.mesh.morphTargetInfluences[this.currentFrame]=1,this.mesh.morphTargetInfluences[t]=0,this.lastFrame=this.currentFrame,this.currentFrame=t),this.mesh.morphTargetInfluences[t]=this.currentTime%e/e,this.mesh.morphTargetInfluences[this.lastFrame]=1-this.mesh.morphTargetInfluences[t]}}},a.BoxGeometry=function(e,t,n,r,i,o){function s(e,t,n,r,i,o,s,c){var u,p=l.widthSegments,h=l.heightSegments,d=i/2,f=o/2,m=l.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?u="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(u="y",h=l.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(u="x",p=l.depthSegments);var g=p+1,y=h+1,v=i/p,b=o/h,S=new a.Vector3;for(S[u]=0<s?1:-1,i=0;i<y;i++)for(o=0;o<g;o++){var w=new a.Vector3;w[e]=(o*v-d)*n,w[t]=(i*b-f)*r,w[u]=s,l.vertices.push(w)}for(i=0;i<h;i++)for(o=0;o<p;o++)f=o+g*i,e=o+g*(i+1),t=o+1+g*(i+1),n=o+1+g*i,r=new a.Vector2(o/p,1-i/h),s=new a.Vector2(o/p,1-(i+1)/h),u=new a.Vector2((o+1)/p,1-(i+1)/h),d=new a.Vector2((o+1)/p,1-i/h),f=new a.Face3(f+m,e+m,n+m),f.normal.copy(S),f.vertexNormals.push(S.clone(),S.clone(),S.clone()),f.materialIndex=c,l.faces.push(f),l.faceVertexUvs[0].push([r,s,d]),f=new a.Face3(e+m,t+m,n+m),f.normal.copy(S),f.vertexNormals.push(S.clone(),S.clone(),S.clone()),f.materialIndex=c,l.faces.push(f),l.faceVertexUvs[0].push([s.clone(),u,d.clone()])}a.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.widthSegments=r||1,this.heightSegments=i||1,this.depthSegments=o||1;var l=this;r=e/2,i=t/2,o=n/2,s("z","y",-1,-1,n,t,r,0),s("z","y",1,-1,n,t,-r,1),s("x","z",1,1,e,n,i,2),s("x","z",1,-1,e,n,-i,3),s("x","y",1,-1,e,t,o,4),s("x","y",-1,-1,e,t,-o,5),this.mergeVertices()},a.BoxGeometry.prototype=Object.create(a.Geometry.prototype),a.BoxGeometry.prototype.constructor=a.BoxGeometry,a.CircleGeometry=function(e,t,n,r){a.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o=[];i=new a.Vector3;var s=new a.Vector2(.5,.5);for(this.vertices.push(i),o.push(s),i=0;i<=t;i++){var l=new a.Vector3,c=n+i/t*r;l.x=e*Math.cos(c),l.y=e*Math.sin(c),this.vertices.push(l),o.push(new a.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}for(n=new a.Vector3(0,0,1),i=1;i<=t;i++)this.faces.push(new a.Face3(i,i+1,0,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([o[i].clone(),o[i+1].clone(),s.clone()]);this.computeFaceNormals(),this.boundingSphere=new a.Sphere(new a.Vector3,e)},a.CircleGeometry.prototype=Object.create(a.Geometry.prototype),a.CircleGeometry.prototype.constructor=a.CircleGeometry,a.CubeGeometry=function(e,t,n,r,i,o){return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new a.BoxGeometry(e,t,n,r,i,o)},a.CylinderGeometry=function(e,t,n,r,i,o,s,l){a.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:l},e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,r=r||8,i=i||1,o=void 0!==o&&o,s=void 0!==s?s:0,l=void 0!==l?l:2*Math.PI;var c,u,p=n/2,h=[],d=[];for(u=0;u<=i;u++){var f=[],m=[],g=u/i,y=g*(t-e)+e;for(c=0;c<=r;c++){var v=c/r,b=new a.Vector3;b.x=y*Math.sin(v*l+s),b.y=-g*n+p,b.z=y*Math.cos(v*l+s),this.vertices.push(b),f.push(this.vertices.length-1),m.push(new a.Vector2(v,1-g))}h.push(f),d.push(m)}for(n=(t-e)/n,c=0;c<r;c++)for(0!==e?(s=this.vertices[h[0][c]].clone(),l=this.vertices[h[0][c+1]].clone()):(s=this.vertices[h[1][c]].clone(),l=this.vertices[h[1][c+1]].clone()),s.setY(Math.sqrt(s.x*s.x+s.z*s.z)*n).normalize(),l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*n).normalize(),u=0;u<i;u++){var f=h[u][c],m=h[u+1][c],g=h[u+1][c+1],y=h[u][c+1],v=s.clone(),b=s.clone(),S=l.clone(),w=l.clone(),x=d[u][c].clone(),C=d[u+1][c].clone(),_=d[u+1][c+1].clone(),k=d[u][c+1].clone();this.faces.push(new a.Face3(f,m,y,[v,b,w])),this.faceVertexUvs[0].push([x,C,k]),this.faces.push(new a.Face3(m,g,y,[b.clone(),S,w.clone()])),this.faceVertexUvs[0].push([C.clone(),_,k.clone()])}if(!1===o&&0<e)for(this.vertices.push(new a.Vector3(0,p,0)),c=0;c<r;c++)f=h[0][c],m=h[0][c+1],g=this.vertices.length-1,v=new a.Vector3(0,1,0),b=new a.Vector3(0,1,0),S=new a.Vector3(0,1,0),x=d[0][c].clone(),C=d[0][c+1].clone(),_=new a.Vector2(C.x,0),this.faces.push(new a.Face3(f,m,g,[v,b,S])),this.faceVertexUvs[0].push([x,C,_]);if(!1===o&&0<t)for(this.vertices.push(new a.Vector3(0,-p,0)),c=0;c<r;c++)f=h[i][c+1],m=h[i][c],g=this.vertices.length-1,v=new a.Vector3(0,-1,0),b=new a.Vector3(0,-1,0),S=new a.Vector3(0,-1,0),x=d[i][c+1].clone(),C=d[i][c].clone(),_=new a.Vector2(C.x,1),this.faces.push(new a.Face3(f,m,g,[v,b,S])),this.faceVertexUvs[0].push([x,C,_]);this.computeFaceNormals()},a.CylinderGeometry.prototype=Object.create(a.Geometry.prototype),a.CylinderGeometry.prototype.constructor=a.CylinderGeometry,a.ExtrudeGeometry=function(e,t){"undefined"!=typeof e&&(a.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),this.computeFaceNormals())},a.ExtrudeGeometry.prototype=Object.create(a.Geometry.prototype),a.ExtrudeGeometry.prototype.constructor=a.ExtrudeGeometry,a.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++)this.addShape(e[r],t)},a.ExtrudeGeometry.prototype.addShape=function(e,t){function n(e,t,n){return t||console.log("die"),t.clone().multiplyScalar(n).add(e)}function r(e,t,n){var r=1,r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y,l=r*r+i*i;if(1e-10<Math.abs(r*s-i*o)){var c=Math.sqrt(l),u=Math.sqrt(o*o+s*s),l=t.x-i/c;if(t=t.y+r/c,o=((n.x-s/u-l)*s-(n.y+o/u-t)*o)/(r*s-i*o),n=l+r*o-e.x,e=t+i*o-e.y,r=n*n+e*e,2>=r)return new a.Vector2(n,e);r=Math.sqrt(r/2)}else e=!1,1e-10<r?1e-10<o&&(e=!0):-1e-10>r?-1e-10>o&&(e=!0):Math.sign(i)==Math.sign(s)&&(e=!0),e?(n=-i,e=r,r=Math.sqrt(l)):(n=r,e=i,r=Math.sqrt(l/2));return new a.Vector2(n/r,e/r)}function i(e,t){var n,r;for(j=e.length;0<=--j;){n=j,r=j-1,0>r&&(r=e.length-1);for(var i=0,o=b+2*g,i=0;i<o;i++){var s=B*i,l=B*(i+1),c=t+n+s,s=t+r+s,u=t+r+l,l=t+n+l,c=c+P,s=s+P,u=u+P,l=l+P;T.faces.push(new a.Face3(c,s,l,null,null,C)),T.faces.push(new a.Face3(s,u,l,null,null,C)),c=_.generateSideWallUV(T,c,s,u,l),T.faceVertexUvs[0].push([c[0],c[1],c[3]]),T.faceVertexUvs[0].push([c[1],c[2],c[3]])}}}function o(e,t,n){T.vertices.push(new a.Vector3(e,t,n))}function s(e,t,n){e+=P,t+=P,n+=P,T.faces.push(new a.Face3(e,t,n,null,null,x)),e=_.generateTopUV(T,e,t,n),T.faceVertexUvs[0].push(e)}var l,c,u,p,h,d=void 0!==t.amount?t.amount:100,f=void 0!==t.bevelThickness?t.bevelThickness:6,m=void 0!==t.bevelSize?t.bevelSize:f-2,g=void 0!==t.bevelSegments?t.bevelSegments:3,y=void 0===t.bevelEnabled||t.bevelEnabled,v=void 0!==t.curveSegments?t.curveSegments:12,b=void 0!==t.steps?t.steps:1,S=t.extrudePath,w=!1,x=t.material,C=t.extrudeMaterial,_=void 0!==t.UVGenerator?t.UVGenerator:a.ExtrudeGeometry.WorldUVGenerator;S&&(l=S.getSpacedPoints(b),w=!0,y=!1,c=void 0!==t.frames?t.frames:new a.TubeGeometry.FrenetFrames(S,b,!1),u=new a.Vector3,p=new a.Vector3,h=new a.Vector3),y||(m=f=g=0);var k,A,D,T=this,P=this.vertices.length,S=e.extractPoints(v),v=S.shape,M=S.holes;if(S=!a.Shape.Utils.isClockWise(v)){for(v=v.reverse(),A=0,D=M.length;A<D;A++)k=M[A],a.Shape.Utils.isClockWise(k)&&(M[A]=k.reverse());S=!1}var E=a.Shape.Utils.triangulateShape(v,M),N=v;for(A=0,D=M.length;A<D;A++)k=M[A],v=v.concat(k);var O,I,V,L,R,G,B=v.length,F=E.length,S=[],j=0;for(V=N.length,O=V-1,I=j+1;j<V;j++,O++,I++)O===V&&(O=0),I===V&&(I=0),S[j]=r(N[j],N[O],N[I]);var z,U=[],W=S.concat();for(A=0,D=M.length;A<D;A++){for(k=M[A],z=[],j=0,V=k.length,O=V-1,I=j+1;j<V;j++,O++,I++)O===V&&(O=0),I===V&&(I=0),z[j]=r(k[j],k[O],k[I]);U.push(z),W=W.concat(z)}for(O=0;O<g;O++){for(V=O/g,L=f*(1-V),I=m*Math.sin(V*Math.PI/2),j=0,V=N.length;j<V;j++)R=n(N[j],S[j],I),o(R.x,R.y,-L);for(A=0,D=M.length;A<D;A++)for(k=M[A],z=U[A],j=0,V=k.length;j<V;j++)R=n(k[j],z[j],I),o(R.x,R.y,-L)}for(I=m,j=0;j<B;j++)R=y?n(v[j],W[j],I):v[j],w?(p.copy(c.normals[0]).multiplyScalar(R.x),u.copy(c.binormals[0]).multiplyScalar(R.y),h.copy(l[0]).add(p).add(u),o(h.x,h.y,h.z)):o(R.x,R.y,0);for(V=1;V<=b;V++)for(j=0;j<B;j++)R=y?n(v[j],W[j],I):v[j],w?(p.copy(c.normals[V]).multiplyScalar(R.x),u.copy(c.binormals[V]).multiplyScalar(R.y),h.copy(l[V]).add(p).add(u),o(h.x,h.y,h.z)):o(R.x,R.y,d/b*V);for(O=g-1;0<=O;O--){for(V=O/g,L=f*(1-V),I=m*Math.sin(V*Math.PI/2),j=0,V=N.length;j<V;j++)R=n(N[j],S[j],I),o(R.x,R.y,d+L);for(A=0,D=M.length;A<D;A++)for(k=M[A],z=U[A],j=0,V=k.length;j<V;j++)R=n(k[j],z[j],I),w?o(R.x,R.y+l[b-1].y,l[b-1].x+L):o(R.x,R.y,d+L)}!function(){if(y){var e;for(e=0*B,j=0;j<F;j++)G=E[j],s(G[2]+e,G[1]+e,G[0]+e);for(e=b+2*g,e*=B,j=0;j<F;j++)G=E[j],s(G[0]+e,G[1]+e,G[2]+e)}else{for(j=0;j<F;j++)G=E[j],s(G[2],G[1],G[0]);for(j=0;j<F;j++)G=E[j],s(G[0]+B*b,G[1]+B*b,G[2]+B*b)}}(),function(){var e=0;for(i(N,e),e+=N.length,A=0,D=M.length;A<D;A++)k=M[A],i(k,e),e+=k.length}()};a.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r){return e=e.vertices,t=e[t],n=e[n],r=e[r],[new a.Vector2(t.x,t.y),new a.Vector2(n.x,n.y),new a.Vector2(r.x,r.y)]},generateSideWallUV:function(e,t,n,r,i){return e=e.vertices,t=e[t],n=e[n],r=e[r],i=e[i],.01>Math.abs(t.y-n.y)?[new a.Vector2(t.x,1-t.z),new a.Vector2(n.x,1-n.z),new a.Vector2(r.x,1-r.z),new a.Vector2(i.x,1-i.z)]:[new a.Vector2(t.y,1-t.z),new a.Vector2(n.y,1-n.z),new a.Vector2(r.y,1-r.z),new a.Vector2(i.y,1-i.z)]}};a.ShapeGeometry=function(e,t){a.Geometry.call(this),this.type="ShapeGeometry",!1==e instanceof Array&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},a.ShapeGeometry.prototype=Object.create(a.Geometry.prototype),a.ShapeGeometry.prototype.constructor=a.ShapeGeometry,a.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++)this.addShape(e[n],t);return this},a.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var n,r,i,o=t.material,s=void 0===t.UVGenerator?a.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=this.vertices.length;n=e.extractPoints(void 0!==t.curveSegments?t.curveSegments:12);var c=n.shape,u=n.holes;if(!a.Shape.Utils.isClockWise(c))for(c=c.reverse(),n=0,r=u.length;n<r;n++)i=u[n],a.Shape.Utils.isClockWise(i)&&(u[n]=i.reverse());var p=a.Shape.Utils.triangulateShape(c,u);for(n=0,r=u.length;n<r;n++)i=u[n],c=c.concat(i);for(u=c.length,r=p.length,n=0;n<u;n++)i=c[n],this.vertices.push(new a.Vector3(i.x,i.y,0));for(n=0;n<r;n++)u=p[n],c=u[0]+l,i=u[1]+l,u=u[2]+l,this.faces.push(new a.Face3(c,i,u,null,null,o)),this.faceVertexUvs[0].push(s.generateTopUV(this,c,i,u))},a.LatheGeometry=function(e,t,n,r){a.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=t||12,n=n||0,r=r||2*Math.PI;for(var i=1/(e.length-1),o=1/t,s=0,l=t;s<=l;s++)for(var c=n+s*o*r,u=Math.cos(c),p=Math.sin(c),c=0,h=e.length;c<h;c++){var d=e[c],f=new a.Vector3;f.x=u*d.x-p*d.y,f.y=p*d.x+u*d.y,f.z=d.z,this.vertices.push(f)}for(n=e.length,s=0,l=t;s<l;s++)for(c=0,h=e.length-1;c<h;c++){t=p=c+n*s,r=p+n;var u=p+1+n,p=p+1,d=s*o,f=c*i,m=d+o,g=f+i;this.faces.push(new a.Face3(t,r,p)),this.faceVertexUvs[0].push([new a.Vector2(d,f),new a.Vector2(m,f),new a.Vector2(d,g)]),this.faces.push(new a.Face3(r,u,p)),this.faceVertexUvs[0].push([new a.Vector2(m,f),new a.Vector2(m,g),new a.Vector2(d,g)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},a.LatheGeometry.prototype=Object.create(a.Geometry.prototype),a.LatheGeometry.prototype.constructor=a.LatheGeometry,a.PlaneGeometry=function(e,t,n,r){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),a.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new a.PlaneBufferGeometry(e,t,n,r))},a.PlaneGeometry.prototype=Object.create(a.Geometry.prototype),a.PlaneGeometry.prototype.constructor=a.PlaneGeometry,a.PlaneBufferGeometry=function(e,t,n,r){a.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i=e/2,o=t/2;n=n||1,r=r||1;var s=n+1,l=r+1,c=e/n,u=t/r;t=new Float32Array(s*l*3),e=new Float32Array(s*l*3);for(var p=new Float32Array(s*l*2),h=0,d=0,f=0;f<l;f++)for(var m=f*u-o,g=0;g<s;g++)t[h]=g*c-i,t[h+1]=-m,e[h+2]=1,p[d]=g/n,p[d+1]=1-f/r,h+=3,d+=2;for(h=0,i=new(65535<t.length/3?Uint32Array:Uint16Array)(n*r*6),f=0;f<r;f++)for(g=0;g<n;g++)o=g+s*(f+1),l=g+1+s*(f+1),c=g+1+s*f,i[h]=g+s*f,i[h+1]=o,i[h+2]=c,i[h+3]=o,i[h+4]=l,i[h+5]=c,h+=6;this.addAttribute("index",new a.BufferAttribute(i,1)),this.addAttribute("position",new a.BufferAttribute(t,3)),this.addAttribute("normal",new a.BufferAttribute(e,3)),this.addAttribute("uv",new a.BufferAttribute(p,2))},a.PlaneBufferGeometry.prototype=Object.create(a.BufferGeometry.prototype),a.PlaneBufferGeometry.prototype.constructor=a.PlaneBufferGeometry,a.RingGeometry=function(e,t,n,r,i,o){a.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||0,t=t||50,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):8;var s,l=[],c=e,u=(t-e)/r;for(e=0;e<r+1;e++){for(s=0;s<n+1;s++){var p=new a.Vector3,h=i+s/n*o;p.x=c*Math.cos(h),p.y=c*Math.sin(h),this.vertices.push(p),l.push(new a.Vector2((p.x/t+1)/2,(p.y/t+1)/2))}c+=u}for(t=new a.Vector3(0,0,1),e=0;e<r;e++)for(i=e*(n+1),s=0;s<n;s++)o=h=s+i,u=h+n+1,p=h+n+2,this.faces.push(new a.Face3(o,u,p,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([l[o].clone(),l[u].clone(),l[p].clone()]),o=h,u=h+n+2,p=h+1,this.faces.push(new a.Face3(o,u,p,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([l[o].clone(),l[u].clone(),l[p].clone()]);this.computeFaceNormals(),this.boundingSphere=new a.Sphere(new a.Vector3,c)},a.RingGeometry.prototype=Object.create(a.Geometry.prototype),a.RingGeometry.prototype.constructor=a.RingGeometry,a.SphereGeometry=function(e,t,n,r,i,o,s){a.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var l,c,u=[],p=[];for(c=0;c<=n;c++){var h=[],d=[];for(l=0;l<=t;l++){var f=l/t,m=c/n,g=new a.Vector3;g.x=-e*Math.cos(r+f*i)*Math.sin(o+m*s),g.y=e*Math.cos(o+m*s),g.z=e*Math.sin(r+f*i)*Math.sin(o+m*s),this.vertices.push(g),h.push(this.vertices.length-1),d.push(new a.Vector2(f,1-m))}u.push(h),p.push(d)}for(c=0;c<n;c++)for(l=0;l<t;l++){r=u[c][l+1],i=u[c][l],o=u[c+1][l],s=u[c+1][l+1];var h=this.vertices[r].clone().normalize(),d=this.vertices[i].clone().normalize(),f=this.vertices[o].clone().normalize(),m=this.vertices[s].clone().normalize(),g=p[c][l+1].clone(),y=p[c][l].clone(),v=p[c+1][l].clone(),b=p[c+1][l+1].clone();Math.abs(this.vertices[r].y)===e?(g.x=(g.x+y.x)/2,this.faces.push(new a.Face3(r,o,s,[h,f,m])),this.faceVertexUvs[0].push([g,v,b])):Math.abs(this.vertices[o].y)===e?(v.x=(v.x+b.x)/2,this.faces.push(new a.Face3(r,i,o,[h,d,f])),this.faceVertexUvs[0].push([g,y,v])):(this.faces.push(new a.Face3(r,i,s,[h,d,m])),this.faceVertexUvs[0].push([g,y,b]),this.faces.push(new a.Face3(i,o,s,[d.clone(),f,m.clone()])),this.faceVertexUvs[0].push([y.clone(),v,b.clone()]))}this.computeFaceNormals(),this.boundingSphere=new a.Sphere(new a.Vector3,e)},a.SphereGeometry.prototype=Object.create(a.Geometry.prototype),a.SphereGeometry.prototype.constructor=a.SphereGeometry,a.TextGeometry=function(e,t){t=t||{};var n=a.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),a.ExtrudeGeometry.call(this,n,t),this.type="TextGeometry"},a.TextGeometry.prototype=Object.create(a.ExtrudeGeometry.prototype),a.TextGeometry.prototype.constructor=a.TextGeometry,a.TorusGeometry=function(e,t,n,r,i){a.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=n||8,r=r||6,i=i||2*Math.PI;for(var o=new a.Vector3,s=[],l=[],c=0;c<=n;c++)for(var u=0;u<=r;u++){var p=u/r*i,h=c/n*Math.PI*2;o.x=e*Math.cos(p),o.y=e*Math.sin(p);var d=new a.Vector3;d.x=(e+t*Math.cos(h))*Math.cos(p),d.y=(e+t*Math.cos(h))*Math.sin(p),d.z=t*Math.sin(h),this.vertices.push(d),s.push(new a.Vector2(u/r,c/n)),l.push(d.clone().sub(o).normalize())}for(c=1;c<=n;c++)for(u=1;u<=r;u++)e=(r+1)*c+u-1,t=(r+1)*(c-1)+u-1,i=(r+1)*(c-1)+u,o=(r+1)*c+u,p=new a.Face3(e,t,o,[l[e].clone(),l[t].clone(),l[o].clone()]),this.faces.push(p),this.faceVertexUvs[0].push([s[e].clone(),s[t].clone(),s[o].clone()]),p=new a.Face3(t,i,o,[l[t].clone(),l[i].clone(),l[o].clone()]),this.faces.push(p),this.faceVertexUvs[0].push([s[t].clone(),s[i].clone(),s[o].clone()]);this.computeFaceNormals()},a.TorusGeometry.prototype=Object.create(a.Geometry.prototype),a.TorusGeometry.prototype.constructor=a.TorusGeometry,a.TorusKnotGeometry=function(e,t,n,r,i,o,s){function l(e,t,n,r,i){var o=Math.cos(e),s=Math.sin(e);return e*=t/n,t=Math.cos(e),o*=r*(2+t)*.5,s=r*(2+t)*s*.5,r=i*r*Math.sin(e)*.5,new a.Vector3(o,s,r)}a.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,p:i,q:o,heightScale:s},e=e||100,t=t||40,n=n||64,r=r||8,i=i||2,o=o||3,s=s||1;for(var c=Array(n),u=new a.Vector3,p=new a.Vector3,h=new a.Vector3,d=0;d<n;++d){c[d]=Array(r);var f=d/n*2*i*Math.PI,m=l(f,o,i,e,s),f=l(f+.01,o,i,e,s);for(u.subVectors(f,m),p.addVectors(f,m),h.crossVectors(u,p),p.crossVectors(h,u),h.normalize(),p.normalize(),f=0;f<r;++f){var g=f/r*2*Math.PI,y=-t*Math.cos(g),g=t*Math.sin(g),v=new a.Vector3;v.x=m.x+y*p.x+g*h.x,v.y=m.y+y*p.y+g*h.y,v.z=m.z+y*p.z+g*h.z,c[d][f]=this.vertices.push(v)-1}}for(d=0;d<n;++d)for(f=0;f<r;++f)i=(d+1)%n,o=(f+1)%r,e=c[d][f],t=c[i][f],i=c[i][o],o=c[d][o],s=new a.Vector2(d/n,f/r),u=new a.Vector2((d+1)/n,f/r),p=new a.Vector2((d+1)/n,(f+1)/r),h=new a.Vector2(d/n,(f+1)/r),this.faces.push(new a.Face3(e,t,o)),this.faceVertexUvs[0].push([s,u,h]),this.faces.push(new a.Face3(t,i,o)),this.faceVertexUvs[0].push([u.clone(),p,h.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},a.TorusKnotGeometry.prototype=Object.create(a.Geometry.prototype),a.TorusKnotGeometry.prototype.constructor=a.TorusKnotGeometry,a.TubeGeometry=function(e,t,n,r,i,o){a.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1,o=o||a.TubeGeometry.NoTaper;var s,l,c,u,p,h,d,f,m,g,y=[],v=t+1,b=new a.Vector3;for(f=new a.TubeGeometry.FrenetFrames(e,t,i),m=f.normals,g=f.binormals,this.tangents=f.tangents,this.normals=m,this.binormals=g,f=0;f<v;f++)for(y[f]=[],c=f/(v-1),d=e.getPointAt(c),s=m[f],l=g[f],p=n*o(c),c=0;c<r;c++)u=c/r*2*Math.PI,h=-p*Math.cos(u),u=p*Math.sin(u),b.copy(d),b.x+=h*s.x+u*l.x,b.y+=h*s.y+u*l.y,b.z+=h*s.z+u*l.z,y[f][c]=this.vertices.push(new a.Vector3(b.x,b.y,b.z))-1;for(f=0;f<t;f++)for(c=0;c<r;c++)o=i?(f+1)%t:f+1,v=(c+1)%r,e=y[f][c],n=y[o][c],o=y[o][v],v=y[f][v],b=new a.Vector2(f/t,c/r),m=new a.Vector2((f+1)/t,c/r),g=new a.Vector2((f+1)/t,(c+1)/r),s=new a.Vector2(f/t,(c+1)/r),this.faces.push(new a.Face3(e,n,v)),this.faceVertexUvs[0].push([b,m,s]),this.faces.push(new a.Face3(n,o,v)),this.faceVertexUvs[0].push([m.clone(),g,s.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},a.TubeGeometry.prototype=Object.create(a.Geometry.prototype),a.TubeGeometry.prototype.constructor=a.TubeGeometry,a.TubeGeometry.NoTaper=function(e){return 1},a.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},a.TubeGeometry.FrenetFrames=function(e,t,n){new a.Vector3;var r=new a.Vector3;new a.Vector3;var i=[],o=[],s=[],l=new a.Vector3,c=new a.Matrix4;t+=1;var u,p,h;for(this.tangents=i,this.normals=o,this.binormals=s,u=0;u<t;u++)p=u/(t-1),i[u]=e.getTangentAt(p),i[u].normalize();for(o[0]=new a.Vector3,s[0]=new a.Vector3,e=Number.MAX_VALUE,u=Math.abs(i[0].x),p=Math.abs(i[0].y),h=Math.abs(i[0].z),u<=e&&(e=u,r.set(1,0,0)),p<=e&&(e=p,r.set(0,1,0)),h<=e&&r.set(0,0,1),l.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],l),s[0].crossVectors(i[0],o[0]),u=1;u<t;u++)o[u]=o[u-1].clone(),s[u]=s[u-1].clone(),l.crossVectors(i[u-1],i[u]),1e-4<l.length()&&(l.normalize(),r=Math.acos(a.Math.clamp(i[u-1].dot(i[u]),-1,1)),o[u].applyMatrix4(c.makeRotationAxis(l,r))),s[u].crossVectors(i[u],o[u]);if(n)for(r=Math.acos(a.Math.clamp(o[0].dot(o[t-1]),-1,1)),r/=t-1,0<i[0].dot(l.crossVectors(o[0],o[t-1]))&&(r=-r),u=1;u<t;u++)o[u].applyMatrix4(c.makeRotationAxis(i[u],r*u)),s[u].crossVectors(i[u],o[u])},a.PolyhedronGeometry=function(e,t,n,r){function i(e){var t=e.normalize().clone();t.index=c.vertices.push(t)-1;var n=Math.atan2(e.z,-e.x)/2/Math.PI+.5;return e=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5,t.uv=new a.Vector2(n,1-e),t}function o(e,t,n){var r=new a.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);c.faces.push(r),y.copy(e).add(t).add(n).divideScalar(3),r=Math.atan2(y.z,-y.x),c.faceVertexUvs[0].push([l(e.uv,e,r),l(t.uv,t,r),l(n.uv,n,r)]);
}function s(e,t){var n=Math.pow(2,t);Math.pow(4,t);for(var r=i(c.vertices[e.a]),s=i(c.vertices[e.b]),a=i(c.vertices[e.c]),l=[],u=0;u<=n;u++){l[u]=[];for(var p=i(r.clone().lerp(a,u/n)),h=i(s.clone().lerp(a,u/n)),d=n-u,f=0;f<=d;f++)l[u][f]=0==f&&u==n?p:i(p.clone().lerp(h,f/d))}for(u=0;u<n;u++)for(f=0;f<2*(n-u)-1;f++)r=Math.floor(f/2),0==f%2?o(l[u][r+1],l[u+1][r],l[u][r]):o(l[u][r+1],l[u+1][r+1],l[u+1][r])}function l(e,t,n){return 0>n&&1===e.x&&(e=new a.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new a.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}a.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;for(var c=this,u=0,p=e.length;u<p;u+=3)i(new a.Vector3(e[u],e[u+1],e[u+2]));e=this.vertices;for(var h=[],d=u=0,p=t.length;u<p;u+=3,d++){var f=e[t[u]],m=e[t[u+1]],g=e[t[u+2]];h[d]=new a.Face3(f.index,m.index,g.index,[f.clone(),m.clone(),g.clone()])}for(var y=new a.Vector3,u=0,p=h.length;u<p;u++)s(h[u],r);for(u=0,p=this.faceVertexUvs[0].length;u<p;u++)t=this.faceVertexUvs[0][u],r=t[0].x,e=t[1].x,h=t[2].x,d=Math.max(r,Math.max(e,h)),f=Math.min(r,Math.min(e,h)),.9<d&&.1>f&&(.2>r&&(t[0].x+=1),.2>e&&(t[1].x+=1),.2>h&&(t[2].x+=1));for(u=0,p=this.vertices.length;u<p;u++)this.vertices[u].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new a.Sphere(new a.Vector3,n)},a.PolyhedronGeometry.prototype=Object.create(a.Geometry.prototype),a.PolyhedronGeometry.prototype.constructor=a.PolyhedronGeometry,a.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var n=(1+Math.sqrt(5))/2,r=1/n;a.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t)},a.DodecahedronGeometry.prototype=Object.create(a.Geometry.prototype),a.DodecahedronGeometry.prototype.constructor=a.DodecahedronGeometry,a.IcosahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2;a.PolyhedronGeometry.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},a.IcosahedronGeometry.prototype=Object.create(a.Geometry.prototype),a.IcosahedronGeometry.prototype.constructor=a.IcosahedronGeometry,a.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t},a.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},a.OctahedronGeometry.prototype=Object.create(a.Geometry.prototype),a.OctahedronGeometry.prototype.constructor=a.OctahedronGeometry,a.TetrahedronGeometry=function(e,t){a.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},a.TetrahedronGeometry.prototype=Object.create(a.Geometry.prototype),a.TetrahedronGeometry.prototype.constructor=a.TetrahedronGeometry,a.ParametricGeometry=function(e,t,n){a.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o,s,l=this.vertices,c=this.faces,u=this.faceVertexUvs[0],p=t+1;for(r=0;r<=n;r++)for(s=r/n,i=0;i<=t;i++)o=i/t,o=e(o,s),l.push(o);var h,d,f,m;for(r=0;r<n;r++)for(i=0;i<t;i++)e=r*p+i,l=r*p+i+1,s=(r+1)*p+i+1,o=(r+1)*p+i,h=new a.Vector2(i/t,r/n),d=new a.Vector2((i+1)/t,r/n),f=new a.Vector2((i+1)/t,(r+1)/n),m=new a.Vector2(i/t,(r+1)/n),c.push(new a.Face3(e,l,o)),u.push([h,d,m]),c.push(new a.Face3(l,s,o)),u.push([d.clone(),f,m.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},a.ParametricGeometry.prototype=Object.create(a.Geometry.prototype),a.ParametricGeometry.prototype.constructor=a.ParametricGeometry,a.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);e=new a.BufferGeometry,e.addAttribute("position",new a.BufferAttribute(t,3)),e.addAttribute("color",new a.BufferAttribute(n,3)),t=new a.LineBasicMaterial({vertexColors:a.VertexColors}),a.Line.call(this,e,t,a.LinePieces)},a.AxisHelper.prototype=Object.create(a.Line.prototype),a.AxisHelper.prototype.constructor=a.AxisHelper,a.ArrowHelper=function(){var e=new a.Geometry;e.vertices.push(new a.Vector3(0,0,0),new a.Vector3(0,1,0));var t=new a.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new a.Matrix4).makeTranslation(0,-.5,0)),function(n,r,i,o,s,l){a.Object3D.call(this),void 0===o&&(o=16776960),void 0===i&&(i=1),void 0===s&&(s=.2*i),void 0===l&&(l=.2*s),this.position.copy(r),this.line=new a.Line(e,new a.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new a.Mesh(t,new a.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(i,s,l)}}(),a.ArrowHelper.prototype=Object.create(a.Object3D.prototype),a.ArrowHelper.prototype.constructor=a.ArrowHelper,a.ArrowHelper.prototype.setDirection=function(){var e,t=new a.Vector3;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),a.ArrowHelper.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,e-t,1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},a.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},a.BoxHelper=function(e){var t=new a.BufferGeometry;t.addAttribute("position",new a.BufferAttribute(new Float32Array(72),3)),a.Line.call(this,t,new a.LineBasicMaterial({color:16776960}),a.LinePieces),void 0!==e&&this.update(e)},a.BoxHelper.prototype=Object.create(a.Line.prototype),a.BoxHelper.prototype.constructor=a.BoxHelper,a.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var n=t.boundingBox.min,t=t.boundingBox.max,r=this.geometry.attributes.position.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=n.x,r[4]=t.y,r[5]=t.z,r[6]=n.x,r[7]=t.y,r[8]=t.z,r[9]=n.x,r[10]=n.y,r[11]=t.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=n.y,r[20]=t.z,r[21]=t.x,r[22]=t.y,r[23]=t.z,r[24]=t.x,r[25]=t.y,r[26]=n.z,r[27]=n.x,r[28]=t.y,r[29]=n.z,r[30]=n.x,r[31]=t.y,r[32]=n.z,r[33]=n.x,r[34]=n.y,r[35]=n.z,r[36]=n.x,r[37]=n.y,r[38]=n.z,r[39]=t.x,r[40]=n.y,r[41]=n.z,r[42]=t.x,r[43]=n.y,r[44]=n.z,r[45]=t.x,r[46]=t.y,r[47]=n.z,r[48]=t.x,r[49]=t.y,r[50]=t.z,r[51]=t.x,r[52]=t.y,r[53]=n.z,r[54]=n.x,r[55]=t.y,r[56]=t.z,r[57]=n.x,r[58]=t.y,r[59]=n.z,r[60]=n.x,r[61]=n.y,r[62]=t.z,r[63]=n.x,r[64]=n.y,r[65]=n.z,r[66]=t.x,r[67]=n.y,r[68]=t.z,r[69]=t.x,r[70]=n.y,r[71]=n.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},a.BoundingBoxHelper=function(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new a.Box3,a.Mesh.call(this,new a.BoxGeometry(1,1,1),new a.MeshBasicMaterial({color:n,wireframe:!0}))},a.BoundingBoxHelper.prototype=Object.create(a.Mesh.prototype),a.BoundingBoxHelper.prototype.constructor=a.BoundingBoxHelper,a.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},a.CameraHelper=function(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){r.vertices.push(new a.Vector3),r.colors.push(new a.Color(t)),void 0===o[e]&&(o[e]=[]),o[e].push(r.vertices.length-1)}var r=new a.Geometry,i=new a.LineBasicMaterial({color:16777215,vertexColors:a.FaceColors}),o={};t("n1","n2",16755200),t("n2","n4",16755200),t("n4","n3",16755200),t("n3","n1",16755200),t("f1","f2",16755200),t("f2","f4",16755200),t("f4","f3",16755200),t("f3","f1",16755200),t("n1","f1",16755200),t("n2","f2",16755200),t("n3","f3",16755200),t("n4","f4",16755200),t("p","n1",16711680),t("p","n2",16711680),t("p","n3",16711680),t("p","n4",16711680),t("u1","u2",43775),t("u2","u3",43775),t("u3","u1",43775),t("c","t",16777215),t("p","c",3355443),t("cn1","cn2",3355443),t("cn3","cn4",3355443),t("cf1","cf2",3355443),t("cf3","cf4",3355443),a.Line.call(this,r,i,a.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},a.CameraHelper.prototype=Object.create(a.Line.prototype),a.CameraHelper.prototype.constructor=a.CameraHelper,a.CameraHelper.prototype.update=function(){var e,t,n=new a.Vector3,r=new a.Camera,i=function(i,o,s,a){if(n.set(o,s,a).unproject(r),i=t[i],void 0!==i)for(o=0,s=i.length;o<s;o++)e.vertices[i[o]].copy(n)};return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.verticesNeedUpdate=!0}}(),a.DirectionalLightHelper=function(e,t){a.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var n=new a.Geometry;n.vertices.push(new a.Vector3(-t,t,0),new a.Vector3(t,t,0),new a.Vector3(t,-t,0),new a.Vector3(-t,-t,0),new a.Vector3(-t,t,0));var r=new a.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new a.Line(n,r),this.add(this.lightPlane),n=new a.Geometry,n.vertices.push(new a.Vector3,new a.Vector3),r=new a.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new a.Line(n,r),this.add(this.targetLine),this.update()},a.DirectionalLightHelper.prototype=Object.create(a.Object3D.prototype),a.DirectionalLightHelper.prototype.constructor=a.DirectionalLightHelper,a.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},a.DirectionalLightHelper.prototype.update=function(){var e=new a.Vector3,t=new a.Vector3,n=new a.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(n),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),a.EdgesHelper=function(e,t){var n=void 0!==t?t:16777215,r=[0,0],i={},o=function(e,t){return e-t},s=["a","b","c"],l=new a.BufferGeometry,c=e.geometry.clone();c.mergeVertices(),c.computeFaceNormals();for(var u=c.vertices,c=c.faces,p=0,h=0,d=c.length;h<d;h++)for(var f=c[h],m=0;3>m;m++){r[0]=f[s[m]],r[1]=f[s[(m+1)%3]],r.sort(o);var g=r.toString();void 0===i[g]?(i[g]={vert1:r[0],vert2:r[1],face1:h,face2:void 0},p++):i[g].face2=h}r=new Float32Array(6*p),o=0;for(g in i)s=i[g],(void 0===s.face2||.9999>c[s.face1].normal.dot(c[s.face2].normal))&&(p=u[s.vert1],r[o++]=p.x,r[o++]=p.y,r[o++]=p.z,p=u[s.vert2],r[o++]=p.x,r[o++]=p.y,r[o++]=p.z);l.addAttribute("position",new a.BufferAttribute(r,3)),a.Line.call(this,l,new a.LineBasicMaterial({color:n}),a.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},a.EdgesHelper.prototype=Object.create(a.Line.prototype),a.EdgesHelper.prototype.constructor=a.EdgesHelper,a.FaceNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16776960,r=void 0!==r?r:1,t=new a.Geometry,n=0;for(var i=this.object.geometry.faces.length;n<i;n++)t.vertices.push(new a.Vector3,new a.Vector3);a.Line.call(this,t,new a.LineBasicMaterial({color:e,linewidth:r}),a.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new a.Matrix3,this.update()},a.FaceNormalsHelper.prototype=Object.create(a.Line.prototype),a.FaceNormalsHelper.prototype.constructor=a.FaceNormalsHelper,a.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,n=t.geometry.vertices,r=t.geometry.faces,i=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(i);for(var o=t=0,s=r.length;t<s;t++,o+=2){var a=r[t];e[o].copy(n[a.a]).add(n[a.b]).add(n[a.c]).divideScalar(3).applyMatrix4(i),e[o+1].copy(a.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[o])}return this.geometry.verticesNeedUpdate=!0,this},a.GridHelper=function(e,t){var n=new a.Geometry,r=new a.LineBasicMaterial({vertexColors:a.VertexColors});this.color1=new a.Color(4473924),this.color2=new a.Color(8947848);for(var i=-e;i<=e;i+=t){n.vertices.push(new a.Vector3(-e,0,i),new a.Vector3(e,0,i),new a.Vector3(i,0,-e),new a.Vector3(i,0,e));var o=0===i?this.color1:this.color2;n.colors.push(o,o,o,o)}a.Line.call(this,n,r,a.LinePieces)},a.GridHelper.prototype=Object.create(a.Line.prototype),a.GridHelper.prototype.constructor=a.GridHelper,a.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},a.HemisphereLightHelper=function(e,t,n,r){for(a.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new a.Color,new a.Color],e=new a.SphereGeometry(t,4,2),e.applyMatrix((new a.Matrix4).makeRotationX(-Math.PI/2)),t=0;8>t;t++)e.faces[t].color=this.colors[4>t?0:1];t=new a.MeshBasicMaterial({vertexColors:a.FaceColors,wireframe:!0}),this.lightSphere=new a.Mesh(e,t),this.add(this.lightSphere),this.update()},a.HemisphereLightHelper.prototype=Object.create(a.Object3D.prototype),a.HemisphereLightHelper.prototype.constructor=a.HemisphereLightHelper,a.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},a.HemisphereLightHelper.prototype.update=function(){var e=new a.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),a.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new a.SphereGeometry(t,4,2),r=new a.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),a.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},a.PointLightHelper.prototype=Object.create(a.Mesh.prototype),a.PointLightHelper.prototype.constructor=a.PointLightHelper,a.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},a.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},a.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new a.Geometry,n=0;n<this.bones.length;n++)this.bones[n].parent instanceof a.Bone&&(t.vertices.push(new a.Vector3),t.vertices.push(new a.Vector3),t.colors.push(new a.Color(0,0,1)),t.colors.push(new a.Color(0,1,0)));n=new a.LineBasicMaterial({vertexColors:a.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0}),a.Line.call(this,t,n,a.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},a.SkeletonHelper.prototype=Object.create(a.Line.prototype),a.SkeletonHelper.prototype.constructor=a.SkeletonHelper,a.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof a.Bone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},a.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new a.Matrix4).getInverse(this.root.matrixWorld),n=new a.Matrix4,r=0,i=0;i<this.bones.length;i++){var o=this.bones[i];o.parent instanceof a.Bone&&(n.multiplyMatrices(t,o.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},a.SpotLightHelper=function(e){a.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,e=new a.CylinderGeometry(0,1,1,8,1,!0),e.applyMatrix((new a.Matrix4).makeTranslation(0,-.5,0)),e.applyMatrix((new a.Matrix4).makeRotationX(-Math.PI/2));var t=new a.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new a.Mesh(e,t),this.add(this.cone),this.update()},a.SpotLightHelper.prototype=Object.create(a.Object3D.prototype),a.SpotLightHelper.prototype.constructor=a.SpotLightHelper,a.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},a.SpotLightHelper.prototype.update=function(){var e=new a.Vector3,t=new a.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),a.VertexNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,t=void 0!==n?n:16711680,r=void 0!==r?r:1,n=new a.Geometry,e=e.geometry.faces;for(var i=0,o=e.length;i<o;i++)for(var s=0,l=e[i].vertexNormals.length;s<l;s++)n.vertices.push(new a.Vector3,new a.Vector3);a.Line.call(this,n,new a.LineBasicMaterial({color:t,linewidth:r}),a.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new a.Matrix3,this.update()},a.VertexNormalsHelper.prototype=Object.create(a.Line.prototype),a.VertexNormalsHelper.prototype.constructor=a.VertexNormalsHelper,a.VertexNormalsHelper.prototype.update=function(e){var t=new a.Vector3;return function(e){e=["a","b","c","d"],this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,s=0,a=0,l=i.length;a<l;a++)for(var c=i[a],u=0,p=c.vertexNormals.length;u<p;u++){var h=c.vertexNormals[u];n[s].copy(r[c[e[u]]]).applyMatrix4(o),t.copy(h).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),t.add(n[s]),s+=1,n[s].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),a.VertexTangentsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,t=void 0!==n?n:255,r=void 0!==r?r:1,n=new a.Geometry,e=e.geometry.faces;for(var i=0,o=e.length;i<o;i++)for(var s=0,l=e[i].vertexTangents.length;s<l;s++)n.vertices.push(new a.Vector3),n.vertices.push(new a.Vector3);a.Line.call(this,n,new a.LineBasicMaterial({color:t,linewidth:r}),a.LinePieces),this.matrixAutoUpdate=!1,this.update()},a.VertexTangentsHelper.prototype=Object.create(a.Line.prototype),a.VertexTangentsHelper.prototype.constructor=a.VertexTangentsHelper,a.VertexTangentsHelper.prototype.update=function(e){var t=new a.Vector3;return function(e){e=["a","b","c","d"],this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,s=0,a=0,l=i.length;a<l;a++)for(var c=i[a],u=0,p=c.vertexTangents.length;u<p;u++){var h=c.vertexTangents[u];n[s].copy(r[c[e[u]]]).applyMatrix4(o),t.copy(h).transformDirection(o).multiplyScalar(this.size),t.add(n[s]),s+=1,n[s].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),a.WireframeHelper=function(e,t){var n=void 0!==t?t:16777215,r=[0,0],i={},o=function(e,t){return e-t},s=["a","b","c"],l=new a.BufferGeometry;if(e.geometry instanceof a.Geometry){for(var c=e.geometry.vertices,u=e.geometry.faces,p=0,h=new Uint32Array(6*u.length),d=0,f=u.length;d<f;d++)for(var m=u[d],g=0;3>g;g++){r[0]=m[s[g]],r[1]=m[s[(g+1)%3]],r.sort(o);var y=r.toString();void 0===i[y]&&(h[2*p]=r[0],h[2*p+1]=r[1],i[y]=!0,p++)}for(r=new Float32Array(6*p),d=0,f=p;d<f;d++)for(g=0;2>g;g++)p=c[h[2*d+g]],s=6*d+3*g,r[s+0]=p.x,r[s+1]=p.y,r[s+2]=p.z;l.addAttribute("position",new a.BufferAttribute(r,3))}else if(e.geometry instanceof a.BufferGeometry){if(void 0!==e.geometry.attributes.index){c=e.geometry.attributes.position.array,f=e.geometry.attributes.index.array,u=e.geometry.drawcalls,p=0,0===u.length&&(u=[{count:f.length,index:0,start:0}]);for(var h=new Uint32Array(2*f.length),m=0,v=u.length;m<v;++m)for(var g=u[m].start,y=u[m].count,s=u[m].index,d=g,b=g+y;d<b;d+=3)for(g=0;3>g;g++)r[0]=s+f[d+g],r[1]=s+f[d+(g+1)%3],r.sort(o),y=r.toString(),void 0===i[y]&&(h[2*p]=r[0],h[2*p+1]=r[1],i[y]=!0,p++);for(r=new Float32Array(6*p),d=0,f=p;d<f;d++)for(g=0;2>g;g++)s=6*d+3*g,p=3*h[2*d+g],r[s+0]=c[p],r[s+1]=c[p+1],r[s+2]=c[p+2]}else for(c=e.geometry.attributes.position.array,p=c.length/3,h=p/3,r=new Float32Array(6*p),d=0,f=h;d<f;d++)for(g=0;3>g;g++)s=18*d+6*g,h=9*d+3*g,r[s+0]=c[h],r[s+1]=c[h+1],r[s+2]=c[h+2],p=9*d+(g+1)%3*3,r[s+3]=c[p],r[s+4]=c[p+1],r[s+5]=c[p+2];l.addAttribute("position",new a.BufferAttribute(r,3))}a.Line.call(this,l,new a.LineBasicMaterial({color:n}),a.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},a.WireframeHelper.prototype=Object.create(a.Line.prototype),a.WireframeHelper.prototype.constructor=a.WireframeHelper,a.ImmediateRenderObject=function(){a.Object3D.call(this),this.render=function(e){}},a.ImmediateRenderObject.prototype=Object.create(a.Object3D.prototype),a.ImmediateRenderObject.prototype.constructor=a.ImmediateRenderObject,a.MorphBlendMesh=function(e,t){a.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)},a.MorphBlendMesh.prototype=Object.create(a.Mesh.prototype),a.MorphBlendMesh.prototype.constructor=a.MorphBlendMesh,a.MorphBlendMesh.prototype.createAnimation=function(e,t,n,r){t={startFrame:t,endFrame:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[e]=t,this.animationsList.push(t)},a.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/,r={},i=this.geometry,o=0,s=i.morphTargets.length;o<s;o++){var a=i.morphTargets[o].name.match(n);if(a&&1<a.length){var l=a[1];r[l]||(r[l]={start:1/0,end:-(1/0)}),a=r[l],o<a.start&&(a.start=o),o>a.end&&(a.end=o),t||(t=l)}}for(l in r)a=r[l],this.createAnimation(l,a.start,a.end,e);this.firstAnimation=t},a.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){(e=this.animationsMap[e])&&(e.direction=1,e.directionBackwards=!1)},a.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){(e=this.animationsMap[e])&&(e.direction=-1,e.directionBackwards=!0)},a.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},a.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},a.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},a.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},a.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0;return(e=this.animationsMap[e])&&(t=e.time),t},a.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1;return(e=this.animationsMap[e])&&(t=e.duration),t},a.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},a.MorphBlendMesh.prototype.stopAnimation=function(e){(e=this.animationsMap[e])&&(e.active=!1)},a.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||0>r.time)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),0>r.time&&(r.time=0,r.directionBackwards=!1)):(r.time%=r.duration,0>r.time&&(r.time+=r.duration));var o=r.startFrame+a.Math.clamp(Math.floor(r.time/i),0,r.length-1),s=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*s,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o),i=r.time%i/i,r.directionBackwards&&(i=1-i),this.morphTargetInfluences[r.currentFrame]=i*s,this.morphTargetInfluences[r.lastFrame]=(1-i)*s}}},n("Three",function(e){return function(){var t;return t||e.THREE}}(this)),a.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*d.autoRotateSpeed}function r(){return Math.pow(.95,d.zoomSpeed)}function i(e){function t(){d.noRotate!==!0&&(N=E.ROTATE,m.set(e.clientX,e.clientY))}function n(){d.noZoom!==!0&&(N=E.DOLLY,C.set(e.clientX,e.clientY))}function r(){d.noPan!==!0&&(N=E.PAN,v.set(e.clientX,e.clientY))}d.enabled!==!1&&(e.preventDefault(),2===e.button?e.ctrlKey?n():t():1===e.button?r():0===e.button&&(O?r():I&&t()),d.domElement.addEventListener("mousemove",o,!1),d.domElement.addEventListener("mouseup",s,!1),d.dispatchEvent(G))}function o(e){if(d.enabled!==!1){e.preventDefault();var t=d.domElement===document?d.domElement.body:d.domElement;if(N===E.ROTATE){if(d.noRotate===!0)return;g.set(e.clientX,e.clientY),y.subVectors(g,m),d.rotateLeft(2*Math.PI*y.x/t.clientWidth*d.rotateSpeed),d.rotateUp(2*Math.PI*y.y/t.clientHeight*d.rotateSpeed),m.copy(g)}else if(N===E.DOLLY){if(d.noZoom===!0)return;_.set(e.clientX,e.clientY),k.subVectors(_,C),k.y>0?d.dollyIn():d.dollyOut(),C.copy(_)}else if(N===E.PAN){if(d.noPan===!0)return;b.set(e.clientX,e.clientY),S.subVectors(b,v),d.pan(S.x,S.y),v.copy(b)}d.update()}}function s(){d.enabled!==!1&&(d.domElement.removeEventListener("mousemove",o,!1),d.domElement.removeEventListener("mouseup",s,!1),d.dispatchEvent(B),N=E.NONE)}function l(e){if(d.enabled!==!1&&d.noZoom!==!0){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?d.dollyOut():d.dollyIn(),d.update(),d.dispatchEvent(G),d.dispatchEvent(B)}}function c(e){if(d.enabled!==!1&&d.noKeys!==!0&&d.noPan!==!0)switch(e.keyCode){case d.keys.UP:d.pan(0,d.keyPanSpeed),d.update();break;case d.keys.BOTTOM:d.pan(0,-d.keyPanSpeed),d.update();break;case d.keys.LEFT:d.pan(d.keyPanSpeed,0),d.update();break;case d.keys.RIGHT:d.pan(-d.keyPanSpeed,0),d.update()}}function u(e){if(d.enabled!==!1){switch(e.touches.length){case 1:if(d.noRotate===!0)return;N=E.TOUCH_ROTATE,m.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(d.noZoom===!0)return;N=E.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);C.set(0,r);break;case 3:if(d.noPan===!0)return;N=E.TOUCH_PAN,v.set(e.touches[0].pageX,e.touches[0].pageY);break;default:N=E.NONE}d.dispatchEvent(G)}}function p(e){if(d.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=d.domElement===document?d.domElement.body:d.domElement;switch(e.touches.length){case 1:if(d.noRotate===!0)return;if(N!==E.TOUCH_ROTATE)return;g.set(e.touches[0].pageX,e.touches[0].pageY),y.subVectors(g,m),d.rotateLeft(2*Math.PI*y.x/t.clientWidth*d.rotateSpeed),d.rotateUp(2*Math.PI*y.y/t.clientHeight*d.rotateSpeed),m.copy(g),d.update();break;case 2:if(d.noZoom===!0)return;if(N!==E.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(n*n+r*r);_.set(0,i),k.subVectors(_,C),k.y>0?d.dollyOut():d.dollyIn(),C.copy(_),d.update();break;case 3:if(d.noPan===!0)return;if(N!==E.TOUCH_PAN)return;b.set(e.touches[0].pageX,e.touches[0].pageY),S.subVectors(b,v),d.pan(S.x,S.y),v.copy(b),d.update();break;default:N=E.NONE}}}function h(){d.enabled!==!1&&(d.dispatchEvent(B),N=E.NONE)}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new a.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var d=this,f=1e-6,m=new a.Vector2,g=new a.Vector2,y=new a.Vector2,v=new a.Vector2,b=new a.Vector2,S=new a.Vector2,w=new a.Vector3,x=new a.Vector3,C=new a.Vector2,_=new a.Vector2,k=new a.Vector2,A=0,D=0,T=1,P=new a.Vector3,M=new a.Vector3,E={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},N=E.NONE,O=!1,I=!1;this.target0=this.target.clone(),this.position0=this.object.position.clone();var V=(new a.Quaternion).setFromUnitVectors(e.up,new a.Vector3(0,1,0)),L=V.clone().inverse(),R={type:"change"},G={type:"start"},B={type:"end"};this.toggleOrbit=function(){I=!I},this.rotateLeft=function(e){void 0===e&&(e=n()),D-=e},this.rotateUp=function(e){void 0===e&&(e=n()),A-=e},this.togglePan=function(){O=!O},this.panLeft=function(e){var t=this.object.matrix.elements;w.set(t[0],t[1],t[2]),w.multiplyScalar(-e),P.add(w)},this.panUp=function(e){var t=this.object.matrix.elements;w.set(t[4],t[5],t[6]),w.multiplyScalar(e),P.add(w)},this.pan=function(e,t){var n=d.domElement===document?d.domElement.body:d.domElement;if(void 0!==d.object.fov){var r=d.object.position,i=r.clone().sub(d.target),o=i.length();o*=Math.tan(d.object.fov/2*Math.PI/180),d.panLeft(2*e*o/n.clientHeight),d.panUp(2*t*o/n.clientHeight)}else void 0!==d.object.top?(d.panLeft(e*(d.object.right-d.object.left)/n.clientWidth),d.panUp(t*(d.object.top-d.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=r()),T/=e},this.dollyOut=function(e){void 0===e&&(e=r()),T*=e},this.update=function(){var e=this.object.position;x.copy(e).sub(this.target),x.applyQuaternion(V);var t=Math.atan2(x.x,x.z),r=Math.atan2(Math.sqrt(x.x*x.x+x.z*x.z),x.y);this.autoRotate&&this.rotateLeft(n()),t+=D,r+=A,r=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,r)),r=Math.max(f,Math.min(Math.PI-f,r));var i=x.length()*T;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(P),x.x=i*Math.sin(r)*Math.sin(t),x.y=i*Math.cos(r),x.z=i*Math.sin(r)*Math.cos(t),x.applyQuaternion(L),e.copy(this.target).add(x),this.object.lookAt(this.target),D=0,A=0,T=1,P.set(0,0,0),M.distanceToSquared(this.object.position)>f&&(this.dispatchEvent(R),M.copy(this.object.position))},this.reset=function(){N=E.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("mousewheel",l,!1),this.domElement.addEventListener("DOMMouseScroll",l,!1),this.domElement.addEventListener("touchstart",u,!1),this.domElement.addEventListener("touchend",h,!1),this.domElement.addEventListener("touchmove",p,!1),window.addEventListener("keydown",c,!1),this.update()},a.OrbitControls.prototype=Object.create(a.EventDispatcher.prototype),n("OrbitControls",["Three"],function(e){return function(){var t;return t||e.OrbitControls}}(this)),n("Viewport",["require","exports","OrbitControls"],function(e,t){"use strict";var n=function(){function e(){this.scene=null,this.controls=null,this.camera=null,this.renderer=null,this.cameraHandler=null,this.container=null,this.$container=null,
this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.axisLength=100,this.pointDivision=3,this.position=[-17,-50,24],this.target=[-5,8,11],this.look=[12,58,-13],this.up=[0,0,1],this.cameraInfo={}}return e.prototype.init=function(e,t){function n(){o.position.copy(s.camera.position)}this.container=e,this.$container=$(this.container),this.cameraHandler=t,this.camera=new a.PerspectiveCamera(45,this.$container.width()/this.$container.height(),1,1e4),this.scene=new a.Scene,this.renderer=new a.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(16777215,1),this.renderer.setSize(this.$container.width(),this.$container.height()),this.renderer.sortObjects=!1,this.container.appendChild(this.renderer.domElement),this.renderer.domElement.setAttribute("id","renderer_canvas");var r=new a.AmbientLight(4210752);this.scene.add(r);var i=new a.DirectionalLight(16777215,.5);i.position.set(50,30,50),this.scene.add(i);var o=new a.PointLight(16777215,.65,0);this.scene.add(o),this.makeGrid(),this.camera.up.set.apply(this.camera.up,this.up),this.camera.position.set.apply(this.camera.position,this.position),this.controls=new a.OrbitControls(this.camera,this.container),this.controls.target.set.apply(this.controls.target,this.target),this.controls.addEventListener("change",n);var s=this;n(),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.controls.addEventListener("end",this.onCameraChanged.bind(this)),this.animate()},e.prototype.onCameraChanged=function(){var e=this.getCoordinatesAsArray(this.camera.position),t=this.getCoordinatesAsArray(this.controls.target),n=this.getCoordinatesAsArray(this.camera.up);!this.cameraHandler||_.isEqual(e,this.position)&&_.isEqual(t,this.target)&&_.isEqual(n,this.up)||(console.log("somehow camera handler is getting called..."),this.look=t.map(function(t,n){return t-e[n]}),this.position=e,this.target=t,this.up=n,this.cameraHandler(this.convertToDynamoXYZ(e),this.convertToDynamoXYZ(this.look),this.convertToDynamoXYZ(n),this.cameraInfo))},e.prototype.setCamera=function(e){if(!e)throw new Error("Cannot set an empty camera");var t=[e.upX,e.upY,e.upZ],n=this.parseCoordinates(t,this.up);this.camera.up.set.apply(this.camera.up,n),t=[e.eyeX,e.eyeY,e.eyeZ];var r=this.parseCoordinates(t,this.position);this.camera.position.set.apply(this.camera.position,r),t=[e.lookX,e.lookY,e.lookZ],n=this.parseCoordinates(t,this.look),n=n.map(function(e,t){return r[t]+e}),a.OrbitControls.call(this.controls,this.camera,this.container),this.controls.target.set.apply(this.controls.target,n),this.cameraInfo.name=e.name||"Background Preview",this.camera.updateProjectionMatrix()},e.prototype.getCamera=function(){var e={position:[-17,24,50],target:[-5,8,11],look:[12,-13,-58],up:[0,1,0],name:{name:"Background Preview"}};return e.position=[this.camera.position.x,this.camera.position.z,-this.camera.position.y],e.target=[this.controls.target.x,this.controls.target.z,-this.controls.target.y],e.look=e.target.map(function(t,n){return t-e.position[n]}),e.up=[this.camera.up.x,this.camera.up.z,this.camera.up.y],e},e.prototype.zoomToFit=function(e){for(var t=[],n=0;n<e.length;n++)if(Object.getPrototypeOf(this.scene.children[n])===a.Object3D.prototype)for(var r=this.scene.children[n].children,i=0;i<r.length;i++)r[i]&&r[i].visible&&(r[i].geometry.computeBoundingSphere(),t.push(r[i].geometry.boundingSphere));t.length||t.push({radius:this.axisLength,center:{x:0,y:0,z:0}});for(var o=2*t[0].radius,s=this.getCoordinatesAsArray(t[0].center),n=0;n<t.length-1;n++)for(var i=n+1;i<t.length;i++){var l=this.getCoordinatesAsArray(t[n].center),c=this.getCoordinatesAsArray(t[i].center),u=t[n].radius,p=t[i].radius,h=Math.max.apply(Math,[this.computeDistance(l,c)+u+p,2*u,2*p]);h>o&&(o=h,s=this.getMidPointBetweenTwoSpheres(l,c,u,p))}var d=o/2;d<1&&(d=1);for(var f=1/Math.min(this.camera.aspect,1),m=Math.abs(f*d/Math.sin(Math.PI/180*(this.camera.fov/2))),g=this.getCoordinatesAsArray(this.camera.position),y=this.getCoordinatesAsArray(this.controls.target),v=this.computeDistance(y,g),b=[],n=0;n<this.pointDivision;n++)b[n]=s[n]-(y[n]-g[n])*m/v;this.controls.target.set.apply(this.controls.target,s),this.camera.position.set.apply(this.camera.position,b),this.camera.updateProjectionMatrix(),this.onCameraChanged()},e.prototype.dollyIn=function(){this.controls.dollyIn(void 0),this.onCameraChanged()},e.prototype.dollyOut=function(){this.controls.dollyOut(void 0),this.onCameraChanged()},e.prototype.togglePan=function(){this.controls.togglePan()},e.prototype.toggleOrbit=function(){this.controls.toggleOrbit()},e.prototype.makeGrid=function(){var e=new a.AxisHelper(this.axisLength);e.translateZ(.05),this.scene.add(e);var t=new a.GridHelper(this.axisLength,1);t.rotateX(-Math.PI/2),t.setColors(15658734,15658734),this.scene.add(t)},e.prototype.onWindowResize=function(){this.windowHalfX=this.$container.width()/2,this.windowHalfY=this.$container.height()/2,this.camera.aspect=this.windowHalfX/this.windowHalfY,this.camera.updateProjectionMatrix(),this.renderer.setSize(2*this.windowHalfX,2*this.windowHalfY),this.render()},e.prototype.animate=function(){requestAnimationFrame(this.animate.bind(this)),this.render()},e.prototype.render=function(){this.controls.update(),this.renderer.render(this.scene,this.camera)},e.prototype.getCoordinatesAsArray=function(e){return[e.x,e.y,e.z]},e.prototype.parseCoordinates=function(e,t){t=this.convertToDynamoXYZ(t);for(var n=0;n<e.length;n++)e[n]=this.fixPosition(e[n],t[n]);return this.convertFromDynamoXYZ(e)},e.prototype.convertFromDynamoXYZ=function(e){return[e[0],-e[2],e[1]]},e.prototype.convertToDynamoXYZ=function(e){return[e[0],e[2],-e[1]]},e.prototype.fixPosition=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},e.prototype.computeDistance=function(e,t){for(var n=0,r=0;r<this.pointDivision;r++)n+=Math.pow(e[r]-t[r],2);return Math.sqrt(n)},e.prototype.getMidPointBetweenTwoSpheres=function(e,t,n,r){var i=this.computeDistance(e,t);if(i+r<n)return e;if(i+n<r)return t;for(var o,s,a=[],l=0;l<this.pointDivision;l++)o=e[l]-(t[l]-e[l])*n/i,s=t[l]-(e[l]-t[l])*r/i,a[l]=(o+s)/2;return a},e}();return n}),n("GeometryExport",["require","exports","FileSaver"],function(e,t,n){"use strict";var r=function(){function e(){}return e.normalizeArrayVec3=function(e,t){for(var n=t||e,r=0,i=e.length;r<i;++r){var o=3*r,s=e[o],a=e[o+1],l=e[o+2],c=1/Math.sqrt(s*s+a*a+l*l);n[o]=s*c,n[o+1]=a*c,n[o+2]=l*c}return n},e.getMemory=function(t){return e.pool.byteLength>=t?e.pool:(e.pool=new ArrayBuffer(t),e.pool)},e.toSTL=function(t,r){var i=e.getRawSTL(t),o=new Blob([i]);n(o,r)},e.getRawSTL=function(t){var n,r=0,i=[],o=[],s=[],l=0;return t.traverse(function(e){e.visible&&e instanceof a.Mesh&&(n="BufferGeometry"===e.geometry.type?(new a.Geometry).fromBufferGeometry(e.geometry):e.geometry,n.vertices.forEach(function(e){i.push(e.x),i.push(e.y),i.push(e.z)}),n.faces.forEach(function(e){o.push(l+e.a),o.push(l+e.b),o.push(l+e.c),s.push(e.normal.x),s.push(e.normal.y),s.push(e.normal.z),r+=1}),l+=n.vertices.length)}),e.toAsciiSTL(i,o,s,r)},e.toAsciiSTL=function(t,n,r,i){var o=new Float32Array(e.getMemory(4*r.length),0,r.length);e.normalizeArrayVec3(r,o);for(var s="solid mesh\n",a=0;a<i;++a){var l=3*a;s+=" facet normal "+o[l]+" "+o[l+1]+" "+o[l+2]+"\n",s+="  outer loop\n";var c=3*n[l],u=3*n[l+1],p=3*n[l+2];s+="   vertex "+t[c]+" "+t[c+1]+" "+t[c+2]+"\n",s+="   vertex "+t[u]+" "+t[u+1]+" "+t[u+2]+"\n",s+="   vertex "+t[p]+" "+t[p+1]+" "+t[p+2]+"\n",s+="  endloop\n",s+=" endfacet\n"}return s+="endsolid mesh\n"},e.pool=new ArrayBuffer(1e5),e}();return r});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();n("ThreeViewer",["require","exports","backbone","Viewport","staticHelpers","GeometryExport"],function(e,t,n,r,i,s){"use strict";var l=function(){function e(){}return e.geometryTypes={point:"point",line:"line",mesh:"mesh"},e.grayColorHex=12303291,e.blackColorHex=0,e.selectColorHex=6739711,e.partMat=new a.PointCloudMaterial({color:e.blackColorHex,size:5,sizeAttenuation:!1,side:a.DoubleSide}),e.meshMat=new a.MeshPhongMaterial({color:e.grayColorHex,side:a.DoubleSide}),e.lineMat=new a.LineBasicMaterial({color:e.blackColorHex}),e.partMatSelected=new a.PointCloudMaterial({color:e.selectColorHex,size:5,sizeAttenuation:!1,side:a.DoubleSide}),e.meshMatSelected=new a.MeshPhongMaterial({color:e.selectColorHex,side:a.DoubleSide}),e.lineMatSelected=new a.LineBasicMaterial({color:e.selectColorHex}),e.grayColor=[240,240,240,255],e.blackColor=[0,0,0,255],e.pointDim=3,e.colorDim=4,e.uvDim=2,e}(),c=function(){function e(e,t,n){this.allVertices=e,this.type=t,this.defaultColor=l.grayColor,t===l.geometryTypes.point?(this.materialOnSelect=l.partMatSelected,this.defaultColor=l.blackColor,this.geometryConstructor=a.PointCloud):t===l.geometryTypes.line?(this.materialOnSelect=l.lineMatSelected,this.geometryConstructor=a.Line,this.defaultColor=l.blackColor,this.additionalParam=a.LineStrip):t===l.geometryTypes.mesh&&(this.normals=n,this.materialOnSelect=l.meshMatSelected,this.geometryConstructor=a.Mesh)}return e.getMaterial=function(e,t){var n,r;t===l.geometryTypes.point?(n=new a.PointCloudMaterial({size:5,sizeAttenuation:!1,transparent:!0,side:a.DoubleSide}),r=e||l.blackColor):t===l.geometryTypes.line?(n=new a.LineBasicMaterial({transparent:!0}),r=e||l.blackColor):(n=new a.MeshPhongMaterial({side:a.DoubleSide,transparent:!0}),r=e||l.grayColor);var i=r.slice(0,3),o="rgb("+i.join(",")+")";n.color=new a.Color(o);var s=255;return n.opacity=r[3]/s,n},e.prototype.getTextureMaterial=function(e,t,n){var r=document.createElement("canvas");r.width=t,r.height=n;for(var i=r.getContext("2d"),o=new a.Texture(r),s=i.createImageData(t,n),l=0;l<n;l++)for(var c=4*t,u=0;u<c;u+=4)s.data[l*c+u]=e[(n-l-2)*c+c+u+2],s.data[l*c+u+1]=e[(n-l-2)*c+c+u+1],s.data[l*c+u+2]=e[(n-l-2)*c+c+u],s.data[l*c+u+3]=e[(n-l-2)*c+c+u+3];i.putImageData(s,0,0),o.needsUpdate=!0,o.wrapS=a.RepeatWrapping,o.wrapT=a.RepeatWrapping;var p=new a.MeshBasicMaterial({map:o,side:a.DoubleSide});return p.transparent=!0,p},e.prototype.toThreeGeometry=function(t){var n,r=new a.BufferGeometry;if(r.addAttribute("position",new a.BufferAttribute(new Float32Array(t.vertices),l.pointDim)),t.normals&&r.addAttribute("normal",new a.BufferAttribute(new Float32Array(t.normals),l.pointDim)),t.textureCoordinates&&t.textureColors&&t.colorsStride){r.addAttribute("uv",new a.BufferAttribute(new Float32Array(t.textureCoordinates),l.uvDim));var i=t.colorsStride/4,o=t.textureColors.length/t.colorsStride;n=this.getTextureMaterial(t.textureColors,i,o)}else n=e.getMaterial(t.colorComponents,this.type);var s=t.selected?this.materialOnSelect:n,c=new this.geometryConstructor(r,s,this.additionalParam);return c.colorMaterial=n,c},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.getGraphicData=function(e){var t=[],n=null,r=0,o=e.graphicPrimitivesData;if(o)for(;r<o.length;r++)n={},n.pointVertices=i.getFloatArray(o[r].pointVertices),n.lineStripVertices=i.getFloatArray(o[r].lineStripVertices),n.lineStripCounts=i.getIntArray(o[r].lineStripCounts),n.meshVertices=i.getFloatArray(o[r].meshVertices),n.meshNormals=i.getFloatArray(o[r].meshNormals),o[r].requiresPerVertexColoration&&(n.pointVertexColors=i.getByteArray(o[r].pointVertexColors),n.lineStripColors=i.getByteArray(o[r].lineStripColors),n.meshVertexColors=i.getByteArray(o[r].meshVertexColors)),o[r].requiresTextureMapping&&(n.textureColors=i.getByteArray(o[r].colors),n.textureCoordinates=i.getFloatArray(o[r].textureCoordinates),n.colorsStride=o[r].colorsStride),t.push(n);return t},t.draw=function(e,n,r){for(var i,o,s,a,u,p=[],h=null,d=0;d<n.length;d++){var f=n[d];if(f.lineStripVertices.length&&f.lineStripCounts.length){a=0;for(var m=0;m<f.lineStripCounts.length;m++)if(s=[],u=!!f.lineStripColors,h=[],i=f.lineStripCounts[m]){o=a+i;for(var g=a;g<o;g++)s.push.apply(s,t.getSubArrayAt(f.lineStripVertices,g,l.pointDim)),u&&h.push.apply(h,t.getSubArrayAt(f.lineStripColors,g,l.colorDim));a+=i;var y=new c(s,l.geometryTypes.line);u&&(y.colors=h),p.push(y)}}if(f.pointVertices.length){var v=new c(f.pointVertices,l.geometryTypes.point);f.pointVertexColors&&(v.colors=f.pointVertexColors),p.push(v)}if(f.meshVertices.length&&f.meshNormals.length){var b=new c(f.meshVertices,l.geometryTypes.mesh,f.meshNormals);f.meshVertexColors&&(b.colors=f.meshVertexColors),f.textureColors&&(b.textureColors=f.textureColors,b.textureCoordinates=f.textureCoordinates,b.colorsStride=f.colorsStride),p.push(b)}}p.forEach(function(n){for(var i,o,s,a,c,u,p=n.allVertices.length/l.pointDim,h=function(e){n.normals&&o.push.apply(o,t.getSubArrayAt(n.normals,e,l.pointDim)),i.push.apply(i,t.getSubArrayAt(n.allVertices,e,l.pointDim))},d=function(e){return n.colors?t.getSubArrayAt(n.colors,e,l.colorDim):n.defaultColor},f=0;f<p;f++){for(s=d(f),u=s.join(","),i=[],o=[],h(f++);f<p;){if(a=d(f).join(","),u!==a){f--;break}h(f++)}var m={vertices:i,colorComponents:s,selected:r};n.normals&&(m.normals=o),n.textureColors&&(m.textureColors=n.textureColors,m.textureCoordinates=n.textureCoordinates,m.colorsStride=n.colorsStride),c=n.toThreeGeometry(m),e.add(c)}})},t.getSubArrayAt=function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t*n+i]);return r},t.prototype.initialize=function(e){this.viewPort=new r;var t=(e.attributes.app,e.attributes.cameraHandler);this.viewPort.init(e.attributes.container,t),this.idMap={}},t.prototype.zoomToFit=function(e){this.viewPort.zoomToFit(e)},t.prototype.dollyOut=function(){this.viewPort.dollyOut()},t.prototype.dollyIn=function(){this.viewPort.dollyIn()},t.prototype.togglePan=function(){this.viewPort.togglePan()},t.prototype.toggleOrbit=function(){this.viewPort.toggleOrbit()},t.prototype.exportSTL=function(e){s.toSTL(this.viewPort.scene,e.name)},t.prototype.getRawSTL=function(e){return s.getRawSTL(this.viewPort.scene)},t.prototype.nodeSelected=function(e){this.idMap[e.id]&&this.idMap[e.id].traverse(function(t){t instanceof a.Mesh?t.material=e.selected?l.meshMatSelected:t.colorMaterial||l.meshMat:t instanceof a.Line?t.material=e.selected?l.lineMatSelected:t.colorMaterial||l.lineMat:t instanceof a.PointCloud&&(t.material=e.selected?l.partMatSelected:t.colorMaterial||l.partMat)})},t.prototype.nodeVisible=function(e){this.idMap[e.id]&&this.idMap[e.id].traverse(function(t){t.visible=e.visible})},t.prototype.changeWorkspace=function(e){var t=this;e.nodes.forEach(function(e){t.idMap[e.id]&&t.idMap[e.id].traverse(function(t){t.visible=e.visible})})},t.prototype.clearNodeGeometry=function(e){this.idMap[e]&&(this.viewPort.scene.remove(this.idMap[e]),delete this.idMap[e])},t.prototype.updateNodeGeometry=function(e,n,r){var i,o=e.geometryData.nodeId,s=new a.Object3D;this.clearNodeGeometry(o),e.geometryData&&(i=t.getGraphicData(e.geometryData),t.draw(s,i,r),this.idMap[o]=s,this.viewPort.scene.add(s),this.nodeVisible({id:o,visible:n}))},t}(n.View);return u});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();return n("GeometryViewerComponent",["require","exports","DynamoApplication","GeometryDataResponse","ThreeViewer"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,n){var r=e.call(this,t,null)||this,o=$(n),s=o.get(0);if(!s)throw new Error("no container by name: "+n+" could be found");o.length>1&&console.log("there was more than one matching element for the target of this component"),$(s).html(r.template());var a=$(s).find("#geometryViewerContainer").get(0);a||(a=s),r.view=new i({attributes:{container:a}}),r.el=r.view.viewPort.$container,$(s).find($('[data-toggle="tooltip"]')).tooltip();var l=$(s).find("#zoom-menu");return 0!==l.length&&(l.find("#zoomin-button").on("click",function(){r.dollyOut()}),l.find("#zoomout-button").on("click",function(){r.dollyIn()}),l.find("#zoomreset-button").on("click",function(){r.zoomToFit()}),l.find("#pan-button").on("click",function(){r.togglePan()})),r.model.on("geometry-data-received:event",function(e){r.onNodesExecuted(e,!0,!1)}),r.model.on("nodeSelected",function(e){r.onNodeSelected({selectedNodeId:e.id,isSelected:e.selected})}),r.model.on("nodeVisible",function(e){r.onNodeVisible({selectedNodeId:e.id,isVisible:e.visible})}),r.model.on("nodeRemoved",function(e){r.onNodeRemoved(e.id)}),r.model.on("changeWorkspace",function(e){r.onCurrentWorkspaceChanged(e)}),r.model.on("setCamera",function(e){r.Camera=e}),r.model.on("geometryUpdated:event",function(e){r.onNodesExecuted(e.data,e.visible,e.selected)}),$(r).on("layoutUpdate",function(){r.view.viewPort.onWindowResize()}),r}return o(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return _.template($("#geometryViewer-component-template").html())},enumerable:!0,configurable:!0}),t.prototype.ready=function(){this.requestCurrentGeometry()},t.prototype.saveWorkspace=function(t){try{var n=this.view.viewPort.getCamera();return this.model.saveWorkspaceCamera(n.position,n.look,n.up,n.name),e.prototype.saveWorkspace.call(this,t)}catch(n){return console.log("Failed to grab latest camera data before saving."),this.model.trigger("show-errors","Failed to update camera. Check the console for errors"),e.prototype.saveWorkspace.call(this,t)}},t.prototype.zoomToFit=function(){var e=[],t=this.view.idMap;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e.push(r)}this.view.zoomToFit(e)},t.prototype.dollyOut=function(){this.view.dollyOut()},t.prototype.dollyIn=function(){this.view.dollyIn()},t.prototype.togglePan=function(){this.view.togglePan()},t.prototype.toggleOrbit=function(){this.view.toggleOrbit()},t.prototype.addRawPrimitives=function(e){this.view.updateNodeGeometry(new r({geometryData:e}),!0,!1)},t.prototype.resetAndClearView=function(){var e=this;this.clearNodeGeometry(),this.view.idMap={},this.view.viewPort.scene.children.forEach(function(t){e.view.viewPort.scene.remove(t)})},t.prototype.clearNodeGeometry=function(){var e=this.view.idMap;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.view.viewPort.scene.remove(n)}},Object.defineProperty(t.prototype,"Camera",{get:function(){var e=this.view.viewPort;return{lookVector:e.controls.target.toArray(),upVector:e.camera.up.toArray(),position:e.camera.position.toArray(),name:e.cameraInfo.name}},set:function(e){this.view.viewPort.setCamera(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GeometryObjects",{get:function(){return this.view.idMap},enumerable:!0,configurable:!0}),t.prototype.onNodeSelected=function(e){this.view.nodeSelected({id:e.selectedNodeId,selected:e.isSelected})},t.prototype.onNodeVisible=function(e){this.view.nodeVisible({id:e.selectedNodeId,visible:e.isVisible})},t.prototype.onNodeRemoved=function(e){this.view.clearNodeGeometry(e)},t.prototype.onNodesExecuted=function(e,t,n){this.view.updateNodeGeometry(e,t,n)},t.prototype.onCurrentWorkspaceChanged=function(e){this.clearNodeGeometry(),this.view.changeWorkspace(e)},t.prototype.zoomSelectedContent=function(e){var t=this,n=_.map(e,function(e){return t.view.idMap[e]});this.view.zoomToFit(n)},t.prototype.requestCurrentGeometry=function(){this.model.trigger("requestGeometry")},t.prototype.dispose=function(){this.view instanceof Backbone.View&&(this.view.undelegateEvents(),this.view.remove(),this.view.stopListening(),this.resetAndClearView())},t}(n.DynamoApplication);t.GeometryViewer=s}),n("AVP",["require","exports","IDynamoApplication","GraphModel","ControllerApp","ControllerView","DynamoGraphView","CustomizerAppView","ManagerApp","ManagerView","AbstractRunner","Runner","CoGSRunner","EditorHtmlPreloader","CustomizerHtmlPreloader","Logger","BaseStorage","Storage","GeometryViewerComponent","DynamoApplication","DynamoApplication"],function(e,t,n,r,i,o,s,a,l,c,u,p,h,d,f,m,g,y,v,b,S){"use strict";function w(e,t){if(k.getInstance().registeredComponents[e])throw new Error("there is already a component registered with the name: "+e);k.getInstance().registeredComponents[e]=t}function x(e,t){return k.getInstance().createModel(e,t)}function C(e){var t=e.type;if("number"==typeof t&&(t=D[t]),!k.getInstance().registeredComponents[t])throw new Error("Component creation failed because there is no component registered with the name: "+e.type);return k.getInstance().registeredComponents[t](e)}function _(e){return k.getInstance().createControllerView(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.API=n,t.GraphModel=r,t.ControllerApp=i,t.ControllerView=o,t.AbstractRunner=u,t.DynamoRunner=p,t.CoGSRunner=h,t.Logger=m,t.BaseStorage=g,t.MongoStorage=y;var k=function(){function e(){if(e._instance)throw new Error("Error: Instantiation failed: Use SingletonClass.getInstance() instead of new.");e._instance=this}return e.getInstance=function(){return e._instance},e.prototype.createLibrary=function(e){throw new Error("not implemented")},e.prototype.createWorkspaceManager=function(e,t){var n=new l({storage:e},{}),r=new c({model:n});r.render();var i=new A(n,r);return i},e.prototype.createControllerView=function(e){var t=new i,n=new o({attributes:{model:t,params:e}});return n.render(),n},e.prototype.createModel=function(e,t){return new e({params:t})},e.prototype.createEditorApp=function(e,t){if(!e)throw new Error("You must pass a model when constructing an Editor component");var n=(new d({attributes:{element:t}}),new s({model:e}));n.setElement(t).render();var r=new b.DynamoEditorApplication(e,n);return r},e.prototype.createCustomizerApp=function(e,t){if(!e)throw new Error("You must pass a model when constructing a Customizer component");var n=(new f({attributes:{element:t}}),new a({model:e}));n.setElement(t).render();var r=new S.DynamoCustomizerApplication(e,n);return r},e.prototype.createGeometryViewer=function(e,t){if(!e)throw new Error("You must pass a model when constructing a GeometryViewer component");var n=new v.GeometryViewer(e,t);return n},e._instance=new e,e}(),A=function(){function e(e,t){var n=this;this.model=e,this.workspaces=this.model.workspaces,void 0!=t&&(this.view=t,this.el=this.view.$el),this.model.on("openWorkspace",function(e){n.onManagerOpenWorkspace(e)}),this.model.on("newWorkspace",function(){n.onManagerNewWorkspace()}),this.model.on("openDynWorkspace",function(e){n.onManagerOpenDynWorkspace(e)}),this.model.on("exitManager",function(){n.onManagerExit()}),this.model.on("saveCurrentWorkspace",function(){n.onManagerSaveCurrentWorkspace()})}return e.prototype.onManagerOpenWorkspace=function(e){this.onManagerOpenWorkspaceEvent=new jQuery.Event("onManagerOpenWorkspaceEvent",{detail:e}),$(this).trigger("raiseEvent",this.onManagerOpenWorkspaceEvent).trigger(this.onManagerOpenWorkspaceEvent)},e.prototype.onManagerNewWorkspace=function(){this.onManagerNewWorkspaceEvent=new jQuery.Event("onManagerNewWorkspaceEvent"),$(this).trigger("raiseEvent",this.onManagerNewWorkspaceEvent).trigger(this.onManagerNewWorkspaceEvent)},e.prototype.onManagerOpenDynWorkspace=function(e){this.onManagerOpenDynWorkspaceEvent=new jQuery.Event("onManagerOpenDynWorkspaceEvent",{detail:e}),$(this).trigger("raiseEvent",this.onManagerOpenDynWorkspaceEvent).trigger(this.onManagerOpenDynWorkspaceEvent)},e.prototype.onManagerSaveCurrentWorkspace=function(){this.onManagerSaveCurrentWorkspaceEvent=new jQuery.Event("onManagerSaveCurrentWorkspaceEvent"),$(this).trigger("raiseEvent",this.onManagerSaveCurrentWorkspaceEvent).trigger(this.onManagerSaveCurrentWorkspaceEvent)},e.prototype.onManagerExit=function(){this.onManagerExitEvent=new jQuery.Event("onManagerExitEvent"),$(this).trigger("raiseEvent",this.onManagerExitEvent).trigger(this.onManagerExitEvent)},e.prototype.refresh=function(){return this.model.refresh()},e.prototype.openWorkspaceByID=function(e){this.model.trigger("openWorkspace",{id:e})},e.prototype.newWorkspace=function(){this.model.trigger("newWorkspace")},e.prototype.uploadWorkspace=function(e){this.model.trigger("openDynWorkspace",{content:e})},e.prototype.saveCurrentWorkspace=function(){this.model.trigger("saveCurrentWorkspace")},e}();t.WorkspaceManager=A;var D;!function(e){e[e.GeometryViewer=0]="GeometryViewer",e[e.GraphEditor=1]="GraphEditor",e[e.Library=2]="Library",e[e.Customizer=3]="Customizer",e[e.WorkspaceManager=4]="WorkspaceManager"}(D=t.componentTypes||(t.componentTypes={})),k.getInstance().registeredComponents={},w(D[D.Library],function(e){return k.getInstance().createLibrary(e.selector)}),w(D[D.GeometryViewer],function(e){return k.getInstance().createGeometryViewer(e.model,e.selector)}),w(D[D.GraphEditor],function(e){return k.getInstance().createEditorApp(e.model,e.selector)}),w(D[D.Customizer],function(e){return k.getInstance().createCustomizerApp(e.model,e.selector)}),w(D[D.WorkspaceManager],function(e){return k.getInstance().createWorkspaceManager(e.storage,e.selector)}),t.registerComponent=w,t.createModel=x,t.createComponent=C,t.createController=_}),e(["config"],function(){}),n("bundle",["config"],function(){return e(["text!templates/floodTemplates.tpl","text!templates/customizerTemplates.tpl","text!templates/managerTemplates.tpl","bootstrap"],function(){}),n("templatesLoad",["text!templates/floodTemplates.tpl","text!templates/customizerTemplates.tpl","text!templates/managerTemplates.tpl"],function(t,r,i){return document.body.insertAdjacentHTML("beforeend",t+r+i),e(["AVP"],function(){}),n("returnObjects",["AVP","augment"],function(e){return e}),e("returnObjects")}),e("templatesLoad")}),n("APIBundle",function(){}),t("bundle")});